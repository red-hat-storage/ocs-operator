---
apiVersion: operators.coreos.com/v1alpha1
kind: ClusterServiceVersion
metadata:
  annotations:
    alm-examples: |2-

      [
          {
              "apiVersion": "ocs.openshift.io/v1",
              "kind": "StorageCluster",
              "metadata": {
                  "name": "example-storagecluster",
                  "namespace": "openshift-storage"
              },
              "spec": {
                  "manageNodes": false,
                  "monPVCTemplate": {
                      "spec": {
                          "accessModes": [
                              "ReadWriteOnce"
                          ],
                          "resources": {
                              "requests": {
                                  "storage": "10Gi"
                              }
                          },
                          "storageClassName": "gp2"
                      }
                  },
                  "storageDeviceSets": [
                      {
                          "count": 3,
                          "dataPVCTemplate": {
                              "spec": {
                                  "accessModes": [
                                      "ReadWriteOnce"
                                  ],
                                  "resources": {
                                      "requests": {
                                          "storage": "1Ti"
                                      }
                                  },
                                  "storageClassName": "gp2",
                                  "volumeMode": "Block"
                              }
                          },
                          "name": "example-deviceset",
                          "placement": {},
                          "portable": true,
                          "resources": {}
                      }
                  ]
              }
          }
      ]
    capabilities: Deep Insights
    categories: Storage
    containerImage: quay.io/ocs-dev/ocs-operator:4.9.0
    description: Red Hat OpenShift Container Storage provides hyperconverged storage
      for applications within an OpenShift cluster.
    external.features.ocs.openshift.io/export-script: |-
      JycnCkNvcHlyaWdodCAyMDIwIFRoZSBSb29rIEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQu
      CgpMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxp
      Y2Vuc2UiKTsKeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3
      aXRoIHRoZSBMaWNlbnNlLgpZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQK
      CglodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKClVubGVzcyByZXF1
      aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUK
      ZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElT
      IiBCQVNJUywKV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVp
      dGhlciBleHByZXNzIG9yIGltcGxpZWQuClNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmlj
      IGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKbGltaXRhdGlvbnMgdW5kZXIgdGhl
      IExpY2Vuc2UuCicnJwoKaW1wb3J0IGVycm5vCmltcG9ydCBzeXMKaW1wb3J0IGpzb24KaW1wb3J0
      IGFyZ3BhcnNlCmltcG9ydCB1bml0dGVzdAppbXBvcnQgcmUKaW1wb3J0IHJlcXVlc3RzCmltcG9y
      dCBzdWJwcm9jZXNzCmZyb20gb3MgaW1wb3J0IGxpbmVzZXAgYXMgTElORVNFUApmcm9tIG9zIGlt
      cG9ydCBwYXRoCgojIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgd2l0aCAyLngKdHJ5OgogICAgTW9k
      dWxlTm90Rm91bmRFcnJvcgpleGNlcHQ6CiAgICBNb2R1bGVOb3RGb3VuZEVycm9yID0gSW1wb3J0
      RXJyb3IKCnRyeToKICAgIGltcG9ydCByYWRvcwpleGNlcHQgTW9kdWxlTm90Rm91bmRFcnJvciBh
      cyBub01vZEVycjoKICAgIHByaW50KCJFcnJvcjogJXNcbkV4aXRpbmcgdGhlIHNjcmlwdC4uLiIg
      JSBub01vZEVycikKICAgIHN5cy5leGl0KDEpCgp0cnk6CiAgICAjIGZvciAyLjcueAogICAgZnJv
      bSBTdHJpbmdJTyBpbXBvcnQgU3RyaW5nSU8KZXhjZXB0IE1vZHVsZU5vdEZvdW5kRXJyb3I6CiAg
      ICAjIGZvciAzLngKICAgIGZyb20gaW8gaW1wb3J0IFN0cmluZ0lPCgp0cnk6CiAgICAjIGZvciAy
      LjcueAogICAgZnJvbSB1cmxwYXJzZSBpbXBvcnQgdXJscGFyc2UKZXhjZXB0IE1vZHVsZU5vdEZv
      dW5kRXJyb3I6CiAgICAjIGZvciAzLngKICAgIGZyb20gdXJsbGliLnBhcnNlIGltcG9ydCB1cmxw
      YXJzZQoKCmNsYXNzIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oRXhjZXB0aW9uKToKICAgIHBh
      c3MKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMj
      IyMjIyMjIyMjIyMjIyMgRHVtbXlSYWRvcyAjIyMjIyMjIyMjIyMjIyMjIyMKIyMjIyMjIyMjIyMj
      IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMgdGhpcyBpcyBtYWlubHkgZm9y
      IHRlc3RpbmcgYW5kIGNvdWxkIGJlIHVzZWQgd2hlcmUgJ3JhZG9zJyBpcyBub3QgYXZhaWxhYmxl
      CgoKY2xhc3MgRHVtbXlSYWRvcyhvYmplY3QpOgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAg
      ICAgIHNlbGYucmV0dXJuX3ZhbCA9IDAKICAgICAgICBzZWxmLmVycl9tZXNzYWdlID0gJycKICAg
      ICAgICBzZWxmLnN0YXRlID0gJ2Nvbm5lY3RlZCcKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFw
      ID0ge30KICAgICAgICBzZWxmLmNtZF9uYW1lcyA9IHt9CiAgICAgICAgc2VsZi5faW5pdF9jbWRf
      b3V0cHV0X21hcCgpCiAgICAgICAgc2VsZi5kdW1teV9ob3N0X2lwX21hcCA9IHt9CgogICAgZGVm
      IF9pbml0X2NtZF9vdXRwdXRfbWFwKHNlbGYpOgogICAgICAgIGpzb25fZmlsZV9uYW1lID0gJ3Rl
      c3QtZGF0YS9jZXBoLXN0YXR1cy1vdXQnCiAgICAgICAgc2NyaXB0X2RpciA9IHBhdGguYWJzcGF0
      aChwYXRoLmRpcm5hbWUoX19maWxlX18pKQogICAgICAgIGNlcGhfc3RhdHVzX3N0ciA9ICIiCiAg
      ICAgICAgd2l0aCBvcGVuKHBhdGguam9pbihzY3JpcHRfZGlyLCBqc29uX2ZpbGVfbmFtZSksICdy
      JykgYXMganNvbl9maWxlOgogICAgICAgICAgICBjZXBoX3N0YXR1c19zdHIgPSBqc29uX2ZpbGUu
      cmVhZCgpCiAgICAgICAgc2VsZi5jbWRfbmFtZXNbJ2ZzIGxzJ10gPSAnJyd7ImZvcm1hdCI6ICJq
      c29uIiwgInByZWZpeCI6ICJmcyBscyJ9JycnCiAgICAgICAgc2VsZi5jbWRfbmFtZXNbJ3F1b3J1
      bV9zdGF0dXMnXSA9ICcnJ3siZm9ybWF0IjogImpzb24iLCAicHJlZml4IjogInF1b3J1bV9zdGF0
      dXMifScnJwogICAgICAgIHNlbGYuY21kX25hbWVzWydjYXBzX2NoYW5nZV9kZWZhdWx0X3Bvb2xf
      cHJlZml4J10gPSAnJyd7ImNhcHMiOiBbIm1vbiIsICJhbGxvdyByLCBhbGxvdyBjb21tYW5kIHF1
      b3J1bV9zdGF0dXMsIGFsbG93IGNvbW1hbmQgdmVyc2lvbiIsICJtZ3IiLCAiYWxsb3cgY29tbWFu
      ZCBjb25maWciLCAib3NkIiwgImFsbG93IHJ3eCBwb29sPWRlZmF1bHQucmd3Lm1ldGEsIGFsbG93
      IHIgcG9vbD0ucmd3LnJvb3QsIGFsbG93IHJ3IHBvb2w9ZGVmYXVsdC5yZ3cuY29udHJvbCwgYWxs
      b3cgcnggcG9vbD1kZWZhdWx0LnJndy5sb2csIGFsbG93IHggcG9vbD1kZWZhdWx0LnJndy5idWNr
      ZXRzLmluZGV4Il0sICJlbnRpdHkiOiAiY2xpZW50LmhlYWx0aGNoZWNrZXIiLCAiZm9ybWF0Ijog
      Impzb24iLCAicHJlZml4IjogImF1dGggY2FwcyJ9JycnCiAgICAgICAgc2VsZi5jbWRfbmFtZXNb
      J21nciBzZXJ2aWNlcyddID0gJycneyJmb3JtYXQiOiAianNvbiIsICJwcmVmaXgiOiAibWdyIHNl
      cnZpY2VzIn0nJycKICAgICAgICAjIGFsbCB0aGUgY29tbWFuZHMgYW5kIHRoZWlyIG91dHB1dAog
      ICAgICAgIHNlbGYuY21kX291dHB1dF9tYXBbc2VsZi5jbWRfbmFtZXNbJ2ZzIGxzJ10KICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgIF0gPSAnJydbeyJuYW1lIjoibXlmcyIsIm1ldGFkYXRhX3Bv
      b2wiOiJteWZzLW1ldGFkYXRhIiwibWV0YWRhdGFfcG9vbF9pZCI6MiwiZGF0YV9wb29sX2lkcyI6
      WzNdLCJkYXRhX3Bvb2xzIjpbIm15ZnMtZGF0YTAiXX1dJycnCiAgICAgICAgc2VsZi5jbWRfb3V0
      cHV0X21hcFtzZWxmLmNtZF9uYW1lc1sncXVvcnVtX3N0YXR1cyddXSA9ICcnJ3siZWxlY3Rpb25f
      ZXBvY2giOjMsInF1b3J1bSI6WzBdLCJxdW9ydW1fbmFtZXMiOlsiYSJdLCJxdW9ydW1fbGVhZGVy
      X25hbWUiOiJhIiwicXVvcnVtX2FnZSI6MTQzODUsImZlYXR1cmVzIjp7InF1b3J1bV9jb24iOiI0
      NTQwMTM4MjkyODM2Njk2MDYzIiwicXVvcnVtX21vbiI6WyJrcmFrZW4iLCJsdW1pbm91cyIsIm1p
      bWljIiwib3NkbWFwLXBydW5lIiwibmF1dGlsdXMiLCJvY3RvcHVzIl19LCJtb25tYXAiOnsiZXBv
      Y2giOjEsImZzaWQiOiJhZjRlMTY3My0wYjcyLTQwMmQtOTkwYS0yMmQyOTE5ZDBmMWMiLCJtb2Rp
      ZmllZCI6IjIwMjAtMDUtMDdUMDM6MzY6MzkuOTE4MDM1WiIsImNyZWF0ZWQiOiIyMDIwLTA1LTA3
      VDAzOjM2OjM5LjkxODAzNVoiLCJtaW5fbW9uX3JlbGVhc2UiOjE1LCJtaW5fbW9uX3JlbGVhc2Vf
      bmFtZSI6Im9jdG9wdXMiLCJmZWF0dXJlcyI6eyJwZXJzaXN0ZW50IjpbImtyYWtlbiIsImx1bWlu
      b3VzIiwibWltaWMiLCJvc2RtYXAtcHJ1bmUiLCJuYXV0aWx1cyIsIm9jdG9wdXMiXSwib3B0aW9u
      YWwiOltdfSwibW9ucyI6W3sicmFuayI6MCwibmFtZSI6ImEiLCJwdWJsaWNfYWRkcnMiOnsiYWRk
      cnZlYyI6W3sidHlwZSI6InYyIiwiYWRkciI6IjEwLjExMC4yMDUuMTc0OjMzMDAiLCJub25jZSI6
      MH0seyJ0eXBlIjoidjEiLCJhZGRyIjoiMTAuMTEwLjIwNS4xNzQ6Njc4OSIsIm5vbmNlIjowfV19
      LCJhZGRyIjoiMTAuMTEwLjIwNS4xNzQ6Njc4OS8wIiwicHVibGljX2FkZHIiOiIxMC4xMTAuMjA1
      LjE3NDo2Nzg5LzAiLCJwcmlvcml0eSI6MCwid2VpZ2h0IjowfV19fScnJwogICAgICAgIHNlbGYu
      Y21kX291dHB1dF9tYXBbc2VsZi5jbWRfbmFtZXNbJ21nciBzZXJ2aWNlcyddXSA9ICcnJ3siZGFz
      aGJvYXJkIjoiaHR0cHM6Ly9jZXBoLWRhc2hib2FyZDo4NDQzLyIsInByb21ldGhldXMiOiJodHRw
      Oi8vY2VwaC1kYXNoYm9hcmQtZGI6OTI4My8ifScnJwogICAgICAgIHNlbGYuY21kX291dHB1dF9t
      YXBbJycneyJjYXBzIjogWyJtb24iLCAiYWxsb3cgciwgYWxsb3cgY29tbWFuZCBxdW9ydW1fc3Rh
      dHVzIiwgIm9zZCIsICJhbGxvdyByd3ggcG9vbD1kZWZhdWx0LnJndy5tZXRhLCBhbGxvdyByIHBv
      b2w9LnJndy5yb290LCBhbGxvdyBydyBwb29sPWRlZmF1bHQucmd3LmNvbnRyb2wsIGFsbG93IHgg
      cG9vbD1kZWZhdWx0LnJndy5idWNrZXRzLmluZGV4Il0sICJlbnRpdHkiOiAiY2xpZW50LmhlYWx0
      aGNoZWNrZXIiLCAiZm9ybWF0IjogImpzb24iLCAicHJlZml4IjogImF1dGggZ2V0LW9yLWNyZWF0
      ZSJ9JycnXSA9ICcnJ1t7ImVudGl0eSI6ImNsaWVudC5oZWFsdGhjaGVja2VyIiwia2V5IjoiQVFE
      RmtiTmVmdDViRlJBQVRuZExOVVNFS3J1b3p4aVppM2xyZEE9PSIsImNhcHMiOnsibW9uIjoiYWxs
      b3cgciwgYWxsb3cgY29tbWFuZCBxdW9ydW1fc3RhdHVzIiwib3NkIjoiYWxsb3cgcnd4IHBvb2w9
      ZGVmYXVsdC5yZ3cubWV0YSwgYWxsb3cgciBwb29sPS5yZ3cucm9vdCwgYWxsb3cgcncgcG9vbD1k
      ZWZhdWx0LnJndy5jb250cm9sLCBhbGxvdyB4IHBvb2w9ZGVmYXVsdC5yZ3cuYnVja2V0cy5pbmRl
      eCJ9fV0nJycKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWycnJ3siY2FwcyI6IFsibW9uIiwg
      InByb2ZpbGUgcmJkIiwgIm9zZCIsICJwcm9maWxlIHJiZCJdLCAiZW50aXR5IjogImNsaWVudC5j
      c2ktcmJkLW5vZGUiLCAiZm9ybWF0IjogImpzb24iLCAicHJlZml4IjogImF1dGggZ2V0LW9yLWNy
      ZWF0ZSJ9JycnXSA9ICcnJ1t7ImVudGl0eSI6ImNsaWVudC5jc2ktcmJkLW5vZGUiLCJrZXkiOiJB
      UUJPZ3JOZUhiSzFBeEFBdWJZQmVWOFMxVS9HUHpxNVNWZXE2Zz09IiwiY2FwcyI6eyJtb24iOiJw
      cm9maWxlIHJiZCIsIm9zZCI6InByb2ZpbGUgcmJkIn19XScnJwogICAgICAgIHNlbGYuY21kX291
      dHB1dF9tYXBbJycneyJjYXBzIjogWyJtb24iLCAicHJvZmlsZSByYmQiLCAibWdyIiwgImFsbG93
      IHJ3IiwgIm9zZCIsICJwcm9maWxlIHJiZCJdLCAiZW50aXR5IjogImNsaWVudC5jc2ktcmJkLXBy
      b3Zpc2lvbmVyIiwgImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJhdXRoIGdldC1vci1jcmVh
      dGUifScnJ10gPSAnJydbeyJlbnRpdHkiOiJjbGllbnQuY3NpLXJiZC1wcm92aXNpb25lciIsImtl
      eSI6IkFRQk5nck5lMWdleUt4QUE4ZWtWaVJkRStoc3M1T3dlWUJrd05nPT0iLCJjYXBzIjp7Im1n
      ciI6ImFsbG93IHJ3IiwibW9uIjoicHJvZmlsZSByYmQiLCJvc2QiOiJwcm9maWxlIHJiZCJ9fV0n
      JycKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWycnJ3siY2FwcyI6IFsibW9uIiwgImFsbG93
      IHIiLCAibWdyIiwgImFsbG93IHJ3IiwgIm9zZCIsICJhbGxvdyBydyB0YWcgY2VwaGZzICo9KiIs
      ICJtZHMiLCAiYWxsb3cgcnciXSwgImVudGl0eSI6ICJjbGllbnQuY3NpLWNlcGhmcy1ub2RlIiwg
      ImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJhdXRoIGdldC1vci1jcmVhdGUifScnJ10gPSAn
      JydbeyJlbnRpdHkiOiJjbGllbnQuY3NpLWNlcGhmcy1ub2RlIiwia2V5IjoiQVFCT2dyTmVFTnVu
      S3hBQVBDbWdFN1I2RzhEY1huYUoxRjMycWc9PSIsImNhcHMiOnsibWRzIjoiYWxsb3cgcnciLCJt
      Z3IiOiJhbGxvdyBydyIsIm1vbiI6ImFsbG93IHIiLCJvc2QiOiJhbGxvdyBydyB0YWcgY2VwaGZz
      ICo9KiJ9fV0nJycKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWycnJ3siY2FwcyI6IFsibW9u
      IiwgImFsbG93IHIiLCAibWdyIiwgImFsbG93IHJ3IiwgIm9zZCIsICJhbGxvdyBydyB0YWcgY2Vw
      aGZzIG1ldGFkYXRhPSoiXSwgImVudGl0eSI6ICJjbGllbnQuY3NpLWNlcGhmcy1wcm92aXNpb25l
      ciIsICJmb3JtYXQiOiAianNvbiIsICJwcmVmaXgiOiAiYXV0aCBnZXQtb3ItY3JlYXRlIn0nJydd
      ID0gJycnW3siZW50aXR5IjoiY2xpZW50LmNzaS1jZXBoZnMtcHJvdmlzaW9uZXIiLCJrZXkiOiJB
      UUJPZ3JOZUFGZ2NHQkFBdkdxS09BRDBEM3h4bVZZMFI5MTJkZz09IiwiY2FwcyI6eyJtZ3IiOiJh
      bGxvdyBydyIsIm1vbiI6ImFsbG93IHIiLCJvc2QiOiJhbGxvdyBydyB0YWcgY2VwaGZzIG1ldGFk
      YXRhPSoifX1dJycnCiAgICAgICAgc2VsZi5jbWRfb3V0cHV0X21hcFsnJyd7ImNhcHMiOiBbIm1v
      biIsICJhbGxvdyByLCBhbGxvdyBjb21tYW5kIHF1b3J1bV9zdGF0dXMsIGFsbG93IGNvbW1hbmQg
      dmVyc2lvbiIsICJtZ3IiLCAiYWxsb3cgY29tbWFuZCBjb25maWciLCAib3NkIiwgImFsbG93IHJ3
      eCBwb29sPWRlZmF1bHQucmd3Lm1ldGEsIGFsbG93IHIgcG9vbD0ucmd3LnJvb3QsIGFsbG93IHJ3
      IHBvb2w9ZGVmYXVsdC5yZ3cuY29udHJvbCwgYWxsb3cgcnggcG9vbD1kZWZhdWx0LnJndy5sb2cs
      IGFsbG93IHggcG9vbD1kZWZhdWx0LnJndy5idWNrZXRzLmluZGV4Il0sICJlbnRpdHkiOiAiY2xp
      ZW50LmhlYWx0aGNoZWNrZXIiLCAiZm9ybWF0IjogImpzb24iLCAicHJlZml4IjogImF1dGggZ2V0
      LW9yLWNyZWF0ZSJ9JycnXSA9ICcnJ1t7ImVudGl0eSI6ImNsaWVudC5oZWFsdGhjaGVja2VyIiwi
      a2V5IjoiQVFERmtiTmVmdDViRlJBQVRuZExOVVNFS3J1b3p4aVppM2xyZEE9PSIsImNhcHMiOnsi
      bW9uIjogImFsbG93IHIsIGFsbG93IGNvbW1hbmQgcXVvcnVtX3N0YXR1cywgYWxsb3cgY29tbWFu
      ZCB2ZXJzaW9uIiwgIm1nciI6ICJhbGxvdyBjb21tYW5kIGNvbmZpZyIsICJvc2QiOiAiYWxsb3cg
      cnd4IHBvb2w9ZGVmYXVsdC5yZ3cubWV0YSwgYWxsb3cgciBwb29sPS5yZ3cucm9vdCwgYWxsb3cg
      cncgcG9vbD1kZWZhdWx0LnJndy5jb250cm9sLCBhbGxvdyByeCBwb29sPWRlZmF1bHQucmd3Lmxv
      ZywgYWxsb3cgeCBwb29sPWRlZmF1bHQucmd3LmJ1Y2tldHMuaW5kZXgifX1dJycnCiAgICAgICAg
      c2VsZi5jbWRfb3V0cHV0X21hcFsnJyd7ImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJtZ3Ig
      c2VydmljZXMifScnJ10gPSAnJyd7ImRhc2hib2FyZCI6ICJodHRwOi8vcm9vay1jZXBoLW1nci1h
      LTU3Y2Y5Zjg0YmMtZjRqbmw6NzAwMC8iLCAicHJvbWV0aGV1cyI6ICJodHRwOi8vcm9vay1jZXBo
      LW1nci1hLTU3Y2Y5Zjg0YmMtZjRqbmw6OTI4My8ifScnJwogICAgICAgIHNlbGYuY21kX291dHB1
      dF9tYXBbJycneyJlbnRpdHkiOiAiY2xpZW50LmhlYWx0aGNoZWNrZXIiLCAiZm9ybWF0IjogImpz
      b24iLCAicHJlZml4IjogImF1dGggZ2V0In0nJyddID0gJycneyJkYXNoYm9hcmQiOiAiaHR0cDov
      L3Jvb2stY2VwaC1tZ3ItYS01N2NmOWY4NGJjLWY0am5sOjcwMDAvIiwgInByb21ldGhldXMiOiAi
      aHR0cDovL3Jvb2stY2VwaC1tZ3ItYS01N2NmOWY4NGJjLWY0am5sOjkyODMvIn0nJycKICAgICAg
      ICBzZWxmLmNtZF9vdXRwdXRfbWFwWycnJ3siZW50aXR5IjogImNsaWVudC5oZWFsdGhjaGVja2Vy
      IiwgImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJhdXRoIGdldCJ9JycnXSA9ICcnJ1t7ImVu
      dGl0eSI6ImNsaWVudC5oZWFsdGhjaGVja2VyIiwia2V5IjoiQVFERmtiTmVmdDViRlJBQVRuZExO
      VVNFS3J1b3p4aVppM2xyZEE9PSIsImNhcHMiOnsibW9uIjogImFsbG93IHIsIGFsbG93IGNvbW1h
      bmQgcXVvcnVtX3N0YXR1cywgYWxsb3cgY29tbWFuZCB2ZXJzaW9uIiwgIm1nciI6ICJhbGxvdyBj
      b21tYW5kIGNvbmZpZyIsICJvc2QiOiAiYWxsb3cgcnd4IHBvb2w9ZGVmYXVsdC5yZ3cubWV0YSwg
      YWxsb3cgciBwb29sPS5yZ3cucm9vdCwgYWxsb3cgcncgcG9vbD1kZWZhdWx0LnJndy5jb250cm9s
      LCBhbGxvdyByeCBwb29sPWRlZmF1bHQucmd3LmxvZywgYWxsb3cgeCBwb29sPWRlZmF1bHQucmd3
      LmJ1Y2tldHMuaW5kZXgifX1dJycnCiAgICAgICAgc2VsZi5jbWRfb3V0cHV0X21hcFtzZWxmLmNt
      ZF9uYW1lc1snY2Fwc19jaGFuZ2VfZGVmYXVsdF9wb29sX3ByZWZpeCddXSA9ICcnJ1t7fV0nJycK
      ICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWyd7ImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6
      ICJzdGF0dXMifSddID0gY2VwaF9zdGF0dXNfc3RyCgogICAgZGVmIHNodXRkb3duKHNlbGYpOgog
      ICAgICAgIHBhc3MKCiAgICBkZWYgZ2V0X2ZzaWQoc2VsZik6CiAgICAgICAgcmV0dXJuICdhZjRl
      MTY3My0wYjcyLTQwMmQtOTkwYS0yMmQyOTE5ZDBmMWMnCgogICAgZGVmIGNvbmZfcmVhZF9maWxl
      KHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBkZWYgY29ubmVjdChzZWxmKToKICAgICAgICBwYXNz
      CgogICAgZGVmIHBvb2xfZXhpc3RzKHNlbGYsIHBvb2xfbmFtZSk6CiAgICAgICAgcmV0dXJuIFRy
      dWUKCiAgICBkZWYgbW9uX2NvbW1hbmQoc2VsZiwgY21kLCBvdXQpOgogICAgICAgIGpzb25fY21k
      ID0ganNvbi5sb2FkcyhjbWQpCiAgICAgICAganNvbl9jbWRfc3RyID0ganNvbi5kdW1wcyhqc29u
      X2NtZCwgc29ydF9rZXlzPVRydWUpCiAgICAgICAgY21kX291dHB1dCA9IHNlbGYuY21kX291dHB1
      dF9tYXBbanNvbl9jbWRfc3RyXQogICAgICAgIHJldHVybiBzZWxmLnJldHVybl92YWwsIFwKICAg
      ICAgICAgICAgY21kX291dHB1dCwgXAogICAgICAgICAgICAie30iLmZvcm1hdChzZWxmLmVycl9t
      ZXNzYWdlKS5lbmNvZGUoJ3V0Zi04JykKCiAgICBkZWYgX2NvbnZlcnRfaG9zdG5hbWVfdG9faXAo
      c2VsZiwgaG9zdF9uYW1lKToKICAgICAgICBpcF9yZWdfeCA9IHJlLmNvbXBpbGUocidcZHsxLDN9
      LlxkezEsM30uXGR7MSwzfS5cZHsxLDN9JykKICAgICAgICAjIGlmIHByb3ZpZGVkIGhvc3QgaXMg
      ZGlyZWN0bHkgYW4gSVAgYWRkcmVzcywgcmV0dXJuIHRoZSBzYW1lCiAgICAgICAgaWYgaXBfcmVn
      X3gubWF0Y2goaG9zdF9uYW1lKToKICAgICAgICAgICAgcmV0dXJuIGhvc3RfbmFtZQogICAgICAg
      IGltcG9ydCByYW5kb20KICAgICAgICBob3N0X2lwID0gc2VsZi5kdW1teV9ob3N0X2lwX21hcC5n
      ZXQoaG9zdF9uYW1lLCAiIikKICAgICAgICBpZiBub3QgaG9zdF9pcDoKICAgICAgICAgICAgaG9z
      dF9pcCA9ICIxNzIuOS57fS57fSIuZm9ybWF0KAogICAgICAgICAgICAgICAgcmFuZG9tLnJhbmRp
      bnQoMCwgMjU0KSwgcmFuZG9tLnJhbmRpbnQoMCwgMjU0KSkKICAgICAgICAgICAgc2VsZi5kdW1t
      eV9ob3N0X2lwX21hcFtob3N0X25hbWVdID0gaG9zdF9pcAogICAgICAgIGRlbCByYW5kb20KICAg
      ICAgICByZXR1cm4gaG9zdF9pcAoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIFJhZG9zKGNvbmZm
      aWxlPU5vbmUpOgogICAgICAgIHJldHVybiBEdW1teVJhZG9zKCkKCgpjbGFzcyBSYWRvc0pTT046
      CiAgICBFWFRFUk5BTF9VU0VSX05BTUUgPSAiY2xpZW50LmhlYWx0aGNoZWNrZXIiCiAgICBFWFRF
      Uk5BTF9SR1dfQURNSU5fT1BTX1VTRVJfTkFNRSA9ICJyZ3ctYWRtaW4tb3BzLXVzZXIiCiAgICBF
      TVBUWV9PVVRQVVRfTElTVCA9ICJFbXB0eSBvdXRwdXQgbGlzdCIKICAgIERFRkFVTFRfUkdXX1BP
      T0xfUFJFRklYID0gImRlZmF1bHQiCiAgICBERUZBVUxUX01PTklUT1JJTkdfRU5EUE9JTlRfUE9S
      VCA9ICI5MjgzIgoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIGdlbl9hcmdfcGFyc2VyKGNscywg
      YXJnc190b19wYXJzZT1Ob25lKToKICAgICAgICBhcmdQID0gYXJncGFyc2UuQXJndW1lbnRQYXJz
      ZXIoKQoKICAgICAgICBjb21tb25fZ3JvdXAgPSBhcmdQLmFkZF9hcmd1bWVudF9ncm91cCgnY29t
      bW9uJykKICAgICAgICBjb21tb25fZ3JvdXAuYWRkX2FyZ3VtZW50KCItLXZlcmJvc2UiLCAiLXYi
      LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uPSdzdG9yZV90cnVlJywg
      ZGVmYXVsdD1GYWxzZSkKICAgICAgICBjb21tb25fZ3JvdXAuYWRkX2FyZ3VtZW50KCItLWNlcGgt
      Y29uZiIsICItYyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJQcm92
      aWRlIGEgY2VwaCBjb25mIGZpbGUuIiwgdHlwZT1zdHIpCiAgICAgICAgY29tbW9uX2dyb3VwLmFk
      ZF9hcmd1bWVudCgiLS1ydW4tYXMtdXNlciIsICItdSIsIGRlZmF1bHQ9IiIsIHR5cGU9c3RyLAog
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0iUHJvdmlkZXMgYSB1c2VyIG5h
      bWUgdG8gY2hlY2sgdGhlIGNsdXN0ZXIncyBoZWFsdGggc3RhdHVzLCBtdXN0IGJlIHByZWZpeGVk
      IGJ5ICdjbGllbnQuJyIpCiAgICAgICAgY29tbW9uX2dyb3VwLmFkZF9hcmd1bWVudCgiLS1jbHVz
      dGVyLW5hbWUiLCBkZWZhdWx0PSJvcGVuc2hpZnQtc3RvcmFnZSIsCiAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICBoZWxwPSJDZXBoIGNsdXN0ZXIgbmFtZSIpCiAgICAgICAgY29tbW9u
      X2dyb3VwLmFkZF9hcmd1bWVudCgiLS1uYW1lc3BhY2UiLCBkZWZhdWx0PSIiLAogICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0iTmFtZXNwYWNlIHdoZXJlIENlcGhDbHVzdGVy
      IGlzIHJ1bm5pbmciKQogICAgICAgIGNvbW1vbl9ncm91cC5hZGRfYXJndW1lbnQoIi0tcmd3LXBv
      b2wtcHJlZml4IiwgZGVmYXVsdD0iIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
      IGhlbHA9IlJHVyBQb29sIHByZWZpeCIpCgogICAgICAgIG91dHB1dF9ncm91cCA9IGFyZ1AuYWRk
      X2FyZ3VtZW50X2dyb3VwKCdvdXRwdXQnKQogICAgICAgIG91dHB1dF9ncm91cC5hZGRfYXJndW1l
      bnQoIi0tZm9ybWF0IiwgIi10IiwgY2hvaWNlcz1bImpzb24iLCAiYmFzaCJdLAogICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdD0nanNvbicsIGhlbHA9IlByb3ZpZGVzIHRo
      ZSBvdXRwdXQgZm9ybWF0IChqc29uIHwgYmFzaCkiKQogICAgICAgIG91dHB1dF9ncm91cC5hZGRf
      YXJndW1lbnQoIi0tb3V0cHV0IiwgIi1vIiwgZGVmYXVsdD0iIiwKICAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgIGhlbHA9Ik91dHB1dCB3aWxsIGJlIHN0b3JlZCBpbnRvIHRoZSBwcm92
      aWRlZCBmaWxlIikKICAgICAgICBvdXRwdXRfZ3JvdXAuYWRkX2FyZ3VtZW50KCItLWNlcGhmcy1m
      aWxlc3lzdGVtLW5hbWUiLCBkZWZhdWx0PSIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgaGVscD0iUHJvdmlkZXMgdGhlIG5hbWUgb2YgdGhlIENlcGggZmlsZXN5c3RlbSIpCiAg
      ICAgICAgb3V0cHV0X2dyb3VwLmFkZF9hcmd1bWVudCgiLS1jZXBoZnMtZGF0YS1wb29sLW5hbWUi
      LCBkZWZhdWx0PSIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0iUHJv
      dmlkZXMgdGhlIG5hbWUgb2YgdGhlIGNlcGhmcyBkYXRhIHBvb2wiKQogICAgICAgIG91dHB1dF9n
      cm91cC5hZGRfYXJndW1lbnQoIi0tcmJkLWRhdGEtcG9vbC1uYW1lIiwgZGVmYXVsdD0iIiwgcmVx
      dWlyZWQ9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJQcm92
      aWRlcyB0aGUgbmFtZSBvZiB0aGUgUkJEIGRhdGFwb29sIikKICAgICAgICBvdXRwdXRfZ3JvdXAu
      YWRkX2FyZ3VtZW50KCItLXJndy1lbmRwb2ludCIsIGRlZmF1bHQ9IiIsIHJlcXVpcmVkPUZhbHNl
      LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0iUmFkb3MgR2F0ZVdheSBl
      bmRwb2ludCAoaW4gPElQPjo8UE9SVD4gZm9ybWF0KSIpCiAgICAgICAgb3V0cHV0X2dyb3VwLmFk
      ZF9hcmd1bWVudCgiLS1yZ3ctdGxzLWNlcnQtcGF0aCIsIGRlZmF1bHQ9IiIsIHJlcXVpcmVkPUZh
      bHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0iUmFkb3MgR2F0ZVdh
      eSBlbmRwb2ludCBUTFMgY2VydGlmaWNhdGUiKQogICAgICAgIG91dHB1dF9ncm91cC5hZGRfYXJn
      dW1lbnQoIi0tcmd3LXNraXAtdGxzIiwgcmVxdWlyZWQ9RmFsc2UsIGRlZmF1bHQ9RmFsc2UsCiAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJJZ25vcmUgVExTIGNlcnRpZmlj
      YXRpb24gdmFsaWRhdGlvbiB3aGVuIGEgc2VsZi1zaWduZWQgY2VydGlmaWNhdGUgaXMgcHJvdmlk
      ZWQgKE5PVCBSRUNPTU1FTkRFRCIpCiAgICAgICAgb3V0cHV0X2dyb3VwLmFkZF9hcmd1bWVudCgi
      LS1tb25pdG9yaW5nLWVuZHBvaW50IiwgZGVmYXVsdD0iIiwgcmVxdWlyZWQ9RmFsc2UsCiAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJDZXBoIE1hbmFnZXIgcHJvbWV0aGV1
      cyBleHBvcnRlciBlbmRwb2ludHMgKGNvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIDxJUD4gZW50cmll
      cyBvZiBhY3RpdmUgYW5kIHN0YW5kYnkgbWdycykiKQogICAgICAgIG91dHB1dF9ncm91cC5hZGRf
      YXJndW1lbnQoIi0tbW9uaXRvcmluZy1lbmRwb2ludC1wb3J0IiwgZGVmYXVsdD0iIiwgcmVxdWly
      ZWQ9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJDZXBoIE1h
      bmFnZXIgcHJvbWV0aGV1cyBleHBvcnRlciBwb3J0IikKCiAgICAgICAgdXBncmFkZV9ncm91cCA9
      IGFyZ1AuYWRkX2FyZ3VtZW50X2dyb3VwKCd1cGdyYWRlJykKICAgICAgICB1cGdyYWRlX2dyb3Vw
      LmFkZF9hcmd1bWVudCgiLS11cGdyYWRlIiwgYWN0aW9uPSdzdG9yZV90cnVlJywgZGVmYXVsdD1G
      YWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJVcGdyYWRlcyB0
      aGUgJ3VzZXInIHdpdGggYWxsIHRoZSBwZXJtaXNzaW9ucyBuZWVkZWQgZm9yIHRoZSBuZXcgY2x1
      c3RlciB2ZXJzaW9uIikKCiAgICAgICAgaWYgYXJnc190b19wYXJzZToKICAgICAgICAgICAgYXNz
      ZXJ0IHR5cGUoYXJnc190b19wYXJzZSkgPT0gbGlzdCwgXAogICAgICAgICAgICAgICAgIkFyZ3Vt
      ZW50IHRvICdnZW5fYXJnX3BhcnNlcicgc2hvdWxkIGJlIGEgbGlzdCIKICAgICAgICBlbHNlOgog
      ICAgICAgICAgICBhcmdzX3RvX3BhcnNlID0gc3lzLmFyZ3ZbMTpdCiAgICAgICAgcmV0dXJuIGFy
      Z1AucGFyc2VfYXJncyhhcmdzX3RvX3BhcnNlKQoKICAgIGRlZiB2YWxpZGF0ZV9yZ3dfZW5kcG9p
      bnRfdGxzX2NlcnQoc2VsZik6CiAgICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci5yZ3dfdGxzX2Nl
      cnRfcGF0aDoKICAgICAgICAgICAgd2l0aCBvcGVuKHNlbGYuX2FyZ19wYXJzZXIucmd3X3Rsc19j
      ZXJ0X3BhdGgsIGVuY29kaW5nPSd1dGY4JykgYXMgZjoKICAgICAgICAgICAgICAgIGNvbnRlbnRz
      ID0gZi5yZWFkKCkKICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50cy5yc3RyaXAoKQoKICAg
      IGRlZiBfY2hlY2tfY29uZmxpY3Rpbmdfb3B0aW9ucyhzZWxmKToKICAgICAgICBpZiBub3Qgc2Vs
      Zi5fYXJnX3BhcnNlci51cGdyYWRlIGFuZCBub3Qgc2VsZi5fYXJnX3BhcnNlci5yYmRfZGF0YV9w
      b29sX25hbWU6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAg
      ICAgICAgICAgICAgICAiRWl0aGVyICctLXVwZ3JhZGUnIG9yICctLXJiZC1kYXRhLXBvb2wtbmFt
      ZSA8cG9vbF9uYW1lPicgc2hvdWxkIGJlIHNwZWNpZmllZCIpCiAgICAgICAgaWYgc2VsZi5fYXJn
      X3BhcnNlci51cGdyYWRlIGFuZCBzZWxmLl9hcmdfcGFyc2VyLnJiZF9kYXRhX3Bvb2xfbmFtZToK
      ICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAg
      ICAgICJCb3RoICctLXVwZ3JhZGUnIGFuZCAnLS1yYmQtZGF0YS1wb29sLW5hbWUgPHBvb2xfbmFt
      ZT4nIHNob3VsZCBub3QgYmUgc3BlY2lmaWVkLCBjaG9vc2Ugb25seSBvbmUiKQogICAgICAgICMg
      YSB1c2VyIG5hbWUgbXVzdCBiZSBwcm92aWRlZCB3aGlsZSB1c2luZyAnLS11cGdyYWRlJyBvcHRp
      b24KICAgICAgICBpZiBub3Qgc2VsZi5fYXJnX3BhcnNlci5ydW5fYXNfdXNlciBhbmQgc2VsZi5f
      YXJnX3BhcnNlci51cGdyYWRlOgogICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhj
      ZXB0aW9uKAogICAgICAgICAgICAgICAgIlBsZWFzZSBwcm92aWRlIGFuIGV4aXN0aW5nIHVzZXIt
      bmFtZSB0aHJvdWdoICctLXJ1bi1hcy11c2VyJyAob3IgJy11JykgZmxhZyB3aGlsZSB1cGdyYWRp
      bmciKQoKICAgIGRlZiBfaW52YWxpZF9lbmRwb2ludChzZWxmLCBlbmRwb2ludF9zdHIpOgogICAg
      ICAgIHRyeToKICAgICAgICAgICAgaXB2NCwgcG9ydCA9IGVuZHBvaW50X3N0ci5zcGxpdCgnOicp
      CiAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZh
      aWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAiTm90IGEgcHJvcGVyIGVuZHBvaW50OiB7
      fSwgPElQdjQ+OjxQT1JUPiwgZm9ybWF0IGlzIGV4cGVjdGVkIi5mb3JtYXQoZW5kcG9pbnRfc3Ry
      KSkKICAgICAgICBpcFBhcnRzID0gaXB2NC5zcGxpdCgnLicpCiAgICAgICAgaWYgbGVuKGlwUGFy
      dHMpICE9IDQ6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAg
      ICAgICAgICAgICAgICAiTm90IGEgdmFsaWQgSVAgYWRkcmVzczoge30iLmZvcm1hdChpcHY0KSkK
      ICAgICAgICBmb3IgZWFjaFBhcnQgaW4gaXBQYXJ0czoKICAgICAgICAgICAgaWYgbm90IGVhY2hQ
      YXJ0LmlzZGlnaXQoKToKICAgICAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNl
      cHRpb24oCiAgICAgICAgICAgICAgICAgICAgIklQIGFkZHJlc3MgcGFydHMgc2hvdWxkIGJlIG51
      bWJlcnM6IHt9Ii5mb3JtYXQoaXB2NCkpCiAgICAgICAgICAgIGludFBhcnQgPSBpbnQoZWFjaFBh
      cnQpCiAgICAgICAgICAgIGlmIGludFBhcnQgPCAwIG9yIGludFBhcnQgPiAyNTQ6CiAgICAgICAg
      ICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAg
      ICAgICJPdXQgb2YgcmFuZ2UgSVAgYWRkcmVzc2VzOiB7fSIuZm9ybWF0KGlwdjQpKQogICAgICAg
      IGlmIG5vdCBwb3J0LmlzZGlnaXQoKToKICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVy
      ZUV4Y2VwdGlvbigiUG9ydCBub3QgdmFsaWQ6IHt9Ii5mb3JtYXQocG9ydCkpCiAgICAgICAgaW50
      UG9ydCA9IGludChwb3J0KQogICAgICAgIGlmIGludFBvcnQgPCAxIG9yIGludFBvcnQgPiAyKiox
      Ni0xOgogICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAg
      ICAgICAgICAgIk91dCBvZiByYW5nZSBwb3J0IG51bWJlcjoge30iLmZvcm1hdChwb3J0KSkKICAg
      ICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgZW5kcG9pbnRfZGlhbChzZWxmLCBlbmRwb2ludF9z
      dHIsIHRpbWVvdXQ9MywgY2VydD1Ob25lKToKICAgICAgICAjIGlmIHRoZSAnY2x1c3RlcicgaW5z
      dGFuY2UgaXMgYSBkdW1teSBvbmUsCiAgICAgICAgIyBkb24ndCB0cnkgdG8gcmVhY2ggb3V0IHRv
      IHRoZSBlbmRwb2ludAogICAgICAgIGlmIGlzaW5zdGFuY2Uoc2VsZi5jbHVzdGVyLCBEdW1teVJh
      ZG9zKToKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgcHJvdG9jb2xzID0gWyJodHRwIiwgImh0
      dHBzIl0KICAgICAgICBmb3IgcHJlZml4IGluIHByb3RvY29sczoKICAgICAgICAgICAgdHJ5Ogog
      ICAgICAgICAgICAgICAgZXAgPSAie306Ly97fSIuZm9ybWF0KHByZWZpeCwgZW5kcG9pbnRfc3Ry
      KQogICAgICAgICAgICAgICAgIyBJZiB2ZXJpZnkgaXMgc2V0IHRvIGEgcGF0aCB0byBhIGRpcmVj
      dG9yeSwKICAgICAgICAgICAgICAgICMgdGhlIGRpcmVjdG9yeSBtdXN0IGhhdmUgYmVlbiBwcm9j
      ZXNzZWQgdXNpbmcgdGhlIGNfcmVoYXNoIHV0aWxpdHkgc3VwcGxpZWQgd2l0aCBPcGVuU1NMLgog
      ICAgICAgICAgICAgICAgaWYgcHJlZml4ID09ICJodHRwcyIgYW5kIGNlcnQgYW5kIHNlbGYuX2Fy
      Z19wYXJzZXIucmd3X3NraXBfdGxzOgogICAgICAgICAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5o
      ZWFkKGVwLCB0aW1lb3V0PXRpbWVvdXQsIHZlcmlmeT1GYWxzZSkKICAgICAgICAgICAgICAgIGVs
      aWYgcHJlZml4ID09ICJodHRwcyIgYW5kIGNlcnQ6CiAgICAgICAgICAgICAgICAgICAgciA9IHJl
      cXVlc3RzLmhlYWQoZXAsIHRpbWVvdXQ9dGltZW91dCwgdmVyaWZ5PWNlcnQpCiAgICAgICAgICAg
      ICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5oZWFkKGVwLCB0aW1l
      b3V0PXRpbWVvdXQpCiAgICAgICAgICAgICAgICBpZiByLnN0YXR1c19jb2RlID09IDIwMDoKICAg
      ICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAg
      ICAgY29udGludWUKICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAg
      ICAgICAgICAidW5hYmxlIHRvIGNvbm5lY3QgdG8gZW5kcG9pbnQ6IHt9Ii5mb3JtYXQoZW5kcG9p
      bnRfc3RyKSkKCiAgICBkZWYgX19pbml0X18oc2VsZiwgYXJnX2xpc3Q9Tm9uZSk6CiAgICAgICAg
      c2VsZi5vdXRfbWFwID0ge30KICAgICAgICBzZWxmLl9leGNsdWRlZF9rZXlzID0gc2V0KCkKICAg
      ICAgICBzZWxmLl9hcmdfcGFyc2VyID0gc2VsZi5nZW5fYXJnX3BhcnNlcihhcmdzX3RvX3BhcnNl
      PWFyZ19saXN0KQogICAgICAgIHNlbGYuX2NoZWNrX2NvbmZsaWN0aW5nX29wdGlvbnMoKQogICAg
      ICAgIHNlbGYucnVuX2FzX3VzZXIgPSBzZWxmLl9hcmdfcGFyc2VyLnJ1bl9hc191c2VyCiAgICAg
      ICAgc2VsZi5vdXRwdXRfZmlsZSA9IHNlbGYuX2FyZ19wYXJzZXIub3V0cHV0CiAgICAgICAgc2Vs
      Zi5jZXBoX2NvbmYgPSBzZWxmLl9hcmdfcGFyc2VyLmNlcGhfY29uZgogICAgICAgIHNlbGYuTUlO
      X1VTRVJfQ0FQX1BFUk1JU1NJT05TID0gewogICAgICAgICAgICAnbWdyJzogJ2FsbG93IGNvbW1h
      bmQgY29uZmlnJywKICAgICAgICAgICAgJ21vbic6ICdhbGxvdyByLCBhbGxvdyBjb21tYW5kIHF1
      b3J1bV9zdGF0dXMsIGFsbG93IGNvbW1hbmQgdmVyc2lvbicsCiAgICAgICAgICAgICdvc2QnOiAi
      YWxsb3cgcnd4IHBvb2w9ezB9LnJndy5tZXRhLCAiICsKICAgICAgICAgICAgImFsbG93IHIgcG9v
      bD0ucmd3LnJvb3QsICIgKwogICAgICAgICAgICAiYWxsb3cgcncgcG9vbD17MH0ucmd3LmNvbnRy
      b2wsICIgKwogICAgICAgICAgICAiYWxsb3cgcnggcG9vbD17MH0ucmd3LmxvZywgIiArCiAgICAg
      ICAgICAgICJhbGxvdyB4IHBvb2w9ezB9LnJndy5idWNrZXRzLmluZGV4IgogICAgICAgIH0KICAg
      ICAgICAjIGlmIHVzZXIgbm90IHByb3ZpZGVkLCBnaXZlIGEgZGVmYXVsdCB1c2VyCiAgICAgICAg
      aWYgbm90IHNlbGYucnVuX2FzX3VzZXIgYW5kIG5vdCBzZWxmLl9hcmdfcGFyc2VyLnVwZ3JhZGU6
      CiAgICAgICAgICAgIHNlbGYucnVuX2FzX3VzZXIgPSBzZWxmLkVYVEVSTkFMX1VTRVJfTkFNRQog
      ICAgICAgIGlmIG5vdCBzZWxmLl9hcmdfcGFyc2VyLnJnd19wb29sX3ByZWZpeCBhbmQgbm90IHNl
      bGYuX2FyZ19wYXJzZXIudXBncmFkZToKICAgICAgICAgICAgc2VsZi5fYXJnX3BhcnNlci5yZ3df
      cG9vbF9wcmVmaXggPSBzZWxmLkRFRkFVTFRfUkdXX1BPT0xfUFJFRklYCiAgICAgICAgaWYgc2Vs
      Zi5jZXBoX2NvbmY6CiAgICAgICAgICAgIHNlbGYuY2x1c3RlciA9IHJhZG9zLlJhZG9zKGNvbmZm
      aWxlPXNlbGYuY2VwaF9jb25mKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuY2x1c3Rl
      ciA9IHJhZG9zLlJhZG9zKCkKICAgICAgICAgICAgc2VsZi5jbHVzdGVyLmNvbmZfcmVhZF9maWxl
      KCkKICAgICAgICBzZWxmLmNsdXN0ZXIuY29ubmVjdCgpCgogICAgZGVmIHNodXRkb3duKHNlbGYp
      OgogICAgICAgIGlmIHNlbGYuY2x1c3Rlci5zdGF0ZSA9PSAiY29ubmVjdGVkIjoKICAgICAgICAg
      ICAgc2VsZi5jbHVzdGVyLnNodXRkb3duKCkKCiAgICBkZWYgZ2V0X2ZzaWQoc2VsZik6CiAgICAg
      ICAgcmV0dXJuIHN0cihzZWxmLmNsdXN0ZXIuZ2V0X2ZzaWQoKSkKCiAgICBkZWYgX2NvbW1vbl9j
      bWRfanNvbl9nZW4oc2VsZiwgY21kX2pzb24pOgogICAgICAgIGNtZCA9IGpzb24uZHVtcHMoY21k
      X2pzb24sIHNvcnRfa2V5cz1UcnVlKQogICAgICAgIHJldF92YWwsIGNtZF9vdXQsIGVycl9tc2cg
      PSBzZWxmLmNsdXN0ZXIubW9uX2NvbW1hbmQoY21kLCBiJycpCiAgICAgICAgaWYgc2VsZi5fYXJn
      X3BhcnNlci52ZXJib3NlOgogICAgICAgICAgICBwcmludCgiQ29tbWFuZCBJbnB1dDoge30iLmZv
      cm1hdChjbWQpKQogICAgICAgICAgICBwcmludCgiUmV0dXJuIFZhbDoge31cbkNvbW1hbmQgT3V0
      cHV0OiB7fVxuRXJyb3IgTWVzc2FnZToge31cbi0tLS0tLS0tLS1cbiIuZm9ybWF0KAogICAgICAg
      ICAgICAgICAgICByZXRfdmFsLCBjbWRfb3V0LCBlcnJfbXNnKSkKICAgICAgICBqc29uX291dCA9
      IHt9CiAgICAgICAgIyBpZiB0aGVyZSBpcyBubyBlcnJvciAoaS5lOyByZXRfdmFsIGlzIFpFUk8p
      IGFuZCAnY21kX291dCcgaXMgbm90IGVtcHR5CiAgICAgICAgIyB0aGVuIGNvbnZlcnQgJ2NtZF9v
      dXQnIHRvIGEganNvbiBvdXRwdXQKICAgICAgICBpZiByZXRfdmFsID09IDAgYW5kIGNtZF9vdXQ6
      CiAgICAgICAgICAgIGpzb25fb3V0ID0ganNvbi5sb2FkcyhjbWRfb3V0KQogICAgICAgIHJldHVy
      biByZXRfdmFsLCBqc29uX291dCwgZXJyX21zZwoKICAgIGRlZiBnZXRfY2VwaF9leHRlcm5hbF9t
      b25fZGF0YShzZWxmKToKICAgICAgICBjbWRfanNvbiA9IHsicHJlZml4IjogInF1b3J1bV9zdGF0
      dXMiLCAiZm9ybWF0IjogImpzb24ifQogICAgICAgIHJldF92YWwsIGpzb25fb3V0LCBlcnJfbXNn
      ID0gc2VsZi5fY29tbW9uX2NtZF9qc29uX2dlbihjbWRfanNvbikKICAgICAgICAjIGlmIHRoZXJl
      IGlzIGFuIHVuc3VjY2Vzc2Z1bCBhdHRlbXB0LAogICAgICAgIGlmIHJldF92YWwgIT0gMCBvciBs
      ZW4oanNvbl9vdXQpID09IDA6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNl
      cHRpb24oCiAgICAgICAgICAgICAgICAiJ3F1b3J1bV9zdGF0dXMnIGNvbW1hbmQgZmFpbGVkLlxu
      IiArCiAgICAgICAgICAgICAgICAiRXJyb3I6IHt9Ii5mb3JtYXQoZXJyX21zZyBpZiByZXRfdmFs
      ICE9IDAgZWxzZSBzZWxmLkVNUFRZX09VVFBVVF9MSVNUKSkKICAgICAgICBxX2xlYWRlcl9uYW1l
      ID0ganNvbl9vdXRbJ3F1b3J1bV9sZWFkZXJfbmFtZSddCiAgICAgICAgcV9sZWFkZXJfZGV0YWls
      cyA9IHt9CiAgICAgICAgcV9sZWFkZXJfbWF0Y2hpbmdfbGlzdCA9IFtsIGZvciBsIGluIGpzb25f
      b3V0Wydtb25tYXAnXVsnbW9ucyddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBp
      ZiBsWyduYW1lJ10gPT0gcV9sZWFkZXJfbmFtZV0KICAgICAgICBpZiBsZW4ocV9sZWFkZXJfbWF0
      Y2hpbmdfbGlzdCkgPT0gMDoKICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2Vw
      dGlvbigiTm8gbWF0Y2hpbmcgJ21vbicgZGV0YWlscyBmb3VuZCIpCiAgICAgICAgcV9sZWFkZXJf
      ZGV0YWlscyA9IHFfbGVhZGVyX21hdGNoaW5nX2xpc3RbMF0KICAgICAgICAjIGdldCB0aGUgYWRk
      cmVzcyB2ZWN0b3Igb2YgdGhlIHF1b3J1bS1sZWFkZXIKICAgICAgICBxX2xlYWRlcl9hZGRydmVj
      ID0gcV9sZWFkZXJfZGV0YWlscy5nZXQoCiAgICAgICAgICAgICdwdWJsaWNfYWRkcnMnLCB7fSku
      Z2V0KCdhZGRydmVjJywgW10pCiAgICAgICAgIyBpZiB0aGUgcXVvcnVtLWxlYWRlciBoYXMgb25s
      eSBvbmUgYWRkcmVzcyBpbiB0aGUgYWRkcmVzcy12ZWN0b3IKICAgICAgICAjIGFuZCBpdCBpcyBv
      ZiB0eXBlICd2MicgKGllOyB3aXRoIDxJUD46MzMwMCksCiAgICAgICAgIyByYWlzZSBhbiBleGNl
      cHRpb24gdG8gbWFrZSB1c2VyIGF3YXJlIHRoYXQKICAgICAgICAjIHRoZXkgaGF2ZSB0byBlbmFi
      bGUgJ3YxJyAoaWU7IHdpdGggPElQPjo2Nzg5KSB0eXBlIGFzIHdlbGwKICAgICAgICBpZiBsZW4o
      cV9sZWFkZXJfYWRkcnZlYykgPT0gMSBhbmQgcV9sZWFkZXJfYWRkcnZlY1swXVsndHlwZSddID09
      ICd2Mic6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAg
      ICAgICAgICAgICAiT25seSAndjInIGFkZHJlc3MgdHlwZSBpcyBlbmFibGVkLCB1c2VyIHNob3Vs
      ZCBhbHNvIGVuYWJsZSAndjEnIHR5cGUgYXMgd2VsbCIpCiAgICAgICAgaXBfcG9ydCA9IHN0cihx
      X2xlYWRlcl9kZXRhaWxzWydwdWJsaWNfYWRkciddLnNwbGl0KCcvJylbMF0pCiAgICAgICAgcmV0
      dXJuICJ7fT17fSIuZm9ybWF0KHN0cihxX2xlYWRlcl9uYW1lKSwgaXBfcG9ydCkKCiAgICBkZWYg
      X2pvaW5faG9zdF9wb3J0KHNlbGYsIGVuZHBvaW50LCBwb3J0KToKICAgICAgICBwb3J0ID0gInt9
      Ii5mb3JtYXQocG9ydCkKICAgICAgICAjIHJlZ2V4IHRvIGNoZWNrIHRoZSBnaXZlbiBlbmRwb2lu
      dCBpcyBlbmNsb3NlZCBpbiBzcXVhcmUgYnJhY2tldHMKICAgICAgICBpcHY2X3JlZ3ggPSByZS5j
      b21waWxlKHInXlxbW15dXSpcXSQnKQogICAgICAgICMgZW5kcG9pbnQgaGFzICc6JyBpbiBpdCBh
      bmQgaWYgbm90IChhbHJlYWR5KSBlbmNsb3NlZCBpbiBzcXVhcmUgYnJhY2tldHMKICAgICAgICBp
      ZiBlbmRwb2ludC5jb3VudCgnOicpIGFuZCBub3QgaXB2Nl9yZWd4Lm1hdGNoKGVuZHBvaW50KToK
      ICAgICAgICAgICAgZW5kcG9pbnQgPSAnW3t9XScuZm9ybWF0KGVuZHBvaW50KQogICAgICAgIGlm
      IG5vdCBwb3J0OgogICAgICAgICAgICByZXR1cm4gZW5kcG9pbnQKICAgICAgICByZXR1cm4gJzon
      LmpvaW4oW2VuZHBvaW50LCBwb3J0XSkKCiAgICBkZWYgX2NvbnZlcnRfaG9zdG5hbWVfdG9faXAo
      c2VsZiwgaG9zdF9uYW1lKToKICAgICAgICAjIGlmICdjbHVzdGVyJyBpbnN0YW5jZSBpcyBhIGR1
      bW15IHR5cGUsCiAgICAgICAgIyBjYWxsIHRoZSBkdW1teSBpbnN0YW5jZSdzICJjb252ZXJ0IiBt
      ZXRob2QKICAgICAgICBpZiBub3QgaG9zdF9uYW1lOgogICAgICAgICAgICByYWlzZSBFeGVjdXRp
      b25GYWlsdXJlRXhjZXB0aW9uKCJFbXB0eSBob3N0bmFtZSBwcm92aWRlZCIpCiAgICAgICAgaWYg
      aXNpbnN0YW5jZShzZWxmLmNsdXN0ZXIsIER1bW15UmFkb3MpOgogICAgICAgICAgICByZXR1cm4g
      c2VsZi5jbHVzdGVyLl9jb252ZXJ0X2hvc3RuYW1lX3RvX2lwKGhvc3RfbmFtZSkKICAgICAgICBp
      bXBvcnQgc29ja2V0CiAgICAgICAgaXAgPSBzb2NrZXQuZ2V0aG9zdGJ5bmFtZShob3N0X25hbWUp
      CiAgICAgICAgZGVsIHNvY2tldAogICAgICAgIHJldHVybiBpcAoKICAgIGRlZiBnZXRfYWN0aXZl
      X2FuZF9zdGFuZGJ5X21ncnMoc2VsZik6CiAgICAgICAgbW9uaXRvcmluZ19lbmRwb2ludF9wb3J0
      ID0gc2VsZi5fYXJnX3BhcnNlci5tb25pdG9yaW5nX2VuZHBvaW50X3BvcnQKICAgICAgICBtb25p
      dG9yaW5nX2VuZHBvaW50X2lwID0gc2VsZi5fYXJnX3BhcnNlci5tb25pdG9yaW5nX2VuZHBvaW50
      CiAgICAgICAgc3RhbmRieV9tZ3JzID0gW10KICAgICAgICBpZiBub3QgbW9uaXRvcmluZ19lbmRw
      b2ludF9pcDoKICAgICAgICAgICAgY21kX2pzb24gPSB7InByZWZpeCI6ICJzdGF0dXMiLCAiZm9y
      bWF0IjogImpzb24ifQogICAgICAgICAgICByZXRfdmFsLCBqc29uX291dCwgZXJyX21zZyA9IHNl
      bGYuX2NvbW1vbl9jbWRfanNvbl9nZW4oY21kX2pzb24pCiAgICAgICAgICAgICMgaWYgdGhlcmUg
      aXMgYW4gdW5zdWNjZXNzZnVsIGF0dGVtcHQsCiAgICAgICAgICAgIGlmIHJldF92YWwgIT0gMCBv
      ciBsZW4oanNvbl9vdXQpID09IDA6CiAgICAgICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWls
      dXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICInbWdyIHNlcnZpY2VzJyBjb21tYW5k
      IGZhaWxlZC5cbiIgKwogICAgICAgICAgICAgICAgICAgICJFcnJvcjoge30iLmZvcm1hdChlcnJf
      bXNnIGlmIHJldF92YWwgIT0gMCBlbHNlIHNlbGYuRU1QVFlfT1VUUFVUX0xJU1QpKQogICAgICAg
      ICAgICBtb25pdG9yaW5nX2VuZHBvaW50ID0ganNvbl9vdXQuZ2V0KCdtZ3JtYXAnLCB7fSkuZ2V0
      KAogICAgICAgICAgICAgICAgJ3NlcnZpY2VzJywge30pLmdldCgncHJvbWV0aGV1cycsICcnKQog
      ICAgICAgICAgICBpZiBub3QgbW9uaXRvcmluZ19lbmRwb2ludDoKICAgICAgICAgICAgICAgIHJh
      aXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgIidwcm9t
      ZXRoZXVzJyBzZXJ2aWNlIG5vdCBmb3VuZCwgaXMgdGhlIGV4cG9ydGVyIGVuYWJsZWQ/Jy5cbiIp
      CiAgICAgICAgICAgICMgbm93IGNoZWNrIHRoZSBzdGFuZC1ieSBtZ3ItcwogICAgICAgICAgICBz
      dGFuZGJ5X2FyciA9IGpzb25fb3V0LmdldCgnbWdybWFwJywge30pLmdldCgnc3RhbmRieXMnLCBb
      XSkKICAgICAgICAgICAgZm9yIGVhY2hfc3RhbmRieSBpbiBzdGFuZGJ5X2FycjoKICAgICAgICAg
      ICAgICAgIGlmICduYW1lJyBpbiBlYWNoX3N0YW5kYnkua2V5cygpOgogICAgICAgICAgICAgICAg
      ICAgIHN0YW5kYnlfbWdycy5hcHBlbmQoZWFjaF9zdGFuZGJ5WyduYW1lJ10pCiAgICAgICAgICAg
      IHRyeToKICAgICAgICAgICAgICAgIHBhcnNlZF9lbmRwb2ludCA9IHVybHBhcnNlKG1vbml0b3Jp
      bmdfZW5kcG9pbnQpCiAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgICAgICAg
      ICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICAgICAi
      aW52YWxpZCBlbmRwb2ludDoge30iLmZvcm1hdChtb25pdG9yaW5nX2VuZHBvaW50KSkKICAgICAg
      ICAgICAgbW9uaXRvcmluZ19lbmRwb2ludF9pcCA9IHBhcnNlZF9lbmRwb2ludC5ob3N0bmFtZQog
      ICAgICAgICAgICBpZiBub3QgbW9uaXRvcmluZ19lbmRwb2ludF9wb3J0OgogICAgICAgICAgICAg
      ICAgbW9uaXRvcmluZ19lbmRwb2ludF9wb3J0ID0gInt9Ii5mb3JtYXQocGFyc2VkX2VuZHBvaW50
      LnBvcnQpCgogICAgICAgICMgaWYgbW9uaXRvcmluZyBlbmRwb2ludCBwb3J0IGlzIG5vdCBzZXQs
      IHB1dCBhIGRlZmF1bHQgbW9uIHBvcnQKICAgICAgICBpZiBub3QgbW9uaXRvcmluZ19lbmRwb2lu
      dF9wb3J0OgogICAgICAgICAgICBtb25pdG9yaW5nX2VuZHBvaW50X3BvcnQgPSBzZWxmLkRFRkFV
      TFRfTU9OSVRPUklOR19FTkRQT0lOVF9QT1JUCgogICAgICAgIHRyeToKICAgICAgICAgICAgZmFp
      bGVkX2lwID0gbW9uaXRvcmluZ19lbmRwb2ludF9pcAogICAgICAgICAgICBtb25pdG9yaW5nX2Vu
      ZHBvaW50X2lwID0gc2VsZi5fY29udmVydF9ob3N0bmFtZV90b19pcCgKICAgICAgICAgICAgICAg
      IG1vbml0b3JpbmdfZW5kcG9pbnRfaXApCiAgICAgICAgICAgICMgY29sbGVjdCBhbGwgdGhlICdz
      dGFuZC1ieScgbWdyIGlwcwogICAgICAgICAgICBtZ3JfaXBzID0gW10KICAgICAgICAgICAgZm9y
      IGVhY2hfc3RhbmRieV9tZ3IgaW4gc3RhbmRieV9tZ3JzOgogICAgICAgICAgICAgICAgZmFpbGVk
      X2lwID0gZWFjaF9zdGFuZGJ5X21ncgogICAgICAgICAgICAgICAgbWdyX2lwcy5hcHBlbmQoCiAg
      ICAgICAgICAgICAgICAgICAgc2VsZi5fY29udmVydF9ob3N0bmFtZV90b19pcChlYWNoX3N0YW5k
      YnlfbWdyKSkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1
      cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAiQ29udmVyc2lvbiBvZiBob3N0OiB7fSB0byBJ
      UCBmYWlsZWQuICIKICAgICAgICAgICAgICAgICJQbGVhc2UgZW50ZXIgdGhlIElQIGFkZHJlc3Nl
      cyBvZiBhbGwgdGhlIGNlcGgtbWdycyB3aXRoIHRoZSAnLS1tb25pdG9yaW5nLWVuZHBvaW50JyBm
      bGFnIi5mb3JtYXQoZmFpbGVkX2lwKSkKICAgICAgICBtb25pdG9yaW5nX2VuZHBvaW50ID0gc2Vs
      Zi5fam9pbl9ob3N0X3BvcnQoCiAgICAgICAgICAgIG1vbml0b3JpbmdfZW5kcG9pbnRfaXAsIG1v
      bml0b3JpbmdfZW5kcG9pbnRfcG9ydCkKICAgICAgICBzZWxmLl9pbnZhbGlkX2VuZHBvaW50KG1v
      bml0b3JpbmdfZW5kcG9pbnQpCiAgICAgICAgc2VsZi5lbmRwb2ludF9kaWFsKG1vbml0b3Jpbmdf
      ZW5kcG9pbnQpCgogICAgICAgICMgYWRkIHRoZSB2YWxpZGF0ZWQgYWN0aXZlIG1nciBJUCBpbnRv
      IHRoZSBmaXJzdCBpbmRleAogICAgICAgIG1ncl9pcHMuaW5zZXJ0KDAsIG1vbml0b3JpbmdfZW5k
      cG9pbnRfaXApCiAgICAgICAgYWxsX21ncl9pcHNfc3RyID0gIiwiLmpvaW4obWdyX2lwcykKICAg
      ICAgICByZXR1cm4gYWxsX21ncl9pcHNfc3RyLCBtb25pdG9yaW5nX2VuZHBvaW50X3BvcnQKCiAg
      ICBkZWYgY3JlYXRlX2NlcGhDU0lLZXlyaW5nX2NlcGhGU1Byb3Zpc2lvbmVyKHNlbGYpOgogICAg
      ICAgICcnJwogICAgICAgIGNvbW1hbmQ6IGNlcGggYXV0aCBnZXQtb3ItY3JlYXRlIGNsaWVudC5j
      c2ktY2VwaGZzLXByb3Zpc2lvbmVyIG1vbiAnYWxsb3cgcicgbWdyICdhbGxvdyBydycgb3NkICdh
      bGxvdyBydyB0YWcgY2VwaGZzIG1ldGFkYXRhPSonCiAgICAgICAgJycnCiAgICAgICAgY21kX2pz
      b24gPSB7InByZWZpeCI6ICJhdXRoIGdldC1vci1jcmVhdGUiLAogICAgICAgICAgICAgICAgICAg
      ICJlbnRpdHkiOiAiY2xpZW50LmNzaS1jZXBoZnMtcHJvdmlzaW9uZXIiLAogICAgICAgICAgICAg
      ICAgICAgICJjYXBzIjogWyJtb24iLCAiYWxsb3cgciIsICJtZ3IiLCAiYWxsb3cgcnciLAogICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICJvc2QiLCAiYWxsb3cgcncgdGFnIGNlcGhmcyBtZXRh
      ZGF0YT0qIl0sCiAgICAgICAgICAgICAgICAgICAgImZvcm1hdCI6ICJqc29uIn0KICAgICAgICBy
      ZXRfdmFsLCBqc29uX291dCwgZXJyX21zZyA9IHNlbGYuX2NvbW1vbl9jbWRfanNvbl9nZW4oY21k
      X2pzb24pCiAgICAgICAgIyBpZiB0aGVyZSBpcyBhbiB1bnN1Y2Nlc3NmdWwgYXR0ZW1wdCwKICAg
      ICAgICBpZiByZXRfdmFsICE9IDAgb3IgbGVuKGpzb25fb3V0KSA9PSAwOgogICAgICAgICAgICBy
      YWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgIidhdXRoIGdl
      dC1vci1jcmVhdGUgY2xpZW50LmNzaS1jZXBoZnMtcHJvdmlzaW9uZXInIGNvbW1hbmQgZmFpbGVk
      LlxuIiArCiAgICAgICAgICAgICAgICAiRXJyb3I6IHt9Ii5mb3JtYXQoZXJyX21zZyBpZiByZXRf
      dmFsICE9IDAgZWxzZSBzZWxmLkVNUFRZX09VVFBVVF9MSVNUKSkKICAgICAgICByZXR1cm4gc3Ry
      KGpzb25fb3V0WzBdWydrZXknXSkKCiAgICBkZWYgY3JlYXRlX2NlcGhDU0lLZXlyaW5nX2NlcGhG
      U05vZGUoc2VsZik6CiAgICAgICAgY21kX2pzb24gPSB7InByZWZpeCI6ICJhdXRoIGdldC1vci1j
      cmVhdGUiLAogICAgICAgICAgICAgICAgICAgICJlbnRpdHkiOiAiY2xpZW50LmNzaS1jZXBoZnMt
      bm9kZSIsCiAgICAgICAgICAgICAgICAgICAgImNhcHMiOiBbIm1vbiIsICJhbGxvdyByIiwKICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICAibWdyIiwgImFsbG93IHJ3IiwKICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICAib3NkIiwgImFsbG93IHJ3IHRhZyBjZXBoZnMgKj0qIiwKICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICAibWRzIiwgImFsbG93IHJ3Il0sCiAgICAgICAgICAgICAg
      ICAgICAgImZvcm1hdCI6ICJqc29uIn0KICAgICAgICByZXRfdmFsLCBqc29uX291dCwgZXJyX21z
      ZyA9IHNlbGYuX2NvbW1vbl9jbWRfanNvbl9nZW4oY21kX2pzb24pCiAgICAgICAgIyBpZiB0aGVy
      ZSBpcyBhbiB1bnN1Y2Nlc3NmdWwgYXR0ZW1wdCwKICAgICAgICBpZiByZXRfdmFsICE9IDAgb3Ig
      bGVuKGpzb25fb3V0KSA9PSAwOgogICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhj
      ZXB0aW9uKAogICAgICAgICAgICAgICAgIidhdXRoIGdldC1vci1jcmVhdGUgY2xpZW50LmNzaS1j
      ZXBoZnMtbm9kZScgY29tbWFuZCBmYWlsZWQuXG4iICsKICAgICAgICAgICAgICAgICJFcnJvcjog
      e30iLmZvcm1hdChlcnJfbXNnIGlmIHJldF92YWwgIT0gMCBlbHNlIHNlbGYuRU1QVFlfT1VUUFVU
      X0xJU1QpKQogICAgICAgIHJldHVybiBzdHIoanNvbl9vdXRbMF1bJ2tleSddKQoKICAgIGRlZiBj
      cmVhdGVfY2VwaENTSUtleXJpbmdfUkJEUHJvdmlzaW9uZXIoc2VsZik6CiAgICAgICAgY21kX2pz
      b24gPSB7InByZWZpeCI6ICJhdXRoIGdldC1vci1jcmVhdGUiLAogICAgICAgICAgICAgICAgICAg
      ICJlbnRpdHkiOiAiY2xpZW50LmNzaS1yYmQtcHJvdmlzaW9uZXIiLAogICAgICAgICAgICAgICAg
      ICAgICJjYXBzIjogWyJtb24iLCAicHJvZmlsZSByYmQiLAogICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgICJtZ3IiLCAiYWxsb3cgcnciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJv
      c2QiLCAicHJvZmlsZSByYmQiXSwKICAgICAgICAgICAgICAgICAgICAiZm9ybWF0IjogImpzb24i
      fQogICAgICAgIHJldF92YWwsIGpzb25fb3V0LCBlcnJfbXNnID0gc2VsZi5fY29tbW9uX2NtZF9q
      c29uX2dlbihjbWRfanNvbikKICAgICAgICAjIGlmIHRoZXJlIGlzIGFuIHVuc3VjY2Vzc2Z1bCBh
      dHRlbXB0LAogICAgICAgIGlmIHJldF92YWwgIT0gMCBvciBsZW4oanNvbl9vdXQpID09IDA6CiAg
      ICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAg
      ICAiJ2F1dGggZ2V0LW9yLWNyZWF0ZSBjbGllbnQuY3NpLXJiZC1wcm92aXNpb25lcicgY29tbWFu
      ZCBmYWlsZWQuXG4iICsKICAgICAgICAgICAgICAgICJFcnJvcjoge30iLmZvcm1hdChlcnJfbXNn
      IGlmIHJldF92YWwgIT0gMCBlbHNlIHNlbGYuRU1QVFlfT1VUUFVUX0xJU1QpKQogICAgICAgIHJl
      dHVybiBzdHIoanNvbl9vdXRbMF1bJ2tleSddKQoKICAgIGRlZiBnZXRfY2VwaGZzX2RhdGFfcG9v
      bF9kZXRhaWxzKHNlbGYpOgogICAgICAgIGNtZF9qc29uID0geyJwcmVmaXgiOiAiZnMgbHMiLCAi
      Zm9ybWF0IjogImpzb24ifQogICAgICAgIHJldF92YWwsIGpzb25fb3V0LCBlcnJfbXNnID0gc2Vs
      Zi5fY29tbW9uX2NtZF9qc29uX2dlbihjbWRfanNvbikKICAgICAgICAjIGlmIHRoZXJlIGlzIGFu
      IHVuc3VjY2Vzc2Z1bCBhdHRlbXB0LCByZXBvcnQgYW4gZXJyb3IKICAgICAgICBpZiByZXRfdmFs
      ICE9IDA6CiAgICAgICAgICAgICMgaWYgZnMgYW5kIGRhdGFfcG9vbCBhcmd1bWVudHMgYXJlIG5v
      dCBzZXQsIHNpbGVudGx5IHJldHVybgogICAgICAgICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLmNl
      cGhmc19maWxlc3lzdGVtX25hbWUgPT0gIiIgYW5kIHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX2Rh
      dGFfcG9vbF9uYW1lID09ICIiOgogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICMg
      aWYgdXNlciBoYXMgcHJvdmlkZWQgYW55IG9mIHRoZQogICAgICAgICAgICAjICctLWNlcGhmcy1m
      aWxlc3lzdGVtLW5hbWUnIG9yICctLWNlcGhmcy1kYXRhLXBvb2wtbmFtZScgYXJndW1lbnRzLAog
      ICAgICAgICAgICAjIHJhaXNlIGFuIGV4Y2VwdGlvbiBhcyB3ZSBhcmUgdW5hYmxlIHRvIHZlcmlm
      eSB0aGUgYXJncwogICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAog
      ICAgICAgICAgICAgICAgIidmcyBscycgY2VwaCBjYWxsIGZhaWxlZCB3aXRoIGVycm9yOiB7fSIu
      Zm9ybWF0KGVycl9tc2cpKQoKICAgICAgICBtYXRjaGluZ19qc29uX291dCA9IHt9CiAgICAgICAg
      IyBpZiAnLS1jZXBoZnMtZmlsZXN5c3RlbS1uYW1lJyBhcmd1bWVudCBpcyBwcm92aWRlZCwKICAg
      ICAgICAjIGNoZWNrIHdoZXRoZXIgdGhlIHByb3ZpZGVkIGZpbGVzeXN0ZW0tbmFtZSBleGlzdHMg
      b3Igbm90CiAgICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci5jZXBoZnNfZmlsZXN5c3RlbV9uYW1l
      OgogICAgICAgICAgICAjIGdldCB0aGUgbWF0Y2hpbmcgbGlzdAogICAgICAgICAgICBtYXRjaGlu
      Z19qc29uX291dF9saXN0ID0gW21hdGNoZWQgZm9yIG1hdGNoZWQgaW4ganNvbl9vdXQKICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzdHIobWF0Y2hlZFsnbmFtZSddKSA9
      PSBzZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19maWxlc3lzdGVtX25hbWVdCiAgICAgICAgICAgICMg
      dW5hYmxlIHRvIGZpbmQgYSBtYXRjaGluZyBmcy1uYW1lLCByYWlzZSBhbiBlcnJvcgogICAgICAg
      ICAgICBpZiBsZW4obWF0Y2hpbmdfanNvbl9vdXRfbGlzdCkgPT0gMDoKICAgICAgICAgICAgICAg
      IHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgKCJG
      aWxlc3lzdGVtIHByb3ZpZGVkLCAne30nLCAiICsKICAgICAgICAgICAgICAgICAgICAgImlzIG5v
      dCBmb3VuZCBpbiB0aGUgZnMtbGlzdDogJ3t9JyIpLmZvcm1hdCgKICAgICAgICAgICAgICAgICAg
      ICAgICAgc2VsZi5fYXJnX3BhcnNlci5jZXBoZnNfZmlsZXN5c3RlbV9uYW1lLAogICAgICAgICAg
      ICAgICAgICAgICAgICBbc3RyKHhbJ25hbWUnXSkgZm9yIHggaW4ganNvbl9vdXRdKSkKICAgICAg
      ICAgICAgbWF0Y2hpbmdfanNvbl9vdXQgPSBtYXRjaGluZ19qc29uX291dF9saXN0WzBdCiAgICAg
      ICAgIyBpZiBjZXBoZnMgZmlsZXN5c3RlbSBuYW1lIGlzIG5vdCBwcm92aWRlZCwKICAgICAgICAj
      IHRyeSB0byBnZXQgYSBkZWZhdWx0IGZzIG5hbWUgYnkgZG9pbmcgdGhlIGZvbGxvd2luZwogICAg
      ICAgIGVsc2U6CiAgICAgICAgICAgICMgYS4gY2hlY2sgaWYgdGhlcmUgaXMgb25seSBvbmUgZmls
      ZXN5c3RlbSBpcyBwcmVzZW50CiAgICAgICAgICAgIGlmIGxlbihqc29uX291dCkgPT0gMToKICAg
      ICAgICAgICAgICAgIG1hdGNoaW5nX2pzb25fb3V0ID0ganNvbl9vdXRbMF0KICAgICAgICAgICAg
      IyBiLiBvciBlbHNlLCBjaGVjayBpZiBkYXRhX3Bvb2wgbmFtZSBpcyBwcm92aWRlZAogICAgICAg
      ICAgICBlbGlmIHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX2RhdGFfcG9vbF9uYW1lOgogICAgICAg
      ICAgICAgICAgIyBhbmQgaWYgcHJlc2VudCwgY2hlY2sgd2hldGhlciB0aGVyZSBleGlzdHMgYSBm
      cyB3aGljaCBoYXMgdGhlIGRhdGFfcG9vbAogICAgICAgICAgICAgICAgZm9yIGVhY2hKIGluIGpz
      b25fb3V0OgogICAgICAgICAgICAgICAgICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX2Rh
      dGFfcG9vbF9uYW1lIGluIGVhY2hKWydkYXRhX3Bvb2xzJ106CiAgICAgICAgICAgICAgICAgICAg
      ICAgIG1hdGNoaW5nX2pzb25fb3V0ID0gZWFjaEoKICAgICAgICAgICAgICAgICAgICAgICAgYnJl
      YWsKICAgICAgICAgICAgICAgICMgaWYgdGhlcmUgaXMgbm8gbWF0Y2hpbmcgZnMgZXhpc3RzLCB0
      aGF0IG1lYW5zIHByb3ZpZGVkIGRhdGFfcG9vbCBuYW1lIGlzIGludmFsaWQKICAgICAgICAgICAg
      ICAgIGlmIG5vdCBtYXRjaGluZ19qc29uX291dDoKICAgICAgICAgICAgICAgICAgICByYWlzZSBF
      eGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICAgICAiUHJvdmlk
      ZWQgZGF0YV9wb29sIG5hbWUsIHt9LCBkb2VzIG5vdCBleGlzdHMiLmZvcm1hdCgKICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX2RhdGFfcG9vbF9uYW1l
      KSkKICAgICAgICAgICAgIyBjLiBpZiBub3RoaW5nIGlzIHNldCBhbmQgY291bGRuJ3QgZmluZCBh
      IGRlZmF1bHQsCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAjIGp1c3QgcmV0dXJu
      IHNpbGVudGx5CiAgICAgICAgICAgICAgICByZXR1cm4KCiAgICAgICAgaWYgbWF0Y2hpbmdfanNv
      bl9vdXQ6CiAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX2ZpbGVzeXN0ZW1fbmFt
      ZSA9IHN0cigKICAgICAgICAgICAgICAgIG1hdGNoaW5nX2pzb25fb3V0WyduYW1lJ10pCgogICAg
      ICAgIGlmIHR5cGUobWF0Y2hpbmdfanNvbl9vdXRbJ2RhdGFfcG9vbHMnXSkgPT0gbGlzdDoKICAg
      ICAgICAgICAgIyBpZiB0aGUgdXNlciBoYXMgYWxyZWFkeSBwcm92aWRlZCBkYXRhLXBvb2wtbmFt
      ZSwKICAgICAgICAgICAgIyB0aHJvdWdoIC0tY2VwaGZzLWRhdGEtcG9vbC1uYW1lCiAgICAgICAg
      ICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX2RhdGFfcG9vbF9uYW1lOgogICAgICAgICAg
      ICAgICAgIyBpZiB0aGUgcHJvdmlkZWQgbmFtZSBpcyBub3QgbWF0Y2hpbmcgd2l0aCB0aGUgb25l
      IGluIHRoZSBsaXN0CiAgICAgICAgICAgICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19k
      YXRhX3Bvb2xfbmFtZSBub3QgaW4gbWF0Y2hpbmdfanNvbl9vdXRbJ2RhdGFfcG9vbHMnXToKICAg
      ICAgICAgICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAg
      ICAgICAgICAgICAgICAgICAie306ICd7fScsIHt9OiB7fSIuZm9ybWF0KAogICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgIlByb3ZpZGVkIGRhdGEtcG9vbC1uYW1lIiwKICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX2RhdGFfcG9vbF9uYW1lLAogICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgImRvZXNuJ3QgbWF0Y2ggZnJvbSB0aGUgZGF0YS1wb29s
      cycgbGlzdCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbc3RyKHgpIGZvciB4IGluIG1h
      dGNoaW5nX2pzb25fb3V0WydkYXRhX3Bvb2xzJ11dKSkKICAgICAgICAgICAgIyBpZiBkYXRhX3Bv
      b2wgbmFtZSBpcyBub3QgcHJvdmlkZWQsCiAgICAgICAgICAgICMgdGhlbiB0cnkgdG8gZmluZCBh
      IGRlZmF1bHQgZGF0YSBwb29sIG5hbWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAg
      ICMgaWYgbm8gZGF0YV9wb29scyBleGlzdCwgc2lsZW50bHkgcmV0dXJuCiAgICAgICAgICAgICAg
      ICBpZiBsZW4obWF0Y2hpbmdfanNvbl9vdXRbJ2RhdGFfcG9vbHMnXSkgPT0gMDoKICAgICAgICAg
      ICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZz
      X2RhdGFfcG9vbF9uYW1lID0gc3RyKAogICAgICAgICAgICAgICAgICAgIG1hdGNoaW5nX2pzb25f
      b3V0WydkYXRhX3Bvb2xzJ11bMF0pCiAgICAgICAgICAgICMgaWYgdGhlcmUgYXJlIG1vcmUgdGhh
      biBvbmUgJ2RhdGFfcG9vbHMnIGV4aXN0LAogICAgICAgICAgICAjIHRoZW4gd2FybiB0aGUgdXNl
      ciB0aGF0IHdlIGFyZSB1c2luZyB0aGUgc2VsZWN0ZWQgbmFtZQogICAgICAgICAgICBpZiBsZW4o
      bWF0Y2hpbmdfanNvbl9vdXRbJ2RhdGFfcG9vbHMnXSkgPiAxOgogICAgICAgICAgICAgICAgcHJp
      bnQoInt9OiB7fVxue306ICd7fSdcbiIuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgICJXQVJO
      SU5HOiBNdWx0aXBsZSBkYXRhIHBvb2xzIGRldGVjdGVkIiwKICAgICAgICAgICAgICAgICAgICBb
      c3RyKHgpIGZvciB4IGluIG1hdGNoaW5nX2pzb25fb3V0WydkYXRhX3Bvb2xzJ11dLAogICAgICAg
      ICAgICAgICAgICAgICJVc2luZyB0aGUgZGF0YS1wb29sIiwKICAgICAgICAgICAgICAgICAgICBz
      ZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19kYXRhX3Bvb2xfbmFtZSkpCgogICAgZGVmIGNyZWF0ZV9j
      ZXBoQ1NJS2V5cmluZ19SQkROb2RlKHNlbGYpOgogICAgICAgIGNtZF9qc29uID0geyJwcmVmaXgi
      OiAiYXV0aCBnZXQtb3ItY3JlYXRlIiwKICAgICAgICAgICAgICAgICAgICAiZW50aXR5IjogImNs
      aWVudC5jc2ktcmJkLW5vZGUiLAogICAgICAgICAgICAgICAgICAgICJjYXBzIjogWyJtb24iLCAi
      cHJvZmlsZSByYmQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJvc2QiLCAicHJvZmls
      ZSByYmQiXSwKICAgICAgICAgICAgICAgICAgICAiZm9ybWF0IjogImpzb24ifQogICAgICAgIHJl
      dF92YWwsIGpzb25fb3V0LCBlcnJfbXNnID0gc2VsZi5fY29tbW9uX2NtZF9qc29uX2dlbihjbWRf
      anNvbikKICAgICAgICAjIGlmIHRoZXJlIGlzIGFuIHVuc3VjY2Vzc2Z1bCBhdHRlbXB0LAogICAg
      ICAgIGlmIHJldF92YWwgIT0gMCBvciBsZW4oanNvbl9vdXQpID09IDA6CiAgICAgICAgICAgIHJh
      aXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAiJ2F1dGggZ2V0
      LW9yLWNyZWF0ZSBjbGllbnQuY3NpLXJiZC1ub2RlJyBjb21tYW5kIGZhaWxlZFxuIiArCiAgICAg
      ICAgICAgICAgICAiRXJyb3I6IHt9Ii5mb3JtYXQoZXJyX21zZyBpZiByZXRfdmFsICE9IDAgZWxz
      ZSBzZWxmLkVNUFRZX09VVFBVVF9MSVNUKSkKICAgICAgICByZXR1cm4gc3RyKGpzb25fb3V0WzBd
      WydrZXknXSkKCiAgICBkZWYgY3JlYXRlX2NoZWNrZXJLZXkoc2VsZik6CiAgICAgICAgY21kX2pz
      b24gPSB7InByZWZpeCI6ICJhdXRoIGdldC1vci1jcmVhdGUiLAogICAgICAgICAgICAgICAgICAg
      ICJlbnRpdHkiOiBzZWxmLnJ1bl9hc191c2VyLAogICAgICAgICAgICAgICAgICAgICJjYXBzIjog
      WyJtb24iLCBzZWxmLk1JTl9VU0VSX0NBUF9QRVJNSVNTSU9OU1snbW9uJ10sCiAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgIm1nciIsIHNlbGYuTUlOX1VTRVJfQ0FQX1BFUk1JU1NJT05TWydt
      Z3InXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAib3NkIiwgc2VsZi5NSU5fVVNFUl9D
      QVBfUEVSTUlTU0lPTlNbJ29zZCddLmZvcm1hdChzZWxmLl9hcmdfcGFyc2VyLnJnd19wb29sX3By
      ZWZpeCldLAogICAgICAgICAgICAgICAgICAgICJmb3JtYXQiOiAianNvbiJ9CiAgICAgICAgcmV0
      X3ZhbCwganNvbl9vdXQsIGVycl9tc2cgPSBzZWxmLl9jb21tb25fY21kX2pzb25fZ2VuKGNtZF9q
      c29uKQogICAgICAgICMgaWYgdGhlcmUgaXMgYW4gdW5zdWNjZXNzZnVsIGF0dGVtcHQsCiAgICAg
      ICAgaWYgcmV0X3ZhbCAhPSAwIG9yIGxlbihqc29uX291dCkgPT0gMDoKICAgICAgICAgICAgcmFp
      c2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICInYXV0aCBnZXQt
      b3ItY3JlYXRlIHt9JyBjb21tYW5kIGZhaWxlZFxuIi5mb3JtYXQoc2VsZi5ydW5fYXNfdXNlcikg
      KwogICAgICAgICAgICAgICAgIkVycm9yOiB7fSIuZm9ybWF0KGVycl9tc2cgaWYgcmV0X3ZhbCAh
      PSAwIGVsc2Ugc2VsZi5FTVBUWV9PVVRQVVRfTElTVCkpCiAgICAgICAgcmV0dXJuIHN0cihqc29u
      X291dFswXVsna2V5J10pCgogICAgZGVmIGdldF9jZXBoX2Rhc2hib2FyZF9saW5rKHNlbGYpOgog
      ICAgICAgIGNtZF9qc29uID0geyJwcmVmaXgiOiAibWdyIHNlcnZpY2VzIiwgImZvcm1hdCI6ICJq
      c29uIn0KICAgICAgICByZXRfdmFsLCBqc29uX291dCwgXyA9IHNlbGYuX2NvbW1vbl9jbWRfanNv
      bl9nZW4oY21kX2pzb24pCiAgICAgICAgIyBpZiB0aGVyZSBpcyBhbiB1bnN1Y2Nlc3NmdWwgYXR0
      ZW1wdCwKICAgICAgICBpZiByZXRfdmFsICE9IDAgb3IgbGVuKGpzb25fb3V0KSA9PSAwOgogICAg
      ICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIGlmIG5vdCAnZGFzaGJvYXJkJyBpbiBqc29uX291
      dDoKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICByZXR1cm4ganNvbl9vdXRbJ2Rhc2hi
      b2FyZCddCgogICAgZGVmIGNyZWF0ZV9yZ3dfYWRtaW5fb3BzX3VzZXIoc2VsZik6CiAgICAgICAg
      Y21kID0gWydyYWRvc2d3LWFkbWluJywgJ3VzZXInLCAnY3JlYXRlJywgJy0tdWlkJywgc2VsZi5F
      WFRFUk5BTF9SR1dfQURNSU5fT1BTX1VTRVJfTkFNRSwgJy0tZGlzcGxheS1uYW1lJywKICAgICAg
      ICAgICAgICAgJ1Jvb2sgUkdXIEFkbWluIE9wcyB1c2VyJywgJy0tY2FwcycsICdidWNrZXRzPSo7
      dXNlcnM9Kjt1c2FnZT1yZWFkO21ldGFkYXRhPXJlYWQ7em9uZT1yZWFkJ10KICAgICAgICB0cnk6
      CiAgICAgICAgICAgIG91dHB1dCA9IHN1YnByb2Nlc3MuY2hlY2tfb3V0cHV0KGNtZCwKICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RkZXJyPXN1YnByb2Nlc3Mu
      UElQRSkKICAgICAgICBleGNlcHQgc3VicHJvY2Vzcy5DYWxsZWRQcm9jZXNzRXJyb3IgYXMgZXhl
      YzoKICAgICAgICAgICAgIyBpZiB0aGUgdXNlciBhbHJlYWR5IGV4aXN0cywgd2UganVzdCBxdWVy
      eSBpdAogICAgICAgICAgICBpZiBleGVjLnJldHVybmNvZGUgPT0gZXJybm8uRUVYSVNUOgogICAg
      ICAgICAgICAgICAgY21kID0gWydyYWRvc2d3LWFkbWluJywgJ3VzZXInLCAnaW5mbycsCiAgICAg
      ICAgICAgICAgICAgICAgICAgJy0tdWlkJywgc2VsZi5FWFRFUk5BTF9SR1dfQURNSU5fT1BTX1VT
      RVJfTkFNRQogICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgIHRyeToKICAg
      ICAgICAgICAgICAgICAgICBvdXRwdXQgPSBzdWJwcm9jZXNzLmNoZWNrX291dHB1dChjbWQsCiAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RkZXJy
      PXN1YnByb2Nlc3MuUElQRSkKICAgICAgICAgICAgICAgIGV4Y2VwdCBzdWJwcm9jZXNzLkNhbGxl
      ZFByb2Nlc3NFcnJvciBhcyBleGVjOgogICAgICAgICAgICAgICAgICAgIGVycl9tc2cgPSAiZmFp
      bGVkIHRvIGV4ZWN1dGUgY29tbWFuZCAlcy4gT3V0cHV0OiAlcy4gQ29kZTogJXMuIEVycm9yOiAl
      cyIgJSAoCiAgICAgICAgICAgICAgICAgICAgICAgIGNtZCwgZXhlYy5vdXRwdXQsIGV4ZWMucmV0
      dXJuY29kZSwgZXhlYy5zdGRlcnIpCiAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9u
      KGVycl9tc2cpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBlcnJfbXNnID0gImZh
      aWxlZCB0byBleGVjdXRlIGNvbW1hbmQgJXMuIE91dHB1dDogJXMuIENvZGU6ICVzLiBFcnJvcjog
      JXMiICUgKAogICAgICAgICAgICAgICAgICAgIGNtZCwgZXhlYy5vdXRwdXQsIGV4ZWMucmV0dXJu
      Y29kZSwgZXhlYy5zdGRlcnIpCiAgICAgICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oZXJyX21z
      ZykKCiAgICAgICAganNvbm91dHB1dCA9IGpzb24ubG9hZHMob3V0cHV0KQogICAgICAgIHJldHVy
      biBqc29ub3V0cHV0WyJrZXlzIl1bMF1bJ2FjY2Vzc19rZXknXSwganNvbm91dHB1dFsia2V5cyJd
      WzBdWydzZWNyZXRfa2V5J10KCiAgICBkZWYgX2dlbl9vdXRwdXRfbWFwKHNlbGYpOgogICAgICAg
      IGlmIHNlbGYub3V0X21hcDoKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgcG9vbHNfdG9fdmFs
      aWRhdGUgPSBbc2VsZi5fYXJnX3BhcnNlci5yYmRfZGF0YV9wb29sX25hbWVdCiAgICAgICAgIyBp
      ZiByZ3dfZW5kcG9pbnQgaXMgcHJvdmlkZWQsIHZhbGlkYXRlIGl0CiAgICAgICAgaWYgc2VsZi5f
      YXJnX3BhcnNlci5yZ3dfZW5kcG9pbnQ6CiAgICAgICAgICAgIHNlbGYuX2ludmFsaWRfZW5kcG9p
      bnQoc2VsZi5fYXJnX3BhcnNlci5yZ3dfZW5kcG9pbnQpCiAgICAgICAgICAgIHNlbGYuZW5kcG9p
      bnRfZGlhbChzZWxmLl9hcmdfcGFyc2VyLnJnd19lbmRwb2ludCwKICAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgIGNlcnQ9c2VsZi52YWxpZGF0ZV9yZ3dfZW5kcG9pbnRfdGxzX2NlcnQoKSkK
      ICAgICAgICAgICAgcmd3X3Bvb2xfdG9fdmFsaWRhdGUgPSBbInswfS5yZ3cubWV0YSIuZm9ybWF0
      KHNlbGYuX2FyZ19wYXJzZXIucmd3X3Bvb2xfcHJlZml4KSwKICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgIi5yZ3cucm9vdCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgICJ7MH0ucmd3LmNvbnRyb2wiLmZvcm1hdCgKICAgICAgICAgICAgICAgIHNlbGYuX2Fy
      Z19wYXJzZXIucmd3X3Bvb2xfcHJlZml4KSwKICAgICAgICAgICAgICAgICJ7MH0ucmd3LmxvZyIu
      Zm9ybWF0KAogICAgICAgICAgICAgICAgc2VsZi5fYXJnX3BhcnNlci5yZ3dfcG9vbF9wcmVmaXgp
      XQogICAgICAgICAgICBwb29sc190b192YWxpZGF0ZS5leHRlbmQocmd3X3Bvb2xfdG9fdmFsaWRh
      dGUpCgogICAgICAgIGZvciBwb29sIGluIHBvb2xzX3RvX3ZhbGlkYXRlOgogICAgICAgICAgICBp
      ZiBub3Qgc2VsZi5jbHVzdGVyLnBvb2xfZXhpc3RzKHBvb2wpOgogICAgICAgICAgICAgICAgcmFp
      c2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICAgICAiVGhlIHBy
      b3ZpZGVkIHBvb2wsICd7fScsIGRvZXMgbm90IGV4aXN0Ii5mb3JtYXQocG9vbCkpCiAgICAgICAg
      c2VsZi5fZXhjbHVkZWRfa2V5cy5hZGQoJ0NMVVNURVJfTkFNRScpCiAgICAgICAgc2VsZi5nZXRf
      Y2VwaGZzX2RhdGFfcG9vbF9kZXRhaWxzKCkKICAgICAgICBzZWxmLm91dF9tYXBbJ05BTUVTUEFD
      RSddID0gc2VsZi5fYXJnX3BhcnNlci5uYW1lc3BhY2UKICAgICAgICBzZWxmLm91dF9tYXBbJ0NM
      VVNURVJfTkFNRSddID0gc2VsZi5fYXJnX3BhcnNlci5jbHVzdGVyX25hbWUKICAgICAgICBzZWxm
      Lm91dF9tYXBbJ1JPT0tfRVhURVJOQUxfRlNJRCddID0gc2VsZi5nZXRfZnNpZCgpCiAgICAgICAg
      c2VsZi5vdXRfbWFwWydST09LX0VYVEVSTkFMX1VTRVJOQU1FJ10gPSBzZWxmLnJ1bl9hc191c2Vy
      CiAgICAgICAgc2VsZi5vdXRfbWFwWydST09LX0VYVEVSTkFMX0NFUEhfTU9OX0RBVEEnXSA9IHNl
      bGYuZ2V0X2NlcGhfZXh0ZXJuYWxfbW9uX2RhdGEoKQogICAgICAgIHNlbGYub3V0X21hcFsnUk9P
      S19FWFRFUk5BTF9VU0VSX1NFQ1JFVCddID0gc2VsZi5jcmVhdGVfY2hlY2tlcktleSgpCiAgICAg
      ICAgc2VsZi5vdXRfbWFwWydST09LX0VYVEVSTkFMX0RBU0hCT0FSRF9MSU5LJ10gPSBzZWxmLmdl
      dF9jZXBoX2Rhc2hib2FyZF9saW5rKCkKICAgICAgICBzZWxmLm91dF9tYXBbJ0NTSV9SQkRfTk9E
      RV9TRUNSRVRfU0VDUkVUJ10gPSBzZWxmLmNyZWF0ZV9jZXBoQ1NJS2V5cmluZ19SQkROb2RlKCkK
      ICAgICAgICBzZWxmLm91dF9tYXBbJ0NTSV9SQkRfUFJPVklTSU9ORVJfU0VDUkVUJ10gPSBzZWxm
      LmNyZWF0ZV9jZXBoQ1NJS2V5cmluZ19SQkRQcm92aXNpb25lcigpCiAgICAgICAgc2VsZi5vdXRf
      bWFwWydDRVBIRlNfUE9PTF9OQU1FJ10gPSBzZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19kYXRhX3Bv
      b2xfbmFtZQogICAgICAgIHNlbGYub3V0X21hcFsnQ0VQSEZTX0ZTX05BTUUnXSA9IHNlbGYuX2Fy
      Z19wYXJzZXIuY2VwaGZzX2ZpbGVzeXN0ZW1fbmFtZQogICAgICAgIHNlbGYub3V0X21hcFsnQ1NJ
      X0NFUEhGU19OT0RFX1NFQ1JFVCddID0gJycKICAgICAgICBzZWxmLm91dF9tYXBbJ0NTSV9DRVBI
      RlNfUFJPVklTSU9ORVJfU0VDUkVUJ10gPSAnJwogICAgICAgICMgY3JlYXRlIENlcGhGUyBub2Rl
      IGFuZCBwcm92aXNpb25lciBrZXlyaW5nIG9ubHkgd2hlbiBNRFMgZXhpc3RzCiAgICAgICAgaWYg
      c2VsZi5vdXRfbWFwWydDRVBIRlNfRlNfTkFNRSddIGFuZCBzZWxmLm91dF9tYXBbJ0NFUEhGU19Q
      T09MX05BTUUnXToKICAgICAgICAgICAgc2VsZi5vdXRfbWFwWydDU0lfQ0VQSEZTX05PREVfU0VD
      UkVUJ10gPSBzZWxmLmNyZWF0ZV9jZXBoQ1NJS2V5cmluZ19jZXBoRlNOb2RlKAogICAgICAgICAg
      ICApCiAgICAgICAgICAgIHNlbGYub3V0X21hcFsnQ1NJX0NFUEhGU19QUk9WSVNJT05FUl9TRUNS
      RVQnXSA9IHNlbGYuY3JlYXRlX2NlcGhDU0lLZXlyaW5nX2NlcGhGU1Byb3Zpc2lvbmVyKCkKICAg
      ICAgICBzZWxmLm91dF9tYXBbJ1JHV19FTkRQT0lOVCddID0gc2VsZi5fYXJnX3BhcnNlci5yZ3df
      ZW5kcG9pbnQKICAgICAgICBzZWxmLm91dF9tYXBbJ1JHV19UTFNfQ0VSVCddID0gJycKICAgICAg
      ICBzZWxmLm91dF9tYXBbJ01PTklUT1JJTkdfRU5EUE9JTlQnXSwgXAogICAgICAgICAgICBzZWxm
      Lm91dF9tYXBbJ01PTklUT1JJTkdfRU5EUE9JTlRfUE9SVCddID0gc2VsZi5nZXRfYWN0aXZlX2Fu
      ZF9zdGFuZGJ5X21ncnMoKQogICAgICAgIHNlbGYub3V0X21hcFsnUkJEX1BPT0xfTkFNRSddID0g
      c2VsZi5fYXJnX3BhcnNlci5yYmRfZGF0YV9wb29sX25hbWUKICAgICAgICBzZWxmLm91dF9tYXBb
      J1JHV19QT09MX1BSRUZJWCddID0gc2VsZi5fYXJnX3BhcnNlci5yZ3dfcG9vbF9wcmVmaXgKICAg
      ICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLnJnd19lbmRwb2ludDoKICAgICAgICAgICAgc2VsZi5v
      dXRfbWFwWydBQ0NFU1NfS0VZJ10sIHNlbGYub3V0X21hcFsnU0VDUkVUX0tFWSddID0gc2VsZi5j
      cmVhdGVfcmd3X2FkbWluX29wc191c2VyKCkKICAgICAgICAgICAgaWYgc2VsZi5fYXJnX3BhcnNl
      ci5yZ3dfdGxzX2NlcnRfcGF0aDoKICAgICAgICAgICAgICAgIHNlbGYub3V0X21hcFsnUkdXX1RM
      U19DRVJUJ10gPSBzZWxmLnZhbGlkYXRlX3Jnd19lbmRwb2ludF90bHNfY2VydCgpCgogICAgZGVm
      IGdlbl9zaGVsbF9vdXQoc2VsZik6CiAgICAgICAgc2VsZi5fZ2VuX291dHB1dF9tYXAoKQogICAg
      ICAgIHNoT3V0SU8gPSBTdHJpbmdJTygpCiAgICAgICAgZm9yIGssIHYgaW4gc2VsZi5vdXRfbWFw
      Lml0ZW1zKCk6CiAgICAgICAgICAgIGlmIHYgYW5kIGsgbm90IGluIHNlbGYuX2V4Y2x1ZGVkX2tl
      eXM6CiAgICAgICAgICAgICAgICBzaE91dElPLndyaXRlKCdleHBvcnQge309e317fScuZm9ybWF0
      KGssIHYsIExJTkVTRVApKQogICAgICAgIHNoT3V0ID0gc2hPdXRJTy5nZXR2YWx1ZSgpCiAgICAg
      ICAgc2hPdXRJTy5jbG9zZSgpCiAgICAgICAgcmV0dXJuIHNoT3V0CgogICAgZGVmIGdlbl9qc29u
      X291dChzZWxmKToKICAgICAgICBzZWxmLl9nZW5fb3V0cHV0X21hcCgpCiAgICAgICAganNvbl9v
      dXQgPSBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICJuYW1lIjogInJvb2stY2VwaC1t
      b24tZW5kcG9pbnRzIiwKICAgICAgICAgICAgICAgICJraW5kIjogIkNvbmZpZ01hcCIsCiAgICAg
      ICAgICAgICAgICAiZGF0YSI6IHsKICAgICAgICAgICAgICAgICAgICAiZGF0YSI6IHNlbGYub3V0
      X21hcFsnUk9PS19FWFRFUk5BTF9DRVBIX01PTl9EQVRBJ10sCiAgICAgICAgICAgICAgICAgICAg
      Im1heE1vbklkIjogIjAiLAogICAgICAgICAgICAgICAgICAgICJtYXBwaW5nIjogInt9IgogICAg
      ICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAg
      ICAibmFtZSI6ICJyb29rLWNlcGgtbW9uIiwKICAgICAgICAgICAgICAgICJraW5kIjogIlNlY3Jl
      dCIsCiAgICAgICAgICAgICAgICAiZGF0YSI6IHsKICAgICAgICAgICAgICAgICAgICAiYWRtaW4t
      c2VjcmV0IjogImFkbWluLXNlY3JldCIsCiAgICAgICAgICAgICAgICAgICAgImZzaWQiOiBzZWxm
      Lm91dF9tYXBbJ1JPT0tfRVhURVJOQUxfRlNJRCddLAogICAgICAgICAgICAgICAgICAgICJtb24t
      c2VjcmV0IjogIm1vbi1zZWNyZXQiCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAog
      ICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAibmFtZSI6ICJyb29rLWNlcGgtb3BlcmF0b3It
      Y3JlZHMiLAogICAgICAgICAgICAgICAgImtpbmQiOiAiU2VjcmV0IiwKICAgICAgICAgICAgICAg
      ICJkYXRhIjogewogICAgICAgICAgICAgICAgICAgICJ1c2VySUQiOiBzZWxmLm91dF9tYXBbJ1JP
      T0tfRVhURVJOQUxfVVNFUk5BTUUnXSwKICAgICAgICAgICAgICAgICAgICAidXNlcktleSI6IHNl
      bGYub3V0X21hcFsnUk9PS19FWFRFUk5BTF9VU0VSX1NFQ1JFVCddCiAgICAgICAgICAgICAgICB9
      CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICJuYW1lIjogInJv
      b2stY3NpLXJiZC1ub2RlIiwKICAgICAgICAgICAgICAgICJraW5kIjogIlNlY3JldCIsCiAgICAg
      ICAgICAgICAgICAiZGF0YSI6IHsKICAgICAgICAgICAgICAgICAgICAidXNlcklEIjogJ2NzaS1y
      YmQtbm9kZScsCiAgICAgICAgICAgICAgICAgICAgInVzZXJLZXkiOiBzZWxmLm91dF9tYXBbJ0NT
      SV9SQkRfTk9ERV9TRUNSRVRfU0VDUkVUJ10KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAg
      fSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgIm5hbWUiOiAiY2VwaC1yYmQiLAogICAg
      ICAgICAgICAgICAgImtpbmQiOiAiU3RvcmFnZUNsYXNzIiwKICAgICAgICAgICAgICAgICJkYXRh
      IjogewogICAgICAgICAgICAgICAgICAgICJwb29sIjogc2VsZi5vdXRfbWFwWydSQkRfUE9PTF9O
      QU1FJ10KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAg
      ICAgICAgICAgICAgIm5hbWUiOiAibW9uaXRvcmluZy1lbmRwb2ludCIsCiAgICAgICAgICAgICAg
      ICAia2luZCI6ICJDZXBoQ2x1c3RlciIsCiAgICAgICAgICAgICAgICAiZGF0YSI6IHsKICAgICAg
      ICAgICAgICAgICAgICAiTW9uaXRvcmluZ0VuZHBvaW50Ijogc2VsZi5vdXRfbWFwWydNT05JVE9S
      SU5HX0VORFBPSU5UJ10sCiAgICAgICAgICAgICAgICAgICAgIk1vbml0b3JpbmdQb3J0Ijogc2Vs
      Zi5vdXRfbWFwWydNT05JVE9SSU5HX0VORFBPSU5UX1BPUlQnXQogICAgICAgICAgICAgICAgfQog
      ICAgICAgICAgICB9CiAgICAgICAgXQoKICAgICAgICAjIGlmICdST09LX0VYVEVSTkFMX0RBU0hC
      T0FSRF9MSU5LJyBleGlzdHMsIHRoZW4gb25seSBhZGQgJ3Jvb2stY2VwaC1kYXNoYm9hcmQtbGlu
      aycgU2VjcmV0CiAgICAgICAgaWYgc2VsZi5vdXRfbWFwWydST09LX0VYVEVSTkFMX0RBU0hCT0FS
      RF9MSU5LJ106CiAgICAgICAgICAgIGpzb25fb3V0LmFwcGVuZCh7CiAgICAgICAgICAgICAgICAi
      bmFtZSI6ICJyb29rLWNlcGgtZGFzaGJvYXJkLWxpbmsiLAogICAgICAgICAgICAgICAgImtpbmQi
      OiAiU2VjcmV0IiwKICAgICAgICAgICAgICAgICJkYXRhIjogewogICAgICAgICAgICAgICAgICAg
      ICJ1c2VySUQiOiAnY2VwaC1kYXNoYm9hcmQtbGluaycsCiAgICAgICAgICAgICAgICAgICAgInVz
      ZXJLZXkiOiBzZWxmLm91dF9tYXBbJ1JPT0tfRVhURVJOQUxfREFTSEJPQVJEX0xJTksnXQogICAg
      ICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICMgaWYgJ0NTSV9SQkRfUFJPVklT
      SU9ORVJfU0VDUkVUJyBleGlzdHMsIHRoZW4gb25seSBhZGQgJ3Jvb2stY3NpLXJiZC1wcm92aXNp
      b25lcicgU2VjcmV0CiAgICAgICAgaWYgc2VsZi5vdXRfbWFwWydDU0lfUkJEX1BST1ZJU0lPTkVS
      X1NFQ1JFVCddOgogICAgICAgICAgICBqc29uX291dC5hcHBlbmQoewogICAgICAgICAgICAgICAg
      Im5hbWUiOiAicm9vay1jc2ktcmJkLXByb3Zpc2lvbmVyIiwKICAgICAgICAgICAgICAgICJraW5k
      IjogIlNlY3JldCIsCiAgICAgICAgICAgICAgICAiZGF0YSI6IHsKICAgICAgICAgICAgICAgICAg
      ICAidXNlcklEIjogJ2NzaS1yYmQtcHJvdmlzaW9uZXInLAogICAgICAgICAgICAgICAgICAgICJ1
      c2VyS2V5Ijogc2VsZi5vdXRfbWFwWydDU0lfUkJEX1BST1ZJU0lPTkVSX1NFQ1JFVCddCiAgICAg
      ICAgICAgICAgICB9LAogICAgICAgICAgICB9KQogICAgICAgICMgaWYgJ0NTSV9DRVBIRlNfUFJP
      VklTSU9ORVJfU0VDUkVUJyBleGlzdHMsIHRoZW4gb25seSBhZGQgJ3Jvb2stY3NpLWNlcGhmcy1w
      cm92aXNpb25lcicgU2VjcmV0CiAgICAgICAgaWYgc2VsZi5vdXRfbWFwWydDU0lfQ0VQSEZTX1BS
      T1ZJU0lPTkVSX1NFQ1JFVCddOgogICAgICAgICAgICBqc29uX291dC5hcHBlbmQoewogICAgICAg
      ICAgICAgICAgIm5hbWUiOiAicm9vay1jc2ktY2VwaGZzLXByb3Zpc2lvbmVyIiwKICAgICAgICAg
      ICAgICAgICJraW5kIjogIlNlY3JldCIsCiAgICAgICAgICAgICAgICAiZGF0YSI6IHsKICAgICAg
      ICAgICAgICAgICAgICAiYWRtaW5JRCI6ICdjc2ktY2VwaGZzLXByb3Zpc2lvbmVyJywKICAgICAg
      ICAgICAgICAgICAgICAiYWRtaW5LZXkiOiBzZWxmLm91dF9tYXBbJ0NTSV9DRVBIRlNfUFJPVklT
      SU9ORVJfU0VDUkVUJ10KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0pCiAgICAgICAg
      IyBpZiAnQ1NJX0NFUEhGU19OT0RFX1NFQ1JFVCcgZXhpc3RzLCB0aGVuIG9ubHkgYWRkICdyb29r
      LWNzaS1jZXBoZnMtbm9kZScgU2VjcmV0CiAgICAgICAgaWYgc2VsZi5vdXRfbWFwWydDU0lfQ0VQ
      SEZTX05PREVfU0VDUkVUJ106CiAgICAgICAgICAgIGpzb25fb3V0LmFwcGVuZCh7CiAgICAgICAg
      ICAgICAgICAibmFtZSI6ICJyb29rLWNzaS1jZXBoZnMtbm9kZSIsCiAgICAgICAgICAgICAgICAi
      a2luZCI6ICJTZWNyZXQiLAogICAgICAgICAgICAgICAgImRhdGEiOiB7CiAgICAgICAgICAgICAg
      ICAgICAgImFkbWluSUQiOiAnY3NpLWNlcGhmcy1ub2RlJywKICAgICAgICAgICAgICAgICAgICAi
      YWRtaW5LZXkiOiBzZWxmLm91dF9tYXBbJ0NTSV9DRVBIRlNfTk9ERV9TRUNSRVQnXQogICAgICAg
      ICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICMgaWYgJ0NFUEhGU19GU19OQU1FJyBl
      eGlzdHMsIHRoZW4gb25seSBhZGQgJ2NlcGhmcycgU3RvcmFnZUNsYXNzCiAgICAgICAgaWYgc2Vs
      Zi5vdXRfbWFwWydDRVBIRlNfRlNfTkFNRSddOgogICAgICAgICAgICBqc29uX291dC5hcHBlbmQo
      ewogICAgICAgICAgICAgICAgIm5hbWUiOiAiY2VwaGZzIiwKICAgICAgICAgICAgICAgICJraW5k
      IjogIlN0b3JhZ2VDbGFzcyIsCiAgICAgICAgICAgICAgICAiZGF0YSI6IHsKICAgICAgICAgICAg
      ICAgICAgICAiZnNOYW1lIjogc2VsZi5vdXRfbWFwWydDRVBIRlNfRlNfTkFNRSddLAogICAgICAg
      ICAgICAgICAgICAgICJwb29sIjogc2VsZi5vdXRfbWFwWydDRVBIRlNfUE9PTF9OQU1FJ10KICAg
      ICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAjIGlmICdSR1dfRU5EUE9JTlQn
      IGV4aXN0cywgdGhlbiBvbmx5IGFkZCAnY2VwaC1yZ3cnIFN0b3JhZ2VDbGFzcwogICAgICAgIGlm
      IHNlbGYub3V0X21hcFsnUkdXX0VORFBPSU5UJ106CiAgICAgICAgICAgIGpzb25fb3V0LmFwcGVu
      ZCh7CiAgICAgICAgICAgICAgICAibmFtZSI6ICJjZXBoLXJndyIsCiAgICAgICAgICAgICAgICAi
      a2luZCI6ICJTdG9yYWdlQ2xhc3MiLAogICAgICAgICAgICAgICAgImRhdGEiOiB7CiAgICAgICAg
      ICAgICAgICAgICAgImVuZHBvaW50Ijogc2VsZi5vdXRfbWFwWydSR1dfRU5EUE9JTlQnXSwKICAg
      ICAgICAgICAgICAgICAgICAicG9vbFByZWZpeCI6IHNlbGYub3V0X21hcFsnUkdXX1BPT0xfUFJF
      RklYJ10KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAganNvbl9v
      dXQuYXBwZW5kKAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICJuYW1lIjog
      InJndy1hZG1pbi1vcHMtdXNlciIsCiAgICAgICAgICAgICAgICAgICAgImtpbmQiOiAiU2VjcmV0
      IiwKICAgICAgICAgICAgICAgICAgICAiZGF0YSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAg
      ImFjY2Vzc0tleSI6IHNlbGYub3V0X21hcFsnQUNDRVNTX0tFWSddLAogICAgICAgICAgICAgICAg
      ICAgICAgICAic2VjcmV0S2V5Ijogc2VsZi5vdXRfbWFwWydTRUNSRVRfS0VZJ10KICAgICAgICAg
      ICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICMgaWYgJ1JHV19UTFNfQ0VS
      VCcgZXhpc3RzLCB0aGVuIG9ubHkgYWRkIHRoZSAiY2VwaC1yZ3ctdGxzLWNlcnQiIHNlY3JldAog
      ICAgICAgIGlmIHNlbGYub3V0X21hcFsnUkdXX1RMU19DRVJUJ106CiAgICAgICAgICAgIGpzb25f
      b3V0LmFwcGVuZCh7CiAgICAgICAgICAgICAgICAibmFtZSI6ICJjZXBoLXJndy10bHMtY2VydCIs
      CiAgICAgICAgICAgICAgICAia2luZCI6ICJTZWNyZXQiLAogICAgICAgICAgICAgICAgImRhdGEi
      OiB7CiAgICAgICAgICAgICAgICAgICAgImNlcnQiOiBzZWxmLm91dF9tYXBbJ1JHV19UTFNfQ0VS
      VCddLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgIHJldHVybiBqc29u
      LmR1bXBzKGpzb25fb3V0KStMSU5FU0VQCgogICAgZGVmIHVwZ3JhZGVfdXNlcl9wZXJtaXNzaW9u
      cyhzZWxmKToKICAgICAgICAjIGNoZWNrIHdoZXRoZXIgdGhlIGdpdmVuIHVzZXIgZXhpc3RzIG9y
      IG5vdAogICAgICAgIGNtZF9qc29uID0geyJwcmVmaXgiOiAiYXV0aCBnZXQiLCAiZW50aXR5Ijog
      Int9Ii5mb3JtYXQoCiAgICAgICAgICAgIHNlbGYucnVuX2FzX3VzZXIpLCAiZm9ybWF0IjogImpz
      b24ifQogICAgICAgIHJldF92YWwsIGpzb25fb3V0LCBlcnJfbXNnID0gc2VsZi5fY29tbW9uX2Nt
      ZF9qc29uX2dlbihjbWRfanNvbikKICAgICAgICBpZiByZXRfdmFsICE9IDAgb3IgbGVuKGpzb25f
      b3V0KSA9PSAwOgogICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKCIn
      YXV0aCBnZXQge30nIGNvbW1hbmQgZmFpbGVkLlxuIi5mb3JtYXQoc2VsZi5ydW5fYXNfdXNlcikg
      KwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJFcnJvcjoge30i
      LmZvcm1hdChlcnJfbXNnIGlmIHJldF92YWwgIT0gMCBlbHNlIHNlbGYuRU1QVFlfT1VUUFVUX0xJ
      U1QpKQogICAgICAgIGpfZmlyc3QgPSBqc29uX291dFswXQogICAgICAgIGV4aXN0aW5nX2NhcHMg
      PSBqX2ZpcnN0WydjYXBzJ10KICAgICAgICBvc2RfY2FwID0gIm9zZCIKICAgICAgICBjYXBfa2V5
      cyA9IFsibW9uIiwgIm1nciIsICJvc2QiXQogICAgICAgIGZvciBlYWNoQ2FwIGluIGNhcF9rZXlz
      OgogICAgICAgICAgICBtaW5fY2FwX3ZhbHVlcyA9IHNlbGYuTUlOX1VTRVJfQ0FQX1BFUk1JU1NJ
      T05TLmdldChlYWNoQ2FwLCAnJykKICAgICAgICAgICAgY3VyX2NhcF92YWx1ZXMgPSBleGlzdGlu
      Z19jYXBzLmdldChlYWNoQ2FwLCAnJykKICAgICAgICAgICAgIyBkZXRlY3Qgcmd3LXBvb2wtcHJl
      Zml4CiAgICAgICAgICAgIGlmIGVhY2hDYXAgPT0gb3NkX2NhcDoKICAgICAgICAgICAgICAgICMg
      aWYgZGlyZWN0bHkgcHJvdmlkZWQgdGhyb3VnaCAnLS1yZ3ctcG9vbC1wcmVmaXgnIGFyZ3VtZW50
      LCB1c2UgaXQKICAgICAgICAgICAgICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIucmd3X3Bvb2xfcHJl
      Zml4OgogICAgICAgICAgICAgICAgICAgIG1pbl9jYXBfdmFsdWVzID0gbWluX2NhcF92YWx1ZXMu
      Zm9ybWF0KAogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLnJnd19wb29s
      X3ByZWZpeCkKICAgICAgICAgICAgICAgICMgb3IgZWxzZSB0cnkgdG8gZGV0ZWN0IG9uZSBmcm9t
      IHRoZSBleGlzdGluZy9jdXJyZW50IG9zZCBjYXAgdmFsdWVzCiAgICAgICAgICAgICAgICBlbHNl
      OgogICAgICAgICAgICAgICAgICAgIHJjID0gcmUuY29tcGlsZShyJyBwb29sPShbXi5dKylcLnJn
      d1wuW14gXSonKQogICAgICAgICAgICAgICAgICAgICMgJ2ZpbmRhbGwoKScgbWV0aG9kIHdpbGwg
      Z2l2ZSBhIGxpc3Qgb2YgcHJlZml4ZXMKICAgICAgICAgICAgICAgICAgICAjIGFuZCAnc2V0JyB3
      aWxsIGVsaW1pbmF0ZSBhbnkgZHVwbGljYXRlcwogICAgICAgICAgICAgICAgICAgIGN1cl9yZ3df
      cG9vbF9wcmVmaXhfbGlzdCA9IGxpc3QoCiAgICAgICAgICAgICAgICAgICAgICAgIHNldChyYy5m
      aW5kYWxsKGN1cl9jYXBfdmFsdWVzKSkpCiAgICAgICAgICAgICAgICAgICAgaWYgbGVuKGN1cl9y
      Z3dfcG9vbF9wcmVmaXhfbGlzdCkgIT0gMToKICAgICAgICAgICAgICAgICAgICAgICAgcmFpc2Ug
      RXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJV
      bmFibGUgdG8gZGV0ZXJtaW5lICdyZ3ctcG9vbC1wcmVmeCcuIFBsZWFzZSBwcm92aWRlIG9uZSB3
      aXRoICctLXJndy1wb29sLXByZWZpeCcgZmxhZyIpCiAgICAgICAgICAgICAgICAgICAgbWluX2Nh
      cF92YWx1ZXMgPSBtaW5fY2FwX3ZhbHVlcy5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgICAg
      IGN1cl9yZ3dfcG9vbF9wcmVmaXhfbGlzdFswXSkKICAgICAgICAgICAgY3VyX2NhcF9wZXJtX2xp
      c3QgPSBbeC5zdHJpcCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciB4IGlu
      IGN1cl9jYXBfdmFsdWVzLnNwbGl0KCcsJykgaWYgeC5zdHJpcCgpXQogICAgICAgICAgICBtaW5f
      Y2FwX3Blcm1fbGlzdCA9IFt4LnN0cmlwKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
      ICAgZm9yIHggaW4gbWluX2NhcF92YWx1ZXMuc3BsaXQoJywnKSBpZiB4LnN0cmlwKCldCiAgICAg
      ICAgICAgIG1pbl9jYXBfcGVybV9saXN0LmV4dGVuZChjdXJfY2FwX3Blcm1fbGlzdCkKICAgICAg
      ICAgICAgIyBlbGltaW5hdGUgZHVwbGljYXRlcyB3aXRob3V0IHVzaW5nICdzZXQnCiAgICAgICAg
      ICAgICMgc2V0IHJlLW9yZGVycyBpdGVtcyBpbiB0aGUgbGlzdCBhbmQgd2UgaGF2ZSB0byBrZWVw
      IHRoZSBvcmRlcgogICAgICAgICAgICBuZXdfY2FwX3Blcm1fbGlzdCA9IFtdCiAgICAgICAgICAg
      IFtuZXdfY2FwX3Blcm1fbGlzdC5hcHBlbmQoCiAgICAgICAgICAgICAgICB4KSBmb3IgeCBpbiBt
      aW5fY2FwX3Blcm1fbGlzdCBpZiB4IG5vdCBpbiBuZXdfY2FwX3Blcm1fbGlzdF0KICAgICAgICAg
      ICAgZXhpc3RpbmdfY2Fwc1tlYWNoQ2FwXSA9ICIsICIuam9pbihuZXdfY2FwX3Blcm1fbGlzdCkK
      ICAgICAgICBjbWRfanNvbiA9IHsicHJlZml4IjogImF1dGggY2FwcyIsCiAgICAgICAgICAgICAg
      ICAgICAgImVudGl0eSI6IHNlbGYucnVuX2FzX3VzZXIsCiAgICAgICAgICAgICAgICAgICAgImNh
      cHMiOiBbIm1vbiIsIGV4aXN0aW5nX2NhcHNbIm1vbiJdLAogICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgICJtZ3IiLCBleGlzdGluZ19jYXBzWyJtZ3IiXSwKICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgICAib3NkIiwgZXhpc3RpbmdfY2Fwc1sib3NkIl1dLAogICAgICAgICAgICAgICAgICAg
      ICJmb3JtYXQiOiAianNvbiJ9CiAgICAgICAgcmV0X3ZhbCwganNvbl9vdXQsIGVycl9tc2cgPSBz
      ZWxmLl9jb21tb25fY21kX2pzb25fZ2VuKGNtZF9qc29uKQogICAgICAgIGlmIHJldF92YWwgIT0g
      MDoKICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigiJ2F1dGggY2Fw
      cyB7fScgY29tbWFuZCBmYWlsZWQuXG4iLmZvcm1hdChzZWxmLnJ1bl9hc191c2VyKSArCiAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIkVycm9yOiB7fSIuZm9ybWF0
      KGVycl9tc2cpKQogICAgICAgIHByaW50KCJVcGRhdGVkIHVzZXIsIHt9LCBzdWNjZXNzZnVsbHku
      Ii5mb3JtYXQoc2VsZi5ydW5fYXNfdXNlcikpCgogICAgZGVmIG1haW4oc2VsZik6CiAgICAgICAg
      Z2VuZXJhdGVkX291dHB1dCA9ICcnCiAgICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci51cGdyYWRl
      OgogICAgICAgICAgICBzZWxmLnVwZ3JhZGVfdXNlcl9wZXJtaXNzaW9ucygpCiAgICAgICAgZWxp
      ZiBzZWxmLl9hcmdfcGFyc2VyLmZvcm1hdCA9PSAnanNvbic6CiAgICAgICAgICAgIGdlbmVyYXRl
      ZF9vdXRwdXQgPSBzZWxmLmdlbl9qc29uX291dCgpCiAgICAgICAgZWxpZiBzZWxmLl9hcmdfcGFy
      c2VyLmZvcm1hdCA9PSAnYmFzaCc6CiAgICAgICAgICAgIGdlbmVyYXRlZF9vdXRwdXQgPSBzZWxm
      Lmdlbl9zaGVsbF9vdXQoKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlv
      bkZhaWx1cmVFeGNlcHRpb24oIlVuc3VwcG9ydGVkIGZvcm1hdDoge30iLmZvcm1hdCgKICAgICAg
      ICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIuZm9ybWF0KSkKICAgICAgICBwcmludCgne30nLmZv
      cm1hdChnZW5lcmF0ZWRfb3V0cHV0KSkKICAgICAgICBpZiBzZWxmLm91dHB1dF9maWxlIGFuZCBn
      ZW5lcmF0ZWRfb3V0cHV0OgogICAgICAgICAgICBmT3V0ID0gb3BlbihzZWxmLm91dHB1dF9maWxl
      LCAndycpCiAgICAgICAgICAgIGZPdXQud3JpdGUoZ2VuZXJhdGVkX291dHB1dCkKICAgICAgICAg
      ICAgZk91dC5jbG9zZSgpCgoKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
      IyMjIyMjIyMjCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyBNQUlOICMjIyMjIyMjIyMjIyMjIyMjIyMj
      IwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKaWYgX19u
      YW1lX18gPT0gJ19fbWFpbl9fJzoKICAgIHJqT2JqID0gUmFkb3NKU09OKCkKICAgIHRyeToKICAg
      ICAgICByak9iai5tYWluKCkKICAgIGV4Y2VwdCBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uIGFz
      IGVycjoKICAgICAgICBwcmludCgiRXhlY3V0aW9uIEZhaWxlZDoge30iLmZvcm1hdChlcnIpKQog
      ICAgICAgIHJhaXNlIGVycgogICAgZXhjZXB0IEtleUVycm9yIGFzIGtFcnI6CiAgICAgICAgcHJp
      bnQoIktleUVycm9yOiAlcyIsIGtFcnIpCiAgICBleGNlcHQgT1NFcnJvciBhcyBvc0VycjoKICAg
      ICAgICBwcmludCgiRXJyb3Igd2hpbGUgdHJ5aW5nIHRvIG91dHB1dCB0aGUgZGF0YToge30iLmZv
      cm1hdChvc0VycikpCiAgICBmaW5hbGx5OgogICAgICAgIHJqT2JqLnNodXRkb3duKCkKCgojIyMj
      IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyMjIyMjIyMjIyMj
      IyMjIyMjIyMjIFRFU1QgIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIyMjIyMjIyMjIyMjIyMjIyMj
      IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIGlub3JkZXIgdG8gdGVzdCB0aGUgcGFja2Fn
      ZSwKIyBjZCA8c2NyaXB0X2RpcmVjdG9yeT4KIyBweXRob24gLW0gdW5pdHRlc3QgLS12ZXJib3Nl
      IDxzY3JpcHRfbmFtZV93aXRob3V0X2RvdF9weT4KY2xhc3MgVGVzdFJhZG9zSlNPTih1bml0dGVz
      dC5UZXN0Q2FzZSk6CiAgICBkZWYgc2V0VXAoc2VsZik6CiAgICAgICAgcHJpbnQoIlxuSSBhbSBp
      biBzZXR1cCIpCiAgICAgICAgc2VsZi5yak9iaiA9IFJhZG9zSlNPTihbJy0tcmJkLWRhdGEtcG9v
      bC1uYW1lPWFiYycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJy0tcmd3LWVuZHBv
      aW50PTEwLjEwLjIxMi4xMjI6OTAwMCcsICctLWZvcm1hdD1qc29uJ10pCiAgICAgICAgIyBmb3Ig
      dGVzdGluZywgd2UgYXJlIHVzaW5nICdEdW1teVJhZG9zJyBvYmplY3QKICAgICAgICBzZWxmLnJq
      T2JqLmNsdXN0ZXIgPSBEdW1teVJhZG9zLlJhZG9zKCkKCiAgICBkZWYgdGVhckRvd24oc2VsZik6
      CiAgICAgICAgcHJpbnQoIlxuSSBhbSB0ZWFyaW5nIGRvd24gdGhlIHNldHVwXG4iKQogICAgICAg
      IHNlbGYucmpPYmouc2h1dGRvd24oKQoKICAgIGRlZiB0ZXN0X21ldGhvZF9tYWluX291dHB1dChz
      ZWxmKToKICAgICAgICBwcmludCgiSlNPTiBPdXRwdXQiKQogICAgICAgIHNlbGYucmpPYmouX2Fy
      Z19wYXJzZXIuZm9ybWF0ID0gImpzb24iCiAgICAgICAgc2VsZi5yak9iai5tYWluKCkKICAgICAg
      ICBwcmludCgiXG5cblNoZWxsIE91dHB1dCIpCiAgICAgICAgc2VsZi5yak9iai5fYXJnX3BhcnNl
      ci5mb3JtYXQgPSAiYmFzaCIKICAgICAgICBzZWxmLnJqT2JqLm1haW4oKQogICAgICAgIHByaW50
      KCJcblxuTm9uIGNvbXBhdGlibGUgb3V0cHV0ICgtLWFiY2QpIikKICAgICAgICB0cnk6CiAgICAg
      ICAgICAgIHNlbGYucmpPYmouX2FyZ19wYXJzZXIuZm9ybWF0ID0gJ2FiY2QnCiAgICAgICAgICAg
      IHNlbGYucmpPYmoubWFpbigpCiAgICAgICAgICAgIHNlbGYuZmFpbCgiRnVuY3Rpb24gc2hvdWxk
      IGhhdmUgdGhyb3duIGFuIEV4Y2VwdGlvbiIpCiAgICAgICAgZXhjZXB0IEV4ZWN1dGlvbkZhaWx1
      cmVFeGNlcHRpb24gYXMgZXJyOgogICAgICAgICAgICBwcmludCgiRXhjZXB0aW9uIHRocm93biBz
      dWNjZXNzZnVsbHk6IHt9Ii5mb3JtYXQoZXJyKSkKCiAgICBkZWYgdGVzdF9tZXRob2RfY3JlYXRl
      X2NlcGhDU0lLZXlyaW5nX2NlcGhGU1Byb3Zpc2lvbmVyKHNlbGYpOgogICAgICAgIGNzaUtleXJp
      bmcgPSBzZWxmLnJqT2JqLmNyZWF0ZV9jZXBoQ1NJS2V5cmluZ19jZXBoRlNQcm92aXNpb25lcigp
      CiAgICAgICAgcHJpbnQoInt9Ii5mb3JtYXQoY3NpS2V5cmluZykpCgogICAgZGVmIHRlc3Rfbm9u
      X3plcm9fcmV0dXJuX2FuZF9lcnJvcihzZWxmKToKICAgICAgICBzZWxmLnJqT2JqLmNsdXN0ZXIu
      cmV0dXJuX3ZhbCA9IDEKICAgICAgICBzZWxmLnJqT2JqLmNsdXN0ZXIuZXJyX21lc3NhZ2UgPSAi
      RHVtbXkgRXJyb3IiCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLnJqT2JqLmNyZWF0ZV9j
      aGVja2VyS2V5KCkKICAgICAgICAgICAgc2VsZi5mYWlsKCJGYWlsZWQgdG8gcmFpc2UgYW4gZXhj
      ZXB0aW9uLCAnRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbiciKQogICAgICAgIGV4Y2VwdCBFeGVj
      dXRpb25GYWlsdXJlRXhjZXB0aW9uIGFzIGVycjoKICAgICAgICAgICAgcHJpbnQoIlN1Y2Nlc3Nm
      dWxseSB0aHJvd24gZXJyb3IuXG5FcnJvcjoge30iLmZvcm1hdChlcnIpKQoKICAgIGRlZiB0ZXN0
      X211bHRpX2ZpbGVzeXN0ZW1fc2NlbmFyaW8oc2VsZik6CiAgICAgICAgY21kX2tleSA9IHNlbGYu
      cmpPYmouY2x1c3Rlci5jbWRfbmFtZXNbJ2ZzIGxzJ10KICAgICAgICBjbWRfb3V0ID0gc2VsZi5y
      ak9iai5jbHVzdGVyLmNtZF9vdXRwdXRfbWFwW2NtZF9rZXldCiAgICAgICAgY21kX2pzb25fb3V0
      ID0ganNvbi5sb2FkcyhjbWRfb3V0KQogICAgICAgIHNlY29uZF9mc19kZXRhaWxzID0gZGljdChj
      bWRfanNvbl9vdXRbMF0pCiAgICAgICAgc2Vjb25kX2ZzX2RldGFpbHNbJ25hbWUnXSArPSAnLTIn
      CiAgICAgICAgY21kX2pzb25fb3V0LmFwcGVuZChzZWNvbmRfZnNfZGV0YWlscykKICAgICAgICBz
      ZWxmLnJqT2JqLmNsdXN0ZXIuY21kX291dHB1dF9tYXBbY21kX2tleV0gPSBqc29uLmR1bXBzKGNt
      ZF9qc29uX291dCkKICAgICAgICAjIG11bHRpcGxlIGZpbGVzeXN0ZW0gcHJlc2VudCwKICAgICAg
      ICAjIGJ1dCBubyBzcGVjaWZpYyAnLS1jZXBoZnMtZmlsZXN5c3RlbS1uYW1lJyBhcmd1bWVudCBw
      cm92aWRlZAogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5yak9iai5nZXRfY2VwaGZzX2Rh
      dGFfcG9vbF9kZXRhaWxzKCkKICAgICAgICAgICAgcHJpbnQoIkFzIHdlIGFyZSByZXR1cm5pbmcg
      c2lsZW50bHksIG5vIGVycm9yIHRocm93biBhcyBleHBlY3RlZCIpCiAgICAgICAgZXhjZXB0IEV4
      ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24gYXMgZXJyOgogICAgICAgICAgICBzZWxmLmZhaWwoCiAg
      ICAgICAgICAgICAgICAiU3VwcG9zZWQgdG8gZ2V0IHJldHVybmVkIHNpbGVudGx5LCBidXQgaW5z
      dGVhZCBlcnJvciB0aHJvd246IHt9Ii5mb3JtYXQoZXJyKSkKICAgICAgICAjIHBhc3MgYW4gZXhp
      c3RpbmcgZmlsZXN5c3RlbSBuYW1lCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLnJqT2Jq
      Ll9hcmdfcGFyc2VyLmNlcGhmc19maWxlc3lzdGVtX25hbWUgPSBzZWNvbmRfZnNfZGV0YWlsc1sn
      bmFtZSddCiAgICAgICAgICAgIHNlbGYucmpPYmouZ2V0X2NlcGhmc19kYXRhX3Bvb2xfZGV0YWls
      cygpCiAgICAgICAgZXhjZXB0IEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24gYXMgZXJyOgogICAg
      ICAgICAgICBzZWxmLmZhaWwoIlNob3VsZCBub3QgaGF2ZSB0aHJvd24gZXJyb3I6IHt9Ii5mb3Jt
      YXQoZXJyKSkKICAgICAgICAjIHBhc3MgYSBub24tZXhpc3RpbmcgZmlsZXN5c3RlbSBuYW1lCiAg
      ICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLnJqT2JqLl9hcmdfcGFyc2VyLmNlcGhmc19maWxl
      c3lzdGVtX25hbWUgKz0gIi1ub24tZXhpc3RpbmctZnMtbmFtZSIKICAgICAgICAgICAgc2VsZi5y
      ak9iai5nZXRfY2VwaGZzX2RhdGFfcG9vbF9kZXRhaWxzKCkKICAgICAgICAgICAgc2VsZi5mYWls
      KCJBbiBFeGNlcHRpb24gd2FzIGV4cGVjdGVkIHRvIGJlIHRocm93biIpCiAgICAgICAgZXhjZXB0
      IEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24gYXMgZXJyOgogICAgICAgICAgICBwcmludCgiU3Vj
      Y2Vzc2Z1bGx5IHRocm93biBlcnJvcjoge30iLmZvcm1hdChlcnIpKQogICAgICAgICMgZW1wdHkg
      ZmlsZS1zeXN0ZW0gYXJyYXkKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYucmpPYmouY2x1
      c3Rlci5jbWRfb3V0cHV0X21hcFtjbWRfa2V5XSA9IGpzb24uZHVtcHMoW10pCiAgICAgICAgICAg
      IHNlbGYucmpPYmouZ2V0X2NlcGhmc19kYXRhX3Bvb2xfZGV0YWlscygpCiAgICAgICAgICAgIHNl
      bGYuZmFpbCgiQW4gRXhjZXB0aW9uIHdhcyBleHBlY3RlZCB0byBiZSB0aHJvd24iKQogICAgICAg
      IGV4Y2VwdCBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uIGFzIGVycjoKICAgICAgICAgICAgcHJp
      bnQoIlN1Y2Nlc3NmdWxseSB0aHJvd24gZXJyb3I6IHt9Ii5mb3JtYXQoZXJyKSkKCiAgICBkZWYg
      dGVzdF9tdWx0aV9kYXRhX3Bvb2xfc2NlbmFyaW8oc2VsZik6CiAgICAgICAgY21kX2tleSA9IHNl
      bGYucmpPYmouY2x1c3Rlci5jbWRfbmFtZXNbJ2ZzIGxzJ10KICAgICAgICBjbWRfb3V0ID0gc2Vs
      Zi5yak9iai5jbHVzdGVyLmNtZF9vdXRwdXRfbWFwW2NtZF9rZXldCiAgICAgICAgY21kX2pzb25f
      b3V0ID0ganNvbi5sb2FkcyhjbWRfb3V0KQogICAgICAgIGZpcnN0X2ZzX2RldGFpbHMgPSBjbWRf
      anNvbl9vdXRbMF0KICAgICAgICBuZXdfZGF0YV9wb29sX25hbWUgPSAnbXlmcy1kYXRhMScKICAg
      ICAgICBmaXJzdF9mc19kZXRhaWxzWydkYXRhX3Bvb2xzJ10uYXBwZW5kKG5ld19kYXRhX3Bvb2xf
      bmFtZSkKICAgICAgICBwcmludCgiTW9kaWZpZWQgSlNPTiBDbWQgT3V0OiB7fSIuZm9ybWF0KGNt
      ZF9qc29uX291dCkpCiAgICAgICAgc2VsZi5yak9iai5fYXJnX3BhcnNlci5jZXBoZnNfZGF0YV9w
      b29sX25hbWUgPSBuZXdfZGF0YV9wb29sX25hbWUKICAgICAgICBzZWxmLnJqT2JqLmNsdXN0ZXIu
      Y21kX291dHB1dF9tYXBbY21kX2tleV0gPSBqc29uLmR1bXBzKGNtZF9qc29uX291dCkKICAgICAg
      ICBzZWxmLnJqT2JqLmdldF9jZXBoZnNfZGF0YV9wb29sX2RldGFpbHMoKQogICAgICAgICMgdXNl
      IGEgbm9uLWV4aXN0aW5nIGRhdGEtcG9vbC1uYW1lCiAgICAgICAgYmFkX2RhdGFfcG9vbF9uYW1l
      ID0gJ215ZnMtZGF0YTMnCiAgICAgICAgc2VsZi5yak9iai5fYXJnX3BhcnNlci5jZXBoZnNfZGF0
      YV9wb29sX25hbWUgPSBiYWRfZGF0YV9wb29sX25hbWUKICAgICAgICB0cnk6CiAgICAgICAgICAg
      IHNlbGYucmpPYmouZ2V0X2NlcGhmc19kYXRhX3Bvb2xfZGV0YWlscygpCiAgICAgICAgICAgIHNl
      bGYuZmFpbCgiQW4gRXhjZXB0aW9uIHdhcyBleHBlY3RlZCB0byBiZSB0aHJvd24iKQogICAgICAg
      IGV4Y2VwdCBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uIGFzIGVycjoKICAgICAgICAgICAgcHJp
      bnQoIlN1Y2Nlc3NmdWxseSB0aHJvd24gZXJyb3I6IHt9Ii5mb3JtYXQoZXJyKSkKICAgICAgICAj
      IGVtcHR5IGRhdGEtcG9vbCBzY2VuYXJpbwogICAgICAgIGZpcnN0X2ZzX2RldGFpbHNbJ2RhdGFf
      cG9vbHMnXSA9IFtdCiAgICAgICAgc2VsZi5yak9iai5jbHVzdGVyLmNtZF9vdXRwdXRfbWFwW2Nt
      ZF9rZXldID0ganNvbi5kdW1wcyhjbWRfanNvbl9vdXQpCiAgICAgICAgdHJ5OgogICAgICAgICAg
      ICBzZWxmLnJqT2JqLmdldF9jZXBoZnNfZGF0YV9wb29sX2RldGFpbHMoKQogICAgICAgICAgICBz
      ZWxmLmZhaWwoIkFuIEV4Y2VwdGlvbiB3YXMgZXhwZWN0ZWQgdG8gYmUgdGhyb3duIikKICAgICAg
      ICBleGNlcHQgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbiBhcyBlcnI6CiAgICAgICAgICAgIHBy
      aW50KCJTdWNjZXNzZnVsbHkgdGhyb3duIGVycm9yOiB7fSIuZm9ybWF0KGVycikpCgogICAgZGVm
      IHRlc3RfdmFsaWRfcmd3X2VuZHBvaW50KHNlbGYpOgogICAgICAgIHNlbGYucmpPYmouX2ludmFs
      aWRfZW5kcG9pbnQoIjEwLjEwLjIxMi4xMzM6ODAwMCIpCiAgICAgICAgIyBpbnZhbGlkIHBvcnQK
      ICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYucmpPYmouX2ludmFsaWRfZW5kcG9pbnQoIjEw
      LjEwLjIxMi4xMzM6MjM4MDAwIikKICAgICAgICAgICAgc2VsZi5mYWlsKCJBbiBFeGNlcHRpb24g
      d2FzIGV4cGVjdGVkIHRvIGJlIHRocm93biIpCiAgICAgICAgZXhjZXB0IEV4ZWN1dGlvbkZhaWx1
      cmVFeGNlcHRpb24gYXMgZXJyOgogICAgICAgICAgICBwcmludCgiU3VjY2Vzc2Z1bGx5IHRocm93
      biBlcnJvcjoge30iLmZvcm1hdChlcnIpKQogICAgICAgICMgb3V0IG9mIHJhbmdlIElQCiAgICAg
      ICAgdHJ5OgogICAgICAgICAgICBzZWxmLnJqT2JqLl9pbnZhbGlkX2VuZHBvaW50KCIxMC4xMDMz
      LjIxMi4xMzM6ODAwMCIpCiAgICAgICAgICAgIHNlbGYuZmFpbCgiQW4gRXhjZXB0aW9uIHdhcyBl
      eHBlY3RlZCB0byBiZSB0aHJvd24iKQogICAgICAgIGV4Y2VwdCBFeGVjdXRpb25GYWlsdXJlRXhj
      ZXB0aW9uIGFzIGVycjoKICAgICAgICAgICAgcHJpbnQoIlN1Y2Nlc3NmdWxseSB0aHJvd24gZXJy
      b3I6IHt9Ii5mb3JtYXQoZXJyKSkKICAgICAgICAjIG1hbCBmb3JtYXR0ZWQgSVAKICAgICAgICB0
      cnk6CiAgICAgICAgICAgIHNlbGYucmpPYmouX2ludmFsaWRfZW5kcG9pbnQoIjEwLjEwMy4uMjEy
      LjEzMzo4MDAwIikKICAgICAgICAgICAgc2VsZi5mYWlsKCJBbiBFeGNlcHRpb24gd2FzIGV4cGVj
      dGVkIHRvIGJlIHRocm93biIpCiAgICAgICAgZXhjZXB0IEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRp
      b24gYXMgZXJyOgogICAgICAgICAgICBwcmludCgiU3VjY2Vzc2Z1bGx5IHRocm93biBlcnJvcjog
      e30iLmZvcm1hdChlcnIpKQogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5yak9iai5faW52
      YWxpZF9lbmRwb2ludCgiMTAuMTAzLjIxMi4xMzM6OjgwMDAiKQogICAgICAgICAgICBzZWxmLmZh
      aWwoIkFuIEV4Y2VwdGlvbiB3YXMgZXhwZWN0ZWQgdG8gYmUgdGhyb3duIikKICAgICAgICBleGNl
      cHQgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbiBhcyBlcnI6CiAgICAgICAgICAgIHByaW50KCJT
      dWNjZXNzZnVsbHkgdGhyb3duIGVycm9yOiB7fSIuZm9ybWF0KGVycikpCiAgICAgICAgdHJ5Ogog
      ICAgICAgICAgICBzZWxmLnJqT2JqLl9pbnZhbGlkX2VuZHBvaW50KCIxMC4xMC4xMDMuMjEyLjEz
      Mzo4MDAwIikKICAgICAgICAgICAgc2VsZi5mYWlsKCJBbiBFeGNlcHRpb24gd2FzIGV4cGVjdGVk
      IHRvIGJlIHRocm93biIpCiAgICAgICAgZXhjZXB0IEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24g
      YXMgZXJyOgogICAgICAgICAgICBwcmludCgiU3VjY2Vzc2Z1bGx5IHRocm93biBlcnJvcjoge30i
      LmZvcm1hdChlcnIpKQoKICAgIGRlZiBhZGRfbm9uX2RlZmF1bHRfcG9vbF9wcmVmaXhfY21kKHNl
      bGYsIG5vbl9kZWZhdWx0X3Bvb2xfcHJlZml4KToKICAgICAgICBqc29uX2NtZCA9IGpzb24ubG9h
      ZHMoCiAgICAgICAgICAgIHNlbGYucmpPYmouY2x1c3Rlci5jbWRfbmFtZXNbJ2NhcHNfY2hhbmdl
      X2RlZmF1bHRfcG9vbF9wcmVmaXgnXSkKICAgICAgICBjdXJfb3NkX2NhcHMgPSBqc29uX2NtZFsn
      Y2FwcyddW2pzb25fY21kWydjYXBzJ10uaW5kZXgoJ29zZCcpICsgMV0KICAgICAgICBuZXdfb3Nk
      X2NhcHMgPSBjdXJfb3NkX2NhcHMucmVwbGFjZSgKICAgICAgICAgICAgJ2RlZmF1bHQuJywgJ3t9
      LicuZm9ybWF0KG5vbl9kZWZhdWx0X3Bvb2xfcHJlZml4KSkKICAgICAgICBhbGxfb3NkX2NhcHMg
      PSAie30sIHt9Ii5mb3JtYXQobmV3X29zZF9jYXBzLCBjdXJfb3NkX2NhcHMpCiAgICAgICAgY2Fw
      c19saXN0ID0gW3guc3RyaXAoKSBmb3IgeCBpbiBhbGxfb3NkX2NhcHMuc3BsaXQoJywnKSBpZiB4
      LnN0cmlwKCldCiAgICAgICAgbmV3X2NhcHNfbGlzdCA9IFtdCiAgICAgICAgW25ld19jYXBzX2xp
      c3QuYXBwZW5kKHgpIGZvciB4IGluIGNhcHNfbGlzdCBpZiB4IG5vdCBpbiBuZXdfY2Fwc19saXN0
      XQogICAgICAgIGFsbF9vc2RfY2FwcyA9ICIsICIuam9pbihuZXdfY2Fwc19saXN0KQogICAgICAg
      IGpzb25fY21kWydjYXBzJ11banNvbl9jbWRbJ2NhcHMnXS5pbmRleCgnb3NkJykgKyAxXSA9IGFs
      bF9vc2RfY2FwcwogICAgICAgIHNlbGYucmpPYmouY2x1c3Rlci5jbWRfbmFtZXNbJ2NhcHNfY2hh
      bmdlX25vbl9kZWZhdWx0X3Bvb2xfcHJlZml4J10gPSBqc29uLmR1bXBzKAogICAgICAgICAgICBq
      c29uX2NtZCkKICAgICAgICBzZWxmLnJqT2JqLmNsdXN0ZXIuY21kX291dHB1dF9tYXBbCiAgICAg
      ICAgICAgIHNlbGYucmpPYmouY2x1c3Rlci5jbWRfbmFtZXNbJ2NhcHNfY2hhbmdlX25vbl9kZWZh
      dWx0X3Bvb2xfcHJlZml4J11dID0gJ1t7fV0nCgogICAgZGVmIHRlc3RfdXBncmFkZV91c2VyX3Bl
      cm1pc3Npb25zKHNlbGYpOgogICAgICAgIHNlbGYucmpPYmogPSBSYWRvc0pTT04oCiAgICAgICAg
      ICAgIFsnLS11cGdyYWRlJywgJy0tcnVuLWFzLXVzZXI9Y2xpZW50LmhlYWx0aGNoZWNrZXInXSkK
      ICAgICAgICAjIGZvciB0ZXN0aW5nLCB3ZSBhcmUgdXNpbmcgJ0R1bW15UmFkb3MnIG9iamVjdAog
      ICAgICAgIHNlbGYucmpPYmouY2x1c3RlciA9IER1bW15UmFkb3MuUmFkb3MoKQogICAgICAgIHNl
      bGYucmpPYmoubWFpbigpCiAgICAgICAgc2VsZi5yak9iaiA9IFJhZG9zSlNPTigKICAgICAgICAg
      ICAgWyctLXVwZ3JhZGUnLCAnLS1ydW4tYXMtdXNlcj1jbGllbnQuaGVhbHRoY2hlY2tlcicsICct
      LXJndy1wb29sLXByZWZpeD1ub25EZWZhdWx0J10pCiAgICAgICAgc2VsZi5yak9iai5jbHVzdGVy
      ID0gRHVtbXlSYWRvcy5SYWRvcygpCiAgICAgICAgc2VsZi5hZGRfbm9uX2RlZmF1bHRfcG9vbF9w
      cmVmaXhfY21kKCdub25EZWZhdWx0JykKICAgICAgICBzZWxmLnJqT2JqLm1haW4oKQoKICAgIGRl
      ZiB0ZXN0X21vbml0b3JpbmdfZW5kcG9pbnRfdmFsaWRhdGlvbihzZWxmKToKICAgICAgICBzZWxm
      LnJqT2JqID0gUmFkb3NKU09OKFsnLS1yYmQtZGF0YS1wb29sLW5hbWU9YWJjJywgJy0tZm9ybWF0
      PWpzb24nXSkKICAgICAgICBzZWxmLnJqT2JqLmNsdXN0ZXIgPSBEdW1teVJhZG9zLlJhZG9zKCkK
      CiAgICAgICAgdmFsaWRfaXBfcG9ydHMgPSBbKCIxMC4yMi4zMS4xMzEiLCAiMzUzNCIpLAogICAg
      ICAgICAgICAgICAgICAgICAgICAgICgiMTAuMTc3LjMuODEiLCAiIiksICgiIiwgIiIpLCAoIiIs
      ICI5MDkyIildCiAgICAgICAgZm9yIGVhY2hfaXBfcG9ydF9wYWlyIGluIHZhbGlkX2lwX3BvcnRz
      OgogICAgICAgICAgICAjIHJlc2V0IG1vbml0b3JpbmcgaXAgYW5kIHBvcnQKICAgICAgICAgICAg
      c2VsZi5yak9iai5fYXJnX3BhcnNlci5tb25pdG9yaW5nX2VuZHBvaW50ID0gJycKICAgICAgICAg
      ICAgc2VsZi5yak9iai5fYXJnX3BhcnNlci5tb25pdG9yaW5nX2VuZHBvaW50X3BvcnQgPSAnJwog
      ICAgICAgICAgICBuZXdfbW9uX2lwLCBuZXdfbW9uX3BvcnQgPSBlYWNoX2lwX3BvcnRfcGFpcgog
      ICAgICAgICAgICBjaGVja19pcF92YWwgPSBzZWxmLnJqT2JqLmNsdXN0ZXIuZHVtbXlfaG9zdF9p
      cF9tYXAuZ2V0KAogICAgICAgICAgICAgICAgbmV3X21vbl9pcCwgbmV3X21vbl9pcCkKICAgICAg
      ICAgICAgY2hlY2tfcG9ydF92YWwgPSBSYWRvc0pTT04uREVGQVVMVF9NT05JVE9SSU5HX0VORFBP
      SU5UX1BPUlQKICAgICAgICAgICAgaWYgbmV3X21vbl9pcDoKICAgICAgICAgICAgICAgIHNlbGYu
      cmpPYmouX2FyZ19wYXJzZXIubW9uaXRvcmluZ19lbmRwb2ludCA9IG5ld19tb25faXAKICAgICAg
      ICAgICAgaWYgbmV3X21vbl9wb3J0OgogICAgICAgICAgICAgICAgY2hlY2tfcG9ydF92YWwgPSBu
      ZXdfbW9uX3BvcnQKICAgICAgICAgICAgICAgIHNlbGYucmpPYmouX2FyZ19wYXJzZXIubW9uaXRv
      cmluZ19lbmRwb2ludF9wb3J0ID0gbmV3X21vbl9wb3J0CiAgICAgICAgICAgICMgZm9yIHRlc3Rp
      bmcsIHdlIGFyZSB1c2luZyAnRHVtbXlSYWRvcycgb2JqZWN0CiAgICAgICAgICAgIG1vbl9pcHMs
      IG1vbl9wb3J0ID0gc2VsZi5yak9iai5nZXRfYWN0aXZlX2FuZF9zdGFuZGJ5X21ncnMoKQogICAg
      ICAgICAgICBtb25faXAgPSBtb25faXBzLnNwbGl0KCIsIilbMF0KICAgICAgICAgICAgaWYgY2hl
      Y2tfaXBfdmFsIGFuZCBjaGVja19pcF92YWwgIT0gbW9uX2lwOgogICAgICAgICAgICAgICAgc2Vs
      Zi5mYWlsKCJFeHBlY3RlZCBJUDoge30sIFJldHVybmVkIElQOiB7fSIuZm9ybWF0KAogICAgICAg
      ICAgICAgICAgICAgIGNoZWNrX2lwX3ZhbCwgbW9uX2lwKSkKICAgICAgICAgICAgaWYgY2hlY2tf
      cG9ydF92YWwgYW5kIGNoZWNrX3BvcnRfdmFsICE9IG1vbl9wb3J0OgogICAgICAgICAgICAgICAg
      c2VsZi5mYWlsKCJFeHBlY3RlZCBQb3J0OiAne30nLCBSZXR1cm5lZCBQb3J0OiAne30nIi5mb3Jt
      YXQoCiAgICAgICAgICAgICAgICAgICAgY2hlY2tfcG9ydF92YWwsIG1vbl9wb3J0KSkKICAgICAg
      ICAgICAgcHJpbnQoIk1vbklQOiB7fSwgTW9uUG9ydDoge30iLmZvcm1hdChtb25faXAsIG1vbl9w
      b3J0KSkKCiAgICAgICAgaW52YWxpZF9pcF9wb3J0cyA9IFsoIjEwLjIyLjMxLjEzMS40MyIsICI1
      MzM0IiksICgiIiwgIjkxOTQzIiksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoIjEwLjE3
      Ny4zLjgxIiwgIjkwMzIwIiksICgiIiwgIjczNDIyIiksICgiMTAuMjMyLjEyLjgiLCAiOTA5MjIi
      KV0KICAgICAgICBmb3IgZWFjaF9pcF9wb3J0X3BhaXIgaW4gaW52YWxpZF9pcF9wb3J0czoKICAg
      ICAgICAgICAgIyByZXNldCB0aGUgY29tbWFuZC1saW5lIG1vbml0b3JpbmcgYXJncwogICAgICAg
      ICAgICBzZWxmLnJqT2JqLl9hcmdfcGFyc2VyLm1vbml0b3JpbmdfZW5kcG9pbnQgPSAnJwogICAg
      ICAgICAgICBzZWxmLnJqT2JqLl9hcmdfcGFyc2VyLm1vbml0b3JpbmdfZW5kcG9pbnRfcG9ydCA9
      ICcnCiAgICAgICAgICAgIG5ld19tb25faXAsIG5ld19tb25fcG9ydCA9IGVhY2hfaXBfcG9ydF9w
      YWlyCiAgICAgICAgICAgIGlmIG5ld19tb25faXA6CiAgICAgICAgICAgICAgICBzZWxmLnJqT2Jq
      Ll9hcmdfcGFyc2VyLm1vbml0b3JpbmdfZW5kcG9pbnQgPSBuZXdfbW9uX2lwCiAgICAgICAgICAg
      IGlmIG5ld19tb25fcG9ydDoKICAgICAgICAgICAgICAgIHNlbGYucmpPYmouX2FyZ19wYXJzZXIu
      bW9uaXRvcmluZ19lbmRwb2ludF9wb3J0ID0gbmV3X21vbl9wb3J0CiAgICAgICAgICAgIHRyeToK
      ICAgICAgICAgICAgICAgIG1vbl9pcCwgbW9uX3BvcnQgPSBzZWxmLnJqT2JqLmdldF9hY3RpdmVf
      YW5kX3N0YW5kYnlfbWdycygpCiAgICAgICAgICAgICAgICBwcmludCgiW1dyb25nXSBNb25JUDog
      e30sIE1vblBvcnQ6IHt9Ii5mb3JtYXQobW9uX2lwLCBtb25fcG9ydCkpCiAgICAgICAgICAgICAg
      ICBzZWxmLmZhaWwoIkFuIGV4Y2VwdGlvbiB3YXMgZXhwZWN0ZWQiKQogICAgICAgICAgICBleGNl
      cHQgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbiBhcyBlcnI6CiAgICAgICAgICAgICAgICBwcmlu
      dCgiRXhjZXB0aW9uIHRocm93biBzdWNjZXNzZnVsbHk6IHt9Ii5mb3JtYXQoZXJyKSkK
    external.features.ocs.openshift.io/supported-platforms: '["BareMetal", "None",
      "VSphere", "OpenStack", "oVirt"]'
    external.features.ocs.openshift.io/validation: '{"secrets":["rook-ceph-operator-creds",
      "rook-csi-rbd-node", "rook-csi-rbd-provisioner"], "configMaps": ["rook-ceph-mon-endpoints",
      "rook-ceph-mon"], "storageClasses": ["ceph-rbd"], "cephClusters": ["monitoring-endpoint"]}'
    features.ocs.openshift.io/enabled: '["kms", "arbiter", "flexible-scaling", "multus",
      "pool-management", "namespace-store", "mcg-standalone"]'
    olm.skipRange: '>=0.0.1 <4.9.0'
    operatorframework.io/initialization-resource: "\n    {\n        \"apiVersion\":
      \"ocs.openshift.io/v1\",\n        \"kind\": \"StorageCluster\",\n        \"metadata\":
      {\n            \"name\": \"example-storagecluster\",\n            \"namespace\":
      \"openshift-storage\"\n        },\n        \"spec\": {\n            \"manageNodes\":
      false,\n            \"monPVCTemplate\": {\n                \"spec\": {\n                    \"accessModes\":
      [\n                        \"ReadWriteOnce\"\n                    ],\n                    \"resources\":
      {\n                        \"requests\": {\n                            \"storage\":
      \"10Gi\"\n                        }\n                    },\n                    \"storageClassName\":
      \"gp2\"\n                }\n            },\n            \"storageDeviceSets\":
      [\n                {\n                    \"count\": 3,\n                    \"dataPVCTemplate\":
      {\n                        \"spec\": {\n                            \"accessModes\":
      [\n                                \"ReadWriteOnce\"\n                            ],\n
      \                           \"resources\": {\n                                \"requests\":
      {\n                                    \"storage\": \"1Ti\"\n                                }\n
      \                           },\n                            \"storageClassName\":
      \"gp2\",\n                            \"volumeMode\": \"Block\"\n                        }\n
      \                   },\n                    \"name\": \"example-deviceset\",\n
      \                   \"placement\": {},\n                    \"portable\": true,\n
      \                   \"resources\": {}\n                }\n            ]\n        }\n
      \   }\n\t"
    operatorframework.io/suggested-namespace: openshift-storage
    operators.operatorframework.io/builder: operator-sdk-v1.2.0
    operators.operatorframework.io/internal-objects: '["ocsinitializations.ocs.openshift.io","cephclusters.ceph.rook.io","cephobjectstores.ceph.rook.io","cephobjectstoreusers.ceph.rook.io","cephnfses.ceph.rook.io","cephclients.ceph.rook.io","cephfilesystems.ceph.rook.io","cephfilesystemmirrors.ceph.rook.io","cephrbdmirrors.ceph.rook.io","cephobjectrealms.ceph.rook.io","cephobjectzonegroups.ceph.rook.io","cephobjectzones.ceph.rook.io","volumereplicationclasses.replication.storage.openshift.io","volumereplications.replication.storage.openshift.io","objectbucketclaims.objectbucket.io","objectbuckets.objectbucket.io"]'
    operators.operatorframework.io/operator-type: non-standalone
    operators.operatorframework.io/project_layout: go.kubebuilder.io/v2
    repository: https://github.com/red-hat-storage/ocs-operator
    support: Red Hat
  labels:
    operatorframework.io/arch.amd64: supported
    operatorframework.io/arch.ppc64le: supported
    operatorframework.io/arch.s390x: supported
  name: ocs-operator.v4.9.0
  namespace: placeholder
spec:
  apiservicedefinitions: {}
  cleanup:
    enabled: false
  customresourcedefinitions:
    owned:
    - description: OCS Initialization represents the initial data to be created when
        the OCS operator is installed.
      displayName: OCS Initialization
      kind: OCSInitialization
      name: ocsinitializations.ocs.openshift.io
      version: v1
    - description: Storage Cluster represents a OpenShift Container Storage Cluster
        including Ceph Cluster, NooBaa and all the storage and compute resources required.
      displayName: Storage Cluster
      kind: StorageCluster
      name: storageclusters.ocs.openshift.io
      resources:
      - kind: CephCluster
        name: cephclusters.ceph.rook.io
        version: v1
      - kind: NooBaa
        name: noobaas.noobaa.io
        version: v1alpha1
      version: v1
    - description: Represents a Ceph cluster.
      displayName: Ceph Cluster
      kind: CephCluster
      name: cephclusters.ceph.rook.io
      version: v1
    - description: Represents a Ceph Block Pool.
      displayName: Block Pools
      kind: CephBlockPool
      name: cephblockpools.ceph.rook.io
      version: v1
    - description: Represents a Ceph Object Store.
      displayName: Ceph Object Store
      kind: CephObjectStore
      name: cephobjectstores.ceph.rook.io
      specDescriptors:
      - description: Coding Chunks
        displayName: Coding Chunks
        path: dataPool.erasureCoded.codingChunks
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:dataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: Data Chunks
        displayName: Data Chunks
        path: dataPool.erasureCoded.dataChunks
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:dataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: failureDomain
        displayName: failureDomain
        path: dataPool.failureDomain
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:dataPool
        - urn:alm:descriptor:com.tectonic.ui:text
      - description: Size
        displayName: Size
        path: dataPool.replicated.size
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:dataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: Annotations
        displayName: Annotations
        path: gateway.annotations
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:io.kubernetes:annotations
      - description: Instances
        displayName: Instances
        path: gateway.instances
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: Resources
        displayName: Resources
        path: gateway.resources
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:com.tectonic.ui:resourceRequirements
      - description: placement
        displayName: placement
        path: gateway.placement
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:io.kubernetes:placement
      - description: securePort
        displayName: securePort
        path: gateway.securePort
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:io.kubernetes:securePort
      - description: sslCertificateRef
        displayName: sslCertificateRef
        path: gateway.sslCertificateRef
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:io.kubernetes:sslCertificateRef
      - description: Type
        displayName: Type
        path: gateway.type
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:com.tectonic.ui:text
      - description: Coding Chunks
        displayName: Coding Chunks
        path: metadataPool.erasureCoded.codingChunks
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:metadataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: Data Chunks
        displayName: Data Chunks
        path: metadataPool.erasureCoded.dataChunks
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:metadataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: failureDomain
        displayName: failureDomain
        path: metadataPool.failureDomain
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:metadataPool
        - urn:alm:descriptor:com.tectonic.ui:text
      - description: Size
        displayName: Size
        path: metadataPool.replicated.size
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:metadataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      version: v1
    - description: Represents a Ceph Object Store User.
      displayName: Ceph Object Store User
      kind: CephObjectStoreUser
      name: cephobjectstoreusers.ceph.rook.io
      version: v1
    - description: Represents a cluster of Ceph NFS ganesha gateways.
      displayName: Ceph NFS
      kind: CephNFS
      name: cephnfses.ceph.rook.io
      version: v1
    - description: Represents a Ceph User.
      displayName: Ceph Client
      kind: CephClient
      name: cephclients.ceph.rook.io
      version: v1
    - description: Represents a Ceph Filesystem.
      displayName: Ceph Filesystem
      kind: CephFilesystem
      name: cephfilesystems.ceph.rook.io
      version: v1
    - description: Represents a Ceph Filesystem Mirror.
      displayName: Ceph Filesystem Mirror
      kind: CephFilesystemMirror
      name: cephfilesystemmirrors.ceph.rook.io
      version: v1
    - description: Represents a Ceph RBD Mirror.
      displayName: Ceph RBD Mirror
      kind: CephRBDMirror
      name: cephrbdmirrors.ceph.rook.io
      version: v1
    - description: Represents a Ceph Object Store Realm.
      displayName: Ceph Object Store Realm
      kind: CephObjectRealm
      name: cephobjectrealms.ceph.rook.io
      version: v1
    - description: Represents a Ceph Object Store Zone Group.
      displayName: Ceph Object Store Zone Group
      kind: CephObjectZoneGroup
      name: cephobjectzonegroups.ceph.rook.io
      version: v1
    - description: Represents a Ceph Object Store Zone.
      displayName: Ceph Object Store Zone
      kind: CephObjectZone
      name: cephobjectzones.ceph.rook.io
      version: v1
    - kind: VolumeReplicationClass
      name: volumereplicationclasses.replication.storage.openshift.io
      version: v1alpha1
    - kind: VolumeReplication
      name: volumereplications.replication.storage.openshift.io
      version: v1alpha1
    - description: Claim a bucket just like claiming a PV. Automate you app bucket
        provisioning by creating OBC with your app deployment. A secret and configmap
        (name=claim) will be created with access details for the app pods.
      displayName: Object Bucket Claim
      kind: ObjectBucketClaim
      name: objectbucketclaims.objectbucket.io
      resources:
      - kind: Service
        name: services
        version: v1
      - kind: Secret
        name: secrets
        version: v1
      - kind: ConfigMap
        name: configmaps
        version: v1
      - kind: StatefulSet
        name: statefulsets.apps
        version: v1
      version: v1alpha1
    - description: Used under-the-hood. Created per ObjectBucketClaim and keeps provisioning
        information.
      displayName: Object Bucket
      kind: ObjectBucket
      name: objectbuckets.objectbucket.io
      resources:
      - kind: Service
        name: services
        version: v1
      - kind: Secret
        name: secrets
        version: v1
      - kind: ConfigMap
        name: configmaps
        version: v1
      - kind: StatefulSet
        name: statefulsets.apps
        version: v1
      version: v1alpha1
    required:
    - description: A NooBaa system - Create this to start
      displayName: NooBaa
      kind: NooBaa
      name: noobaas.noobaa.io
      resources:
      - kind: Service
        name: services
        version: v1
      - kind: Secret
        name: secrets
        version: v1
      - kind: ConfigMap
        name: configmaps
        version: v1
      - kind: StatefulSet
        name: statefulsets.apps
        version: v1
      specDescriptors:
      - description: DBImage (optional) overrides the default image for the db container.
        displayName: DB Image
        path: image
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:text
      - description: Image (optional) overrides the default image for the server container.
        displayName: Image
        path: dbImage
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:text
      - description: CoreResources (optional) overrides the default resource requirements
          for the server container.
        displayName: Core Resources
        path: coreResources
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:resourceRequirements
      - description: DBResources (optional) overrides the default resource requirements
          for the db container.
        displayName: DB Resources
        path: dbResources
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:resourceRequirements
      - description: 'DBVolumeResources (optional) overrides the default PVC resource
          requirements for the database volume. For the time being this field is immutable
          and can only be set on system creation. This is because volume size updates
          are only supported for increasing the size, and only if the storage class
          specifies `allowVolumeExpansion: true`, +immutable.'
        displayName: Image
        path: dbVolumeResources
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:resourceRequirements
      - description: DBStorageClass (optional) overrides the default cluster StorageClass
          for the database volume. For the time being this field is immutable and
          can only be set on system creation. This affects where the system stores
          its database which contains system config, buckets, objects meta-data and
          mapping file parts to storage locations. +immutable.
        displayName: DB StorageClass
        path: dbStorageClass
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:text
      - description: PVPoolDefaultStorageClass (optional) overrides the default cluster
          StorageClass for the pv-pool volumes. This affects where the system stores
          data chunks (encrypted). Updates to this field will only affect new pv-pools,
          but updates to existing pools are not supported by the operator.
        displayName: PV Pool DefaultStorageClass
        path: pvPoolDefaultStorageClass
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:text
      - description: ImagePullSecret (optional) sets a pull secret for the system
          image.
        displayName: Image Pull Secret
        path: imagePullSecret
        x-descriptors:
        - urn:alm:descriptor:io.kubernetes:Secret
      version: v1alpha1
  description: |2

    **Red Hat OpenShift Container Storage** deploys three operators.

    ### OpenShift Container Storage operator

    The OpenShift Container Storage operator is the primary operator for OpenShift Container Storage. It serves to facilitate the other operators in OpenShift Container Storage by performing administrative tasks outside their scope as well as watching and configuring their CustomResources.

    ### Rook

    [Rook][1] deploys and manages Ceph on OpenShift, which provides block and file storage.

    # Core Capabilities

    * **Self-managing service:** No matter which supported storage technologies you choose, OpenShift Container Storage ensures that resources can be deployed and managed automatically.

    * **Hyper-scale or hyper-converged:** With OpenShift Container Storage you can either build dedicated storage clusters or hyper-converged clusters where your apps run alongside storage.

    * **File, Block, and Object provided by OpenShift Container Storage:** OpenShift Container Storage integrates Ceph with multiple storage presentations including object storage (compatible with S3), block storage, and POSIX-compliant shared file system.

    * **Your data, protected:** OpenShift Container Storage efficiently distributes and replicates your data across your cluster to minimize the risk of data loss. With snapshots, cloning, and versioning, no more losing sleep over your data.

    * **Elastic storage in your datacenter:** Scale is now possible in your datacenter. Get started with a few terabytes, and easily scale up.

    * **Simplified data management:** Easily create hybrid and multi-cloud data storage for your workloads, using a single namespace.

    [1]: https://rook.io
  displayName: OpenShift Container Storage
  icon:
  - base64data: PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxOTIgMTQ1Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2UwMDt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPlJlZEhhdC1Mb2dvLUhhdC1Db2xvcjwvdGl0bGU+PHBhdGggZD0iTTE1Ny43Nyw2Mi42MWExNCwxNCwwLDAsMSwuMzEsMy40MmMwLDE0Ljg4LTE4LjEsMTcuNDYtMzAuNjEsMTcuNDZDNzguODMsODMuNDksNDIuNTMsNTMuMjYsNDIuNTMsNDRhNi40Myw2LjQzLDAsMCwxLC4yMi0xLjk0bC0zLjY2LDkuMDZhMTguNDUsMTguNDUsMCwwLDAtMS41MSw3LjMzYzAsMTguMTEsNDEsNDUuNDgsODcuNzQsNDUuNDgsMjAuNjksMCwzNi40My03Ljc2LDM2LjQzLTIxLjc3LDAtMS4wOCwwLTEuOTQtMS43My0xMC4xM1oiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik0xMjcuNDcsODMuNDljMTIuNTEsMCwzMC42MS0yLjU4LDMwLjYxLTE3LjQ2YTE0LDE0LDAsMCwwLS4zMS0zLjQybC03LjQ1LTMyLjM2Yy0xLjcyLTcuMTItMy4yMy0xMC4zNS0xNS43My0xNi42QzEyNC44OSw4LjY5LDEwMy43Ni41LDk3LjUxLjUsOTEuNjkuNSw5MCw4LDgzLjA2LDhjLTYuNjgsMC0xMS42NC01LjYtMTcuODktNS42LTYsMC05LjkxLDQuMDktMTIuOTMsMTIuNSwwLDAtOC40MSwyMy43Mi05LjQ5LDI3LjE2QTYuNDMsNi40MywwLDAsMCw0Mi41Myw0NGMwLDkuMjIsMzYuMywzOS40NSw4NC45NCwzOS40NU0xNjAsNzIuMDdjMS43Myw4LjE5LDEuNzMsOS4wNSwxLjczLDEwLjEzLDAsMTQtMTUuNzQsMjEuNzctMzYuNDMsMjEuNzdDNzguNTQsMTA0LDM3LjU4LDc2LjYsMzcuNTgsNTguNDlhMTguNDUsMTguNDUsMCwwLDEsMS41MS03LjMzQzIyLjI3LDUyLC41LDU1LC41LDc0LjIyYzAsMzEuNDgsNzQuNTksNzAuMjgsMTMzLjY1LDcwLjI4LDQ1LjI4LDAsNTYuNy0yMC40OCw1Ni43LTM2LjY1LDAtMTIuNzItMTEtMjcuMTYtMzAuODMtMzUuNzgiLz48L3N2Zz4=
    mediatype: image/svg+xml
  install:
    spec:
      clusterPermissions:
      - rules:
        - apiGroups:
          - apiextensions.k8s.io
          resources:
          - customresourcedefinitions
          verbs:
          - create
          - get
          - list
          - update
          - watch
        - apiGroups:
          - apps
          resources:
          - daemonsets
          - deployments
          - replicasets
          - statefulsets
          verbs:
          - '*'
        - apiGroups:
          - ceph.rook.io
          resources:
          - cephblockpools
          - cephclusters
          - cephfilesystems
          - cephobjectstores
          - cephobjectstoreusers
          - cephrbdmirrors
          verbs:
          - '*'
        - apiGroups:
          - config.openshift.io
          resources:
          - infrastructures
          - networks
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - console.openshift.io
          resources:
          - consolequickstarts
          verbs:
          - '*'
        - apiGroups:
          - coordination.k8s.io
          resources:
          - leases
          verbs:
          - create
          - get
          - list
          - update
        - apiGroups:
          - ""
          resources:
          - configmaps
          - endpoints
          - events
          - nodes
          - persistentvolumeclaims
          - pods
          - secrets
          - services
          verbs:
          - '*'
        - apiGroups:
          - ""
          resources:
          - namespaces
          verbs:
          - get
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - monitoring.coreos.com
          resources:
          - prometheusrules
          - servicemonitors
          verbs:
          - create
          - get
          - list
          - update
          - watch
        - apiGroups:
          - noobaa.io
          resources:
          - noobaas
          verbs:
          - '*'
        - apiGroups:
          - ocs.openshift.io
          resources:
          - '*'
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - operators.coreos.com
          resources:
          - operatorconditions
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - quota.openshift.io
          resources:
          - clusterresourcequotas
          verbs:
          - '*'
        - apiGroups:
          - route.openshift.io
          resources:
          - routes
          verbs:
          - '*'
        - apiGroups:
          - security.openshift.io
          resources:
          - securitycontextconstraints
          verbs:
          - create
          - get
          - update
        - apiGroups:
          - security.openshift.io
          resourceNames:
          - privileged
          resources:
          - securitycontextconstraints
          verbs:
          - create
          - get
          - update
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotclasses
          - volumesnapshots
          verbs:
          - '*'
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - '*'
          - get
        - apiGroups:
          - template.openshift.io
          resources:
          - templates
          verbs:
          - '*'
        serviceAccountName: ocs-operator
      - rules:
        - apiGroups:
          - ceph.rook.io
          resources:
          - '*'
          verbs:
          - get
          - watch
          - list
        serviceAccountName: rook-ceph-admission-controller-role
      - rules:
        - apiGroups:
          - ""
          - apps
          - extensions
          resources:
          - secrets
          - pods
          - pods/log
          - services
          - configmaps
          - deployments
          - daemonsets
          verbs:
          - get
          - list
          - watch
          - patch
          - create
          - update
          - delete
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - pods/log
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - pods/exec
          verbs:
          - create
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - nodes
          - nodes/proxy
          - services
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - events
          - persistentvolumes
          - persistentvolumeclaims
          - endpoints
          verbs:
          - get
          - list
          - watch
          - patch
          - create
          - update
          - delete
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - batch
          resources:
          - jobs
          - cronjobs
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - ceph.rook.io
          resources:
          - '*'
          verbs:
          - '*'
        - apiGroups:
          - rook.io
          resources:
          - '*'
          verbs:
          - '*'
        - apiGroups:
          - policy
          - apps
          - extensions
          resources:
          - poddisruptionbudgets
          - deployments
          - replicasets
          verbs:
          - '*'
        - apiGroups:
          - healthchecking.openshift.io
          resources:
          - machinedisruptionbudgets
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - machine.openshift.io
          resources:
          - machines
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - storage.k8s.io
          resources:
          - csidrivers
          verbs:
          - create
          - delete
          - get
          - update
        - apiGroups:
          - k8s.cni.cncf.io
          resources:
          - network-attachment-definitions
          verbs:
          - get
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - ""
          resources:
          - configmaps
          - nodes
          - nodes/proxy
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - events
          verbs:
          - create
          - patch
          - list
          - get
          - watch
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        serviceAccountName: rook-ceph-mgr
      - rules:
        - apiGroups:
          - ""
          resources:
          - secrets
          - configmaps
          verbs:
          - '*'
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - objectbucket.io
          resources:
          - '*'
          verbs:
          - '*'
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
        serviceAccountName: rook-ceph-osd
      - rules:
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
          - watch
        serviceAccountName: rook-ceph-mgr
      - rules:
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
          - update
        - apiGroups:
          - ""
          resources:
          - namespaces
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
        serviceAccountName: rook-csi-cephfs-plugin-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - secrets
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
          - create
          - delete
          - update
          - patch
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - events
          verbs:
          - list
          - watch
          - create
          - update
          - patch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshots
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotcontents
          verbs:
          - create
          - get
          - list
          - watch
          - update
          - delete
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotcontents/status
          verbs:
          - update
        - apiGroups:
          - apiextensions.k8s.io
          resources:
          - customresourcedefinitions
          verbs:
          - create
          - list
          - watch
          - delete
          - get
          - update
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshots/status
          verbs:
          - update
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments
          verbs:
          - get
          - list
          - watch
          - update
          - patch
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments/status
          verbs:
          - patch
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims/status
          verbs:
          - update
          - patch
        serviceAccountName: rook-csi-cephfs-provisioner-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - secrets
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
          - update
        - apiGroups:
          - ""
          resources:
          - namespaces
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - serviceaccounts
          verbs:
          - get
        serviceAccountName: rook-csi-rbd-plugin-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - secrets
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
          - create
          - delete
          - update
          - patch
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments
          verbs:
          - get
          - list
          - watch
          - update
          - patch
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments/status
          verbs:
          - patch
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - events
          verbs:
          - list
          - watch
          - create
          - update
          - patch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshots
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotcontents
          verbs:
          - create
          - get
          - list
          - watch
          - update
          - delete
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotcontents/status
          verbs:
          - update
        - apiGroups:
          - apiextensions.k8s.io
          resources:
          - customresourcedefinitions
          verbs:
          - create
          - list
          - watch
          - delete
          - get
          - update
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshots/status
          verbs:
          - update
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims/status
          verbs:
          - update
          - patch
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
        - apiGroups:
          - replication.storage.openshift.io
          resources:
          - volumereplications
          - volumereplicationclasses
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - replication.storage.openshift.io
          resources:
          - volumereplications/finalizers
          verbs:
          - update
        - apiGroups:
          - replication.storage.openshift.io
          resources:
          - volumereplications/status
          verbs:
          - get
          - patch
          - update
        - apiGroups:
          - replication.storage.openshift.io
          resources:
          - volumereplicationclasses/status
          verbs:
          - get
        - apiGroups:
          - ""
          resources:
          - serviceaccounts
          verbs:
          - get
        serviceAccountName: rook-csi-rbd-provisioner-sa
      - rules:
        - apiGroups:
          - security.openshift.io
          resourceNames:
          - privileged
          resources:
          - securitycontextconstraints
          verbs:
          - use
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - monitoring.coreos.com
          resources:
          - '*'
          verbs:
          - '*'
        serviceAccountName: ocs-metrics-exporter
      deployments:
      - name: ocs-operator
        spec:
          replicas: 1
          selector:
            matchLabels:
              name: ocs-operator
          strategy:
            type: Recreate
          template:
            metadata:
              labels:
                name: ocs-operator
            spec:
              containers:
              - args:
                - --enable-leader-election
                - --health-probe-bind-address=:8081
                command:
                - ocs-operator
                env:
                - name: WATCH_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.annotations['olm.targetNamespaces']
                - name: ROOK_CEPH_IMAGE
                  value: rook/ceph:v1.7.2-4.gf2b966c
                - name: CEPH_IMAGE
                  value: ceph/daemon-base:latest-pacific
                - name: NOOBAA_CORE_IMAGE
                  value: noobaa/noobaa-core:master-20210912
                - name: NOOBAA_DB_IMAGE
                  value: centos/postgresql-12-centos7
                image: quay.io/ocs-dev/ocs-operator:latest
                imagePullPolicy: Always
                name: ocs-operator
                readinessProbe:
                  httpGet:
                    path: /readyz
                    port: 8081
                  initialDelaySeconds: 5
                  periodSeconds: 10
                resources: {}
              serviceAccountName: ocs-operator
              terminationGracePeriodSeconds: 10
              tolerations:
              - effect: NoSchedule
                key: node.ocs.openshift.io/storage
                operator: Equal
                value: "true"
      - name: rook-ceph-operator
        spec:
          replicas: 1
          selector:
            matchLabels:
              app: rook-ceph-operator
          strategy: {}
          template:
            metadata:
              labels:
                app: rook-ceph-operator
            spec:
              containers:
              - args:
                - ceph
                - operator
                env:
                - name: ROOK_CURRENT_NAMESPACE_ONLY
                  value: "true"
                - name: ROOK_ALLOW_MULTIPLE_FILESYSTEMS
                  value: "false"
                - name: ROOK_LOG_LEVEL
                  value: INFO
                - name: ROOK_CEPH_STATUS_CHECK_INTERVAL
                  value: 60s
                - name: ROOK_MON_HEALTHCHECK_INTERVAL
                  value: 45s
                - name: ROOK_MON_OUT_TIMEOUT
                  value: 600s
                - name: ROOK_DISCOVER_DEVICES_INTERVAL
                  value: 60m
                - name: ROOK_HOSTPATH_REQUIRES_PRIVILEGED
                  value: "true"
                - name: ROOK_ENABLE_SELINUX_RELABELING
                  value: "true"
                - name: ROOK_ENABLE_FSGROUP
                  value: "true"
                - name: ROOK_ENABLE_FLEX_DRIVER
                  value: "false"
                - name: ROOK_ENABLE_DISCOVERY_DAEMON
                  value: "false"
                - name: ROOK_ENABLE_MACHINE_DISRUPTION_BUDGET
                  value: "false"
                - name: ROOK_DISABLE_DEVICE_HOTPLUG
                  value: "true"
                - name: ROOK_CSI_ALLOW_UNSUPPORTED_VERSION
                  value: "true"
                - name: CSI_VOLUME_REPLICATION_IMAGE
                  value: quay.io/csiaddons/volumereplication-operator:v0.1.0
                - name: CSI_PROVISIONER_TOLERATIONS
                  value: |2-

                    - key: node.ocs.openshift.io/storage
                      operator: Equal
                      value: "true"
                      effect: NoSchedule
                - name: CSI_PLUGIN_TOLERATIONS
                  value: |2-

                    - key: node.ocs.openshift.io/storage
                      operator: Equal
                      value: "true"
                      effect: NoSchedule
                - name: CSI_LOG_LEVEL
                  value: "5"
                - name: NODE_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: spec.nodeName
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
                - name: POD_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                - name: ROOK_OBC_WATCH_OPERATOR_NAMESPACE
                  value: "true"
                image: rook/ceph:v1.7.2-4.gf2b966c
                name: rook-ceph-operator
                resources: {}
                volumeMounts:
                - mountPath: /var/lib/rook
                  name: rook-config
                - mountPath: /etc/ceph
                  name: default-config-dir
              serviceAccountName: rook-ceph-system
              tolerations:
              - effect: NoSchedule
                key: node.ocs.openshift.io/storage
                operator: Equal
                value: "true"
              volumes:
              - emptyDir: {}
                name: rook-config
              - emptyDir: {}
                name: default-config-dir
      - name: ocs-metrics-exporter
        spec:
          replicas: 1
          selector:
            matchLabels:
              app.kubernetes.io/component: ocs-metrics-exporter
              app.kubernetes.io/name: ocs-metrics-exporter
          strategy: {}
          template:
            metadata:
              labels:
                app.kubernetes.io/component: ocs-metrics-exporter
                app.kubernetes.io/name: ocs-metrics-exporter
                app.kubernetes.io/version: 0.0.1
            spec:
              containers:
              - args:
                - --namespaces=openshift-storage
                command:
                - /usr/local/bin/metrics-exporter
                image: quay.io/ocs-dev/ocs-operator:latest
                name: ocs-metrics-exporter
                ports:
                - containerPort: 8080
                - containerPort: 8081
                resources: {}
                securityContext:
                  runAsNonRoot: true
              serviceAccountName: ocs-metrics-exporter
              tolerations:
              - effect: NoSchedule
                key: node.ocs.openshift.io/storage
                operator: Equal
                value: "true"
      permissions:
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - configmaps
          - services
          verbs:
          - get
          - list
          - watch
          - patch
          - create
          - update
          - delete
        - apiGroups:
          - apps
          - extensions
          resources:
          - daemonsets
          - statefulsets
          - deployments
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - batch
          resources:
          - cronjobs
          verbs:
          - delete
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - ceph.rook.io
          resources:
          - cephclusters
          - cephclusters/finalizers
          verbs:
          - get
          - list
          - create
          - update
          - delete
        serviceAccountName: rook-ceph-osd
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - services
          - pods/log
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - batch
          resources:
          - jobs
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - ceph.rook.io
          resources:
          - '*'
          verbs:
          - '*'
        - apiGroups:
          - apps
          resources:
          - deployments/scale
          - deployments
          verbs:
          - patch
          - delete
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims
          verbs:
          - delete
        serviceAccountName: rook-ceph-mgr
      - rules:
        - apiGroups:
          - ""
          resources:
          - endpoints
          verbs:
          - get
          - watch
          - list
          - delete
          - update
          - create
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
          - create
          - delete
        - apiGroups:
          - coordination.k8s.io
          resources:
          - leases
          verbs:
          - get
          - watch
          - list
          - delete
          - update
          - create
        serviceAccountName: rook-csi-cephfs-provisioner-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - endpoints
          verbs:
          - get
          - watch
          - list
          - delete
          - update
          - create
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
          - watch
          - create
          - delete
          - update
        - apiGroups:
          - coordination.k8s.io
          resources:
          - leases
          verbs:
          - get
          - watch
          - list
          - delete
          - update
          - create
        serviceAccountName: rook-csi-rbd-provisioner-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - configmaps
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        serviceAccountName: rook-ceph-cmd-reporter
    strategy: deployment
  installModes:
  - supported: true
    type: OwnNamespace
  - supported: true
    type: SingleNamespace
  - supported: false
    type: MultiNamespace
  - supported: false
    type: AllNamespaces
  keywords:
  - storage
  - rook
  - ceph
  - block storage
  - shared filesystem
  - object storage
  links:
  - name: Source Code
    url: https://github.com/red-hat-storage/ocs-operator
  maintainers:
  - email: ocs-support@redhat.com
    name: Red Hat Support
  maturity: alpha
  minKubeVersion: 1.16.0
  provider:
    name: Red Hat
  relatedImages:
  - image: rook/ceph:v1.7.2-4.gf2b966c
    name: rook-container
  - image: ceph/daemon-base:latest-pacific
    name: ceph-container
  - image: quay.io/csiaddons/volumereplication-operator:v0.1.0
    name: volume-replication-operator
  - image: quay.io/ocs-dev/ocs-must-gather:latest
    name: ocs-must-gather
  version: 4.9.0
