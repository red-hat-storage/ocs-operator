---
apiVersion: operators.coreos.com/v1alpha1
kind: ClusterServiceVersion
metadata:
  annotations:
    alm-examples: |2-

      [
          {
              "apiVersion": "ocs.openshift.io/v1",
              "kind": "StorageCluster",
              "metadata": {
                  "name": "example-storagecluster",
                  "namespace": "openshift-storage"
              },
              "spec": {
                  "manageNodes": false,
                  "monPVCTemplate": {
                      "spec": {
                          "accessModes": [
                              "ReadWriteOnce"
                          ],
                          "resources": {
                              "requests": {
                                  "storage": "10Gi"
                              }
                          },
                          "storageClassName": "gp2"
                      }
                  },
                  "storageDeviceSets": [
                      {
                          "count": 3,
                          "dataPVCTemplate": {
                              "spec": {
                                  "accessModes": [
                                      "ReadWriteOnce"
                                  ],
                                  "resources": {
                                      "requests": {
                                          "storage": "1Ti"
                                      }
                                  },
                                  "storageClassName": "gp2",
                                  "volumeMode": "Block"
                              }
                          },
                          "name": "example-deviceset",
                          "placement": {},
                          "portable": true,
                          "resources": {}
                      }
                  ]
              }
          }
      ]
    capabilities: Deep Insights
    categories: Storage
    containerImage: quay.io/ocs-dev/ocs-operator:4.11.0
    description: Red Hat OpenShift Container Storage provides hyperconverged storage
      for applications within an OpenShift cluster.
    external.features.ocs.openshift.io/export-script: |-
      JycnCkNvcHlyaWdodCAyMDIwIFRoZSBSb29rIEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQu
      CgpMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxp
      Y2Vuc2UiKTsKeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3
      aXRoIHRoZSBMaWNlbnNlLgpZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQK
      CglodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKClVubGVzcyByZXF1
      aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUK
      ZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElT
      IiBCQVNJUywKV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVp
      dGhlciBleHByZXNzIG9yIGltcGxpZWQuClNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmlj
      IGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKbGltaXRhdGlvbnMgdW5kZXIgdGhl
      IExpY2Vuc2UuCicnJwoKaW1wb3J0IGVycm5vCmltcG9ydCBzeXMKaW1wb3J0IGpzb24KaW1wb3J0
      IGFyZ3BhcnNlCmltcG9ydCByZQppbXBvcnQgcmVxdWVzdHMKaW1wb3J0IHN1YnByb2Nlc3MKZnJv
      bSBvcyBpbXBvcnQgbGluZXNlcCBhcyBMSU5FU0VQCmZyb20gb3MgaW1wb3J0IHBhdGgKCk1vZHVs
      ZU5vdEZvdW5kRXJyb3IgPSBJbXBvcnRFcnJvcgoKdHJ5OgogICAgaW1wb3J0IHJhZG9zCmV4Y2Vw
      dCBNb2R1bGVOb3RGb3VuZEVycm9yIGFzIG5vTW9kRXJyOgogICAgcHJpbnQoIkVycm9yOiAlc1xu
      RXhpdGluZyB0aGUgc2NyaXB0Li4uIiAlIG5vTW9kRXJyKQogICAgc3lzLmV4aXQoMSkKCnRyeToK
      ICAgIGltcG9ydCByYmQKZXhjZXB0IE1vZHVsZU5vdEZvdW5kRXJyb3IgYXMgbm9Nb2RFcnI6CiAg
      ICBwcmludCgiRXJyb3I6ICVzXG5FeGl0aW5nIHRoZSBzY3JpcHQuLi4iICUgbm9Nb2RFcnIpCiAg
      ICBzeXMuZXhpdCgxKQoKdHJ5OgogICAgIyBmb3IgMi43LngKICAgIGZyb20gU3RyaW5nSU8gaW1w
      b3J0IFN0cmluZ0lPCmV4Y2VwdCBNb2R1bGVOb3RGb3VuZEVycm9yOgogICAgIyBmb3IgMy54CiAg
      ICBmcm9tIGlvIGltcG9ydCBTdHJpbmdJTwoKdHJ5OgogICAgIyBmb3IgMi43LngKICAgIGZyb20g
      dXJscGFyc2UgaW1wb3J0IHVybHBhcnNlCmV4Y2VwdCBNb2R1bGVOb3RGb3VuZEVycm9yOgogICAg
      IyBmb3IgMy54CiAgICBmcm9tIHVybGxpYi5wYXJzZSBpbXBvcnQgdXJscGFyc2UKCgpjbGFzcyBF
      eGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKEV4Y2VwdGlvbik6CiAgICBwYXNzCgojIyMjIyMjIyMj
      IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyMjIyMjIyMjIyMjIyMjIyMj
      IER1bW15UmFkb3MgIyMjIyMjIyMjIyMjIyMjIyMjCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
      IyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIHRoaXMgaXMgbWFpbmx5IGZvciB0ZXN0aW5nIGFuZCBj
      b3VsZCBiZSB1c2VkIHdoZXJlICdyYWRvcycgaXMgbm90IGF2YWlsYWJsZQoKCmNsYXNzIER1bW15
      UmFkb3Mob2JqZWN0KToKICAgIGRlZiBfX2luaXRfXyhzZWxmKToKICAgICAgICBzZWxmLnJldHVy
      bl92YWwgPSAwCiAgICAgICAgc2VsZi5lcnJfbWVzc2FnZSA9ICcnCiAgICAgICAgc2VsZi5zdGF0
      ZSA9ICdjb25uZWN0ZWQnCiAgICAgICAgc2VsZi5jbWRfb3V0cHV0X21hcCA9IHt9CiAgICAgICAg
      c2VsZi5jbWRfbmFtZXMgPSB7fQogICAgICAgIHNlbGYuX2luaXRfY21kX291dHB1dF9tYXAoKQog
      ICAgICAgIHNlbGYuZHVtbXlfaG9zdF9pcF9tYXAgPSB7fQoKICAgIGRlZiBfaW5pdF9jbWRfb3V0
      cHV0X21hcChzZWxmKToKICAgICAgICBqc29uX2ZpbGVfbmFtZSA9ICd0ZXN0LWRhdGEvY2VwaC1z
      dGF0dXMtb3V0JwogICAgICAgIHNjcmlwdF9kaXIgPSBwYXRoLmFic3BhdGgocGF0aC5kaXJuYW1l
      KF9fZmlsZV9fKSkKICAgICAgICBjZXBoX3N0YXR1c19zdHIgPSAiIgogICAgICAgIHdpdGggb3Bl
      bihwYXRoLmpvaW4oc2NyaXB0X2RpciwganNvbl9maWxlX25hbWUpLCAncicpIGFzIGpzb25fZmls
      ZToKICAgICAgICAgICAgY2VwaF9zdGF0dXNfc3RyID0ganNvbl9maWxlLnJlYWQoKQogICAgICAg
      IHNlbGYuY21kX25hbWVzWydmcyBscyddID0gJycneyJmb3JtYXQiOiAianNvbiIsICJwcmVmaXgi
      OiAiZnMgbHMifScnJwogICAgICAgIHNlbGYuY21kX25hbWVzWydxdW9ydW1fc3RhdHVzJ10gPSAn
      Jyd7ImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJxdW9ydW1fc3RhdHVzIn0nJycKICAgICAg
      ICBzZWxmLmNtZF9uYW1lc1snbWdyIHNlcnZpY2VzJ10gPSAnJyd7ImZvcm1hdCI6ICJqc29uIiwg
      InByZWZpeCI6ICJtZ3Igc2VydmljZXMifScnJwogICAgICAgICMgYWxsIHRoZSBjb21tYW5kcyBh
      bmQgdGhlaXIgb3V0cHV0CiAgICAgICAgc2VsZi5jbWRfb3V0cHV0X21hcFtzZWxmLmNtZF9uYW1l
      c1snZnMgbHMnXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSA9ICcnJ1t7Im5hbWUiOiJt
      eWZzIiwibWV0YWRhdGFfcG9vbCI6Im15ZnMtbWV0YWRhdGEiLCJtZXRhZGF0YV9wb29sX2lkIjoy
      LCJkYXRhX3Bvb2xfaWRzIjpbM10sImRhdGFfcG9vbHMiOlsibXlmcy1yZXBsaWNhdGVkIl19XScn
      JwogICAgICAgIHNlbGYuY21kX291dHB1dF9tYXBbc2VsZi5jbWRfbmFtZXNbJ3F1b3J1bV9zdGF0
      dXMnXV0gPSAnJyd7ImVsZWN0aW9uX2Vwb2NoIjozLCJxdW9ydW0iOlswXSwicXVvcnVtX25hbWVz
      IjpbImEiXSwicXVvcnVtX2xlYWRlcl9uYW1lIjoiYSIsInF1b3J1bV9hZ2UiOjE0Mzg1LCJmZWF0
      dXJlcyI6eyJxdW9ydW1fY29uIjoiNDU0MDEzODI5MjgzNjY5NjA2MyIsInF1b3J1bV9tb24iOlsi
      a3Jha2VuIiwibHVtaW5vdXMiLCJtaW1pYyIsIm9zZG1hcC1wcnVuZSIsIm5hdXRpbHVzIiwib2N0
      b3B1cyJdfSwibW9ubWFwIjp7ImVwb2NoIjoxLCJmc2lkIjoiYWY0ZTE2NzMtMGI3Mi00MDJkLTk5
      MGEtMjJkMjkxOWQwZjFjIiwibW9kaWZpZWQiOiIyMDIwLTA1LTA3VDAzOjM2OjM5LjkxODAzNVoi
      LCJjcmVhdGVkIjoiMjAyMC0wNS0wN1QwMzozNjozOS45MTgwMzVaIiwibWluX21vbl9yZWxlYXNl
      IjoxNSwibWluX21vbl9yZWxlYXNlX25hbWUiOiJvY3RvcHVzIiwiZmVhdHVyZXMiOnsicGVyc2lz
      dGVudCI6WyJrcmFrZW4iLCJsdW1pbm91cyIsIm1pbWljIiwib3NkbWFwLXBydW5lIiwibmF1dGls
      dXMiLCJvY3RvcHVzIl0sIm9wdGlvbmFsIjpbXX0sIm1vbnMiOlt7InJhbmsiOjAsIm5hbWUiOiJh
      IiwicHVibGljX2FkZHJzIjp7ImFkZHJ2ZWMiOlt7InR5cGUiOiJ2MiIsImFkZHIiOiIxMC4xMTAu
      MjA1LjE3NDozMzAwIiwibm9uY2UiOjB9LHsidHlwZSI6InYxIiwiYWRkciI6IjEwLjExMC4yMDUu
      MTc0OjY3ODkiLCJub25jZSI6MH1dfSwiYWRkciI6IjEwLjExMC4yMDUuMTc0OjY3ODkvMCIsInB1
      YmxpY19hZGRyIjoiMTAuMTEwLjIwNS4xNzQ6Njc4OS8wIiwicHJpb3JpdHkiOjAsIndlaWdodCI6
      MH1dfX0nJycKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwW3NlbGYuY21kX25hbWVzWydtZ3Ig
      c2VydmljZXMnXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgXSA9ICcnJ3siZGFzaGJvYXJk
      IjoiaHR0cHM6Ly9jZXBoLWRhc2hib2FyZDo4NDQzLyIsInByb21ldGhldXMiOiJodHRwOi8vY2Vw
      aC1kYXNoYm9hcmQtZGI6OTI4My8ifScnJwogICAgICAgIHNlbGYuY21kX291dHB1dF9tYXBbJycn
      eyJjYXBzIjogWyJtb24iLCAiYWxsb3cgciwgYWxsb3cgY29tbWFuZCBxdW9ydW1fc3RhdHVzIiwg
      Im9zZCIsICJhbGxvdyByd3ggcG9vbD1kZWZhdWx0LnJndy5tZXRhLCBhbGxvdyByIHBvb2w9LnJn
      dy5yb290LCBhbGxvdyBydyBwb29sPWRlZmF1bHQucmd3LmNvbnRyb2wsIGFsbG93IHggcG9vbD1k
      ZWZhdWx0LnJndy5idWNrZXRzLmluZGV4Il0sICJlbnRpdHkiOiAiY2xpZW50LmhlYWx0aGNoZWNr
      ZXIiLCAiZm9ybWF0IjogImpzb24iLCAicHJlZml4IjogImF1dGggZ2V0LW9yLWNyZWF0ZSJ9Jycn
      XSA9ICcnJ1t7ImVudGl0eSI6ImNsaWVudC5oZWFsdGhjaGVja2VyIiwia2V5IjoiQVFERmtiTmVm
      dDViRlJBQVRuZExOVVNFS3J1b3p4aVppM2xyZEE9PSIsImNhcHMiOnsibW9uIjoiYWxsb3cgciwg
      YWxsb3cgY29tbWFuZCBxdW9ydW1fc3RhdHVzIiwib3NkIjoiYWxsb3cgcnd4IHBvb2w9ZGVmYXVs
      dC5yZ3cubWV0YSwgYWxsb3cgciBwb29sPS5yZ3cucm9vdCwgYWxsb3cgcncgcG9vbD1kZWZhdWx0
      LnJndy5jb250cm9sLCBhbGxvdyB4IHBvb2w9ZGVmYXVsdC5yZ3cuYnVja2V0cy5pbmRleCJ9fV0n
      JycKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWycnJ3siY2FwcyI6IFsibW9uIiwgInByb2Zp
      bGUgcmJkLCBhbGxvdyBjb21tYW5kICdvc2QgYmxvY2tsaXN0JyIsICJvc2QiLCAicHJvZmlsZSBy
      YmQiXSwgImVudGl0eSI6ICJjbGllbnQuY3NpLXJiZC1ub2RlIiwgImZvcm1hdCI6ICJqc29uIiwg
      InByZWZpeCI6ICJhdXRoIGdldC1vci1jcmVhdGUifScnJ10gPSAnJydbeyJlbnRpdHkiOiJjbGll
      bnQuY3NpLXJiZC1ub2RlIiwia2V5IjoiQVFCT2dyTmVIYksxQXhBQXViWUJlVjhTMVUvR1B6cTVT
      VmVxNmc9PSIsImNhcHMiOnsibW9uIjoicHJvZmlsZSByYmQsIGFsbG93IGNvbW1hbmQgJ29zZCBi
      bG9ja2xpc3QnIiwib3NkIjoicHJvZmlsZSByYmQifX1dJycnCiAgICAgICAgc2VsZi5jbWRfb3V0
      cHV0X21hcFsnJyd7ImNhcHMiOiBbIm1vbiIsICJwcm9maWxlIHJiZCwgYWxsb3cgY29tbWFuZCAn
      b3NkIGJsb2NrbGlzdCciLCAibWdyIiwgImFsbG93IHJ3IiwgIm9zZCIsICJwcm9maWxlIHJiZCJd
      LCAiZW50aXR5IjogImNsaWVudC5jc2ktcmJkLXByb3Zpc2lvbmVyIiwgImZvcm1hdCI6ICJqc29u
      IiwgInByZWZpeCI6ICJhdXRoIGdldC1vci1jcmVhdGUifScnJ10gPSAnJydbeyJlbnRpdHkiOiJj
      bGllbnQuY3NpLXJiZC1wcm92aXNpb25lciIsImtleSI6IkFRQk5nck5lMWdleUt4QUE4ZWtWaVJk
      RStoc3M1T3dlWUJrd05nPT0iLCJjYXBzIjp7Im1nciI6ImFsbG93IHJ3IiwibW9uIjoicHJvZmls
      ZSByYmQsIGFsbG93IGNvbW1hbmQgJ29zZCBibG9ja2xpc3QnIiwib3NkIjoicHJvZmlsZSByYmQi
      fX1dJycnCiAgICAgICAgc2VsZi5jbWRfb3V0cHV0X21hcFsnJyd7ImNhcHMiOiBbIm1vbiIsICJh
      bGxvdyByLCBhbGxvdyBjb21tYW5kICdvc2QgYmxvY2tsaXN0JyIsICJtZ3IiLCAiYWxsb3cgcnci
      LCAib3NkIiwgImFsbG93IHJ3IHRhZyBjZXBoZnMgKj0qIiwgIm1kcyIsICJhbGxvdyBydyJdLCAi
      ZW50aXR5IjogImNsaWVudC5jc2ktY2VwaGZzLW5vZGUiLCAiZm9ybWF0IjogImpzb24iLCAicHJl
      Zml4IjogImF1dGggZ2V0LW9yLWNyZWF0ZSJ9JycnXSA9ICcnJ1t7ImVudGl0eSI6ImNsaWVudC5j
      c2ktY2VwaGZzLW5vZGUiLCJrZXkiOiJBUUJPZ3JOZUVOdW5LeEFBUENtZ0U3UjZHOERjWG5hSjFG
      MzJxZz09IiwiY2FwcyI6eyJtZHMiOiJhbGxvdyBydyIsIm1nciI6ImFsbG93IHJ3IiwibW9uIjoi
      YWxsb3cgciwgYWxsb3cgY29tbWFuZCAnb3NkIGJsb2NrbGlzdCciLCJvc2QiOiJhbGxvdyBydyB0
      YWcgY2VwaGZzICo9KiJ9fV0nJycKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWycnJ3siY2Fw
      cyI6IFsibW9uIiwgImFsbG93IHIsIGFsbG93IGNvbW1hbmQgJ29zZCBibG9ja2xpc3QnIiwgIm1n
      ciIsICJhbGxvdyBydyIsICJvc2QiLCAiYWxsb3cgcncgdGFnIGNlcGhmcyBtZXRhZGF0YT0qIl0s
      ICJlbnRpdHkiOiAiY2xpZW50LmNzaS1jZXBoZnMtcHJvdmlzaW9uZXIiLCAiZm9ybWF0IjogImpz
      b24iLCAicHJlZml4IjogImF1dGggZ2V0LW9yLWNyZWF0ZSJ9JycnXSA9ICcnJ1t7ImVudGl0eSI6
      ImNsaWVudC5jc2ktY2VwaGZzLXByb3Zpc2lvbmVyIiwia2V5IjoiQVFCT2dyTmVBRmdjR0JBQXZH
      cUtPQUQwRDN4eG1WWTBSOTEyZGc9PSIsImNhcHMiOnsibWdyIjoiYWxsb3cgcnciLCJtb24iOiJh
      bGxvdyByLCBhbGxvdyBjb21tYW5kICdvc2QgYmxvY2tsaXN0JyIsIm9zZCI6ImFsbG93IHJ3IHRh
      ZyBjZXBoZnMgbWV0YWRhdGE9KiJ9fV0nJycKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWycn
      J3siY2FwcyI6IFsibW9uIiwgImFsbG93IHIsIGFsbG93IGNvbW1hbmQgJ29zZCBibG9ja2xpc3Qn
      IiwgIm1nciIsICJhbGxvdyBydyIsICJvc2QiLCAiYWxsb3cgcncgdGFnIGNlcGhmcyBtZXRhZGF0
      YT0qIl0sICJlbnRpdHkiOiAiY2xpZW50LmNzaS1jZXBoZnMtcHJvdmlzaW9uZXItb3BlbnNoaWZ0
      LXN0b3JhZ2UiLCAiZm9ybWF0IjogImpzb24iLCAicHJlZml4IjogImF1dGggZ2V0LW9yLWNyZWF0
      ZSJ9JycnXSA9ICcnJ1t7ImVudGl0eSI6ImNsaWVudC5jc2ktY2VwaGZzLXByb3Zpc2lvbmVyLW9w
      ZW5zaGlmdC1zdG9yYWdlIiwia2V5IjoiQlFCT2dyTmVBRmdjR0JBQXZHcUtPQUQwRDN4eG1WWTBS
      OTEyZGc9PSIsImNhcHMiOnsibWdyIjoiYWxsb3cgcnciLCJtb24iOiJhbGxvdyByLCBhbGxvdyBj
      b21tYW5kICdvc2QgYmxvY2tsaXN0JyIsIm9zZCI6ImFsbG93IHJ3IHRhZyBjZXBoZnMgbWV0YWRh
      dGE9KiJ9fV0nJycKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWycnJ3siY2FwcyI6IFsibW9u
      IiwgImFsbG93IHIsIGFsbG93IGNvbW1hbmQgJ29zZCBibG9ja2xpc3QnIiwgIm1nciIsICJhbGxv
      dyBydyIsICJvc2QiLCAiYWxsb3cgcncgdGFnIGNlcGhmcyBtZXRhZGF0YT1teWZzIl0sICJlbnRp
      dHkiOiAiY2xpZW50LmNzaS1jZXBoZnMtcHJvdmlzaW9uZXItb3BlbnNoaWZ0LXN0b3JhZ2UtbXlm
      cyIsICJmb3JtYXQiOiAianNvbiIsICJwcmVmaXgiOiAiYXV0aCBnZXQtb3ItY3JlYXRlIn0nJydd
      ID0gJycnW3siZW50aXR5IjoiY2xpZW50LmNzaS1jZXBoZnMtcHJvdmlzaW9uZXItb3BlbnNoaWZ0
      LXN0b3JhZ2UtbXlmcyIsImtleSI6IkNRQk9nck5lQUZnY0dCQUF2R3FLT0FEMEQzeHhtVlkwUjkx
      MmRnPT0iLCJjYXBzIjp7Im1nciI6ImFsbG93IHJ3IiwibW9uIjoiYWxsb3cgciwgYWxsb3cgY29t
      bWFuZCAnb3NkIGJsb2NrbGlzdCciLCJvc2QiOiJhbGxvdyBydyB0YWcgY2VwaGZzIG1ldGFkYXRh
      PW15ZnMifX1dJycnCiAgICAgICAgc2VsZi5jbWRfb3V0cHV0X21hcFsnJyd7ImNhcHMiOiBbIm1v
      biIsICJhbGxvdyByLCBhbGxvdyBjb21tYW5kIHF1b3J1bV9zdGF0dXMsIGFsbG93IGNvbW1hbmQg
      dmVyc2lvbiIsICJtZ3IiLCAiYWxsb3cgY29tbWFuZCBjb25maWciLCAib3NkIiwgImFsbG93IHJ3
      eCBwb29sPWRlZmF1bHQucmd3Lm1ldGEsIGFsbG93IHIgcG9vbD0ucmd3LnJvb3QsIGFsbG93IHJ3
      IHBvb2w9ZGVmYXVsdC5yZ3cuY29udHJvbCwgYWxsb3cgcnggcG9vbD1kZWZhdWx0LnJndy5sb2cs
      IGFsbG93IHggcG9vbD1kZWZhdWx0LnJndy5idWNrZXRzLmluZGV4Il0sICJlbnRpdHkiOiAiY2xp
      ZW50LmhlYWx0aGNoZWNrZXIiLCAiZm9ybWF0IjogImpzb24iLCAicHJlZml4IjogImF1dGggZ2V0
      LW9yLWNyZWF0ZSJ9JycnXSA9ICcnJ1t7ImVudGl0eSI6ImNsaWVudC5oZWFsdGhjaGVja2VyIiwi
      a2V5IjoiQVFERmtiTmVmdDViRlJBQVRuZExOVVNFS3J1b3p4aVppM2xyZEE9PSIsImNhcHMiOnsi
      bW9uIjogImFsbG93IHIsIGFsbG93IGNvbW1hbmQgcXVvcnVtX3N0YXR1cywgYWxsb3cgY29tbWFu
      ZCB2ZXJzaW9uIiwgIm1nciI6ICJhbGxvdyBjb21tYW5kIGNvbmZpZyIsICJvc2QiOiAiYWxsb3cg
      cnd4IHBvb2w9ZGVmYXVsdC5yZ3cubWV0YSwgYWxsb3cgciBwb29sPS5yZ3cucm9vdCwgYWxsb3cg
      cncgcG9vbD1kZWZhdWx0LnJndy5jb250cm9sLCBhbGxvdyByeCBwb29sPWRlZmF1bHQucmd3Lmxv
      ZywgYWxsb3cgeCBwb29sPWRlZmF1bHQucmd3LmJ1Y2tldHMuaW5kZXgifX1dJycnCiAgICAgICAg
      c2VsZi5jbWRfb3V0cHV0X21hcFsnJyd7ImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJtZ3Ig
      c2VydmljZXMifScnJ10gPSAnJyd7ImRhc2hib2FyZCI6ICJodHRwOi8vcm9vay1jZXBoLW1nci1h
      LTU3Y2Y5Zjg0YmMtZjRqbmw6NzAwMC8iLCAicHJvbWV0aGV1cyI6ICJodHRwOi8vcm9vay1jZXBo
      LW1nci1hLTU3Y2Y5Zjg0YmMtZjRqbmw6OTI4My8ifScnJwogICAgICAgIHNlbGYuY21kX291dHB1
      dF9tYXBbJycneyJlbnRpdHkiOiAiY2xpZW50LmhlYWx0aGNoZWNrZXIiLCAiZm9ybWF0IjogImpz
      b24iLCAicHJlZml4IjogImF1dGggZ2V0In0nJyddID0gJycneyJkYXNoYm9hcmQiOiAiaHR0cDov
      L3Jvb2stY2VwaC1tZ3ItYS01N2NmOWY4NGJjLWY0am5sOjcwMDAvIiwgInByb21ldGhldXMiOiAi
      aHR0cDovL3Jvb2stY2VwaC1tZ3ItYS01N2NmOWY4NGJjLWY0am5sOjkyODMvIn0nJycKICAgICAg
      ICBzZWxmLmNtZF9vdXRwdXRfbWFwWycnJ3siZW50aXR5IjogImNsaWVudC5oZWFsdGhjaGVja2Vy
      IiwgImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJhdXRoIGdldCJ9JycnXSA9ICcnJ1t7ImVu
      dGl0eSI6ImNsaWVudC5oZWFsdGhjaGVja2VyIiwia2V5IjoiQVFERmtiTmVmdDViRlJBQVRuZExO
      VVNFS3J1b3p4aVppM2xyZEE9PSIsImNhcHMiOnsibW9uIjogImFsbG93IHIsIGFsbG93IGNvbW1h
      bmQgcXVvcnVtX3N0YXR1cywgYWxsb3cgY29tbWFuZCB2ZXJzaW9uIiwgIm1nciI6ICJhbGxvdyBj
      b21tYW5kIGNvbmZpZyIsICJvc2QiOiAiYWxsb3cgcnd4IHBvb2w9ZGVmYXVsdC5yZ3cubWV0YSwg
      YWxsb3cgciBwb29sPS5yZ3cucm9vdCwgYWxsb3cgcncgcG9vbD1kZWZhdWx0LnJndy5jb250cm9s
      LCBhbGxvdyByeCBwb29sPWRlZmF1bHQucmd3LmxvZywgYWxsb3cgeCBwb29sPWRlZmF1bHQucmd3
      LmJ1Y2tldHMuaW5kZXgifX1dJycnCiAgICAgICAgc2VsZi5jbWRfb3V0cHV0X21hcFsnJyd7ImVu
      dGl0eSI6ICJjbGllbnQuY3NpLWNlcGhmcy1ub2RlIiwgImZvcm1hdCI6ICJqc29uIiwgInByZWZp
      eCI6ICJhdXRoIGdldCJ9JycnXSA9ICcnJ1tdJycnCiAgICAgICAgc2VsZi5jbWRfb3V0cHV0X21h
      cFsnJyd7ImVudGl0eSI6ICJjbGllbnQuY3NpLXJiZC1ub2RlIiwgImZvcm1hdCI6ICJqc29uIiwg
      InByZWZpeCI6ICJhdXRoIGdldCJ9JycnXSA9ICcnJ1tdJycnCiAgICAgICAgc2VsZi5jbWRfb3V0
      cHV0X21hcFsnJyd7ImVudGl0eSI6ICJjbGllbnQuY3NpLXJiZC1wcm92aXNpb25lciIsICJmb3Jt
      YXQiOiAianNvbiIsICJwcmVmaXgiOiAiYXV0aCBnZXQifScnJ10gPSAnJydbXScnJwogICAgICAg
      IHNlbGYuY21kX291dHB1dF9tYXBbJycneyJlbnRpdHkiOiAiY2xpZW50LmNzaS1jZXBoZnMtcHJv
      dmlzaW9uZXIiLCAiZm9ybWF0IjogImpzb24iLCAicHJlZml4IjogImF1dGggZ2V0In0nJyddID0g
      JycnW10nJycKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWycnJ3siZW50aXR5IjogImNsaWVu
      dC5jc2ktY2VwaGZzLXByb3Zpc2lvbmVyLW9wZW5zaGlmdC1zdG9yYWdlIiwgImZvcm1hdCI6ICJq
      c29uIiwgInByZWZpeCI6ICJhdXRoIGdldCJ9JycnXSA9ICcnJ1tdJycnCiAgICAgICAgc2VsZi5j
      bWRfb3V0cHV0X21hcFsnJyd7ImVudGl0eSI6ICJjbGllbnQuY3NpLWNlcGhmcy1wcm92aXNpb25l
      ci1vcGVuc2hpZnQtc3RvcmFnZS1teWZzIiwgImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJh
      dXRoIGdldCJ9JycnXSA9ICcnJ1tdJycnCiAgICAgICAgc2VsZi5jbWRfb3V0cHV0X21hcFsnJyd7
      ImVudGl0eSI6ICJjbGllbnQuY3NpLWNlcGhmcy1wcm92aXNpb25lciIsICJmb3JtYXQiOiAianNv
      biIsICJwcmVmaXgiOiAiYXV0aCBnZXQifScnJ10gPSAnJydbeyJlbnRpdHkiOiJjbGllbnQuY3Np
      LWNlcGhmcy1wcm92aXNpb25lciIsImtleSI6IkFRREZrYk5lZnQ1YkZSQUFUbmRMTlVTRUtydW96
      eGlaaTNscmRBPT0iLCJjYXBzIjp7Im1vbiI6ImFsbG93IHIiLCAibWdyIjoiYWxsb3cgcnciLCAi
      b3NkIjoiYWxsb3cgcncgdGFnIGNlcGhmcyBtZXRhZGF0YT0qIn19XScnJwogICAgICAgIHNlbGYu
      Y21kX291dHB1dF9tYXBbJycneyJjYXBzIjogWyJtb24iLCAiYWxsb3cgciwgYWxsb3cgY29tbWFu
      ZCAnb3NkIGJsb2NrbGlzdCciLCAibWdyIiwgImFsbG93IHJ3IiwgIm9zZCIsICJhbGxvdyBydyB0
      YWcgY2VwaGZzIG1ldGFkYXRhPSoiXSwgImVudGl0eSI6ICJjbGllbnQuY3NpLWNlcGhmcy1wcm92
      aXNpb25lciIsICJmb3JtYXQiOiAianNvbiIsICJwcmVmaXgiOiAiYXV0aCBjYXBzIn0nJyddID0g
      JycnW3siZW50aXR5IjoiY2xpZW50LmNzaS1jZXBoZnMtcHJvdmlzaW9uZXIiLCJrZXkiOiJBUURG
      a2JOZWZ0NWJGUkFBVG5kTE5VU0VLcnVvenhpWmkzbHJkQT09IiwiY2FwcyI6eyJtb24iOiJhbGxv
      dyByLCAgYWxsb3cgY29tbWFuZCAnb3NkIGJsb2NrbGlzdCciLCAibWdyIjoiYWxsb3cgcnciLCAi
      b3NkIjoiYWxsb3cgcncgdGFnIGNlcGhmcyBtZXRhZGF0YT0qIn19XScnJwogICAgICAgIHNlbGYu
      Y21kX291dHB1dF9tYXBbJ3siZm9ybWF0IjogImpzb24iLCAicHJlZml4IjogInN0YXR1cyJ9J10g
      PSBjZXBoX3N0YXR1c19zdHIKCiAgICBkZWYgc2h1dGRvd24oc2VsZik6CiAgICAgICAgcGFzcwoK
      ICAgIGRlZiBnZXRfZnNpZChzZWxmKToKICAgICAgICByZXR1cm4gJ2FmNGUxNjczLTBiNzItNDAy
      ZC05OTBhLTIyZDI5MTlkMGYxYycKCiAgICBkZWYgY29uZl9yZWFkX2ZpbGUoc2VsZik6CiAgICAg
      ICAgcGFzcwoKICAgIGRlZiBjb25uZWN0KHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBkZWYgcG9v
      bF9leGlzdHMoc2VsZiwgcG9vbF9uYW1lKToKICAgICAgICByZXR1cm4gVHJ1ZQoKICAgIGRlZiBt
      b25fY29tbWFuZChzZWxmLCBjbWQsIG91dCk6CiAgICAgICAganNvbl9jbWQgPSBqc29uLmxvYWRz
      KGNtZCkKICAgICAgICBqc29uX2NtZF9zdHIgPSBqc29uLmR1bXBzKGpzb25fY21kLCBzb3J0X2tl
      eXM9VHJ1ZSkKICAgICAgICBjbWRfb3V0cHV0ID0gc2VsZi5jbWRfb3V0cHV0X21hcFtqc29uX2Nt
      ZF9zdHJdCiAgICAgICAgcmV0dXJuIHNlbGYucmV0dXJuX3ZhbCwgXAogICAgICAgICAgICBjbWRf
      b3V0cHV0LCBcCiAgICAgICAgICAgICJ7fSIuZm9ybWF0KHNlbGYuZXJyX21lc3NhZ2UpLmVuY29k
      ZSgndXRmLTgnKQoKICAgIGRlZiBfY29udmVydF9ob3N0bmFtZV90b19pcChzZWxmLCBob3N0X25h
      bWUpOgogICAgICAgIGlwX3JlZ194ID0gcmUuY29tcGlsZShyJ1xkezEsM30uXGR7MSwzfS5cZHsx
      LDN9LlxkezEsM30nKQogICAgICAgICMgaWYgcHJvdmlkZWQgaG9zdCBpcyBkaXJlY3RseSBhbiBJ
      UCBhZGRyZXNzLCByZXR1cm4gdGhlIHNhbWUKICAgICAgICBpZiBpcF9yZWdfeC5tYXRjaChob3N0
      X25hbWUpOgogICAgICAgICAgICByZXR1cm4gaG9zdF9uYW1lCiAgICAgICAgaW1wb3J0IHJhbmRv
      bQogICAgICAgIGhvc3RfaXAgPSBzZWxmLmR1bW15X2hvc3RfaXBfbWFwLmdldChob3N0X25hbWUs
      ICIiKQogICAgICAgIGlmIG5vdCBob3N0X2lwOgogICAgICAgICAgICBob3N0X2lwID0gIjE3Mi45
      Lnt9Lnt9Ii5mb3JtYXQoCiAgICAgICAgICAgICAgICByYW5kb20ucmFuZGludCgwLCAyNTQpLCBy
      YW5kb20ucmFuZGludCgwLCAyNTQpKQogICAgICAgICAgICBzZWxmLmR1bW15X2hvc3RfaXBfbWFw
      W2hvc3RfbmFtZV0gPSBob3N0X2lwCiAgICAgICAgZGVsIHJhbmRvbQogICAgICAgIHJldHVybiBo
      b3N0X2lwCgogICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgUmFkb3MoY29uZmZpbGU9Tm9uZSk6CiAg
      ICAgICAgcmV0dXJuIER1bW15UmFkb3MoKQoKCmNsYXNzIFJhZG9zSlNPTjoKICAgIEVYVEVSTkFM
      X1VTRVJfTkFNRSA9ICJjbGllbnQuaGVhbHRoY2hlY2tlciIKICAgIEVYVEVSTkFMX1JHV19BRE1J
      Tl9PUFNfVVNFUl9OQU1FID0gInJndy1hZG1pbi1vcHMtdXNlciIKICAgIEVNUFRZX09VVFBVVF9M
      SVNUID0gIkVtcHR5IG91dHB1dCBsaXN0IgogICAgREVGQVVMVF9SR1dfUE9PTF9QUkVGSVggPSAi
      ZGVmYXVsdCIKICAgIERFRkFVTFRfTU9OSVRPUklOR19FTkRQT0lOVF9QT1JUID0gIjkyODMiCgog
      ICAgQGNsYXNzbWV0aG9kCiAgICBkZWYgZ2VuX2FyZ19wYXJzZXIoY2xzLCBhcmdzX3RvX3BhcnNl
      PU5vbmUpOgogICAgICAgIGFyZ1AgPSBhcmdwYXJzZS5Bcmd1bWVudFBhcnNlcigpCgogICAgICAg
      IGNvbW1vbl9ncm91cCA9IGFyZ1AuYWRkX2FyZ3VtZW50X2dyb3VwKCdjb21tb24nKQogICAgICAg
      IGNvbW1vbl9ncm91cC5hZGRfYXJndW1lbnQoIi0tdmVyYm9zZSIsICItdiIsCiAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb249J3N0b3JlX3RydWUnLCBkZWZhdWx0PUZhbHNl
      KQogICAgICAgIGNvbW1vbl9ncm91cC5hZGRfYXJndW1lbnQoIi0tY2VwaC1jb25mIiwgIi1jIiwK
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlbHA9IlByb3ZpZGUgYSBjZXBoIGNv
      bmYgZmlsZS4iLCB0eXBlPXN0cikKICAgICAgICBjb21tb25fZ3JvdXAuYWRkX2FyZ3VtZW50KCIt
      LXJ1bi1hcy11c2VyIiwgIi11IiwgZGVmYXVsdD0iIiwgdHlwZT1zdHIsCiAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgICBoZWxwPSJQcm92aWRlcyBhIHVzZXIgbmFtZSB0byBjaGVjayB0
      aGUgY2x1c3RlcidzIGhlYWx0aCBzdGF0dXMsIG11c3QgYmUgcHJlZml4ZWQgYnkgJ2NsaWVudC4n
      IikKICAgICAgICBjb21tb25fZ3JvdXAuYWRkX2FyZ3VtZW50KCItLWNsdXN0ZXItbmFtZSIsIGRl
      ZmF1bHQ9IiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJDZXBoIGNs
      dXN0ZXIgbmFtZSIpCiAgICAgICAgY29tbW9uX2dyb3VwLmFkZF9hcmd1bWVudCgiLS1uYW1lc3Bh
      Y2UiLCBkZWZhdWx0PSIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0i
      TmFtZXNwYWNlIHdoZXJlIENlcGhDbHVzdGVyIGlzIHJ1bm5pbmciKQogICAgICAgIGNvbW1vbl9n
      cm91cC5hZGRfYXJndW1lbnQoIi0tcmd3LXBvb2wtcHJlZml4IiwgZGVmYXVsdD0iIiwKICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlbHA9IlJHVyBQb29sIHByZWZpeCIpCiAgICAg
      ICAgY29tbW9uX2dyb3VwLmFkZF9hcmd1bWVudCgiLS1yZXN0cmljdGVkLWF1dGgtcGVybWlzc2lv
      biIsIGRlZmF1bHQ9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxw
      PSJSZXN0cmljdGVkIGNlcGhDU0lLZXlyaW5ncyBhdXRoIHBlcm1pc3Npb25zIHRvIHNwZWNpZmlj
      IHBvb2xzLCBjbHVzdGVyIGFuZCBwb29sIG5hbWVzcGFjZXMuIiArCiAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICAiTWFuZGF0b3J5IGZsYWdzIHRoYXQgbmVlZCB0byBiZSBzZXQgYXJl
      IC0tcmJkLWRhdGEtcG9vbC1uYW1lLCAtLXJhZG9zLW5hbWVzcGFjZSBhbmQgLS1jbHVzdGVyLW5h
      bWUuIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiLS1jZXBoZnMtZmlsZXN5
      c3RlbS1uYW1lIGZsYWcgY2FuIGFsc28gYmUgcGFzc2VkIGluIGNhc2Ugb2YgY2VwaGZzIHVzZXIg
      cmVzdHJpY3Rpb24sIHNvIGl0IGNhbiByZXN0cmljdCB1c2VyIHRvIHBhcnRpY3VsYXIgY2VwaGZz
      IGZpbGVzeXN0ZW0iICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJzYW1wbGUg
      cnVuOiBgcHl0aG9uMyAvZXRjL2NlcGgvY3JlYXRlLWV4dGVybmFsLWNsdXN0ZXItcmVzb3VyY2Vz
      LnB5IC0tY2VwaGZzLWZpbGVzeXN0ZW0tbmFtZSBteWZzIC0tcmJkLWRhdGEtcG9vbC1uYW1lIHJl
      cGxpY2Fwb29sIC0tcmFkb3MtbmFtZXNwYWNlIHJhZG9zTmFtZXNwYWNlIC0tY2x1c3Rlci1uYW1l
      IHJvb2tTdG9yYWdlIC0tcmVzdHJpY3RlZC1hdXRoLXBlcm1pc3Npb24gdHJ1ZWAiICsKICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgICJOb3RlOiBSZXN0cmljdGluZyB0aGUgdXNlcnMg
      cGVyIHBvb2wsIHBlciBjbHVzdGVyIGFuZCBwZXIgcG9vbCBuYW1lc3BhY2Ugd2lsbCByZXF1aXJl
      IHRvIGNyZWF0ZSBuZXcgdXNlcnMgYW5kIG5ldyBzZWNyZXRzIGZvciB0aGF0IHVzZXJzLiIpCgog
      ICAgICAgIG91dHB1dF9ncm91cCA9IGFyZ1AuYWRkX2FyZ3VtZW50X2dyb3VwKCdvdXRwdXQnKQog
      ICAgICAgIG91dHB1dF9ncm91cC5hZGRfYXJndW1lbnQoIi0tZm9ybWF0IiwgIi10IiwgY2hvaWNl
      cz1bImpzb24iLCAiYmFzaCJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVm
      YXVsdD0nanNvbicsIGhlbHA9IlByb3ZpZGVzIHRoZSBvdXRwdXQgZm9ybWF0IChqc29uIHwgYmFz
      aCkiKQogICAgICAgIG91dHB1dF9ncm91cC5hZGRfYXJndW1lbnQoIi0tb3V0cHV0IiwgIi1vIiwg
      ZGVmYXVsdD0iIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlbHA9Ik91dHB1
      dCB3aWxsIGJlIHN0b3JlZCBpbnRvIHRoZSBwcm92aWRlZCBmaWxlIikKICAgICAgICBvdXRwdXRf
      Z3JvdXAuYWRkX2FyZ3VtZW50KCItLWNlcGhmcy1maWxlc3lzdGVtLW5hbWUiLCBkZWZhdWx0PSIi
      LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0iUHJvdmlkZXMgdGhlIG5h
      bWUgb2YgdGhlIENlcGggZmlsZXN5c3RlbSIpCiAgICAgICAgb3V0cHV0X2dyb3VwLmFkZF9hcmd1
      bWVudCgiLS1jZXBoZnMtbWV0YWRhdGEtcG9vbC1uYW1lIiwgZGVmYXVsdD0iIiwKICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgIGhlbHA9IlByb3ZpZGVzIHRoZSBuYW1lIG9mIHRoZSBj
      ZXBoZnMgbWV0YWRhdGEgcG9vbCIpCiAgICAgICAgb3V0cHV0X2dyb3VwLmFkZF9hcmd1bWVudCgi
      LS1jZXBoZnMtZGF0YS1wb29sLW5hbWUiLCBkZWZhdWx0PSIiLAogICAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgaGVscD0iUHJvdmlkZXMgdGhlIG5hbWUgb2YgdGhlIGNlcGhmcyBkYXRh
      IHBvb2wiKQogICAgICAgIG91dHB1dF9ncm91cC5hZGRfYXJndW1lbnQoIi0tcmJkLWRhdGEtcG9v
      bC1uYW1lIiwgZGVmYXVsdD0iIiwgcmVxdWlyZWQ9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICBoZWxwPSJQcm92aWRlcyB0aGUgbmFtZSBvZiB0aGUgUkJEIGRhdGFwb29s
      IikKICAgICAgICBvdXRwdXRfZ3JvdXAuYWRkX2FyZ3VtZW50KCItLXJndy1lbmRwb2ludCIsIGRl
      ZmF1bHQ9IiIsIHJlcXVpcmVkPUZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
      ICAgaGVscD0iUmFkb3MgR2F0ZVdheSBlbmRwb2ludCAoaW4gPElQPjo8UE9SVD4gZm9ybWF0KSIp
      CiAgICAgICAgb3V0cHV0X2dyb3VwLmFkZF9hcmd1bWVudCgiLS1yZ3ctdGxzLWNlcnQtcGF0aCIs
      IGRlZmF1bHQ9IiIsIHJlcXVpcmVkPUZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgaGVscD0iUmFkb3MgR2F0ZVdheSBlbmRwb2ludCBUTFMgY2VydGlmaWNhdGUiKQogICAg
      ICAgIG91dHB1dF9ncm91cC5hZGRfYXJndW1lbnQoIi0tcmd3LXNraXAtdGxzIiwgcmVxdWlyZWQ9
      RmFsc2UsIGRlZmF1bHQ9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBo
      ZWxwPSJJZ25vcmUgVExTIGNlcnRpZmljYXRpb24gdmFsaWRhdGlvbiB3aGVuIGEgc2VsZi1zaWdu
      ZWQgY2VydGlmaWNhdGUgaXMgcHJvdmlkZWQgKE5PVCBSRUNPTU1FTkRFRCIpCiAgICAgICAgb3V0
      cHV0X2dyb3VwLmFkZF9hcmd1bWVudCgiLS1tb25pdG9yaW5nLWVuZHBvaW50IiwgZGVmYXVsdD0i
      IiwgcmVxdWlyZWQ9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxw
      PSJDZXBoIE1hbmFnZXIgcHJvbWV0aGV1cyBleHBvcnRlciBlbmRwb2ludHMgKGNvbW1hIHNlcGFy
      YXRlZCBsaXN0IG9mIDxJUD4gZW50cmllcyBvZiBhY3RpdmUgYW5kIHN0YW5kYnkgbWdycykiKQog
      ICAgICAgIG91dHB1dF9ncm91cC5hZGRfYXJndW1lbnQoIi0tbW9uaXRvcmluZy1lbmRwb2ludC1w
      b3J0IiwgZGVmYXVsdD0iIiwgcmVxdWlyZWQ9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICBoZWxwPSJDZXBoIE1hbmFnZXIgcHJvbWV0aGV1cyBleHBvcnRlciBwb3J0IikK
      ICAgICAgICBvdXRwdXRfZ3JvdXAuYWRkX2FyZ3VtZW50KCItLXJiZC1tZXRhZGF0YS1lYy1wb29s
      LW5hbWUiLCBkZWZhdWx0PSIiLCByZXF1aXJlZD1GYWxzZSwKICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgIGhlbHA9IlByb3ZpZGVzIHRoZSBuYW1lIG9mIGVyYXN1cmUgY29kZWQgUkJE
      IG1ldGFkYXRhIHBvb2wiKQogICAgICAgIG91dHB1dF9ncm91cC5hZGRfYXJndW1lbnQoIi0tZHJ5
      LXJ1biIsIGRlZmF1bHQ9RmFsc2UsIGFjdGlvbj0nc3RvcmVfdHJ1ZScsCiAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgICBoZWxwPSJEcnkgcnVuIHByaW50cyB0aGUgZXhlY3V0ZWQgY29t
      bWFuZHMgd2l0aG91dCBydW5uaW5nIHRoZW0iKQogICAgICAgIG91dHB1dF9ncm91cC5hZGRfYXJn
      dW1lbnQoIi0tcmFkb3MtbmFtZXNwYWNlIiwgZGVmYXVsdD0iIiwgcmVxdWlyZWQ9RmFsc2UsCiAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJkaXZpZGVzIGEgcG9vbCBpbnRv
      IHNlcGFyYXRlIGxvZ2ljYWwgbmFtZXNwYWNlcyIpCgogICAgICAgIHVwZ3JhZGVfZ3JvdXAgPSBh
      cmdQLmFkZF9hcmd1bWVudF9ncm91cCgndXBncmFkZScpCiAgICAgICAgdXBncmFkZV9ncm91cC5h
      ZGRfYXJndW1lbnQoIi0tdXBncmFkZSIsIGFjdGlvbj0nc3RvcmVfdHJ1ZScsIGRlZmF1bHQ9RmFs
      c2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0iVXBncmFkZXMgdGhl
      ICdjc2ktdXNlcicoRm9yIGV4YW1wbGU6IGNsaWVudC5jc2ktY2VwaGZzLXByb3Zpc2lvbmVyKSB3
      aXRoIG5ldyBwZXJtaXNzaW9ucyBuZWVkZWQgZm9yIHRoZSBuZXcgY2x1c3RlciB2ZXJzaW9uIGFu
      ZCBvbGRlciBwZXJtaXNzaW9uIHdpbGwgc3RpbGwgYmUgYXBwbGllZC4iICsKICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICAiU2FtcGxlIHJ1bjogYHB5dGhvbjMgL2V0Yy9jZXBoL2Ny
      ZWF0ZS1leHRlcm5hbC1jbHVzdGVyLXJlc291cmNlcy5weSAtLXVwZ3JhZGVgLCB0aGlzIHdpbGwg
      dXBncmFkZSBhbGwgdGhlIGRlZmF1bHQgY3NpIHVzZXJzKG5vbi1yZXN0cmljdGVkKSIgKwogICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJGb3IgcmVzdHJpY3RlZCB1c2VycyhGb3Ig
      ZXhhbXBsZTogY2xpZW50LmNzaS1jZXBoZnMtcHJvdmlzaW9uZXItb3BlbnNoaWZ0LXN0b3JhZ2Ut
      bXlmcyksIHVzZXJzIGNyZWF0ZWQgdXNpbmcgLS1yZXN0cmljdGVkLWF1dGgtcGVybWlzc2lvbiBm
      bGFnIG5lZWQgdG8gcGFzcyBtYW5kYXRvcnkgZmxhZ3MiICsKICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAibWFuZGF0b3J5IGZsYWdzOiAnLS1yYmQtZGF0YS1wb29sLW5hbWUsIC0t
      cmFkb3MtbmFtZXNwYWNlLCAtLWNsdXN0ZXItbmFtZSBhbmQgLS1ydW4tYXMtdXNlcicgZmxhZ3Mg
      d2hpbGUgdXBncmFkaW5nIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImlu
      IGNhc2Ugb2YgY2VwaGZzIHVzZXJzIGlmIHlvdSBoYXZlIHBhc3NlZCAtLWNlcGhmcy1maWxlc3lz
      dGVtLW5hbWUgZmxhZyB3aGlsZSBjcmVhdGluZyB1c2VyIHRoZW4gd2hpbGUgdXBncmFkaW5nIGl0
      IHdpbGwgYmUgbWFuZGF0b3J5IHRvbyIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
      ICAgICJTYW1wbGUgcnVuOiBgcHl0aG9uMyAvZXRjL2NlcGgvY3JlYXRlLWV4dGVybmFsLWNsdXN0
      ZXItcmVzb3VyY2VzLnB5IC0tdXBncmFkZSAtLXJiZC1kYXRhLXBvb2wtbmFtZSByZXBsaWNhcG9v
      bCAtLXJhZG9zLW5hbWVzcGFjZSByYWRvc05hbWVzcGFjZSAtLWNsdXN0ZXItbmFtZSByb29rU3Rv
      cmFnZSAgLS1ydW4tYXMtdXNlciBjbGllbnQuY3NpLXJiZC1ub2RlLXJvb2tTdG9yYWdlLXJlcGxp
      Y2Fwb29sLXJhZG9zTmFtZXNwYWNlYCIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
      ICAgICJQUzogQW4gZXhpc3Rpbmcgbm9uLXJlc3RyaWN0ZWQgdXNlciBjYW5ub3QgYmUgZG93bmdy
      YWRlZCB0byBhIHJlc3RyaWN0ZWQgdXNlciBieSB1cGdyYWRpbmcuIEFkbWluIG5lZWQgdG8gY3Jl
      YXRlIGEgbmV3IHJlc3RyaWN0ZWQgdXNlciBmb3IgdGhpcyBieSByZS1ydW5uaW5nIHRoZSBzY3Jp
      cHQuIiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIlVwZ3JhZGUgZmxhZyBz
      aG91bGQgb25seSBiZSB1c2VkIHRvIGFwcGVuZCBuZXcgcGVybWlzc2lvbnMgdG8gdXNlcnMsIGl0
      IHNob3VsZG4ndCBiZSB1c2VkIGZvciBjaGFuZ2luZyB1c2VyIGFscmVhZHkgYXBwbGllZCBwZXJt
      aXNzaW9uLCBmb3IgZXhhbXBsZSB5b3Ugc2hvdWxkbid0IGNoYW5nZSBpbiB3aGljaCBwb29sIHVz
      ZXIgaGFzIGFjY2VzcyIpCgogICAgICAgIGlmIGFyZ3NfdG9fcGFyc2U6CiAgICAgICAgICAgIGFz
      c2VydCB0eXBlKGFyZ3NfdG9fcGFyc2UpID09IGxpc3QsIFwKICAgICAgICAgICAgICAgICJBcmd1
      bWVudCB0byAnZ2VuX2FyZ19wYXJzZXInIHNob3VsZCBiZSBhIGxpc3QiCiAgICAgICAgZWxzZToK
      ICAgICAgICAgICAgYXJnc190b19wYXJzZSA9IHN5cy5hcmd2WzE6XQogICAgICAgIHJldHVybiBh
      cmdQLnBhcnNlX2FyZ3MoYXJnc190b19wYXJzZSkKCiAgICBkZWYgdmFsaWRhdGVfcmd3X21ldGFk
      YXRhX2VjX3Bvb2xfbmFtZShzZWxmKToKICAgICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLnJiZF9t
      ZXRhZGF0YV9lY19wb29sX25hbWU6CiAgICAgICAgICAgIHJiZF9tZXRhZGF0YV9lY19wb29sX25h
      bWUgPSBzZWxmLl9hcmdfcGFyc2VyLnJiZF9tZXRhZGF0YV9lY19wb29sX25hbWUKICAgICAgICAg
      ICAgcmJkX3Bvb2xfbmFtZSA9IHNlbGYuX2FyZ19wYXJzZXIucmJkX2RhdGFfcG9vbF9uYW1lCgog
      ICAgICAgICAgICBpZiByYmRfcG9vbF9uYW1lID09ICIiOgogICAgICAgICAgICAgICAgcmFpc2Ug
      RXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICAgICAiRmxhZyAnLS1y
      YmQtZGF0YS1wb29sLW5hbWUnIHNob3VsZCBub3QgYmUgZW1wdHkiCiAgICAgICAgICAgICAgICAp
      CgogICAgICAgICAgICBpZiByYmRfbWV0YWRhdGFfZWNfcG9vbF9uYW1lID09ICIiOgogICAgICAg
      ICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAg
      ICAgICAiRmxhZyAnLS1yYmQtbWV0YWRhdGEtZWMtcG9vbC1uYW1lJyBzaG91bGQgbm90IGJlIGVt
      cHR5IgogICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgY21kX2pzb24gPSB7CiAgICAgICAg
      ICAgICAgICAicHJlZml4IjogIm9zZCBkdW1wIiwgImZvcm1hdCI6ICJqc29uIgogICAgICAgICAg
      ICB9CiAgICAgICAgICAgIHJldF92YWwsIGpzb25fb3V0LCBlcnJfbXNnID0gc2VsZi5fY29tbW9u
      X2NtZF9qc29uX2dlbihjbWRfanNvbikKICAgICAgICAgICAgaWYgcmV0X3ZhbCAhPSAwIG9yIGxl
      bihqc29uX291dCkgPT0gMDoKICAgICAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVF
      eGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgInt9Ii5mb3JtYXQoY21kX2pzb25bJ3ByZWZp
      eCddKSArICIgY29tbWFuZCBmYWlsZWQuXG4iICsKICAgICAgICAgICAgICAgICAgICAiRXJyb3I6
      IHt9Ii5mb3JtYXQoZXJyX21zZyBpZiByZXRfdmFsICE9CiAgICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgIDAgZWxzZSBzZWxmLkVNUFRZX09VVFBVVF9MSVNUKQogICAgICAgICAg
      ICAgICAgKQogICAgICAgICAgICBtZXRhZGF0YV9wb29sX2V4aXN0LCBwb29sX2V4aXN0ID0gRmFs
      c2UsIEZhbHNlCgogICAgICAgICAgICBmb3Iga2V5IGluIGpzb25fb3V0Wydwb29scyddOgogICAg
      ICAgICAgICAgICAgIyBpZiBlcmFzdXJlX2NvZGVfcHJvZmlsZSBpcyBlbXB0eSBhbmQgcG9vbCBu
      YW1lIGV4aXN0cyB0aGVuIGl0IHJlcGxpY2EgcG9vbAogICAgICAgICAgICAgICAgaWYga2V5Wydl
      cmFzdXJlX2NvZGVfcHJvZmlsZSddID09ICIiIGFuZCBrZXlbJ3Bvb2xfbmFtZSddID09IHJiZF9t
      ZXRhZGF0YV9lY19wb29sX25hbWU6CiAgICAgICAgICAgICAgICAgICAgbWV0YWRhdGFfcG9vbF9l
      eGlzdCA9IFRydWUKICAgICAgICAgICAgICAgICMgaWYgZXJhc3VyZV9jb2RlX3Byb2ZpbGUgaXMg
      bm90IGVtcHR5IGFuZCBwb29sIG5hbWUgZXhpc3RzIHRoZW4gaXQgaXMgZWMgcG9vbAogICAgICAg
      ICAgICAgICAgaWYga2V5WydlcmFzdXJlX2NvZGVfcHJvZmlsZSddIGFuZCBrZXlbJ3Bvb2xfbmFt
      ZSddID09IHJiZF9wb29sX25hbWU6CiAgICAgICAgICAgICAgICAgICAgcG9vbF9leGlzdCA9IFRy
      dWUKCiAgICAgICAgICAgIGlmIG5vdCBtZXRhZGF0YV9wb29sX2V4aXN0OgogICAgICAgICAgICAg
      ICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICAgICAi
      UHJvdmlkZWQgcmJkX2VjX21ldGFkYXRhX3Bvb2wgbmFtZSwge30sIGRvZXMgbm90IGV4aXN0Ii5m
      b3JtYXQocmJkX21ldGFkYXRhX2VjX3Bvb2xfbmFtZSkpCiAgICAgICAgICAgIGlmIG5vdCBwb29s
      X2V4aXN0OgogICAgICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigK
      ICAgICAgICAgICAgICAgICAgICAiUHJvdmlkZWQgcmJkX2RhdGFfcG9vbCBuYW1lLCB7fSwgZG9l
      cyBub3QgZXhpc3QiLmZvcm1hdChyYmRfcG9vbF9uYW1lKSkKICAgICAgICAgICAgcmV0dXJuIHJi
      ZF9tZXRhZGF0YV9lY19wb29sX25hbWUKCiAgICBkZWYgZHJ5X3J1bihzZWxmLCBtc2cpOgogICAg
      ICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIuZHJ5X3J1bjoKICAgICAgICAgICAgcHJpbnQoIkV4ZWN1
      dGU6ICIgKyAiJyIgKyBtc2cgKyAiJyIpCgogICAgZGVmIHZhbGlkYXRlX3Jnd19lbmRwb2ludF90
      bHNfY2VydChzZWxmKToKICAgICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLnJnd190bHNfY2VydF9w
      YXRoOgogICAgICAgICAgICB3aXRoIG9wZW4oc2VsZi5fYXJnX3BhcnNlci5yZ3dfdGxzX2NlcnRf
      cGF0aCwgZW5jb2Rpbmc9J3V0ZjgnKSBhcyBmOgogICAgICAgICAgICAgICAgY29udGVudHMgPSBm
      LnJlYWQoKQogICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnRzLnJzdHJpcCgpCgogICAgZGVm
      IF9jaGVja19jb25mbGljdGluZ19vcHRpb25zKHNlbGYpOgogICAgICAgIGlmIG5vdCBzZWxmLl9h
      cmdfcGFyc2VyLnVwZ3JhZGUgYW5kIG5vdCBzZWxmLl9hcmdfcGFyc2VyLnJiZF9kYXRhX3Bvb2xf
      bmFtZToKICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAg
      ICAgICAgICAgICJFaXRoZXIgJy0tdXBncmFkZScgb3IgJy0tcmJkLWRhdGEtcG9vbC1uYW1lIDxw
      b29sX25hbWU+JyBzaG91bGQgYmUgc3BlY2lmaWVkIikKCiAgICBkZWYgX2ludmFsaWRfZW5kcG9p
      bnQoc2VsZiwgZW5kcG9pbnRfc3RyKToKICAgICAgICB0cnk6CiAgICAgICAgICAgIGlwdjQsIHBv
      cnQgPSBlbmRwb2ludF9zdHIuc3BsaXQoJzonKQogICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgog
      ICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAg
      ICAgIk5vdCBhIHByb3BlciBlbmRwb2ludDoge30sIDxJUHY0Pjo8UE9SVD4sIGZvcm1hdCBpcyBl
      eHBlY3RlZCIuZm9ybWF0KGVuZHBvaW50X3N0cikpCiAgICAgICAgaXBQYXJ0cyA9IGlwdjQuc3Bs
      aXQoJy4nKQogICAgICAgIGlmIGxlbihpcFBhcnRzKSAhPSA0OgogICAgICAgICAgICByYWlzZSBF
      eGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgIk5vdCBhIHZhbGlkIElQ
      IGFkZHJlc3M6IHt9Ii5mb3JtYXQoaXB2NCkpCiAgICAgICAgZm9yIGVhY2hQYXJ0IGluIGlwUGFy
      dHM6CiAgICAgICAgICAgIGlmIG5vdCBlYWNoUGFydC5pc2RpZ2l0KCk6CiAgICAgICAgICAgICAg
      ICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICJJ
      UCBhZGRyZXNzIHBhcnRzIHNob3VsZCBiZSBudW1iZXJzOiB7fSIuZm9ybWF0KGlwdjQpKQogICAg
      ICAgICAgICBpbnRQYXJ0ID0gaW50KGVhY2hQYXJ0KQogICAgICAgICAgICBpZiBpbnRQYXJ0IDwg
      MCBvciBpbnRQYXJ0ID4gMjU0OgogICAgICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVy
      ZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICAgICAiT3V0IG9mIHJhbmdlIElQIGFkZHJlc3Nl
      czoge30iLmZvcm1hdChpcHY0KSkKICAgICAgICBpZiBub3QgcG9ydC5pc2RpZ2l0KCk6CiAgICAg
      ICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oIlBvcnQgbm90IHZhbGlkOiB7
      fSIuZm9ybWF0KHBvcnQpKQogICAgICAgIGludFBvcnQgPSBpbnQocG9ydCkKICAgICAgICBpZiBp
      bnRQb3J0IDwgMSBvciBpbnRQb3J0ID4gMioqMTYtMToKICAgICAgICAgICAgcmFpc2UgRXhlY3V0
      aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICJPdXQgb2YgcmFuZ2UgcG9ydCBu
      dW1iZXI6IHt9Ii5mb3JtYXQocG9ydCkpCiAgICAgICAgcmV0dXJuIEZhbHNlCgogICAgZGVmIGVu
      ZHBvaW50X2RpYWwoc2VsZiwgZW5kcG9pbnRfc3RyLCB0aW1lb3V0PTMsIGNlcnQ9Tm9uZSk6CiAg
      ICAgICAgIyBpZiB0aGUgJ2NsdXN0ZXInIGluc3RhbmNlIGlzIGEgZHVtbXkgb25lLAogICAgICAg
      ICMgZG9uJ3QgdHJ5IHRvIHJlYWNoIG91dCB0byB0aGUgZW5kcG9pbnQKICAgICAgICBpZiBpc2lu
      c3RhbmNlKHNlbGYuY2x1c3RlciwgRHVtbXlSYWRvcyk6CiAgICAgICAgICAgIHJldHVybgogICAg
      ICAgIHByb3RvY29scyA9IFsiaHR0cCIsICJodHRwcyJdCiAgICAgICAgZm9yIHByZWZpeCBpbiBw
      cm90b2NvbHM6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIGVwID0gInt9Oi8ve30i
      LmZvcm1hdChwcmVmaXgsIGVuZHBvaW50X3N0cikKICAgICAgICAgICAgICAgICMgSWYgdmVyaWZ5
      IGlzIHNldCB0byBhIHBhdGggdG8gYSBkaXJlY3RvcnksCiAgICAgICAgICAgICAgICAjIHRoZSBk
      aXJlY3RvcnkgbXVzdCBoYXZlIGJlZW4gcHJvY2Vzc2VkIHVzaW5nIHRoZSBjX3JlaGFzaCB1dGls
      aXR5IHN1cHBsaWVkIHdpdGggT3BlblNTTC4KICAgICAgICAgICAgICAgIGlmIHByZWZpeCA9PSAi
      aHR0cHMiIGFuZCBjZXJ0IGFuZCBzZWxmLl9hcmdfcGFyc2VyLnJnd19za2lwX3RsczoKICAgICAg
      ICAgICAgICAgICAgICByID0gcmVxdWVzdHMuaGVhZChlcCwgdGltZW91dD10aW1lb3V0LCB2ZXJp
      Znk9RmFsc2UpCiAgICAgICAgICAgICAgICBlbGlmIHByZWZpeCA9PSAiaHR0cHMiIGFuZCBjZXJ0
      OgogICAgICAgICAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5oZWFkKGVwLCB0aW1lb3V0PXRpbWVv
      dXQsIHZlcmlmeT1jZXJ0KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAg
      ICByID0gcmVxdWVzdHMuaGVhZChlcCwgdGltZW91dD10aW1lb3V0KQogICAgICAgICAgICAgICAg
      aWYgci5zdGF0dXNfY29kZSA9PSAyMDA6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAg
      ICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIGNvbnRpbnVlCiAgICAgICAgcmFpc2UgRXhl
      Y3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgInVuYWJsZSB0byBjb25uZWN0IHRv
      IGVuZHBvaW50OiB7fSIuZm9ybWF0KGVuZHBvaW50X3N0cikpCgogICAgZGVmIF9faW5pdF9fKHNl
      bGYsIGFyZ19saXN0PU5vbmUpOgogICAgICAgIHNlbGYub3V0X21hcCA9IHt9CiAgICAgICAgc2Vs
      Zi5fZXhjbHVkZWRfa2V5cyA9IHNldCgpCiAgICAgICAgc2VsZi5fYXJnX3BhcnNlciA9IHNlbGYu
      Z2VuX2FyZ19wYXJzZXIoYXJnc190b19wYXJzZT1hcmdfbGlzdCkKICAgICAgICBzZWxmLl9jaGVj
      a19jb25mbGljdGluZ19vcHRpb25zKCkKICAgICAgICBzZWxmLnJ1bl9hc191c2VyID0gc2VsZi5f
      YXJnX3BhcnNlci5ydW5fYXNfdXNlcgogICAgICAgIHNlbGYub3V0cHV0X2ZpbGUgPSBzZWxmLl9h
      cmdfcGFyc2VyLm91dHB1dAogICAgICAgIHNlbGYuY2VwaF9jb25mID0gc2VsZi5fYXJnX3BhcnNl
      ci5jZXBoX2NvbmYKICAgICAgICBzZWxmLk1JTl9VU0VSX0NBUF9QRVJNSVNTSU9OUyA9IHsKICAg
      ICAgICAgICAgJ21ncic6ICdhbGxvdyBjb21tYW5kIGNvbmZpZycsCiAgICAgICAgICAgICdtb24n
      OiAnYWxsb3cgciwgYWxsb3cgY29tbWFuZCBxdW9ydW1fc3RhdHVzLCBhbGxvdyBjb21tYW5kIHZl
      cnNpb24nLAogICAgICAgICAgICAnb3NkJzogImFsbG93IHJ3eCBwb29sPXswfS5yZ3cubWV0YSwg
      IiArCiAgICAgICAgICAgICJhbGxvdyByIHBvb2w9LnJndy5yb290LCAiICsKICAgICAgICAgICAg
      ImFsbG93IHJ3IHBvb2w9ezB9LnJndy5jb250cm9sLCAiICsKICAgICAgICAgICAgImFsbG93IHJ4
      IHBvb2w9ezB9LnJndy5sb2csICIgKwogICAgICAgICAgICAiYWxsb3cgeCBwb29sPXswfS5yZ3cu
      YnVja2V0cy5pbmRleCIKICAgICAgICB9CiAgICAgICAgIyBpZiB1c2VyIG5vdCBwcm92aWRlZCwg
      Z2l2ZSBhIGRlZmF1bHQgdXNlcgogICAgICAgIGlmIG5vdCBzZWxmLnJ1bl9hc191c2VyIGFuZCBu
      b3Qgc2VsZi5fYXJnX3BhcnNlci51cGdyYWRlOgogICAgICAgICAgICBzZWxmLnJ1bl9hc191c2Vy
      ID0gc2VsZi5FWFRFUk5BTF9VU0VSX05BTUUKICAgICAgICBpZiBub3Qgc2VsZi5fYXJnX3BhcnNl
      ci5yZ3dfcG9vbF9wcmVmaXggYW5kIG5vdCBzZWxmLl9hcmdfcGFyc2VyLnVwZ3JhZGU6CiAgICAg
      ICAgICAgIHNlbGYuX2FyZ19wYXJzZXIucmd3X3Bvb2xfcHJlZml4ID0gc2VsZi5ERUZBVUxUX1JH
      V19QT09MX1BSRUZJWAogICAgICAgIGlmIHNlbGYuY2VwaF9jb25mOgogICAgICAgICAgICBzZWxm
      LmNsdXN0ZXIgPSByYWRvcy5SYWRvcyhjb25mZmlsZT1zZWxmLmNlcGhfY29uZikKICAgICAgICBl
      bHNlOgogICAgICAgICAgICBzZWxmLmNsdXN0ZXIgPSByYWRvcy5SYWRvcygpCiAgICAgICAgICAg
      IHNlbGYuY2x1c3Rlci5jb25mX3JlYWRfZmlsZSgpCiAgICAgICAgc2VsZi5jbHVzdGVyLmNvbm5l
      Y3QoKQoKICAgIGRlZiBzaHV0ZG93bihzZWxmKToKICAgICAgICBpZiBzZWxmLmNsdXN0ZXIuc3Rh
      dGUgPT0gImNvbm5lY3RlZCI6CiAgICAgICAgICAgIHNlbGYuY2x1c3Rlci5zaHV0ZG93bigpCgog
      ICAgZGVmIGdldF9mc2lkKHNlbGYpOgogICAgICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIuZHJ5X3J1
      bjoKICAgICAgICAgICAgcmV0dXJuIHNlbGYuZHJ5X3J1bigiY2VwaCBmc2lkIikKICAgICAgICBy
      ZXR1cm4gc3RyKHNlbGYuY2x1c3Rlci5nZXRfZnNpZCgpKQoKICAgIGRlZiBfY29tbW9uX2NtZF9q
      c29uX2dlbihzZWxmLCBjbWRfanNvbik6CiAgICAgICAgY21kID0ganNvbi5kdW1wcyhjbWRfanNv
      biwgc29ydF9rZXlzPVRydWUpCiAgICAgICAgcmV0X3ZhbCwgY21kX291dCwgZXJyX21zZyA9IHNl
      bGYuY2x1c3Rlci5tb25fY29tbWFuZChjbWQsIGInJykKICAgICAgICBpZiBzZWxmLl9hcmdfcGFy
      c2VyLnZlcmJvc2U6CiAgICAgICAgICAgIHByaW50KCJDb21tYW5kIElucHV0OiB7fSIuZm9ybWF0
      KGNtZCkpCiAgICAgICAgICAgIHByaW50KCJSZXR1cm4gVmFsOiB7fVxuQ29tbWFuZCBPdXRwdXQ6
      IHt9XG5FcnJvciBNZXNzYWdlOiB7fVxuLS0tLS0tLS0tLVxuIi5mb3JtYXQoCiAgICAgICAgICAg
      ICAgICAgIHJldF92YWwsIGNtZF9vdXQsIGVycl9tc2cpKQogICAgICAgIGpzb25fb3V0ID0ge30K
      ICAgICAgICAjIGlmIHRoZXJlIGlzIG5vIGVycm9yIChpLmU7IHJldF92YWwgaXMgWkVSTykgYW5k
      ICdjbWRfb3V0JyBpcyBub3QgZW1wdHkKICAgICAgICAjIHRoZW4gY29udmVydCAnY21kX291dCcg
      dG8gYSBqc29uIG91dHB1dAogICAgICAgIGlmIHJldF92YWwgPT0gMCBhbmQgY21kX291dDoKICAg
      ICAgICAgICAganNvbl9vdXQgPSBqc29uLmxvYWRzKGNtZF9vdXQpCiAgICAgICAgcmV0dXJuIHJl
      dF92YWwsIGpzb25fb3V0LCBlcnJfbXNnCgogICAgZGVmIGdldF9jZXBoX2V4dGVybmFsX21vbl9k
      YXRhKHNlbGYpOgogICAgICAgIGNtZF9qc29uID0geyJwcmVmaXgiOiAicXVvcnVtX3N0YXR1cyIs
      ICJmb3JtYXQiOiAianNvbiJ9CiAgICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci5kcnlfcnVuOgog
      ICAgICAgICAgICByZXR1cm4gc2VsZi5kcnlfcnVuKCJjZXBoICIgKyBjbWRfanNvblsncHJlZml4
      J10pCiAgICAgICAgcmV0X3ZhbCwganNvbl9vdXQsIGVycl9tc2cgPSBzZWxmLl9jb21tb25fY21k
      X2pzb25fZ2VuKGNtZF9qc29uKQogICAgICAgICMgaWYgdGhlcmUgaXMgYW4gdW5zdWNjZXNzZnVs
      IGF0dGVtcHQsCiAgICAgICAgaWYgcmV0X3ZhbCAhPSAwIG9yIGxlbihqc29uX291dCkgPT0gMDoK
      ICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAg
      ICAgICIncXVvcnVtX3N0YXR1cycgY29tbWFuZCBmYWlsZWQuXG4iICsKICAgICAgICAgICAgICAg
      ICJFcnJvcjoge30iLmZvcm1hdChlcnJfbXNnIGlmIHJldF92YWwgIT0gMCBlbHNlIHNlbGYuRU1Q
      VFlfT1VUUFVUX0xJU1QpKQogICAgICAgIHFfbGVhZGVyX25hbWUgPSBqc29uX291dFsncXVvcnVt
      X2xlYWRlcl9uYW1lJ10KICAgICAgICBxX2xlYWRlcl9kZXRhaWxzID0ge30KICAgICAgICBxX2xl
      YWRlcl9tYXRjaGluZ19saXN0ID0gW2wgZm9yIGwgaW4ganNvbl9vdXRbJ21vbm1hcCddWydtb25z
      J10KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxbJ25hbWUnXSA9PSBxX2xl
      YWRlcl9uYW1lXQogICAgICAgIGlmIGxlbihxX2xlYWRlcl9tYXRjaGluZ19saXN0KSA9PSAwOgog
      ICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKCJObyBtYXRjaGluZyAn
      bW9uJyBkZXRhaWxzIGZvdW5kIikKICAgICAgICBxX2xlYWRlcl9kZXRhaWxzID0gcV9sZWFkZXJf
      bWF0Y2hpbmdfbGlzdFswXQogICAgICAgICMgZ2V0IHRoZSBhZGRyZXNzIHZlY3RvciBvZiB0aGUg
      cXVvcnVtLWxlYWRlcgogICAgICAgIHFfbGVhZGVyX2FkZHJ2ZWMgPSBxX2xlYWRlcl9kZXRhaWxz
      LmdldCgKICAgICAgICAgICAgJ3B1YmxpY19hZGRycycsIHt9KS5nZXQoJ2FkZHJ2ZWMnLCBbXSkK
      ICAgICAgICAjIGlmIHRoZSBxdW9ydW0tbGVhZGVyIGhhcyBvbmx5IG9uZSBhZGRyZXNzIGluIHRo
      ZSBhZGRyZXNzLXZlY3RvcgogICAgICAgICMgYW5kIGl0IGlzIG9mIHR5cGUgJ3YyJyAoaWU7IHdp
      dGggPElQPjozMzAwKSwKICAgICAgICAjIHJhaXNlIGFuIGV4Y2VwdGlvbiB0byBtYWtlIHVzZXIg
      YXdhcmUgdGhhdAogICAgICAgICMgdGhleSBoYXZlIHRvIGVuYWJsZSAndjEnIChpZTsgd2l0aCA8
      SVA+OjY3ODkpIHR5cGUgYXMgd2VsbAogICAgICAgIGlmIGxlbihxX2xlYWRlcl9hZGRydmVjKSA9
      PSAxIGFuZCBxX2xlYWRlcl9hZGRydmVjWzBdWyd0eXBlJ10gPT0gJ3YyJzoKICAgICAgICAgICAg
      cmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICJPbmx5ICd2
      MicgYWRkcmVzcyB0eXBlIGlzIGVuYWJsZWQsIHVzZXIgc2hvdWxkIGFsc28gZW5hYmxlICd2MScg
      dHlwZSBhcyB3ZWxsIikKICAgICAgICBpcF9wb3J0ID0gc3RyKHFfbGVhZGVyX2RldGFpbHNbJ3B1
      YmxpY19hZGRyJ10uc3BsaXQoJy8nKVswXSkKICAgICAgICByZXR1cm4gInt9PXt9Ii5mb3JtYXQo
      c3RyKHFfbGVhZGVyX25hbWUpLCBpcF9wb3J0KQoKICAgIGRlZiBfam9pbl9ob3N0X3BvcnQoc2Vs
      ZiwgZW5kcG9pbnQsIHBvcnQpOgogICAgICAgIHBvcnQgPSAie30iLmZvcm1hdChwb3J0KQogICAg
      ICAgICMgcmVnZXggdG8gY2hlY2sgdGhlIGdpdmVuIGVuZHBvaW50IGlzIGVuY2xvc2VkIGluIHNx
      dWFyZSBicmFja2V0cwogICAgICAgIGlwdjZfcmVneCA9IHJlLmNvbXBpbGUocideXFtbXl1dKlxd
      JCcpCiAgICAgICAgIyBlbmRwb2ludCBoYXMgJzonIGluIGl0IGFuZCBpZiBub3QgKGFscmVhZHkp
      IGVuY2xvc2VkIGluIHNxdWFyZSBicmFja2V0cwogICAgICAgIGlmIGVuZHBvaW50LmNvdW50KCc6
      JykgYW5kIG5vdCBpcHY2X3JlZ3gubWF0Y2goZW5kcG9pbnQpOgogICAgICAgICAgICBlbmRwb2lu
      dCA9ICdbe31dJy5mb3JtYXQoZW5kcG9pbnQpCiAgICAgICAgaWYgbm90IHBvcnQ6CiAgICAgICAg
      ICAgIHJldHVybiBlbmRwb2ludAogICAgICAgIHJldHVybiAnOicuam9pbihbZW5kcG9pbnQsIHBv
      cnRdKQoKICAgIGRlZiBfY29udmVydF9ob3N0bmFtZV90b19pcChzZWxmLCBob3N0X25hbWUpOgog
      ICAgICAgICMgaWYgJ2NsdXN0ZXInIGluc3RhbmNlIGlzIGEgZHVtbXkgdHlwZSwKICAgICAgICAj
      IGNhbGwgdGhlIGR1bW15IGluc3RhbmNlJ3MgImNvbnZlcnQiIG1ldGhvZAogICAgICAgIGlmIG5v
      dCBob3N0X25hbWU6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24o
      IkVtcHR5IGhvc3RuYW1lIHByb3ZpZGVkIikKICAgICAgICBpZiBpc2luc3RhbmNlKHNlbGYuY2x1
      c3RlciwgRHVtbXlSYWRvcyk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLmNsdXN0ZXIuX2NvbnZl
      cnRfaG9zdG5hbWVfdG9faXAoaG9zdF9uYW1lKQogICAgICAgIGltcG9ydCBzb2NrZXQKICAgICAg
      ICBpcCA9IHNvY2tldC5nZXRob3N0YnluYW1lKGhvc3RfbmFtZSkKICAgICAgICBkZWwgc29ja2V0
      CiAgICAgICAgcmV0dXJuIGlwCgogICAgZGVmIGdldF9hY3RpdmVfYW5kX3N0YW5kYnlfbWdycyhz
      ZWxmKToKICAgICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLmRyeV9ydW46CiAgICAgICAgICAgIHJl
      dHVybiAiIiwgc2VsZi5kcnlfcnVuKCJjZXBoIHN0YXR1cyIpCiAgICAgICAgbW9uaXRvcmluZ19l
      bmRwb2ludF9wb3J0ID0gc2VsZi5fYXJnX3BhcnNlci5tb25pdG9yaW5nX2VuZHBvaW50X3BvcnQK
      ICAgICAgICBtb25pdG9yaW5nX2VuZHBvaW50X2lwX2xpc3QgPSBzZWxmLl9hcmdfcGFyc2VyLm1v
      bml0b3JpbmdfZW5kcG9pbnQKICAgICAgICBzdGFuZGJ5X21ncnMgPSBbXQogICAgICAgIGlmIG5v
      dCBtb25pdG9yaW5nX2VuZHBvaW50X2lwX2xpc3Q6CiAgICAgICAgICAgIGNtZF9qc29uID0geyJw
      cmVmaXgiOiAic3RhdHVzIiwgImZvcm1hdCI6ICJqc29uIn0KICAgICAgICAgICAgcmV0X3ZhbCwg
      anNvbl9vdXQsIGVycl9tc2cgPSBzZWxmLl9jb21tb25fY21kX2pzb25fZ2VuKGNtZF9qc29uKQog
      ICAgICAgICAgICAjIGlmIHRoZXJlIGlzIGFuIHVuc3VjY2Vzc2Z1bCBhdHRlbXB0LAogICAgICAg
      ICAgICBpZiByZXRfdmFsICE9IDAgb3IgbGVuKGpzb25fb3V0KSA9PSAwOgogICAgICAgICAgICAg
      ICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICAgICAi
      J21nciBzZXJ2aWNlcycgY29tbWFuZCBmYWlsZWQuXG4iICsKICAgICAgICAgICAgICAgICAgICAi
      RXJyb3I6IHt9Ii5mb3JtYXQoZXJyX21zZyBpZiByZXRfdmFsICE9IDAgZWxzZSBzZWxmLkVNUFRZ
      X09VVFBVVF9MSVNUKSkKICAgICAgICAgICAgbW9uaXRvcmluZ19lbmRwb2ludCA9IGpzb25fb3V0
      LmdldCgnbWdybWFwJywge30pLmdldCgKICAgICAgICAgICAgICAgICdzZXJ2aWNlcycsIHt9KS5n
      ZXQoJ3Byb21ldGhldXMnLCAnJykKICAgICAgICAgICAgaWYgbm90IG1vbml0b3JpbmdfZW5kcG9p
      bnQ6CiAgICAgICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAg
      ICAgICAgICAgICAgICAgICIncHJvbWV0aGV1cycgc2VydmljZSBub3QgZm91bmQsIGlzIHRoZSBl
      eHBvcnRlciBlbmFibGVkPycuXG4iKQogICAgICAgICAgICAjIG5vdyBjaGVjayB0aGUgc3RhbmQt
      YnkgbWdyLXMKICAgICAgICAgICAgc3RhbmRieV9hcnIgPSBqc29uX291dC5nZXQoJ21ncm1hcCcs
      IHt9KS5nZXQoJ3N0YW5kYnlzJywgW10pCiAgICAgICAgICAgIGZvciBlYWNoX3N0YW5kYnkgaW4g
      c3RhbmRieV9hcnI6CiAgICAgICAgICAgICAgICBpZiAnbmFtZScgaW4gZWFjaF9zdGFuZGJ5Lmtl
      eXMoKToKICAgICAgICAgICAgICAgICAgICBzdGFuZGJ5X21ncnMuYXBwZW5kKGVhY2hfc3RhbmRi
      eVsnbmFtZSddKQogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBwYXJzZWRfZW5kcG9p
      bnQgPSB1cmxwYXJzZShtb25pdG9yaW5nX2VuZHBvaW50KQogICAgICAgICAgICBleGNlcHQgVmFs
      dWVFcnJvcjoKICAgICAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24o
      CiAgICAgICAgICAgICAgICAgICAgImludmFsaWQgZW5kcG9pbnQ6IHt9Ii5mb3JtYXQobW9uaXRv
      cmluZ19lbmRwb2ludCkpCiAgICAgICAgICAgIG1vbml0b3JpbmdfZW5kcG9pbnRfaXBfbGlzdCA9
      IHBhcnNlZF9lbmRwb2ludC5ob3N0bmFtZQogICAgICAgICAgICBpZiBub3QgbW9uaXRvcmluZ19l
      bmRwb2ludF9wb3J0OgogICAgICAgICAgICAgICAgbW9uaXRvcmluZ19lbmRwb2ludF9wb3J0ID0g
      Int9Ii5mb3JtYXQocGFyc2VkX2VuZHBvaW50LnBvcnQpCgogICAgICAgICMgaWYgbW9uaXRvcmlu
      ZyBlbmRwb2ludCBwb3J0IGlzIG5vdCBzZXQsIHB1dCBhIGRlZmF1bHQgbW9uIHBvcnQKICAgICAg
      ICBpZiBub3QgbW9uaXRvcmluZ19lbmRwb2ludF9wb3J0OgogICAgICAgICAgICBtb25pdG9yaW5n
      X2VuZHBvaW50X3BvcnQgPSBzZWxmLkRFRkFVTFRfTU9OSVRPUklOR19FTkRQT0lOVF9QT1JUCgog
      ICAgICAgICMgdXNlciBjb3VsZCBnaXZlIGNvbW1hIGFuZCBzcGFjZSBzZXBhcmF0ZWQgaW5wdXRz
      IChsaWtlIC0tbW9uaXRvcmluZy1lbmRwb2ludD0iPGlwMT4sIDxpcDI+IikKICAgICAgICBtb25p
      dG9yaW5nX2VuZHBvaW50X2lwX2xpc3QgPSBtb25pdG9yaW5nX2VuZHBvaW50X2lwX2xpc3QucmVw
      bGFjZSgKICAgICAgICAgICAgIiwiLCAiICIpCiAgICAgICAgbW9uaXRvcmluZ19lbmRwb2ludF9p
      cF9saXN0X3NwbGl0ID0gbW9uaXRvcmluZ19lbmRwb2ludF9pcF9saXN0LnNwbGl0KCkKICAgICAg
      ICAjIGlmIG1vbml0b3JpbmctZW5kcG9pbnQgY291bGQgbm90IGJlIGZvdW5kLCByYWlzZSBhbiBl
      cnJvcgogICAgICAgIGlmIGxlbihtb25pdG9yaW5nX2VuZHBvaW50X2lwX2xpc3Rfc3BsaXQpID09
      IDA6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oIk5vICdtb25p
      dG9yaW5nLWVuZHBvaW50JyBmb3VuZCIpCiAgICAgICAgIyBmaXJzdCBpcCBpcyB0cmVhdGVkIGFz
      IHRoZSBtYWluIG1vbml0b3JpbmctZW5kcG9pbnQKICAgICAgICBtb25pdG9yaW5nX2VuZHBvaW50
      X2lwID0gbW9uaXRvcmluZ19lbmRwb2ludF9pcF9saXN0X3NwbGl0WzBdCiAgICAgICAgIyByZXN0
      IG9mIHRoZSBpcC1zIGFyZSBhZGRlZCB0byB0aGUgJ3N0YW5kYnlfbWdycycgbGlzdAogICAgICAg
      IHN0YW5kYnlfbWdycy5leHRlbmQobW9uaXRvcmluZ19lbmRwb2ludF9pcF9saXN0X3NwbGl0WzE6
      XSkKICAgICAgICBmYWlsZWRfaXAgPSBtb25pdG9yaW5nX2VuZHBvaW50X2lwCiAgICAgICAgCiAg
      ICAgICAgdHJ5OgogICAgICAgICAgICBtb25pdG9yaW5nX2VuZHBvaW50X2lwID0gc2VsZi5fY29u
      dmVydF9ob3N0bmFtZV90b19pcCgKICAgICAgICAgICAgICAgIG1vbml0b3JpbmdfZW5kcG9pbnRf
      aXApCiAgICAgICAgICAgICMgY29sbGVjdCBhbGwgdGhlICdzdGFuZC1ieScgbWdyIGlwcwogICAg
      ICAgICAgICBtZ3JfaXBzID0gW10KICAgICAgICAgICAgZm9yIGVhY2hfc3RhbmRieV9tZ3IgaW4g
      c3RhbmRieV9tZ3JzOgogICAgICAgICAgICAgICAgZmFpbGVkX2lwID0gZWFjaF9zdGFuZGJ5X21n
      cgogICAgICAgICAgICAgICAgbWdyX2lwcy5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgc2Vs
      Zi5fY29udmVydF9ob3N0bmFtZV90b19pcChlYWNoX3N0YW5kYnlfbWdyKSkKICAgICAgICBleGNl
      cHQ6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAg
      ICAgICAgICAiQ29udmVyc2lvbiBvZiBob3N0OiB7fSB0byBJUCBmYWlsZWQuICIKICAgICAgICAg
      ICAgICAgICJQbGVhc2UgZW50ZXIgdGhlIElQIGFkZHJlc3NlcyBvZiBhbGwgdGhlIGNlcGgtbWdy
      cyB3aXRoIHRoZSAnLS1tb25pdG9yaW5nLWVuZHBvaW50JyBmbGFnIi5mb3JtYXQoZmFpbGVkX2lw
      KSkKICAgICAgICBtb25pdG9yaW5nX2VuZHBvaW50ID0gc2VsZi5fam9pbl9ob3N0X3BvcnQoCiAg
      ICAgICAgICAgIG1vbml0b3JpbmdfZW5kcG9pbnRfaXAsIG1vbml0b3JpbmdfZW5kcG9pbnRfcG9y
      dCkKICAgICAgICBzZWxmLl9pbnZhbGlkX2VuZHBvaW50KG1vbml0b3JpbmdfZW5kcG9pbnQpCiAg
      ICAgICAgc2VsZi5lbmRwb2ludF9kaWFsKG1vbml0b3JpbmdfZW5kcG9pbnQpCgogICAgICAgICMg
      YWRkIHRoZSB2YWxpZGF0ZWQgYWN0aXZlIG1nciBJUCBpbnRvIHRoZSBmaXJzdCBpbmRleAogICAg
      ICAgIG1ncl9pcHMuaW5zZXJ0KDAsIG1vbml0b3JpbmdfZW5kcG9pbnRfaXApCiAgICAgICAgYWxs
      X21ncl9pcHNfc3RyID0gIiwiLmpvaW4obWdyX2lwcykKICAgICAgICByZXR1cm4gYWxsX21ncl9p
      cHNfc3RyLCBtb25pdG9yaW5nX2VuZHBvaW50X3BvcnQKCiAgICBkZWYgY2hlY2tfdXNlcl9leGlz
      dChzZWxmLCB1c2VyKToKICAgICAgICBjbWRfanNvbiA9IHsicHJlZml4IjogImF1dGggZ2V0Iiwg
      ImVudGl0eSI6ICJ7fSIuZm9ybWF0KAogICAgICAgICAgICB1c2VyKSwgImZvcm1hdCI6ICJqc29u
      In0KICAgICAgICByZXRfdmFsLCBqc29uX291dCwgXyA9IHNlbGYuX2NvbW1vbl9jbWRfanNvbl9n
      ZW4oY21kX2pzb24pCiAgICAgICAgaWYgcmV0X3ZhbCAhPSAwIG9yIGxlbihqc29uX291dCkgPT0g
      MDoKICAgICAgICAgICAgcmV0dXJuICIiCiAgICAgICAgcmV0dXJuIHN0cihqc29uX291dFswXVsn
      a2V5J10pCgogICAgZGVmIGdldF9jZXBoZnNfcHJvdmlzaW9uZXJfY2Fwc19hbmRfZW50aXR5KHNl
      bGYpOgogICAgICAgIGVudGl0eSA9ICJjbGllbnQuY3NpLWNlcGhmcy1wcm92aXNpb25lciIKICAg
      ICAgICBjYXBzID0geyJtb24iOiAiYWxsb3cgciwgYWxsb3cgY29tbWFuZCAnb3NkIGJsb2NrbGlz
      dCciLAogICAgICAgICAgICAgICAgIm1nciI6ICJhbGxvdyBydyIsCiAgICAgICAgICAgICAgICAi
      b3NkIjogImFsbG93IHJ3IHRhZyBjZXBoZnMgbWV0YWRhdGE9KiJ9CiAgICAgICAgaWYgc2VsZi5f
      YXJnX3BhcnNlci5yZXN0cmljdGVkX2F1dGhfcGVybWlzc2lvbjoKICAgICAgICAgICAgY2x1c3Rl
      cl9uYW1lID0gc2VsZi5fYXJnX3BhcnNlci5jbHVzdGVyX25hbWUKICAgICAgICAgICAgaWYgY2x1
      c3Rlcl9uYW1lID09ICIiOgogICAgICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4
      Y2VwdGlvbigKICAgICAgICAgICAgICAgICAgICAiY2x1c3Rlcl9uYW1lIG5vdCBmb3VuZCwgcGxl
      YXNlIHNldCB0aGUgJy0tY2x1c3Rlci1uYW1lJyBmbGFnIikKICAgICAgICAgICAgY2VwaGZzX2Zp
      bGVzeXN0ZW0gPSBzZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19maWxlc3lzdGVtX25hbWUKICAgICAg
      ICAgICAgaWYgY2VwaGZzX2ZpbGVzeXN0ZW0gPT0gIiI6CiAgICAgICAgICAgICAgICBlbnRpdHkg
      PSAie30te30iLmZvcm1hdChlbnRpdHksIGNsdXN0ZXJfbmFtZSkKICAgICAgICAgICAgZWxzZToK
      ICAgICAgICAgICAgICAgIGVudGl0eSA9ICJ7fS17fS17fSIuZm9ybWF0KGVudGl0eSwKICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsdXN0ZXJfbmFtZSwgY2VwaGZz
      X2ZpbGVzeXN0ZW0pCiAgICAgICAgICAgICAgICBjYXBzWyJvc2QiXSA9ICJhbGxvdyBydyB0YWcg
      Y2VwaGZzIG1ldGFkYXRhPXt9Ii5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgY2VwaGZzX2Zp
      bGVzeXN0ZW0pCgogICAgICAgIHJldHVybiBjYXBzLCBlbnRpdHkKCiAgICBkZWYgZ2V0X2NlcGhm
      c19ub2RlX2NhcHNfYW5kX2VudGl0eShzZWxmKToKICAgICAgICBlbnRpdHkgPSAiY2xpZW50LmNz
      aS1jZXBoZnMtbm9kZSIKICAgICAgICBjYXBzID0geyJtb24iOiAiYWxsb3cgciwgYWxsb3cgY29t
      bWFuZCAnb3NkIGJsb2NrbGlzdCciLAogICAgICAgICAgICAgICAgIm1nciI6ICJhbGxvdyBydyIs
      CiAgICAgICAgICAgICAgICAib3NkIjogImFsbG93IHJ3IHRhZyBjZXBoZnMgKj0qIiwKICAgICAg
      ICAgICAgICAgICJtZHMiOiAiYWxsb3cgcncifQogICAgICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIu
      cmVzdHJpY3RlZF9hdXRoX3Blcm1pc3Npb246CiAgICAgICAgICAgIGNsdXN0ZXJfbmFtZSA9IHNl
      bGYuX2FyZ19wYXJzZXIuY2x1c3Rlcl9uYW1lCiAgICAgICAgICAgIGlmIGNsdXN0ZXJfbmFtZSA9
      PSAiIjoKICAgICAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAg
      ICAgICAgICAgICAgICAgICAgImNsdXN0ZXJfbmFtZSBub3QgZm91bmQsIHBsZWFzZSBzZXQgdGhl
      ICctLWNsdXN0ZXItbmFtZScgZmxhZyIpCiAgICAgICAgICAgIGNlcGhmc19maWxlc3lzdGVtID0g
      c2VsZi5fYXJnX3BhcnNlci5jZXBoZnNfZmlsZXN5c3RlbV9uYW1lCiAgICAgICAgICAgIGlmIGNl
      cGhmc19maWxlc3lzdGVtID09ICIiOgogICAgICAgICAgICAgICAgZW50aXR5ID0gInt9LXt9Ii5m
      b3JtYXQoZW50aXR5LCBjbHVzdGVyX25hbWUpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAg
      ICAgICBlbnRpdHkgPSAie30te30te30iLmZvcm1hdChlbnRpdHksCiAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICBjbHVzdGVyX25hbWUsIGNlcGhmc19maWxlc3lzdGVt
      KQogICAgICAgICAgICAgICAgY2Fwc1sib3NkIl0gPSAiYWxsb3cgcncgdGFnIGNlcGhmcyBkYXRh
      PXt9Ii5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgY2VwaGZzX2ZpbGVzeXN0ZW0pCgogICAg
      ICAgIHJldHVybiBjYXBzLCBlbnRpdHkKCiAgICBkZWYgZ2V0X3JiZF9wcm92aXNpb25lcl9jYXBz
      X2FuZF9lbnRpdHkoc2VsZik6CiAgICAgICAgZW50aXR5ID0gImNsaWVudC5jc2ktcmJkLXByb3Zp
      c2lvbmVyIgogICAgICAgIGNhcHMgPSB7Im1vbiI6ICJwcm9maWxlIHJiZCwgYWxsb3cgY29tbWFu
      ZCAnb3NkIGJsb2NrbGlzdCciLAogICAgICAgICAgICAgICAgIm1nciI6ICJhbGxvdyBydyIsCiAg
      ICAgICAgICAgICAgICAib3NkIjogInByb2ZpbGUgcmJkIn0KICAgICAgICBpZiBzZWxmLl9hcmdf
      cGFyc2VyLnJlc3RyaWN0ZWRfYXV0aF9wZXJtaXNzaW9uOgogICAgICAgICAgICByYmRfcG9vbF9u
      YW1lID0gc2VsZi5fYXJnX3BhcnNlci5yYmRfZGF0YV9wb29sX25hbWUKICAgICAgICAgICAgY2x1
      c3Rlcl9uYW1lID0gc2VsZi5fYXJnX3BhcnNlci5jbHVzdGVyX25hbWUKICAgICAgICAgICAgcmFk
      b3NfbmFtZXNwYWNlID0gc2VsZi5fYXJnX3BhcnNlci5yYWRvc19uYW1lc3BhY2UKICAgICAgICAg
      ICAgaWYgcmJkX3Bvb2xfbmFtZSA9PSAiIiBvciBjbHVzdGVyX25hbWUgPT0gIiIgb3IgcmFkb3Nf
      bmFtZXNwYWNlID09ICIiOgogICAgICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4
      Y2VwdGlvbigKICAgICAgICAgICAgICAgICAgICAibWFuZGF0b3J5IGZsYWdzIG5vdCBmb3VuZCwg
      cGxlYXNlIHNldCB0aGUgJy0tcmJkLWRhdGEtcG9vbC1uYW1lJywgJy0tY2x1c3Rlci1uYW1lJyBh
      bmQgLS1yYWRvcy1uYW1lc3BhY2UgZmxhZ3MiKQogICAgICAgICAgICBlbnRpdHkgPSAie30te30t
      e30te30iLmZvcm1hdChlbnRpdHksIGNsdXN0ZXJfbmFtZSwKICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgcmJkX3Bvb2xfbmFtZSwgcmFkb3NfbmFtZXNwYWNlKQogICAg
      ICAgICAgICBjYXBzWyJvc2QiXSA9ICJwcm9maWxlIHJiZCBwb29sPXt9Ii5mb3JtYXQocmJkX3Bv
      b2xfbmFtZSkKCiAgICAgICAgcmV0dXJuIGNhcHMsIGVudGl0eQoKICAgIGRlZiBnZXRfcmJkX25v
      ZGVfY2Fwc19hbmRfZW50aXR5KHNlbGYpOgogICAgICAgIGVudGl0eSA9ICJjbGllbnQuY3NpLXJi
      ZC1ub2RlIgogICAgICAgIGNhcHMgPSB7Im1vbiI6ICJwcm9maWxlIHJiZCwgYWxsb3cgY29tbWFu
      ZCAnb3NkIGJsb2NrbGlzdCciLAogICAgICAgICAgICAgICAgIm9zZCI6ICJwcm9maWxlIHJiZCJ9
      CiAgICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci5yZXN0cmljdGVkX2F1dGhfcGVybWlzc2lvbjoK
      ICAgICAgICAgICAgcmJkX3Bvb2xfbmFtZSA9IHNlbGYuX2FyZ19wYXJzZXIucmJkX2RhdGFfcG9v
      bF9uYW1lCiAgICAgICAgICAgIGNsdXN0ZXJfbmFtZSA9IHNlbGYuX2FyZ19wYXJzZXIuY2x1c3Rl
      cl9uYW1lCiAgICAgICAgICAgIHJhZG9zX25hbWVzcGFjZSA9IHNlbGYuX2FyZ19wYXJzZXIucmFk
      b3NfbmFtZXNwYWNlCiAgICAgICAgICAgIGlmIHJiZF9wb29sX25hbWUgPT0gIiIgb3IgY2x1c3Rl
      cl9uYW1lID09ICIiIG9yIHJhZG9zX25hbWVzcGFjZSA9PSAiIjoKICAgICAgICAgICAgICAgIHJh
      aXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgIm1hbmRh
      dG9yeSBmbGFncyBub3QgZm91bmQsIHBsZWFzZSBzZXQgdGhlICctLXJiZC1kYXRhLXBvb2wtbmFt
      ZScsICctLWNsdXN0ZXItbmFtZScgYW5kIC0tcmFkb3MtbmFtZXNwYWNlIGZsYWdzIikKICAgICAg
      ICAgICAgZW50aXR5ID0gInt9LXt9LXt9LXt9Ii5mb3JtYXQoZW50aXR5LCBjbHVzdGVyX25hbWUs
      CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJiZF9wb29sX25hbWUs
      IHJhZG9zX25hbWVzcGFjZSkKICAgICAgICAgICAgY2Fwc1sib3NkIl0gPSAicHJvZmlsZSByYmQg
      cG9vbD17fSIuZm9ybWF0KHJiZF9wb29sX25hbWUpCgogICAgICAgIHJldHVybiBjYXBzLCBlbnRp
      dHkKCiAgICBkZWYgZ2V0X2NhcHNfYW5kX2VudGl0eShzZWxmLCB1c2VyX25hbWUpOgogICAgICAg
      IGlmICJjbGllbnQuY3NpLWNlcGhmcy1wcm92aXNpb25lciIgaW4gdXNlcl9uYW1lOgogICAgICAg
      ICAgICBpZiAiY2xpZW50LmNzaS1jZXBoZnMtcHJvdmlzaW9uZXIiICE9IHVzZXJfbmFtZToKICAg
      ICAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIucmVzdHJpY3RlZF9hdXRoX3Blcm1pc3Npb24g
      PSBUcnVlCiAgICAgICAgICAgIHJldHVybiBzZWxmLmdldF9jZXBoZnNfcHJvdmlzaW9uZXJfY2Fw
      c19hbmRfZW50aXR5KCkKICAgICAgICBlbGlmICJjbGllbnQuY3NpLWNlcGhmcy1ub2RlIiBpbiB1
      c2VyX25hbWU6CiAgICAgICAgICAgIGlmICJjbGllbnQuY3NpLWNlcGhmcy1ub2RlIiAhPSB1c2Vy
      X25hbWU6CiAgICAgICAgICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLnJlc3RyaWN0ZWRfYXV0aF9w
      ZXJtaXNzaW9uID0gVHJ1ZQogICAgICAgICAgICByZXR1cm4gc2VsZi5nZXRfY2VwaGZzX25vZGVf
      Y2Fwc19hbmRfZW50aXR5KCkKICAgICAgICBlbGlmICJjbGllbnQuY3NpLXJiZC1wcm92aXNpb25l
      ciIgaW4gdXNlcl9uYW1lOgogICAgICAgICAgICBpZiAiY2xpZW50LmNzaS1yYmQtcHJvdmlzaW9u
      ZXIiICE9IHVzZXJfbmFtZToKICAgICAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIucmVzdHJp
      Y3RlZF9hdXRoX3Blcm1pc3Npb24gPSBUcnVlCiAgICAgICAgICAgIHJldHVybiBzZWxmLmdldF9y
      YmRfcHJvdmlzaW9uZXJfY2Fwc19hbmRfZW50aXR5KCkKICAgICAgICBlbGlmICJjbGllbnQuY3Np
      LXJiZC1ub2RlIiBpbiB1c2VyX25hbWU6CiAgICAgICAgICAgIGlmICJjbGllbnQuY3NpLXJiZC1u
      b2RlIiAhPSB1c2VyX25hbWU6CiAgICAgICAgICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLnJlc3Ry
      aWN0ZWRfYXV0aF9wZXJtaXNzaW9uID0gVHJ1ZQogICAgICAgICAgICByZXR1cm4gc2VsZi5nZXRf
      cmJkX25vZGVfY2Fwc19hbmRfZW50aXR5KCkKCiAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVy
      ZUV4Y2VwdGlvbigKICAgICAgICAgICAgIm5vIHVzZXIgZm91bmQgd2l0aCB1c2VyX25hbWU6IHt9
      ICwiLmZvcm1hdCh1c2VyX25hbWUpCiAgICAgICAgICAgICsgImdldF9jYXBzX2FuZF9lbnRpdHkg
      Y29tbWFuZCBmYWlsZWQuXG4iKQoKICAgIGRlZiBjcmVhdGVfY2VwaENTSUtleXJpbmdfdXNlcihz
      ZWxmLCB1c2VyKToKICAgICAgICAnJycKICAgICAgICBjb21tYW5kOiBjZXBoIGF1dGggZ2V0LW9y
      LWNyZWF0ZSBjbGllbnQuY3NpLWNlcGhmcy1wcm92aXNpb25lciBtb24gJ2FsbG93IHInIG1nciAn
      YWxsb3cgcncnIG9zZCAnYWxsb3cgcncgdGFnIGNlcGhmcyBtZXRhZGF0YT0qJwogICAgICAgICcn
      JwogICAgICAgIGNhcHMsIGVudGl0eSA9IHNlbGYuZ2V0X2NhcHNfYW5kX2VudGl0eSh1c2VyKQog
      ICAgICAgIGNtZF9qc29uID0geyJwcmVmaXgiOiAiYXV0aCBnZXQtb3ItY3JlYXRlIiwKICAgICAg
      ICAgICAgICAgICAgICAiZW50aXR5IjogZW50aXR5LAogICAgICAgICAgICAgICAgICAgICJjYXBz
      IjogW2NhcCBmb3IgY2FwX2xpc3QgaW4gbGlzdChjYXBzLml0ZW1zKCkpIGZvciBjYXAgaW4gY2Fw
      X2xpc3RdLAogICAgICAgICAgICAgICAgICAgICJmb3JtYXQiOiAianNvbiJ9CgogICAgICAgIGlm
      IHNlbGYuX2FyZ19wYXJzZXIuZHJ5X3J1bjoKICAgICAgICAgICAgcmV0dXJuIHNlbGYuZHJ5X3J1
      bigiY2VwaCAiICsgY21kX2pzb25bJ3ByZWZpeCddICsgIiAiICsgY21kX2pzb25bJ2VudGl0eSdd
      ICsgIiAiICsgIiAiLmpvaW4oY21kX2pzb25bJ2NhcHMnXSkpCiAgICAgICAgIyBjaGVjayBpZiB1
      c2VyIGFscmVhZHkgZXhpc3QKICAgICAgICB1c2VyX2tleSA9IHNlbGYuY2hlY2tfdXNlcl9leGlz
      dChlbnRpdHkpCiAgICAgICAgaWYgdXNlcl9rZXkgIT0gIiI6CiAgICAgICAgICAgIHJldHVybiB1
      c2VyX2tleQoKICAgICAgICByZXRfdmFsLCBqc29uX291dCwgZXJyX21zZyA9IHNlbGYuX2NvbW1v
      bl9jbWRfanNvbl9nZW4oY21kX2pzb24pCiAgICAgICAgIyBpZiB0aGVyZSBpcyBhbiB1bnN1Y2Nl
      c3NmdWwgYXR0ZW1wdCwKICAgICAgICBpZiByZXRfdmFsICE9IDAgb3IgbGVuKGpzb25fb3V0KSA9
      PSAwOgogICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAg
      ICAgICAgICAgIidhdXRoIGdldC1vci1jcmVhdGUge30nIGNvbW1hbmQgZmFpbGVkLlxuIi5mb3Jt
      YXQodXNlcikgKwogICAgICAgICAgICAgICAgIkVycm9yOiB7fSIuZm9ybWF0KGVycl9tc2cgaWYg
      cmV0X3ZhbCAhPSAwIGVsc2Ugc2VsZi5FTVBUWV9PVVRQVVRfTElTVCkpCiAgICAgICAgcmV0dXJu
      IHN0cihqc29uX291dFswXVsna2V5J10pCgogICAgZGVmIGdldF9jZXBoZnNfZGF0YV9wb29sX2Rl
      dGFpbHMoc2VsZik6CiAgICAgICAgY21kX2pzb24gPSB7InByZWZpeCI6ICJmcyBscyIsICJmb3Jt
      YXQiOiAianNvbiJ9CiAgICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci5kcnlfcnVuOgogICAgICAg
      ICAgICByZXR1cm4gc2VsZi5kcnlfcnVuKCJjZXBoICIgKyBjbWRfanNvblsncHJlZml4J10pCiAg
      ICAgICAgcmV0X3ZhbCwganNvbl9vdXQsIGVycl9tc2cgPSBzZWxmLl9jb21tb25fY21kX2pzb25f
      Z2VuKGNtZF9qc29uKQogICAgICAgICMgaWYgdGhlcmUgaXMgYW4gdW5zdWNjZXNzZnVsIGF0dGVt
      cHQsIHJlcG9ydCBhbiBlcnJvcgogICAgICAgIGlmIHJldF92YWwgIT0gMDoKICAgICAgICAgICAg
      IyBpZiBmcyBhbmQgZGF0YV9wb29sIGFyZ3VtZW50cyBhcmUgbm90IHNldCwgc2lsZW50bHkgcmV0
      dXJuCiAgICAgICAgICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX2ZpbGVzeXN0ZW1fbmFt
      ZSA9PSAiIiBhbmQgc2VsZi5fYXJnX3BhcnNlci5jZXBoZnNfZGF0YV9wb29sX25hbWUgPT0gIiI6
      CiAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgIyBpZiB1c2VyIGhhcyBwcm92aWRl
      ZCBhbnkgb2YgdGhlCiAgICAgICAgICAgICMgJy0tY2VwaGZzLWZpbGVzeXN0ZW0tbmFtZScgb3Ig
      Jy0tY2VwaGZzLWRhdGEtcG9vbC1uYW1lJyBhcmd1bWVudHMsCiAgICAgICAgICAgICMgcmFpc2Ug
      YW4gZXhjZXB0aW9uIGFzIHdlIGFyZSB1bmFibGUgdG8gdmVyaWZ5IHRoZSBhcmdzCiAgICAgICAg
      ICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAiJ2Zz
      IGxzJyBjZXBoIGNhbGwgZmFpbGVkIHdpdGggZXJyb3I6IHt9Ii5mb3JtYXQoZXJyX21zZykpCgog
      ICAgICAgIG1hdGNoaW5nX2pzb25fb3V0ID0ge30KICAgICAgICAjIGlmICctLWNlcGhmcy1maWxl
      c3lzdGVtLW5hbWUnIGFyZ3VtZW50IGlzIHByb3ZpZGVkLAogICAgICAgICMgY2hlY2sgd2hldGhl
      ciB0aGUgcHJvdmlkZWQgZmlsZXN5c3RlbS1uYW1lIGV4aXN0cyBvciBub3QKICAgICAgICBpZiBz
      ZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19maWxlc3lzdGVtX25hbWU6CiAgICAgICAgICAgICMgZ2V0
      IHRoZSBtYXRjaGluZyBsaXN0CiAgICAgICAgICAgIG1hdGNoaW5nX2pzb25fb3V0X2xpc3QgPSBb
      bWF0Y2hlZCBmb3IgbWF0Y2hlZCBpbiBqc29uX291dAogICAgICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgIGlmIHN0cihtYXRjaGVkWyduYW1lJ10pID09IHNlbGYuX2FyZ19wYXJzZXIu
      Y2VwaGZzX2ZpbGVzeXN0ZW1fbmFtZV0KICAgICAgICAgICAgIyB1bmFibGUgdG8gZmluZCBhIG1h
      dGNoaW5nIGZzLW5hbWUsIHJhaXNlIGFuIGVycm9yCiAgICAgICAgICAgIGlmIGxlbihtYXRjaGlu
      Z19qc29uX291dF9saXN0KSA9PSAwOgogICAgICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFp
      bHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICAgICAoIkZpbGVzeXN0ZW0gcHJvdmlkZWQs
      ICd7fScsICIgKwogICAgICAgICAgICAgICAgICAgICAiaXMgbm90IGZvdW5kIGluIHRoZSBmcy1s
      aXN0OiAne30nIikuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9hcmdfcGFy
      c2VyLmNlcGhmc19maWxlc3lzdGVtX25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIFtzdHIo
      eFsnbmFtZSddKSBmb3IgeCBpbiBqc29uX291dF0pKQogICAgICAgICAgICBtYXRjaGluZ19qc29u
      X291dCA9IG1hdGNoaW5nX2pzb25fb3V0X2xpc3RbMF0KICAgICAgICAjIGlmIGNlcGhmcyBmaWxl
      c3lzdGVtIG5hbWUgaXMgbm90IHByb3ZpZGVkLAogICAgICAgICMgdHJ5IHRvIGdldCBhIGRlZmF1
      bHQgZnMgbmFtZSBieSBkb2luZyB0aGUgZm9sbG93aW5nCiAgICAgICAgZWxzZToKICAgICAgICAg
      ICAgIyBhLiBjaGVjayBpZiB0aGVyZSBpcyBvbmx5IG9uZSBmaWxlc3lzdGVtIGlzIHByZXNlbnQK
      ICAgICAgICAgICAgaWYgbGVuKGpzb25fb3V0KSA9PSAxOgogICAgICAgICAgICAgICAgbWF0Y2hp
      bmdfanNvbl9vdXQgPSBqc29uX291dFswXQogICAgICAgICAgICAjIGIuIG9yIGVsc2UsIGNoZWNr
      IGlmIGRhdGFfcG9vbCBuYW1lIGlzIHByb3ZpZGVkCiAgICAgICAgICAgIGVsaWYgc2VsZi5fYXJn
      X3BhcnNlci5jZXBoZnNfZGF0YV9wb29sX25hbWU6CiAgICAgICAgICAgICAgICAjIGFuZCBpZiBw
      cmVzZW50LCBjaGVjayB3aGV0aGVyIHRoZXJlIGV4aXN0cyBhIGZzIHdoaWNoIGhhcyB0aGUgZGF0
      YV9wb29sCiAgICAgICAgICAgICAgICBmb3IgZWFjaEogaW4ganNvbl9vdXQ6CiAgICAgICAgICAg
      ICAgICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci5jZXBoZnNfZGF0YV9wb29sX25hbWUgaW4gZWFj
      aEpbJ2RhdGFfcG9vbHMnXToKICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hpbmdfanNvbl9v
      dXQgPSBlYWNoSgogICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAg
      IyBpZiB0aGVyZSBpcyBubyBtYXRjaGluZyBmcyBleGlzdHMsIHRoYXQgbWVhbnMgcHJvdmlkZWQg
      ZGF0YV9wb29sIG5hbWUgaXMgaW52YWxpZAogICAgICAgICAgICAgICAgaWYgbm90IG1hdGNoaW5n
      X2pzb25fb3V0OgogICAgICAgICAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNl
      cHRpb24oCiAgICAgICAgICAgICAgICAgICAgICAgICJQcm92aWRlZCBkYXRhX3Bvb2wgbmFtZSwg
      e30sIGRvZXMgbm90IGV4aXN0cyIuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAg
      c2VsZi5fYXJnX3BhcnNlci5jZXBoZnNfZGF0YV9wb29sX25hbWUpKQogICAgICAgICAgICAjIGMu
      IGlmIG5vdGhpbmcgaXMgc2V0IGFuZCBjb3VsZG4ndCBmaW5kIGEgZGVmYXVsdCwKICAgICAgICAg
      ICAgZWxzZToKICAgICAgICAgICAgICAgICMganVzdCByZXR1cm4gc2lsZW50bHkKICAgICAgICAg
      ICAgICAgIHJldHVybgoKICAgICAgICBpZiBtYXRjaGluZ19qc29uX291dDoKICAgICAgICAgICAg
      c2VsZi5fYXJnX3BhcnNlci5jZXBoZnNfZmlsZXN5c3RlbV9uYW1lID0gc3RyKAogICAgICAgICAg
      ICAgICAgbWF0Y2hpbmdfanNvbl9vdXRbJ25hbWUnXSkKICAgICAgICAgICAgc2VsZi5fYXJnX3Bh
      cnNlci5jZXBoZnNfbWV0YWRhdGFfcG9vbF9uYW1lID0gc3RyKAogICAgICAgICAgICAgICAgbWF0
      Y2hpbmdfanNvbl9vdXRbJ21ldGFkYXRhX3Bvb2wnXSkKCiAgICAgICAgaWYgdHlwZShtYXRjaGlu
      Z19qc29uX291dFsnZGF0YV9wb29scyddKSA9PSBsaXN0OgogICAgICAgICAgICAjIGlmIHRoZSB1
      c2VyIGhhcyBhbHJlYWR5IHByb3ZpZGVkIGRhdGEtcG9vbC1uYW1lLAogICAgICAgICAgICAjIHRo
      cm91Z2ggLS1jZXBoZnMtZGF0YS1wb29sLW5hbWUKICAgICAgICAgICAgaWYgc2VsZi5fYXJnX3Bh
      cnNlci5jZXBoZnNfZGF0YV9wb29sX25hbWU6CiAgICAgICAgICAgICAgICAjIGlmIHRoZSBwcm92
      aWRlZCBuYW1lIGlzIG5vdCBtYXRjaGluZyB3aXRoIHRoZSBvbmUgaW4gdGhlIGxpc3QKICAgICAg
      ICAgICAgICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX2RhdGFfcG9vbF9uYW1lIG5vdCBp
      biBtYXRjaGluZ19qc29uX291dFsnZGF0YV9wb29scyddOgogICAgICAgICAgICAgICAgICAgIHJh
      aXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgICAgICJ7
      fTogJ3t9Jywge306IHt9Ii5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUHJv
      dmlkZWQgZGF0YS1wb29sLW5hbWUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5f
      YXJnX3BhcnNlci5jZXBoZnNfZGF0YV9wb29sX25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAg
      ICAgICAiZG9lc24ndCBtYXRjaCBmcm9tIHRoZSBkYXRhLXBvb2xzJyBsaXN0IiwKICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgIFtzdHIoeCkgZm9yIHggaW4gbWF0Y2hpbmdfanNvbl9vdXRbJ2Rh
      dGFfcG9vbHMnXV0pKQogICAgICAgICAgICAjIGlmIGRhdGFfcG9vbCBuYW1lIGlzIG5vdCBwcm92
      aWRlZCwKICAgICAgICAgICAgIyB0aGVuIHRyeSB0byBmaW5kIGEgZGVmYXVsdCBkYXRhIHBvb2wg
      bmFtZQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgIyBpZiBubyBkYXRhX3Bvb2xz
      IGV4aXN0LCBzaWxlbnRseSByZXR1cm4KICAgICAgICAgICAgICAgIGlmIGxlbihtYXRjaGluZ19q
      c29uX291dFsnZGF0YV9wb29scyddKSA9PSAwOgogICAgICAgICAgICAgICAgICAgIHJldHVybgog
      ICAgICAgICAgICAgICAgc2VsZi5fYXJnX3BhcnNlci5jZXBoZnNfZGF0YV9wb29sX25hbWUgPSBz
      dHIoCiAgICAgICAgICAgICAgICAgICAgbWF0Y2hpbmdfanNvbl9vdXRbJ2RhdGFfcG9vbHMnXVsw
      XSkKICAgICAgICAgICAgIyBpZiB0aGVyZSBhcmUgbW9yZSB0aGFuIG9uZSAnZGF0YV9wb29scycg
      ZXhpc3QsCiAgICAgICAgICAgICMgdGhlbiB3YXJuIHRoZSB1c2VyIHRoYXQgd2UgYXJlIHVzaW5n
      IHRoZSBzZWxlY3RlZCBuYW1lCiAgICAgICAgICAgIGlmIGxlbihtYXRjaGluZ19qc29uX291dFsn
      ZGF0YV9wb29scyddKSA+IDE6CiAgICAgICAgICAgICAgICBwcmludCgie306IHt9XG57fTogJ3t9
      J1xuIi5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgIldBUk5JTkc6IE11bHRpcGxlIGRhdGEg
      cG9vbHMgZGV0ZWN0ZWQiLAogICAgICAgICAgICAgICAgICAgIFtzdHIoeCkgZm9yIHggaW4gbWF0
      Y2hpbmdfanNvbl9vdXRbJ2RhdGFfcG9vbHMnXV0sCiAgICAgICAgICAgICAgICAgICAgIlVzaW5n
      IHRoZSBkYXRhLXBvb2wiLAogICAgICAgICAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIuY2Vw
      aGZzX2RhdGFfcG9vbF9uYW1lKSkKCiAgICBkZWYgY3JlYXRlX2NoZWNrZXJLZXkoc2VsZik6CiAg
      ICAgICAgY21kX2pzb24gPSB7InByZWZpeCI6ICJhdXRoIGdldC1vci1jcmVhdGUiLAogICAgICAg
      ICAgICAgICAgICAgICJlbnRpdHkiOiBzZWxmLnJ1bl9hc191c2VyLAogICAgICAgICAgICAgICAg
      ICAgICJjYXBzIjogWyJtb24iLCBzZWxmLk1JTl9VU0VSX0NBUF9QRVJNSVNTSU9OU1snbW9uJ10s
      CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1nciIsIHNlbGYuTUlOX1VTRVJfQ0FQX1BF
      Uk1JU1NJT05TWydtZ3InXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAib3NkIiwgc2Vs
      Zi5NSU5fVVNFUl9DQVBfUEVSTUlTU0lPTlNbJ29zZCddLmZvcm1hdChzZWxmLl9hcmdfcGFyc2Vy
      LnJnd19wb29sX3ByZWZpeCldLAogICAgICAgICAgICAgICAgICAgICJmb3JtYXQiOiAianNvbiJ9
      CiAgICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci5kcnlfcnVuOgogICAgICAgICAgICByZXR1cm4g
      c2VsZi5kcnlfcnVuKCJjZXBoICIgKyBjbWRfanNvblsncHJlZml4J10gKyAiICIgKyBjbWRfanNv
      blsnZW50aXR5J10gKyAiICIgKyAiICIuam9pbihjbWRfanNvblsnY2FwcyddKSkKICAgICAgICBy
      ZXRfdmFsLCBqc29uX291dCwgZXJyX21zZyA9IHNlbGYuX2NvbW1vbl9jbWRfanNvbl9nZW4oY21k
      X2pzb24pCiAgICAgICAgIyBpZiB0aGVyZSBpcyBhbiB1bnN1Y2Nlc3NmdWwgYXR0ZW1wdCwKICAg
      ICAgICBpZiByZXRfdmFsICE9IDAgb3IgbGVuKGpzb25fb3V0KSA9PSAwOgogICAgICAgICAgICBy
      YWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgIidhdXRoIGdl
      dC1vci1jcmVhdGUge30nIGNvbW1hbmQgZmFpbGVkXG4iLmZvcm1hdChzZWxmLnJ1bl9hc191c2Vy
      KSArCiAgICAgICAgICAgICAgICAiRXJyb3I6IHt9Ii5mb3JtYXQoZXJyX21zZyBpZiByZXRfdmFs
      ICE9IDAgZWxzZSBzZWxmLkVNUFRZX09VVFBVVF9MSVNUKSkKICAgICAgICByZXR1cm4gc3RyKGpz
      b25fb3V0WzBdWydrZXknXSkKCiAgICBkZWYgZ2V0X2NlcGhfZGFzaGJvYXJkX2xpbmsoc2VsZik6
      CiAgICAgICAgY21kX2pzb24gPSB7InByZWZpeCI6ICJtZ3Igc2VydmljZXMiLCAiZm9ybWF0Ijog
      Impzb24ifQogICAgICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIuZHJ5X3J1bjoKICAgICAgICAgICAg
      cmV0dXJuIHNlbGYuZHJ5X3J1bigiY2VwaCAiICsgY21kX2pzb25bJ3ByZWZpeCddKQogICAgICAg
      IHJldF92YWwsIGpzb25fb3V0LCBfID0gc2VsZi5fY29tbW9uX2NtZF9qc29uX2dlbihjbWRfanNv
      bikKICAgICAgICAjIGlmIHRoZXJlIGlzIGFuIHVuc3VjY2Vzc2Z1bCBhdHRlbXB0LAogICAgICAg
      IGlmIHJldF92YWwgIT0gMCBvciBsZW4oanNvbl9vdXQpID09IDA6CiAgICAgICAgICAgIHJldHVy
      biBOb25lCiAgICAgICAgaWYgbm90ICdkYXNoYm9hcmQnIGluIGpzb25fb3V0OgogICAgICAgICAg
      ICByZXR1cm4gTm9uZQogICAgICAgIHJldHVybiBqc29uX291dFsnZGFzaGJvYXJkJ10KCiAgICBk
      ZWYgY3JlYXRlX3Jnd19hZG1pbl9vcHNfdXNlcihzZWxmKToKICAgICAgICBjbWQgPSBbJ3JhZG9z
      Z3ctYWRtaW4nLCAndXNlcicsICdjcmVhdGUnLCAnLS11aWQnLCBzZWxmLkVYVEVSTkFMX1JHV19B
      RE1JTl9PUFNfVVNFUl9OQU1FLCAnLS1kaXNwbGF5LW5hbWUnLAogICAgICAgICAgICAgICAnUm9v
      ayBSR1cgQWRtaW4gT3BzIHVzZXInLCAnLS1jYXBzJywgJ2J1Y2tldHM9Kjt1c2Vycz0qO3VzYWdl
      PXJlYWQ7bWV0YWRhdGE9cmVhZDt6b25lPXJlYWQnXQogICAgICAgIGlmIHNlbGYuX2FyZ19wYXJz
      ZXIuZHJ5X3J1bjoKICAgICAgICAgICAgcmV0dXJuIHNlbGYuZHJ5X3J1bigiY2VwaCAiICsgIiAi
      LmpvaW4oY21kKSkKICAgICAgICB0cnk6CiAgICAgICAgICAgIG91dHB1dCA9IHN1YnByb2Nlc3Mu
      Y2hlY2tfb3V0cHV0KGNtZCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgc3RkZXJyPXN1YnByb2Nlc3MuUElQRSkKICAgICAgICBleGNlcHQgc3VicHJvY2Vzcy5D
      YWxsZWRQcm9jZXNzRXJyb3IgYXMgZXhlY0VycjoKICAgICAgICAgICAgIyBpZiB0aGUgdXNlciBh
      bHJlYWR5IGV4aXN0cywgd2UganVzdCBxdWVyeSBpdAogICAgICAgICAgICBpZiBleGVjRXJyLnJl
      dHVybmNvZGUgPT0gZXJybm8uRUVYSVNUOgogICAgICAgICAgICAgICAgY21kID0gWydyYWRvc2d3
      LWFkbWluJywgJ3VzZXInLCAnaW5mbycsCiAgICAgICAgICAgICAgICAgICAgICAgJy0tdWlkJywg
      c2VsZi5FWFRFUk5BTF9SR1dfQURNSU5fT1BTX1VTRVJfTkFNRQogICAgICAgICAgICAgICAgICAg
      ICAgIF0KICAgICAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgICAgICBvdXRwdXQgPSBz
      dWJwcm9jZXNzLmNoZWNrX291dHB1dChjbWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgc3RkZXJyPXN1YnByb2Nlc3MuUElQRSkKICAgICAgICAg
      ICAgICAgIGV4Y2VwdCBzdWJwcm9jZXNzLkNhbGxlZFByb2Nlc3NFcnJvciBhcyBleGVjRXJyOgog
      ICAgICAgICAgICAgICAgICAgIGVycl9tc2cgPSAiZmFpbGVkIHRvIGV4ZWN1dGUgY29tbWFuZCAl
      cy4gT3V0cHV0OiAlcy4gQ29kZTogJXMuIEVycm9yOiAlcyIgJSAoCiAgICAgICAgICAgICAgICAg
      ICAgICAgIGNtZCwgZXhlY0Vyci5vdXRwdXQsIGV4ZWNFcnIucmV0dXJuY29kZSwgZXhlY0Vyci5z
      dGRlcnIpCiAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKGVycl9tc2cpCiAgICAg
      ICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBlcnJfbXNnID0gImZhaWxlZCB0byBleGVjdXRl
      IGNvbW1hbmQgJXMuIE91dHB1dDogJXMuIENvZGU6ICVzLiBFcnJvcjogJXMiICUgKAogICAgICAg
      ICAgICAgICAgICAgIGNtZCwgZXhlY0Vyci5vdXRwdXQsIGV4ZWNFcnIucmV0dXJuY29kZSwgZXhl
      Y0Vyci5zdGRlcnIpCiAgICAgICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oZXJyX21zZykKCiAg
      ICAgICAganNvbm91dHB1dCA9IGpzb24ubG9hZHMob3V0cHV0KQogICAgICAgIHJldHVybiBqc29u
      b3V0cHV0WyJrZXlzIl1bMF1bJ2FjY2Vzc19rZXknXSwganNvbm91dHB1dFsia2V5cyJdWzBdWydz
      ZWNyZXRfa2V5J10KCiAgICBkZWYgdmFsaWRhdGVfcG9vbChzZWxmKToKICAgICAgICBwb29sc190
      b192YWxpZGF0ZSA9IFtzZWxmLl9hcmdfcGFyc2VyLnJiZF9kYXRhX3Bvb2xfbmFtZV0KICAgICAg
      ICAjIGlmIHJnd19lbmRwb2ludCBpcyBwcm92aWRlZCwgdmFsaWRhdGUgaXQKICAgICAgICBpZiBz
      ZWxmLl9hcmdfcGFyc2VyLnJnd19lbmRwb2ludDoKICAgICAgICAgICAgc2VsZi5faW52YWxpZF9l
      bmRwb2ludChzZWxmLl9hcmdfcGFyc2VyLnJnd19lbmRwb2ludCkKICAgICAgICAgICAgc2VsZi5l
      bmRwb2ludF9kaWFsKHNlbGYuX2FyZ19wYXJzZXIucmd3X2VuZHBvaW50LAogICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgY2VydD1zZWxmLnZhbGlkYXRlX3Jnd19lbmRwb2ludF90bHNfY2Vy
      dCgpKQogICAgICAgICAgICByZ3dfcG9vbF90b192YWxpZGF0ZSA9IFsiezB9LnJndy5tZXRhIi5m
      b3JtYXQoc2VsZi5fYXJnX3BhcnNlci5yZ3dfcG9vbF9wcmVmaXgpLAogICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgICAiLnJndy5yb290IiwKICAgICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgInswfS5yZ3cuY29udHJvbCIuZm9ybWF0KAogICAgICAgICAgICAgICAgc2Vs
      Zi5fYXJnX3BhcnNlci5yZ3dfcG9vbF9wcmVmaXgpLAogICAgICAgICAgICAgICAgInswfS5yZ3cu
      bG9nIi5mb3JtYXQoCiAgICAgICAgICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLnJnd19wb29sX3By
      ZWZpeCldCiAgICAgICAgICAgIHBvb2xzX3RvX3ZhbGlkYXRlLmV4dGVuZChyZ3dfcG9vbF90b192
      YWxpZGF0ZSkKCiAgICAgICAgZm9yIHBvb2wgaW4gcG9vbHNfdG9fdmFsaWRhdGU6CiAgICAgICAg
      ICAgIGlmIG5vdCBzZWxmLmNsdXN0ZXIucG9vbF9leGlzdHMocG9vbCk6CiAgICAgICAgICAgICAg
      ICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICJU
      aGUgcHJvdmlkZWQgcG9vbCwgJ3t9JywgZG9lcyBub3QgZXhpc3QiLmZvcm1hdChwb29sKSkKCiAg
      ICBkZWYgdmFsaWRhdGVfcmFkb3NfbmFtZXNwYWNlKHNlbGYpOgogICAgICAgIHJiZF9wb29sX25h
      bWUgPSBzZWxmLl9hcmdfcGFyc2VyLnJiZF9kYXRhX3Bvb2xfbmFtZQogICAgICAgIHJhZG9zX25h
      bWVzcGFjZSA9IHNlbGYuX2FyZ19wYXJzZXIucmFkb3NfbmFtZXNwYWNlCiAgICAgICAgaWYgcmFk
      b3NfbmFtZXNwYWNlID09ICIiOgogICAgICAgICAgICByZXR1cm4KICAgICAgICByYmRfaW5zdCA9
      IHJiZC5SQkQoKQogICAgICAgIGlvY3R4ID0gc2VsZi5jbHVzdGVyLm9wZW5faW9jdHgocmJkX3Bv
      b2xfbmFtZSkKICAgICAgICBpZiByYmRfaW5zdC5uYW1lc3BhY2VfZXhpc3RzKGlvY3R4LCByYWRv
      c19uYW1lc3BhY2UpID09IEZhbHNlOgogICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJl
      RXhjZXB0aW9uKAogICAgICAgICAgICAgICAgKCJUaGUgcHJvdmlkZWQgcmFkb3MgTmFtZXNwYWNl
      LCAne30nLCBpcyBub3QgZm91bmQgaW4gdGhlIHBvb2wgJ3t9JyIpLmZvcm1hdCgKICAgICAgICAg
      ICAgICAgICAgICByYWRvc19uYW1lc3BhY2UsIHJiZF9wb29sX25hbWUpKQoKICAgIGRlZiBfZ2Vu
      X291dHB1dF9tYXAoc2VsZik6CiAgICAgICAgaWYgc2VsZi5vdXRfbWFwOgogICAgICAgICAgICBy
      ZXR1cm4KICAgICAgICBzZWxmLnZhbGlkYXRlX3Bvb2woKQogICAgICAgIHNlbGYudmFsaWRhdGVf
      cmFkb3NfbmFtZXNwYWNlKCkKICAgICAgICBzZWxmLl9leGNsdWRlZF9rZXlzLmFkZCgnQ0xVU1RF
      Ul9OQU1FJykKICAgICAgICBzZWxmLmdldF9jZXBoZnNfZGF0YV9wb29sX2RldGFpbHMoKQogICAg
      ICAgIHNlbGYub3V0X21hcFsnTkFNRVNQQUNFJ10gPSBzZWxmLl9hcmdfcGFyc2VyLm5hbWVzcGFj
      ZQogICAgICAgIHNlbGYub3V0X21hcFsnQ0xVU1RFUl9OQU1FJ10gPSBzZWxmLl9hcmdfcGFyc2Vy
      LmNsdXN0ZXJfbmFtZQogICAgICAgIHNlbGYub3V0X21hcFsnUk9PS19FWFRFUk5BTF9GU0lEJ10g
      PSBzZWxmLmdldF9mc2lkKCkKICAgICAgICBzZWxmLm91dF9tYXBbJ1JPT0tfRVhURVJOQUxfVVNF
      Uk5BTUUnXSA9IHNlbGYucnVuX2FzX3VzZXIKICAgICAgICBzZWxmLm91dF9tYXBbJ1JPT0tfRVhU
      RVJOQUxfQ0VQSF9NT05fREFUQSddID0gc2VsZi5nZXRfY2VwaF9leHRlcm5hbF9tb25fZGF0YSgp
      CiAgICAgICAgc2VsZi5vdXRfbWFwWydST09LX0VYVEVSTkFMX1VTRVJfU0VDUkVUJ10gPSBzZWxm
      LmNyZWF0ZV9jaGVja2VyS2V5KCkKICAgICAgICBzZWxmLm91dF9tYXBbJ1JPT0tfRVhURVJOQUxf
      REFTSEJPQVJEX0xJTksnXSA9IHNlbGYuZ2V0X2NlcGhfZGFzaGJvYXJkX2xpbmsoKQogICAgICAg
      IHNlbGYub3V0X21hcFsnQ1NJX1JCRF9OT0RFX1NFQ1JFVCddID0gc2VsZi5jcmVhdGVfY2VwaENT
      SUtleXJpbmdfdXNlcigKICAgICAgICAgICAgImNsaWVudC5jc2ktcmJkLW5vZGUiKQogICAgICAg
      IHNlbGYub3V0X21hcFsnQ1NJX1JCRF9QUk9WSVNJT05FUl9TRUNSRVQnXSA9IHNlbGYuY3JlYXRl
      X2NlcGhDU0lLZXlyaW5nX3VzZXIoCiAgICAgICAgICAgICJjbGllbnQuY3NpLXJiZC1wcm92aXNp
      b25lciIpCiAgICAgICAgc2VsZi5vdXRfbWFwWydDRVBIRlNfUE9PTF9OQU1FJ10gPSBzZWxmLl9h
      cmdfcGFyc2VyLmNlcGhmc19kYXRhX3Bvb2xfbmFtZQogICAgICAgIHNlbGYub3V0X21hcFsnQ0VQ
      SEZTX01FVEFEQVRBX1BPT0xfTkFNRSddID0gc2VsZi5fYXJnX3BhcnNlci5jZXBoZnNfbWV0YWRh
      dGFfcG9vbF9uYW1lCiAgICAgICAgc2VsZi5vdXRfbWFwWydDRVBIRlNfRlNfTkFNRSddID0gc2Vs
      Zi5fYXJnX3BhcnNlci5jZXBoZnNfZmlsZXN5c3RlbV9uYW1lCiAgICAgICAgc2VsZi5vdXRfbWFw
      WydSRVNUUklDVEVEX0FVVEhfUEVSTUlTU0lPTiddID0gc2VsZi5fYXJnX3BhcnNlci5yZXN0cmlj
      dGVkX2F1dGhfcGVybWlzc2lvbgogICAgICAgIHNlbGYub3V0X21hcFsnUkFET1NfTkFNRVNQQUNF
      J10gPSBzZWxmLl9hcmdfcGFyc2VyLnJhZG9zX25hbWVzcGFjZQogICAgICAgIHNlbGYub3V0X21h
      cFsnQ1NJX0NFUEhGU19OT0RFX1NFQ1JFVCddID0gJycKICAgICAgICBzZWxmLm91dF9tYXBbJ0NT
      SV9DRVBIRlNfUFJPVklTSU9ORVJfU0VDUkVUJ10gPSAnJwogICAgICAgICMgY3JlYXRlIENlcGhG
      UyBub2RlIGFuZCBwcm92aXNpb25lciBrZXlyaW5nIG9ubHkgd2hlbiBNRFMgZXhpc3RzCiAgICAg
      ICAgaWYgc2VsZi5vdXRfbWFwWydDRVBIRlNfRlNfTkFNRSddIGFuZCBzZWxmLm91dF9tYXBbJ0NF
      UEhGU19QT09MX05BTUUnXToKICAgICAgICAgICAgc2VsZi5vdXRfbWFwWydDU0lfQ0VQSEZTX05P
      REVfU0VDUkVUJ10gPSBzZWxmLmNyZWF0ZV9jZXBoQ1NJS2V5cmluZ191c2VyKAogICAgICAgICAg
      ICAgICAgImNsaWVudC5jc2ktY2VwaGZzLW5vZGUiKQogICAgICAgICAgICBzZWxmLm91dF9tYXBb
      J0NTSV9DRVBIRlNfUFJPVklTSU9ORVJfU0VDUkVUJ10gPSBzZWxmLmNyZWF0ZV9jZXBoQ1NJS2V5
      cmluZ191c2VyKAogICAgICAgICAgICAgICAgImNsaWVudC5jc2ktY2VwaGZzLXByb3Zpc2lvbmVy
      IikKICAgICAgICBzZWxmLm91dF9tYXBbJ1JHV19FTkRQT0lOVCddID0gc2VsZi5fYXJnX3BhcnNl
      ci5yZ3dfZW5kcG9pbnQKICAgICAgICBzZWxmLm91dF9tYXBbJ1JHV19UTFNfQ0VSVCddID0gJycK
      ICAgICAgICBzZWxmLm91dF9tYXBbJ01PTklUT1JJTkdfRU5EUE9JTlQnXSwgXAogICAgICAgICAg
      ICBzZWxmLm91dF9tYXBbJ01PTklUT1JJTkdfRU5EUE9JTlRfUE9SVCddID0gc2VsZi5nZXRfYWN0
      aXZlX2FuZF9zdGFuZGJ5X21ncnMoKQogICAgICAgIHNlbGYub3V0X21hcFsnUkJEX1BPT0xfTkFN
      RSddID0gc2VsZi5fYXJnX3BhcnNlci5yYmRfZGF0YV9wb29sX25hbWUKICAgICAgICBzZWxmLm91
      dF9tYXBbJ1JCRF9NRVRBREFUQV9FQ19QT09MX05BTUUnXSA9IHNlbGYudmFsaWRhdGVfcmd3X21l
      dGFkYXRhX2VjX3Bvb2xfbmFtZSgpCiAgICAgICAgc2VsZi5vdXRfbWFwWydSR1dfUE9PTF9QUkVG
      SVgnXSA9IHNlbGYuX2FyZ19wYXJzZXIucmd3X3Bvb2xfcHJlZml4CiAgICAgICAgaWYgc2VsZi5f
      YXJnX3BhcnNlci5yZ3dfZW5kcG9pbnQ6CiAgICAgICAgICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIu
      ZHJ5X3J1bjoKICAgICAgICAgICAgICAgIHNlbGYuY3JlYXRlX3Jnd19hZG1pbl9vcHNfdXNlcigp
      CiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBzZWxmLm91dF9tYXBbJ1JHV19BRE1J
      Tl9PUFNfVVNFUl9BQ0NFU1NfS0VZJ10sIHNlbGYub3V0X21hcFsnUkdXX0FETUlOX09QU19VU0VS
      X1NFQ1JFVF9LRVknXSA9IHNlbGYuY3JlYXRlX3Jnd19hZG1pbl9vcHNfdXNlcigpCiAgICAgICAg
      ICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIucmd3X3Rsc19jZXJ0X3BhdGg6CiAgICAgICAgICAgICAg
      ICBzZWxmLm91dF9tYXBbJ1JHV19UTFNfQ0VSVCddID0gc2VsZi52YWxpZGF0ZV9yZ3dfZW5kcG9p
      bnRfdGxzX2NlcnQoKQoKICAgIGRlZiBnZW5fc2hlbGxfb3V0KHNlbGYpOgogICAgICAgIHNlbGYu
      X2dlbl9vdXRwdXRfbWFwKCkKICAgICAgICBzaE91dElPID0gU3RyaW5nSU8oKQogICAgICAgIGZv
      ciBrLCB2IGluIHNlbGYub3V0X21hcC5pdGVtcygpOgogICAgICAgICAgICBpZiB2IGFuZCBrIG5v
      dCBpbiBzZWxmLl9leGNsdWRlZF9rZXlzOgogICAgICAgICAgICAgICAgc2hPdXRJTy53cml0ZSgn
      ZXhwb3J0IHt9PXt9e30nLmZvcm1hdChrLCB2LCBMSU5FU0VQKSkKICAgICAgICBzaE91dCA9IHNo
      T3V0SU8uZ2V0dmFsdWUoKQogICAgICAgIHNoT3V0SU8uY2xvc2UoKQogICAgICAgIHJldHVybiBz
      aE91dAoKICAgIGRlZiBnZW5fanNvbl9vdXQoc2VsZik6CiAgICAgICAgc2VsZi5fZ2VuX291dHB1
      dF9tYXAoKQogICAgICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIuZHJ5X3J1bjoKICAgICAgICAgICAg
      cmV0dXJuICIiCiAgICAgICAganNvbl9vdXQgPSBbCiAgICAgICAgICAgIHsKICAgICAgICAgICAg
      ICAgICJuYW1lIjogInJvb2stY2VwaC1tb24tZW5kcG9pbnRzIiwKICAgICAgICAgICAgICAgICJr
      aW5kIjogIkNvbmZpZ01hcCIsCiAgICAgICAgICAgICAgICAiZGF0YSI6IHsKICAgICAgICAgICAg
      ICAgICAgICAiZGF0YSI6IHNlbGYub3V0X21hcFsnUk9PS19FWFRFUk5BTF9DRVBIX01PTl9EQVRB
      J10sCiAgICAgICAgICAgICAgICAgICAgIm1heE1vbklkIjogIjAiLAogICAgICAgICAgICAgICAg
      ICAgICJtYXBwaW5nIjogInt9IgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAg
      ICAgICAgICB7CiAgICAgICAgICAgICAgICAibmFtZSI6ICJyb29rLWNlcGgtbW9uIiwKICAgICAg
      ICAgICAgICAgICJraW5kIjogIlNlY3JldCIsCiAgICAgICAgICAgICAgICAiZGF0YSI6IHsKICAg
      ICAgICAgICAgICAgICAgICAiYWRtaW4tc2VjcmV0IjogImFkbWluLXNlY3JldCIsCiAgICAgICAg
      ICAgICAgICAgICAgImZzaWQiOiBzZWxmLm91dF9tYXBbJ1JPT0tfRVhURVJOQUxfRlNJRCddLAog
      ICAgICAgICAgICAgICAgICAgICJtb24tc2VjcmV0IjogIm1vbi1zZWNyZXQiCiAgICAgICAgICAg
      ICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAibmFt
      ZSI6ICJyb29rLWNlcGgtb3BlcmF0b3ItY3JlZHMiLAogICAgICAgICAgICAgICAgImtpbmQiOiAi
      U2VjcmV0IiwKICAgICAgICAgICAgICAgICJkYXRhIjogewogICAgICAgICAgICAgICAgICAgICJ1
      c2VySUQiOiBzZWxmLm91dF9tYXBbJ1JPT0tfRVhURVJOQUxfVVNFUk5BTUUnXSwKICAgICAgICAg
      ICAgICAgICAgICAidXNlcktleSI6IHNlbGYub3V0X21hcFsnUk9PS19FWFRFUk5BTF9VU0VSX1NF
      Q1JFVCddCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAg
      ICAgICAgICAgICAgICJuYW1lIjogIm1vbml0b3JpbmctZW5kcG9pbnQiLAogICAgICAgICAgICAg
      ICAgImtpbmQiOiAiQ2VwaENsdXN0ZXIiLAogICAgICAgICAgICAgICAgImRhdGEiOiB7CiAgICAg
      ICAgICAgICAgICAgICAgIk1vbml0b3JpbmdFbmRwb2ludCI6IHNlbGYub3V0X21hcFsnTU9OSVRP
      UklOR19FTkRQT0lOVCddLAogICAgICAgICAgICAgICAgICAgICJNb25pdG9yaW5nUG9ydCI6IHNl
      bGYub3V0X21hcFsnTU9OSVRPUklOR19FTkRQT0lOVF9QT1JUJ10KICAgICAgICAgICAgICAgIH0K
      ICAgICAgICAgICAgfQogICAgICAgIF0KCiAgICAgICAgaWYgc2VsZi5vdXRfbWFwWydSQkRfTUVU
      QURBVEFfRUNfUE9PTF9OQU1FJ106CiAgICAgICAgICAgIGpzb25fb3V0LmFwcGVuZCh7CiAgICAg
      ICAgICAgICAgICAibmFtZSI6ICJjZXBoLXJiZCIsCiAgICAgICAgICAgICAgICAia2luZCI6ICJT
      dG9yYWdlQ2xhc3MiLAogICAgICAgICAgICAgICAgImRhdGEiOiB7CiAgICAgICAgICAgICAgICAg
      ICAgImRhdGFQb29sIjogc2VsZi5vdXRfbWFwWydSQkRfUE9PTF9OQU1FJ10sCiAgICAgICAgICAg
      ICAgICAgICAgInBvb2wiOiBzZWxmLm91dF9tYXBbJ1JCRF9NRVRBREFUQV9FQ19QT09MX05BTUUn
      XQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfSkKICAgICAgICBlbHNlOgogICAgICAg
      ICAgICBqc29uX291dC5hcHBlbmQoewogICAgICAgICAgICAgICAgIm5hbWUiOiAiY2VwaC1yYmQi
      LAogICAgICAgICAgICAgICAgImtpbmQiOiAiU3RvcmFnZUNsYXNzIiwKICAgICAgICAgICAgICAg
      ICJkYXRhIjogewogICAgICAgICAgICAgICAgICAgICJwb29sIjogc2VsZi5vdXRfbWFwWydSQkRf
      UE9PTF9OQU1FJ10KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0pCgogICAgICAgIGlm
      IHNlbGYuX2FyZ19wYXJzZXIucmVzdHJpY3RlZF9hdXRoX3Blcm1pc3Npb246CiAgICAgICAgICAg
      IGNsdXN0ZXJfbmFtZSA9IHNlbGYuX2FyZ19wYXJzZXIuY2x1c3Rlcl9uYW1lCiAgICAgICAgICAg
      IHJiZF9wb29sX25hbWUgPSBzZWxmLl9hcmdfcGFyc2VyLnJiZF9kYXRhX3Bvb2xfbmFtZQogICAg
      ICAgICAgICBjZXBoZnNfZmlsZXN5c3RlbSA9IHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX2ZpbGVz
      eXN0ZW1fbmFtZQogICAgICAgICAgICByYWRvc19uYW1lc3BhY2UgPSBzZWxmLl9hcmdfcGFyc2Vy
      LnJhZG9zX25hbWVzcGFjZQogICAgICAgICAgICBqc29uX291dC5hcHBlbmQoewogICAgICAgICAg
      ICAgICAgIm5hbWUiOiAicm9vay1jc2ktcmJkLW5vZGUte30te30te30iLmZvcm1hdChjbHVzdGVy
      X25hbWUsIHJiZF9wb29sX25hbWUsIHJhZG9zX25hbWVzcGFjZSksCiAgICAgICAgICAgICAgICAi
      a2luZCI6ICJTZWNyZXQiLAogICAgICAgICAgICAgICAgImRhdGEiOiB7CiAgICAgICAgICAgICAg
      ICAgICAgInVzZXJJRCI6ICdjc2ktcmJkLW5vZGUte30te30te30nLmZvcm1hdChjbHVzdGVyX25h
      bWUsIHJiZF9wb29sX25hbWUsIHJhZG9zX25hbWVzcGFjZSksCiAgICAgICAgICAgICAgICAgICAg
      InVzZXJLZXkiOiBzZWxmLm91dF9tYXBbJ0NTSV9SQkRfTk9ERV9TRUNSRVQnXQogICAgICAgICAg
      ICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICAgICAjIGlmICdDU0lfUkJEX1BST1ZJU0lP
      TkVSX1NFQ1JFVCcgZXhpc3RzLCB0aGVuIG9ubHkgYWRkICdyb29rLWNzaS1yYmQtcHJvdmlzaW9u
      ZXInIFNlY3JldAogICAgICAgICAgICBpZiBzZWxmLm91dF9tYXBbJ0NTSV9SQkRfUFJPVklTSU9O
      RVJfU0VDUkVUJ106CiAgICAgICAgICAgICAgICBqc29uX291dC5hcHBlbmQoewogICAgICAgICAg
      ICAgICAgICAgICJuYW1lIjogInJvb2stY3NpLXJiZC1wcm92aXNpb25lci17fS17fS17fSIuZm9y
      bWF0KGNsdXN0ZXJfbmFtZSwgcmJkX3Bvb2xfbmFtZSwgcmFkb3NfbmFtZXNwYWNlKSwKICAgICAg
      ICAgICAgICAgICAgICAia2luZCI6ICJTZWNyZXQiLAogICAgICAgICAgICAgICAgICAgICJkYXRh
      IjogewogICAgICAgICAgICAgICAgICAgICAgICAidXNlcklEIjogJ2NzaS1yYmQtcHJvdmlzaW9u
      ZXIte30te30te30nLmZvcm1hdChjbHVzdGVyX25hbWUsIHJiZF9wb29sX25hbWUsIHJhZG9zX25h
      bWVzcGFjZSksCiAgICAgICAgICAgICAgICAgICAgICAgICJ1c2VyS2V5Ijogc2VsZi5vdXRfbWFw
      WydDU0lfUkJEX1BST1ZJU0lPTkVSX1NFQ1JFVCddCiAgICAgICAgICAgICAgICAgICAgfSwKICAg
      ICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICMgaWYgJ0NTSV9DRVBIRlNfUFJPVklTSU9ORVJf
      U0VDUkVUJyBleGlzdHMsIHRoZW4gb25seSBhZGQgJ3Jvb2stY3NpLWNlcGhmcy1wcm92aXNpb25l
      cicgU2VjcmV0CiAgICAgICAgICAgIGlmIHNlbGYub3V0X21hcFsnQ1NJX0NFUEhGU19QUk9WSVNJ
      T05FUl9TRUNSRVQnXSBhbmQgY2VwaGZzX2ZpbGVzeXN0ZW0gIT0gIiI6CiAgICAgICAgICAgICAg
      ICBqc29uX291dC5hcHBlbmQoewogICAgICAgICAgICAgICAgICAgICJuYW1lIjogInJvb2stY3Np
      LWNlcGhmcy1wcm92aXNpb25lci17fS17fSIuZm9ybWF0KGNsdXN0ZXJfbmFtZSwgY2VwaGZzX2Zp
      bGVzeXN0ZW0pLAogICAgICAgICAgICAgICAgICAgICJraW5kIjogIlNlY3JldCIsCiAgICAgICAg
      ICAgICAgICAgICAgImRhdGEiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICJhZG1pbklEIjog
      J2NzaS1jZXBoZnMtcHJvdmlzaW9uZXIte30te30nLmZvcm1hdChjbHVzdGVyX25hbWUsIGNlcGhm
      c19maWxlc3lzdGVtKSwKICAgICAgICAgICAgICAgICAgICAgICAgImFkbWluS2V5Ijogc2VsZi5v
      dXRfbWFwWydDU0lfQ0VQSEZTX1BST1ZJU0lPTkVSX1NFQ1JFVCddCiAgICAgICAgICAgICAgICAg
      ICAgfSwKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIGlmIHNlbGYub3V0X21hcFsnQ1NJ
      X0NFUEhGU19QUk9WSVNJT05FUl9TRUNSRVQnXSBhbmQgY2VwaGZzX2ZpbGVzeXN0ZW0gPT0gIiI6
      CiAgICAgICAgICAgICAgICBqc29uX291dC5hcHBlbmQoewogICAgICAgICAgICAgICAgICAgICJu
      YW1lIjogInJvb2stY3NpLWNlcGhmcy1wcm92aXNpb25lci17fSIuZm9ybWF0KGNsdXN0ZXJfbmFt
      ZSksCiAgICAgICAgICAgICAgICAgICAgImtpbmQiOiAiU2VjcmV0IiwKICAgICAgICAgICAgICAg
      ICAgICAiZGF0YSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgImFkbWluSUQiOiAnY3NpLWNl
      cGhmcy1wcm92aXNpb25lci17fScuZm9ybWF0KGNsdXN0ZXJfbmFtZSksCiAgICAgICAgICAgICAg
      ICAgICAgICAgICJhZG1pbktleSI6IHNlbGYub3V0X21hcFsnQ1NJX0NFUEhGU19QUk9WSVNJT05F
      Ul9TRUNSRVQnXQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9KQogICAg
      ICAgICAgICAjIGlmICdDU0lfQ0VQSEZTX05PREVfU0VDUkVUJyBleGlzdHMsIHRoZW4gb25seSBh
      ZGQgJ3Jvb2stY3NpLWNlcGhmcy1ub2RlJyBTZWNyZXQKICAgICAgICAgICAgaWYgc2VsZi5vdXRf
      bWFwWydDU0lfQ0VQSEZTX05PREVfU0VDUkVUJ10gYW5kIGNlcGhmc19maWxlc3lzdGVtICE9ICIi
      OgogICAgICAgICAgICAgICAganNvbl9vdXQuYXBwZW5kKHsKICAgICAgICAgICAgICAgICAgICAi
      bmFtZSI6ICJyb29rLWNzaS1jZXBoZnMtbm9kZS17fS17fSIuZm9ybWF0KGNsdXN0ZXJfbmFtZSwg
      Y2VwaGZzX2ZpbGVzeXN0ZW0pLAogICAgICAgICAgICAgICAgICAgICJraW5kIjogIlNlY3JldCIs
      CiAgICAgICAgICAgICAgICAgICAgImRhdGEiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICJh
      ZG1pbklEIjogJ2NzaS1jZXBoZnMtbm9kZS17fS17fScuZm9ybWF0KGNsdXN0ZXJfbmFtZSwgY2Vw
      aGZzX2ZpbGVzeXN0ZW0pLAogICAgICAgICAgICAgICAgICAgICAgICAiYWRtaW5LZXkiOiBzZWxm
      Lm91dF9tYXBbJ0NTSV9DRVBIRlNfTk9ERV9TRUNSRVQnXQogICAgICAgICAgICAgICAgICAgIH0K
      ICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIGlmIHNlbGYub3V0X21hcFsnQ1NJX0NFUEhG
      U19OT0RFX1NFQ1JFVCddIGFuZCBjZXBoZnNfZmlsZXN5c3RlbSA9PSAiIjoKICAgICAgICAgICAg
      ICAgIGpzb25fb3V0LmFwcGVuZCh7CiAgICAgICAgICAgICAgICAgICAgIm5hbWUiOiAicm9vay1j
      c2ktY2VwaGZzLW5vZGUte30iLmZvcm1hdChjbHVzdGVyX25hbWUpLAogICAgICAgICAgICAgICAg
      ICAgICJraW5kIjogIlNlY3JldCIsCiAgICAgICAgICAgICAgICAgICAgImRhdGEiOiB7CiAgICAg
      ICAgICAgICAgICAgICAgICAgICJhZG1pbklEIjogJ2NzaS1jZXBoZnMtbm9kZS17fScuZm9ybWF0
      KGNsdXN0ZXJfbmFtZSksCiAgICAgICAgICAgICAgICAgICAgICAgICJhZG1pbktleSI6IHNlbGYu
      b3V0X21hcFsnQ1NJX0NFUEhGU19OT0RFX1NFQ1JFVCddCiAgICAgICAgICAgICAgICAgICAgfQog
      ICAgICAgICAgICAgICAgfSkKICAgICAgICBlbHNlOgogICAgICAgICAgICBqc29uX291dC5hcHBl
      bmQoewogICAgICAgICAgICAgICAgIm5hbWUiOiAicm9vay1jc2ktcmJkLW5vZGUiLAogICAgICAg
      ICAgICAgICAgImtpbmQiOiAiU2VjcmV0IiwKICAgICAgICAgICAgICAgICJkYXRhIjogewogICAg
      ICAgICAgICAgICAgICAgICJ1c2VySUQiOiAnY3NpLXJiZC1ub2RlJywKICAgICAgICAgICAgICAg
      ICAgICAidXNlcktleSI6IHNlbGYub3V0X21hcFsnQ1NJX1JCRF9OT0RFX1NFQ1JFVCddCiAgICAg
      ICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgICMgaWYgJ0NTSV9SQkRfUFJP
      VklTSU9ORVJfU0VDUkVUJyBleGlzdHMsIHRoZW4gb25seSBhZGQgJ3Jvb2stY3NpLXJiZC1wcm92
      aXNpb25lcicgU2VjcmV0CiAgICAgICAgICAgIGlmIHNlbGYub3V0X21hcFsnQ1NJX1JCRF9QUk9W
      SVNJT05FUl9TRUNSRVQnXToKICAgICAgICAgICAgICAgIGpzb25fb3V0LmFwcGVuZCh7CiAgICAg
      ICAgICAgICAgICAgICAgIm5hbWUiOiAicm9vay1jc2ktcmJkLXByb3Zpc2lvbmVyIiwKICAgICAg
      ICAgICAgICAgICAgICAia2luZCI6ICJTZWNyZXQiLAogICAgICAgICAgICAgICAgICAgICJkYXRh
      IjogewogICAgICAgICAgICAgICAgICAgICAgICAidXNlcklEIjogJ2NzaS1yYmQtcHJvdmlzaW9u
      ZXInLAogICAgICAgICAgICAgICAgICAgICAgICAidXNlcktleSI6IHNlbGYub3V0X21hcFsnQ1NJ
      X1JCRF9QUk9WSVNJT05FUl9TRUNSRVQnXQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAg
      ICAgICAgICB9KQogICAgICAgICAgICAjIGlmICdDU0lfQ0VQSEZTX1BST1ZJU0lPTkVSX1NFQ1JF
      VCcgZXhpc3RzLCB0aGVuIG9ubHkgYWRkICdyb29rLWNzaS1jZXBoZnMtcHJvdmlzaW9uZXInIFNl
      Y3JldAogICAgICAgICAgICBpZiBzZWxmLm91dF9tYXBbJ0NTSV9DRVBIRlNfUFJPVklTSU9ORVJf
      U0VDUkVUJ106CiAgICAgICAgICAgICAgICBqc29uX291dC5hcHBlbmQoewogICAgICAgICAgICAg
      ICAgICAgICJuYW1lIjogInJvb2stY3NpLWNlcGhmcy1wcm92aXNpb25lciIsCiAgICAgICAgICAg
      ICAgICAgICAgImtpbmQiOiAiU2VjcmV0IiwKICAgICAgICAgICAgICAgICAgICAiZGF0YSI6IHsK
      ICAgICAgICAgICAgICAgICAgICAgICAgImFkbWluSUQiOiAnY3NpLWNlcGhmcy1wcm92aXNpb25l
      cicsCiAgICAgICAgICAgICAgICAgICAgICAgICJhZG1pbktleSI6IHNlbGYub3V0X21hcFsnQ1NJ
      X0NFUEhGU19QUk9WSVNJT05FUl9TRUNSRVQnXQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAg
      ICAgICAgICAgICB9KQogICAgICAgICAgICAjIGlmICdDU0lfQ0VQSEZTX05PREVfU0VDUkVUJyBl
      eGlzdHMsIHRoZW4gb25seSBhZGQgJ3Jvb2stY3NpLWNlcGhmcy1ub2RlJyBTZWNyZXQKICAgICAg
      ICAgICAgaWYgc2VsZi5vdXRfbWFwWydDU0lfQ0VQSEZTX05PREVfU0VDUkVUJ106CiAgICAgICAg
      ICAgICAgICBqc29uX291dC5hcHBlbmQoewogICAgICAgICAgICAgICAgICAgICJuYW1lIjogInJv
      b2stY3NpLWNlcGhmcy1ub2RlIiwKICAgICAgICAgICAgICAgICAgICAia2luZCI6ICJTZWNyZXQi
      LAogICAgICAgICAgICAgICAgICAgICJkYXRhIjogewogICAgICAgICAgICAgICAgICAgICAgICAi
      YWRtaW5JRCI6ICdjc2ktY2VwaGZzLW5vZGUnLAogICAgICAgICAgICAgICAgICAgICAgICAiYWRt
      aW5LZXkiOiBzZWxmLm91dF9tYXBbJ0NTSV9DRVBIRlNfTk9ERV9TRUNSRVQnXQogICAgICAgICAg
      ICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCiAgICAgICAgIyBpZiAnUk9PS19FWFRFUk5B
      TF9EQVNIQk9BUkRfTElOSycgZXhpc3RzLCB0aGVuIG9ubHkgYWRkICdyb29rLWNlcGgtZGFzaGJv
      YXJkLWxpbmsnIFNlY3JldAogICAgICAgIGlmIHNlbGYub3V0X21hcFsnUk9PS19FWFRFUk5BTF9E
      QVNIQk9BUkRfTElOSyddOgogICAgICAgICAgICBqc29uX291dC5hcHBlbmQoewogICAgICAgICAg
      ICAgICAgIm5hbWUiOiAicm9vay1jZXBoLWRhc2hib2FyZC1saW5rIiwKICAgICAgICAgICAgICAg
      ICJraW5kIjogIlNlY3JldCIsCiAgICAgICAgICAgICAgICAiZGF0YSI6IHsKICAgICAgICAgICAg
      ICAgICAgICAidXNlcklEIjogJ2NlcGgtZGFzaGJvYXJkLWxpbmsnLAogICAgICAgICAgICAgICAg
      ICAgICJ1c2VyS2V5Ijogc2VsZi5vdXRfbWFwWydST09LX0VYVEVSTkFMX0RBU0hCT0FSRF9MSU5L
      J10KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAjIGlmICdDRVBIRlNf
      RlNfTkFNRScgZXhpc3RzLCB0aGVuIG9ubHkgYWRkICdjZXBoZnMnIFN0b3JhZ2VDbGFzcwogICAg
      ICAgIGlmIHNlbGYub3V0X21hcFsnQ0VQSEZTX0ZTX05BTUUnXToKICAgICAgICAgICAganNvbl9v
      dXQuYXBwZW5kKHsKICAgICAgICAgICAgICAgICJuYW1lIjogImNlcGhmcyIsCiAgICAgICAgICAg
      ICAgICAia2luZCI6ICJTdG9yYWdlQ2xhc3MiLAogICAgICAgICAgICAgICAgImRhdGEiOiB7CiAg
      ICAgICAgICAgICAgICAgICAgImZzTmFtZSI6IHNlbGYub3V0X21hcFsnQ0VQSEZTX0ZTX05BTUUn
      XSwKICAgICAgICAgICAgICAgICAgICAicG9vbCI6IHNlbGYub3V0X21hcFsnQ0VQSEZTX1BPT0xf
      TkFNRSddCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgIyBpZiAnUkdX
      X0VORFBPSU5UJyBleGlzdHMsIHRoZW4gb25seSBhZGQgJ2NlcGgtcmd3JyBTdG9yYWdlQ2xhc3MK
      ICAgICAgICBpZiBzZWxmLm91dF9tYXBbJ1JHV19FTkRQT0lOVCddOgogICAgICAgICAgICBqc29u
      X291dC5hcHBlbmQoewogICAgICAgICAgICAgICAgIm5hbWUiOiAiY2VwaC1yZ3ciLAogICAgICAg
      ICAgICAgICAgImtpbmQiOiAiU3RvcmFnZUNsYXNzIiwKICAgICAgICAgICAgICAgICJkYXRhIjog
      ewogICAgICAgICAgICAgICAgICAgICJlbmRwb2ludCI6IHNlbGYub3V0X21hcFsnUkdXX0VORFBP
      SU5UJ10sCiAgICAgICAgICAgICAgICAgICAgInBvb2xQcmVmaXgiOiBzZWxmLm91dF9tYXBbJ1JH
      V19QT09MX1BSRUZJWCddCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAg
      ICAgIGpzb25fb3V0LmFwcGVuZCgKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAg
      ICAibmFtZSI6ICJyZ3ctYWRtaW4tb3BzLXVzZXIiLAogICAgICAgICAgICAgICAgICAgICJraW5k
      IjogIlNlY3JldCIsCiAgICAgICAgICAgICAgICAgICAgImRhdGEiOiB7CiAgICAgICAgICAgICAg
      ICAgICAgICAgICJhY2Nlc3NLZXkiOiBzZWxmLm91dF9tYXBbJ1JHV19BRE1JTl9PUFNfVVNFUl9B
      Q0NFU1NfS0VZJ10sCiAgICAgICAgICAgICAgICAgICAgICAgICJzZWNyZXRLZXkiOiBzZWxmLm91
      dF9tYXBbJ1JHV19BRE1JTl9PUFNfVVNFUl9TRUNSRVRfS0VZJ10KICAgICAgICAgICAgICAgICAg
      ICB9CiAgICAgICAgICAgICAgICB9KQogICAgICAgICMgaWYgJ1JHV19UTFNfQ0VSVCcgZXhpc3Rz
      LCB0aGVuIG9ubHkgYWRkIHRoZSAiY2VwaC1yZ3ctdGxzLWNlcnQiIHNlY3JldAogICAgICAgIGlm
      IHNlbGYub3V0X21hcFsnUkdXX1RMU19DRVJUJ106CiAgICAgICAgICAgIGpzb25fb3V0LmFwcGVu
      ZCh7CiAgICAgICAgICAgICAgICAibmFtZSI6ICJjZXBoLXJndy10bHMtY2VydCIsCiAgICAgICAg
      ICAgICAgICAia2luZCI6ICJTZWNyZXQiLAogICAgICAgICAgICAgICAgImRhdGEiOiB7CiAgICAg
      ICAgICAgICAgICAgICAgImNlcnQiOiBzZWxmLm91dF9tYXBbJ1JHV19UTFNfQ0VSVCddLAogICAg
      ICAgICAgICAgICAgfQogICAgICAgICAgICB9KQoKICAgICAgICByZXR1cm4ganNvbi5kdW1wcyhq
      c29uX291dCkrTElORVNFUAoKICAgIGRlZiB1cGdyYWRlX3VzZXJzX3Blcm1pc3Npb25zKHNlbGYp
      OgogICAgICAgIHVzZXJzID0gWyJjbGllbnQuY3NpLWNlcGhmcy1ub2RlIiwgImNsaWVudC5jc2kt
      Y2VwaGZzLXByb3Zpc2lvbmVyIiwKICAgICAgICAgICAgICAgICAiY2xpZW50LmNzaS1yYmQtbm9k
      ZSIsICJjbGllbnQuY3NpLXJiZC1wcm92aXNpb25lciJdCiAgICAgICAgaWYgc2VsZi5ydW5fYXNf
      dXNlciAhPSAiIiBhbmQgc2VsZi5ydW5fYXNfdXNlciBub3QgaW4gdXNlcnM6CiAgICAgICAgICAg
      IHVzZXJzLmFwcGVuZChzZWxmLnJ1bl9hc191c2VyKQogICAgICAgIGZvciB1c2VyIGluIHVzZXJz
      OgogICAgICAgICAgICBzZWxmLnVwZ3JhZGVfdXNlcl9wZXJtaXNzaW9ucyh1c2VyKQoKICAgIGRl
      ZiB1cGdyYWRlX3VzZXJfcGVybWlzc2lvbnMoc2VsZiwgdXNlcik6CiAgICAgICAgIyBjaGVjayB3
      aGV0aGVyIHRoZSBnaXZlbiB1c2VyIGV4aXN0cyBvciBub3QKICAgICAgICBjbWRfanNvbiA9IHsi
      cHJlZml4IjogImF1dGggZ2V0IiwgImVudGl0eSI6ICJ7fSIuZm9ybWF0KAogICAgICAgICAgICB1
      c2VyKSwgImZvcm1hdCI6ICJqc29uIn0KICAgICAgICByZXRfdmFsLCBqc29uX291dCwgZXJyX21z
      ZyA9IHNlbGYuX2NvbW1vbl9jbWRfanNvbl9nZW4oY21kX2pzb24pCiAgICAgICAgaWYgcmV0X3Zh
      bCAhPSAwIG9yIGxlbihqc29uX291dCkgPT0gMDoKICAgICAgICAgICAgcHJpbnQoInVzZXIge30g
      bm90IGZvdW5kIGZvciB1cGdyYWRpbmcuIi5mb3JtYXQodXNlcikpCiAgICAgICAgICAgIHJldHVy
      bgogICAgICAgIGV4aXN0aW5nX2NhcHMgPSBqc29uX291dFswXVsnY2FwcyddCiAgICAgICAgbmV3
      X2NhcCwgXyA9IHNlbGYuZ2V0X2NhcHNfYW5kX2VudGl0eSh1c2VyKQogICAgICAgIGNhcF9rZXlz
      ID0gWyJtb24iLCAibWdyIiwgIm9zZCIsICJtZHMiXQogICAgICAgIGNhcHMgPSBbXQogICAgICAg
      IGZvciBlYWNoQ2FwIGluIGNhcF9rZXlzOgogICAgICAgICAgICBjdXJfY2FwX3ZhbHVlcyA9IGV4
      aXN0aW5nX2NhcHMuZ2V0KGVhY2hDYXAsICcnKQogICAgICAgICAgICBuZXdfY2FwX3ZhbHVlcyA9
      IG5ld19jYXAuZ2V0KGVhY2hDYXAsICcnKQogICAgICAgICAgICBjdXJfY2FwX3Blcm1fbGlzdCA9
      IFt4LnN0cmlwKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHggaW4gY3Vy
      X2NhcF92YWx1ZXMuc3BsaXQoJywnKSBpZiB4LnN0cmlwKCldCiAgICAgICAgICAgIG5ld19jYXBf
      cGVybV9saXN0ID0gW3guc3RyaXAoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBm
      b3IgeCBpbiBuZXdfY2FwX3ZhbHVlcy5zcGxpdCgnLCcpIGlmIHguc3RyaXAoKV0KICAgICAgICAg
      ICAgIyBhcHBlbmQgbmV3X2NhcF9saXN0IHRvIGN1cl9jYXBfbGlzdCB0byBtYWludGFpbiB0aGUg
      b3JkZXIgb2YgY2FwcwogICAgICAgICAgICBjdXJfY2FwX3Blcm1fbGlzdC5leHRlbmQobmV3X2Nh
      cF9wZXJtX2xpc3QpCiAgICAgICAgICAgICMgZWxpbWluYXRlIGR1cGxpY2F0ZXMgd2l0aG91dCB1
      c2luZyAnc2V0JwogICAgICAgICAgICAjIHNldCByZS1vcmRlcnMgaXRlbXMgaW4gdGhlIGxpc3Qg
      YW5kIHdlIGhhdmUgdG8ga2VlcCB0aGUgb3JkZXIKICAgICAgICAgICAgbmV3X2NhcF9saXN0ID0g
      W10KICAgICAgICAgICAgW25ld19jYXBfbGlzdC5hcHBlbmQoCiAgICAgICAgICAgICAgICB4KSBm
      b3IgeCBpbiBjdXJfY2FwX3Blcm1fbGlzdCBpZiB4IG5vdCBpbiBuZXdfY2FwX2xpc3RdCiAgICAg
      ICAgICAgIGV4aXN0aW5nX2NhcHNbZWFjaENhcF0gPSAiLCAiLmpvaW4obmV3X2NhcF9saXN0KQog
      ICAgICAgICAgICBpZiBleGlzdGluZ19jYXBzW2VhY2hDYXBdOgogICAgICAgICAgICAgICAgY2Fw
      cy5hcHBlbmQoZWFjaENhcCkKICAgICAgICAgICAgICAgIGNhcHMuYXBwZW5kKGV4aXN0aW5nX2Nh
      cHNbZWFjaENhcF0pCiAgICAgICAgY21kX2pzb24gPSB7InByZWZpeCI6ICJhdXRoIGNhcHMiLAog
      ICAgICAgICAgICAgICAgICAgICJlbnRpdHkiOiB1c2VyLAogICAgICAgICAgICAgICAgICAgICJj
      YXBzIjogY2FwcywKICAgICAgICAgICAgICAgICAgICAiZm9ybWF0IjogImpzb24ifQogICAgICAg
      IHJldF92YWwsIGpzb25fb3V0LCBlcnJfbXNnID0gc2VsZi5fY29tbW9uX2NtZF9qc29uX2dlbihj
      bWRfanNvbikKICAgICAgICBpZiByZXRfdmFsICE9IDA6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1
      dGlvbkZhaWx1cmVFeGNlcHRpb24oIidhdXRoIGNhcHMge30nIGNvbW1hbmQgZmFpbGVkLlxuIi5m
      b3JtYXQodXNlcikgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
      ICJFcnJvcjoge30iLmZvcm1hdChlcnJfbXNnKSkKICAgICAgICBwcmludCgiVXBkYXRlZCB1c2Vy
      LCB7fSwgc3VjY2Vzc2Z1bGx5LiIuZm9ybWF0KHVzZXIpKQoKICAgIGRlZiBtYWluKHNlbGYpOgog
      ICAgICAgIGdlbmVyYXRlZF9vdXRwdXQgPSAnJwogICAgICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIu
      dXBncmFkZToKICAgICAgICAgICAgc2VsZi51cGdyYWRlX3VzZXJzX3Blcm1pc3Npb25zKCkKICAg
      ICAgICBlbGlmIHNlbGYuX2FyZ19wYXJzZXIuZm9ybWF0ID09ICdqc29uJzoKICAgICAgICAgICAg
      Z2VuZXJhdGVkX291dHB1dCA9IHNlbGYuZ2VuX2pzb25fb3V0KCkKICAgICAgICBlbGlmIHNlbGYu
      X2FyZ19wYXJzZXIuZm9ybWF0ID09ICdiYXNoJzoKICAgICAgICAgICAgZ2VuZXJhdGVkX291dHB1
      dCA9IHNlbGYuZ2VuX3NoZWxsX291dCgpCiAgICAgICAgZWxzZToKICAgICAgICAgICAgcmFpc2Ug
      RXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigiVW5zdXBwb3J0ZWQgZm9ybWF0OiB7fSIuZm9ybWF0
      KAogICAgICAgICAgICAgICAgc2VsZi5fYXJnX3BhcnNlci5mb3JtYXQpKQogICAgICAgIHByaW50
      KCd7fScuZm9ybWF0KGdlbmVyYXRlZF9vdXRwdXQpKQogICAgICAgIGlmIHNlbGYub3V0cHV0X2Zp
      bGUgYW5kIGdlbmVyYXRlZF9vdXRwdXQ6CiAgICAgICAgICAgIGZPdXQgPSBvcGVuKHNlbGYub3V0
      cHV0X2ZpbGUsICd3JykKICAgICAgICAgICAgZk91dC53cml0ZShnZW5lcmF0ZWRfb3V0cHV0KQog
      ICAgICAgICAgICBmT3V0LmNsb3NlKCkKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
      IyMjIyMjIyMjIyMjIyMjIyMKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIE1BSU4gIyMjIyMjIyMjIyMj
      IyMjIyMjIyMjCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
      IwppZiBfX25hbWVfXyA9PSAnX19tYWluX18nOgogICAgcmpPYmogPSBSYWRvc0pTT04oKQogICAg
      dHJ5OgogICAgICAgIHJqT2JqLm1haW4oKQogICAgZXhjZXB0IEV4ZWN1dGlvbkZhaWx1cmVFeGNl
      cHRpb24gYXMgZXJyOgogICAgICAgIHByaW50KCJFeGVjdXRpb24gRmFpbGVkOiB7fSIuZm9ybWF0
      KGVycikpCiAgICAgICAgcmFpc2UgZXJyCiAgICBleGNlcHQgS2V5RXJyb3IgYXMga0VycjoKICAg
      ICAgICBwcmludCgiS2V5RXJyb3I6ICVzIiwga0VycikKICAgIGV4Y2VwdCBPU0Vycm9yIGFzIG9z
      RXJyOgogICAgICAgIHByaW50KCJFcnJvciB3aGlsZSB0cnlpbmcgdG8gb3V0cHV0IHRoZSBkYXRh
      OiB7fSIuZm9ybWF0KG9zRXJyKSkKICAgIGZpbmFsbHk6CiAgICAgICAgcmpPYmouc2h1dGRvd24o
      KQo=
    external.features.ocs.openshift.io/supported-platforms: '["BareMetal", "None",
      "VSphere", "OpenStack", "oVirt"]'
    external.features.ocs.openshift.io/validation: '{"secrets":["rook-ceph-operator-creds",
      "rook-csi-rbd-node", "rook-csi-rbd-provisioner"], "configMaps": ["rook-ceph-mon-endpoints",
      "rook-ceph-mon"], "storageClasses": ["ceph-rbd"], "cephClusters": ["monitoring-endpoint"]}'
    features.ocs.openshift.io/disabled: '["ss-list", "install-wizard", "add-capacity",
      "block-pool", "mcg-resource", "odf-dashboard", "common"]'
    features.ocs.openshift.io/enabled: '["kms", "arbiter", "flexible-scaling", "multus",
      "pool-management", "namespace-store", "mcg-standalone", "taint-nodes", "vault-sa-kms",
      "hpcs-kms"]'
    olm.skipRange: '>=0.0.1 <4.11.0'
    operatorframework.io/initialization-resource: "\n    {\n        \"apiVersion\":
      \"ocs.openshift.io/v1\",\n        \"kind\": \"StorageCluster\",\n        \"metadata\":
      {\n            \"name\": \"example-storagecluster\",\n            \"namespace\":
      \"openshift-storage\"\n        },\n        \"spec\": {\n            \"manageNodes\":
      false,\n            \"monPVCTemplate\": {\n                \"spec\": {\n                    \"accessModes\":
      [\n                        \"ReadWriteOnce\"\n                    ],\n                    \"resources\":
      {\n                        \"requests\": {\n                            \"storage\":
      \"10Gi\"\n                        }\n                    },\n                    \"storageClassName\":
      \"gp2\"\n                }\n            },\n            \"storageDeviceSets\":
      [\n                {\n                    \"count\": 3,\n                    \"dataPVCTemplate\":
      {\n                        \"spec\": {\n                            \"accessModes\":
      [\n                                \"ReadWriteOnce\"\n                            ],\n
      \                           \"resources\": {\n                                \"requests\":
      {\n                                    \"storage\": \"1Ti\"\n                                }\n
      \                           },\n                            \"storageClassName\":
      \"gp2\",\n                            \"volumeMode\": \"Block\"\n                        }\n
      \                   },\n                    \"name\": \"example-deviceset\",\n
      \                   \"placement\": {},\n                    \"portable\": true,\n
      \                   \"resources\": {}\n                }\n            ]\n        }\n
      \   }\n\t"
    operatorframework.io/suggested-namespace: openshift-storage
    operators.operatorframework.io/builder: operator-sdk-v1.16.0+git
    operators.operatorframework.io/internal-objects: '["ocsinitializations.ocs.openshift.io","storageclassclaims.ocs.openshift.io","storageconsumers.ocs.openshift.io","cephclusters.ceph.rook.io","cephobjectstores.ceph.rook.io","cephobjectstoreusers.ceph.rook.io","cephnfses.ceph.rook.io","cephclients.ceph.rook.io","cephfilesystems.ceph.rook.io","cephfilesystemmirrors.ceph.rook.io","cephrbdmirrors.ceph.rook.io","cephobjectrealms.ceph.rook.io","cephobjectzonegroups.ceph.rook.io","cephobjectzones.ceph.rook.io","cephbucketnotifications.ceph.rook.io","cephbuckettopics.ceph.rook.io","cephfilesystemsubvolumegroups.ceph.rook.io","cephblockpoolradosnamespaces.ceph.rook.io","volumereplicationclasses.replication.storage.openshift.io","volumereplications.replication.storage.openshift.io","objectbucketclaims.objectbucket.io","objectbuckets.objectbucket.io"]'
    operators.operatorframework.io/operator-type: non-standalone
    operators.operatorframework.io/project_layout: go.kubebuilder.io/v2
    repository: https://github.com/red-hat-storage/ocs-operator
    support: Red Hat
  labels:
    operatorframework.io/arch.amd64: supported
    operatorframework.io/arch.ppc64le: supported
    operatorframework.io/arch.s390x: supported
  name: ocs-operator.v4.11.0
  namespace: placeholder
spec:
  apiservicedefinitions: {}
  cleanup:
    enabled: false
  customresourcedefinitions:
    owned:
    - description: OCS Initialization represents the initial data to be created when
        the OCS operator is installed.
      displayName: OCS Initialization
      kind: OCSInitialization
      name: ocsinitializations.ocs.openshift.io
      version: v1
    - description: StorageClassClaim is the Schema for the storageclassclaims API
      displayName: Storage Class Claim
      kind: StorageClassClaim
      name: storageclassclaims.ocs.openshift.io
      version: v1alpha1
    - description: Storage Cluster represents a OpenShift Container Storage Cluster
        including Ceph Cluster, NooBaa and all the storage and compute resources required.
      displayName: Storage Cluster
      kind: StorageCluster
      name: storageclusters.ocs.openshift.io
      resources:
      - kind: CephCluster
        name: cephclusters.ceph.rook.io
        version: v1
      - kind: NooBaa
        name: noobaas.noobaa.io
        version: v1alpha1
      version: v1
    - description: StorageConsumer is the Schema for the storageconsumers API
      displayName: Storage Consumer
      kind: StorageConsumer
      name: storageconsumers.ocs.openshift.io
      version: v1alpha1
    - description: Represents a Ceph cluster.
      displayName: Ceph Cluster
      kind: CephCluster
      name: cephclusters.ceph.rook.io
      version: v1
    - description: Represents a Ceph Block Pool.
      displayName: Block Pools
      kind: CephBlockPool
      name: cephblockpools.ceph.rook.io
      version: v1
    - description: Represents a Ceph Object Store.
      displayName: Ceph Object Store
      kind: CephObjectStore
      name: cephobjectstores.ceph.rook.io
      specDescriptors:
      - description: Coding Chunks
        displayName: Coding Chunks
        path: dataPool.erasureCoded.codingChunks
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:dataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: Data Chunks
        displayName: Data Chunks
        path: dataPool.erasureCoded.dataChunks
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:dataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: failureDomain
        displayName: failureDomain
        path: dataPool.failureDomain
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:dataPool
        - urn:alm:descriptor:com.tectonic.ui:text
      - description: Size
        displayName: Size
        path: dataPool.replicated.size
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:dataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: Annotations
        displayName: Annotations
        path: gateway.annotations
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:io.kubernetes:annotations
      - description: Instances
        displayName: Instances
        path: gateway.instances
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: Resources
        displayName: Resources
        path: gateway.resources
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:com.tectonic.ui:resourceRequirements
      - description: placement
        displayName: placement
        path: gateway.placement
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:io.kubernetes:placement
      - description: securePort
        displayName: securePort
        path: gateway.securePort
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:io.kubernetes:securePort
      - description: sslCertificateRef
        displayName: sslCertificateRef
        path: gateway.sslCertificateRef
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:io.kubernetes:sslCertificateRef
      - description: Type
        displayName: Type
        path: gateway.type
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:com.tectonic.ui:text
      - description: Coding Chunks
        displayName: Coding Chunks
        path: metadataPool.erasureCoded.codingChunks
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:metadataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: Data Chunks
        displayName: Data Chunks
        path: metadataPool.erasureCoded.dataChunks
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:metadataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: failureDomain
        displayName: failureDomain
        path: metadataPool.failureDomain
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:metadataPool
        - urn:alm:descriptor:com.tectonic.ui:text
      - description: Size
        displayName: Size
        path: metadataPool.replicated.size
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:metadataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      version: v1
    - description: Represents a Ceph Object Store User.
      displayName: Ceph Object Store User
      kind: CephObjectStoreUser
      name: cephobjectstoreusers.ceph.rook.io
      version: v1
    - description: Represents a cluster of Ceph NFS ganesha gateways.
      displayName: Ceph NFS
      kind: CephNFS
      name: cephnfses.ceph.rook.io
      version: v1
    - description: Represents a Ceph User.
      displayName: Ceph Client
      kind: CephClient
      name: cephclients.ceph.rook.io
      version: v1
    - description: Represents a Ceph Filesystem.
      displayName: Ceph Filesystem
      kind: CephFilesystem
      name: cephfilesystems.ceph.rook.io
      version: v1
    - description: Represents a Ceph Filesystem Mirror.
      displayName: Ceph Filesystem Mirror
      kind: CephFilesystemMirror
      name: cephfilesystemmirrors.ceph.rook.io
      version: v1
    - description: Represents a Ceph RBD Mirror.
      displayName: Ceph RBD Mirror
      kind: CephRBDMirror
      name: cephrbdmirrors.ceph.rook.io
      version: v1
    - description: Represents a Ceph Object Store Realm.
      displayName: Ceph Object Store Realm
      kind: CephObjectRealm
      name: cephobjectrealms.ceph.rook.io
      version: v1
    - description: Represents a Ceph Object Store Zone Group.
      displayName: Ceph Object Store Zone Group
      kind: CephObjectZoneGroup
      name: cephobjectzonegroups.ceph.rook.io
      version: v1
    - description: Represents a Ceph Object Store Zone.
      displayName: Ceph Object Store Zone
      kind: CephObjectZone
      name: cephobjectzones.ceph.rook.io
      version: v1
    - description: Represents a Ceph Bucket Notification.
      displayName: Ceph Bucket Notification
      kind: CephBucketNotification
      name: cephbucketnotifications.ceph.rook.io
      version: v1
    - description: Represents a Ceph Bucket Topic.
      displayName: Ceph Bucket Topic
      kind: CephBucketTopic
      name: cephbuckettopics.ceph.rook.io
      version: v1
    - description: Represents a Ceph Filesystem SubVolumeGroup.
      displayName: Ceph Filesystem SubVolumeGroup
      kind: CephFilesystemSubVolumeGroup
      name: cephfilesystemsubvolumegroups.ceph.rook.io
      version: v1
    - description: Represents a Ceph BlockPool Rados Namespace.
      displayName: Ceph BlockPool Rados Namespace
      kind: CephBlockPoolRadosNamespace
      name: cephblockpoolradosnamespaces.ceph.rook.io
      version: v1
    - kind: VolumeReplicationClass
      name: volumereplicationclasses.replication.storage.openshift.io
      version: v1alpha1
    - kind: VolumeReplication
      name: volumereplications.replication.storage.openshift.io
      version: v1alpha1
    - description: Claim a bucket just like claiming a PV. Automate you app bucket
        provisioning by creating OBC with your app deployment. A secret and configmap
        (name=claim) will be created with access details for the app pods.
      displayName: Object Bucket Claim
      kind: ObjectBucketClaim
      name: objectbucketclaims.objectbucket.io
      resources:
      - kind: Service
        name: services
        version: v1
      - kind: Secret
        name: secrets
        version: v1
      - kind: ConfigMap
        name: configmaps
        version: v1
      - kind: StatefulSet
        name: statefulsets.apps
        version: v1
      version: v1alpha1
    - description: Used under-the-hood. Created per ObjectBucketClaim and keeps provisioning
        information.
      displayName: Object Bucket
      kind: ObjectBucket
      name: objectbuckets.objectbucket.io
      resources:
      - kind: Service
        name: services
        version: v1
      - kind: Secret
        name: secrets
        version: v1
      - kind: ConfigMap
        name: configmaps
        version: v1
      - kind: StatefulSet
        name: statefulsets.apps
        version: v1
      version: v1alpha1
    required:
    - description: A NooBaa system - Create this to start
      displayName: NooBaa
      kind: NooBaa
      name: noobaas.noobaa.io
      resources:
      - kind: Service
        name: services
        version: v1
      - kind: Secret
        name: secrets
        version: v1
      - kind: ConfigMap
        name: configmaps
        version: v1
      - kind: StatefulSet
        name: statefulsets.apps
        version: v1
      specDescriptors:
      - description: DBImage (optional) overrides the default image for the db container.
        displayName: DB Image
        path: image
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:text
      - description: Image (optional) overrides the default image for the server container.
        displayName: Image
        path: dbImage
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:text
      - description: CoreResources (optional) overrides the default resource requirements
          for the server container.
        displayName: Core Resources
        path: coreResources
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:resourceRequirements
      - description: DBResources (optional) overrides the default resource requirements
          for the db container.
        displayName: DB Resources
        path: dbResources
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:resourceRequirements
      - description: 'DBVolumeResources (optional) overrides the default PVC resource
          requirements for the database volume. For the time being this field is immutable
          and can only be set on system creation. This is because volume size updates
          are only supported for increasing the size, and only if the storage class
          specifies `allowVolumeExpansion: true`, +immutable.'
        displayName: Image
        path: dbVolumeResources
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:resourceRequirements
      - description: DBStorageClass (optional) overrides the default cluster StorageClass
          for the database volume. For the time being this field is immutable and
          can only be set on system creation. This affects where the system stores
          its database which contains system config, buckets, objects meta-data and
          mapping file parts to storage locations. +immutable.
        displayName: DB StorageClass
        path: dbStorageClass
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:text
      - description: PVPoolDefaultStorageClass (optional) overrides the default cluster
          StorageClass for the pv-pool volumes. This affects where the system stores
          data chunks (encrypted). Updates to this field will only affect new pv-pools,
          but updates to existing pools are not supported by the operator.
        displayName: PV Pool DefaultStorageClass
        path: pvPoolDefaultStorageClass
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:text
      - description: ImagePullSecret (optional) sets a pull secret for the system
          image.
        displayName: Image Pull Secret
        path: imagePullSecret
        x-descriptors:
        - urn:alm:descriptor:io.kubernetes:Secret
      version: v1alpha1
  description: |2

    **Red Hat OpenShift Container Storage** deploys three operators.

    ### OpenShift Container Storage operator

    The OpenShift Container Storage operator is the primary operator for OpenShift Container Storage. It serves to facilitate the other operators in OpenShift Container Storage by performing administrative tasks outside their scope as well as watching and configuring their CustomResources.

    ### Rook

    [Rook][1] deploys and manages Ceph on OpenShift, which provides block and file storage.

    # Core Capabilities

    * **Self-managing service:** No matter which supported storage technologies you choose, OpenShift Container Storage ensures that resources can be deployed and managed automatically.

    * **Hyper-scale or hyper-converged:** With OpenShift Container Storage you can either build dedicated storage clusters or hyper-converged clusters where your apps run alongside storage.

    * **File, Block, and Object provided by OpenShift Container Storage:** OpenShift Container Storage integrates Ceph with multiple storage presentations including object storage (compatible with S3), block storage, and POSIX-compliant shared file system.

    * **Your data, protected:** OpenShift Container Storage efficiently distributes and replicates your data across your cluster to minimize the risk of data loss. With snapshots, cloning, and versioning, no more losing sleep over your data.

    * **Elastic storage in your datacenter:** Scale is now possible in your datacenter. Get started with a few terabytes, and easily scale up.

    * **Simplified data management:** Easily create hybrid and multi-cloud data storage for your workloads, using a single namespace.

    [1]: https://rook.io
  displayName: OpenShift Container Storage
  icon:
  - base64data: PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxOTIgMTQ1Ij48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6I2UwMDt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPlJlZEhhdC1Mb2dvLUhhdC1Db2xvcjwvdGl0bGU+PHBhdGggZD0iTTE1Ny43Nyw2Mi42MWExNCwxNCwwLDAsMSwuMzEsMy40MmMwLDE0Ljg4LTE4LjEsMTcuNDYtMzAuNjEsMTcuNDZDNzguODMsODMuNDksNDIuNTMsNTMuMjYsNDIuNTMsNDRhNi40Myw2LjQzLDAsMCwxLC4yMi0xLjk0bC0zLjY2LDkuMDZhMTguNDUsMTguNDUsMCwwLDAtMS41MSw3LjMzYzAsMTguMTEsNDEsNDUuNDgsODcuNzQsNDUuNDgsMjAuNjksMCwzNi40My03Ljc2LDM2LjQzLTIxLjc3LDAtMS4wOCwwLTEuOTQtMS43My0xMC4xM1oiLz48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik0xMjcuNDcsODMuNDljMTIuNTEsMCwzMC42MS0yLjU4LDMwLjYxLTE3LjQ2YTE0LDE0LDAsMCwwLS4zMS0zLjQybC03LjQ1LTMyLjM2Yy0xLjcyLTcuMTItMy4yMy0xMC4zNS0xNS43My0xNi42QzEyNC44OSw4LjY5LDEwMy43Ni41LDk3LjUxLjUsOTEuNjkuNSw5MCw4LDgzLjA2LDhjLTYuNjgsMC0xMS42NC01LjYtMTcuODktNS42LTYsMC05LjkxLDQuMDktMTIuOTMsMTIuNSwwLDAtOC40MSwyMy43Mi05LjQ5LDI3LjE2QTYuNDMsNi40MywwLDAsMCw0Mi41Myw0NGMwLDkuMjIsMzYuMywzOS40NSw4NC45NCwzOS40NU0xNjAsNzIuMDdjMS43Myw4LjE5LDEuNzMsOS4wNSwxLjczLDEwLjEzLDAsMTQtMTUuNzQsMjEuNzctMzYuNDMsMjEuNzdDNzguNTQsMTA0LDM3LjU4LDc2LjYsMzcuNTgsNTguNDlhMTguNDUsMTguNDUsMCwwLDEsMS41MS03LjMzQzIyLjI3LDUyLC41LDU1LC41LDc0LjIyYzAsMzEuNDgsNzQuNTksNzAuMjgsMTMzLjY1LDcwLjI4LDQ1LjI4LDAsNTYuNy0yMC40OCw1Ni43LTM2LjY1LDAtMTIuNzItMTEtMjcuMTYtMzAuODMtMzUuNzgiLz48L3N2Zz4=
    mediatype: image/svg+xml
  install:
    spec:
      clusterPermissions:
      - rules:
        - apiGroups:
          - apiextensions.k8s.io
          resources:
          - customresourcedefinitions
          verbs:
          - create
          - get
          - list
          - update
          - watch
        - apiGroups:
          - apps
          resources:
          - daemonsets
          - deployments
          - replicasets
          - statefulsets
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - ceph.rook.io
          resources:
          - cephblockpools
          verbs:
          - create
          - delete
          - get
          - list
          - update
          - watch
        - apiGroups:
          - ceph.rook.io
          resources:
          - cephblockpools
          - cephclusters
          - cephfilesystems
          - cephobjectstores
          - cephobjectstoreusers
          - cephrbdmirrors
          verbs:
          - create
          - delete
          - get
          - list
          - update
          - watch
        - apiGroups:
          - ceph.rook.io
          resources:
          - cephclients
          verbs:
          - create
          - delete
          - get
          - list
          - update
          - watch
        - apiGroups:
          - ceph.rook.io
          resources:
          - cephfilesystemsubvolumegroups
          verbs:
          - create
          - delete
          - get
          - list
          - update
          - watch
        - apiGroups:
          - config.openshift.io
          resources:
          - clusterversions
          - networks
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - config.openshift.io
          resources:
          - infrastructures
          - networks
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - console.openshift.io
          resources:
          - consolequickstarts
          verbs:
          - create
          - delete
          - get
          - list
          - update
        - apiGroups:
          - coordination.k8s.io
          resources:
          - leases
          verbs:
          - create
          - get
          - list
          - update
        - apiGroups:
          - ""
          resources:
          - configmaps
          - endpoints
          - events
          - nodes
          - persistentvolumeclaims
          - pods
          - secrets
          - services
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - ""
          resources:
          - namespaces
          verbs:
          - get
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - monitoring.coreos.com
          resources:
          - prometheusrules
          - servicemonitors
          verbs:
          - create
          - get
          - list
          - update
          - watch
        - apiGroups:
          - noobaa.io
          resources:
          - noobaas
          verbs:
          - create
          - delete
          - get
          - list
          - watch
        - apiGroups:
          - ocs.openshift.io
          resources:
          - ocsinitializations
          - storageclusters
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - ocs.openshift.io
          resources:
          - storageclassclaims
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - ocs.openshift.io
          resources:
          - storageclassclaims/status
          verbs:
          - get
          - patch
          - update
        - apiGroups:
          - ocs.openshift.io
          resources:
          - storageclusters
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ocs.openshift.io
          resources:
          - storageconsumers
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - ocs.openshift.io
          resources:
          - storageconsumers/status
          verbs:
          - get
          - patch
          - update
        - apiGroups:
          - operators.coreos.com
          resources:
          - operatorconditions
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - quota.openshift.io
          resources:
          - clusterresourcequotas
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - route.openshift.io
          resources:
          - routes
          verbs:
          - create
          - get
          - list
          - update
          - watch
        - apiGroups:
          - security.openshift.io
          resources:
          - securitycontextconstraints
          verbs:
          - create
          - get
          - update
        - apiGroups:
          - security.openshift.io
          resourceNames:
          - privileged
          resources:
          - securitycontextconstraints
          verbs:
          - create
          - get
          - update
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotclasses
          - volumesnapshots
          verbs:
          - get
          - list
          - update
          - watch
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - template.openshift.io
          resources:
          - templates
          verbs:
          - create
          - delete
          - get
          - list
          - update
          - watch
        serviceAccountName: ocs-operator
      - rules:
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - namespaces
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
        serviceAccountName: rook-csi-cephfs-plugin-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - secrets
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
          - create
          - delete
          - update
          - patch
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - events
          verbs:
          - list
          - watch
          - create
          - update
          - patch
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments
          verbs:
          - get
          - list
          - watch
          - update
          - patch
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments/status
          verbs:
          - patch
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims/status
          verbs:
          - update
          - patch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshots
          verbs:
          - get
          - list
          - watch
          - update
          - patch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotcontents
          verbs:
          - create
          - get
          - list
          - watch
          - update
          - delete
          - patch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotcontents/status
          verbs:
          - update
          - patch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshots/status
          verbs:
          - update
          - patch
        serviceAccountName: rook-csi-cephfs-provisioner-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - secrets
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - namespaces
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - serviceaccounts
          verbs:
          - get
        serviceAccountName: rook-csi-rbd-plugin-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - secrets
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
          - create
          - delete
          - update
          - patch
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments
          verbs:
          - get
          - list
          - watch
          - update
          - patch
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments/status
          verbs:
          - patch
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - events
          verbs:
          - list
          - watch
          - create
          - update
          - patch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshots
          verbs:
          - get
          - list
          - watch
          - update
          - patch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotcontents
          verbs:
          - create
          - get
          - list
          - watch
          - update
          - delete
          - patch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotcontents/status
          verbs:
          - update
          - patch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshots/status
          verbs:
          - update
          - patch
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims/status
          verbs:
          - update
          - patch
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
        - apiGroups:
          - replication.storage.openshift.io
          resources:
          - volumereplications
          - volumereplicationclasses
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - replication.storage.openshift.io
          resources:
          - volumereplications/finalizers
          verbs:
          - update
        - apiGroups:
          - replication.storage.openshift.io
          resources:
          - volumereplications/status
          verbs:
          - get
          - patch
          - update
        - apiGroups:
          - replication.storage.openshift.io
          resources:
          - volumereplicationclasses/status
          verbs:
          - get
        - apiGroups:
          - ""
          resources:
          - serviceaccounts
          verbs:
          - get
        serviceAccountName: rook-csi-rbd-provisioner-sa
      - rules:
        - apiGroups:
          - ""
          - apps
          - extensions
          resources:
          - secrets
          - pods
          - pods/log
          - services
          - configmaps
          - deployments
          - daemonsets
          verbs:
          - get
          - list
          - watch
          - patch
          - create
          - update
          - delete
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - nodes
          - nodes/proxy
          - services
          - secrets
          - configmaps
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - events
          - persistentvolumes
          - persistentvolumeclaims
          - endpoints
          verbs:
          - get
          - list
          - watch
          - patch
          - create
          - update
          - delete
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - batch
          resources:
          - jobs
          - cronjobs
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - ceph.rook.io
          resources:
          - cephclients
          - cephclusters
          - cephblockpools
          - cephfilesystems
          - cephnfses
          - cephobjectstores
          - cephobjectstoreusers
          - cephobjectrealms
          - cephobjectzonegroups
          - cephobjectzones
          - cephbuckettopics
          - cephbucketnotifications
          - cephrbdmirrors
          - cephfilesystemmirrors
          - cephfilesystemsubvolumegroups
          - cephblockpoolradosnamespaces
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - ceph.rook.io
          resources:
          - cephclients/status
          - cephclusters/status
          - cephblockpools/status
          - cephfilesystems/status
          - cephnfses/status
          - cephobjectstores/status
          - cephobjectstoreusers/status
          - cephobjectrealms/status
          - cephobjectzonegroups/status
          - cephobjectzones/status
          - cephbuckettopics/status
          - cephbucketnotifications/status
          - cephrbdmirrors/status
          - cephfilesystemmirrors/status
          - cephfilesystemsubvolumegroups/status
          - cephblockpoolradosnamespaces/status
          verbs:
          - update
        - apiGroups:
          - ceph.rook.io
          resources:
          - cephclients/finalizers
          - cephclusters/finalizers
          - cephblockpools/finalizers
          - cephfilesystems/finalizers
          - cephnfses/finalizers
          - cephobjectstores/finalizers
          - cephobjectstoreusers/finalizers
          - cephobjectrealms/finalizers
          - cephobjectzonegroups/finalizers
          - cephobjectzones/finalizers
          - cephbuckettopics/finalizers
          - cephbucketnotifications/finalizers
          - cephrbdmirrors/finalizers
          - cephfilesystemmirrors/finalizers
          - cephfilesystemsubvolumegroups/finalizers
          - cephblockpoolradosnamespaces/finalizers
          verbs:
          - update
        - apiGroups:
          - policy
          - apps
          - extensions
          resources:
          - poddisruptionbudgets
          - deployments
          - replicasets
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
          - deletecollection
        - apiGroups:
          - healthchecking.openshift.io
          resources:
          - machinedisruptionbudgets
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - machine.openshift.io
          resources:
          - machines
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - storage.k8s.io
          resources:
          - csidrivers
          verbs:
          - create
          - delete
          - get
          - update
        - apiGroups:
          - k8s.cni.cncf.io
          resources:
          - network-attachment-definitions
          verbs:
          - get
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - ""
          resources:
          - configmaps
          - nodes
          - nodes/proxy
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - events
          verbs:
          - create
          - patch
          - list
          - get
          - watch
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        serviceAccountName: rook-ceph-mgr
      - rules:
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
          - watch
        serviceAccountName: rook-ceph-mgr
      - rules:
        - apiGroups:
          - ""
          resources:
          - secrets
          - configmaps
          verbs:
          - get
          - create
          - update
          - delete
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
        - apiGroups:
          - objectbucket.io
          resources:
          - objectbucketclaims
          verbs:
          - list
          - watch
          - get
          - update
        - apiGroups:
          - objectbucket.io
          resources:
          - objectbuckets
          verbs:
          - list
          - watch
          - get
          - create
          - update
          - delete
        - apiGroups:
          - objectbucket.io
          resources:
          - objectbucketclaims/status
          - objectbuckets/status
          verbs:
          - update
        - apiGroups:
          - objectbucket.io
          resources:
          - objectbucketclaims/finalizers
          - objectbuckets/finalizers
          verbs:
          - update
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
        serviceAccountName: rook-ceph-osd
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - pods/log
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - pods/exec
          verbs:
          - create
        - apiGroups:
          - admissionregistration.k8s.io
          resources:
          - validatingwebhookconfigurations
          verbs:
          - create
          - get
          - delete
          - update
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - security.openshift.io
          resourceNames:
          - privileged
          resources:
          - securitycontextconstraints
          verbs:
          - use
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - monitoring.coreos.com
          resources:
          - '*'
          verbs:
          - '*'
        serviceAccountName: ocs-metrics-exporter
      deployments:
      - name: ocs-operator
        spec:
          replicas: 1
          selector:
            matchLabels:
              name: ocs-operator
          strategy:
            type: Recreate
          template:
            metadata:
              labels:
                name: ocs-operator
            spec:
              containers:
              - args:
                - --enable-leader-election
                - --health-probe-bind-address=:8081
                command:
                - ocs-operator
                env:
                - name: WATCH_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.annotations['olm.targetNamespaces']
                - name: ROOK_CEPH_IMAGE
                  value: rook/ceph:v1.9.0
                - name: CEPH_IMAGE
                  value: quay.io/ceph/ceph:v16
                - name: NOOBAA_CORE_IMAGE
                  value: noobaa/noobaa-core:master-20210912
                - name: NOOBAA_DB_IMAGE
                  value: centos/postgresql-12-centos7
                - name: PROVIDER_API_SERVER_IMAGE
                  value: quay.io/ocs-dev/ocs-operator:latest
                image: quay.io/ocs-dev/ocs-operator:latest
                imagePullPolicy: Always
                name: ocs-operator
                readinessProbe:
                  httpGet:
                    path: /readyz
                    port: 8081
                  initialDelaySeconds: 5
                  periodSeconds: 10
                resources: {}
              serviceAccountName: ocs-operator
              terminationGracePeriodSeconds: 10
              tolerations:
              - effect: NoSchedule
                key: node.ocs.openshift.io/storage
                operator: Equal
                value: "true"
      - name: rook-ceph-operator
        spec:
          replicas: 1
          selector:
            matchLabels:
              app: rook-ceph-operator
          strategy: {}
          template:
            metadata:
              labels:
                app: rook-ceph-operator
            spec:
              containers:
              - args:
                - ceph
                - operator
                env:
                - name: ROOK_CURRENT_NAMESPACE_ONLY
                  value: "true"
                - name: ROOK_ALLOW_MULTIPLE_FILESYSTEMS
                  value: "false"
                - name: ROOK_LOG_LEVEL
                  value: INFO
                - name: ROOK_CEPH_STATUS_CHECK_INTERVAL
                  value: 60s
                - name: ROOK_MON_HEALTHCHECK_INTERVAL
                  value: 45s
                - name: ROOK_MON_OUT_TIMEOUT
                  value: 600s
                - name: ROOK_DISCOVER_DEVICES_INTERVAL
                  value: 60m
                - name: ROOK_HOSTPATH_REQUIRES_PRIVILEGED
                  value: "true"
                - name: ROOK_ENABLE_SELINUX_RELABELING
                  value: "true"
                - name: ROOK_ENABLE_FSGROUP
                  value: "true"
                - name: ROOK_ENABLE_FLEX_DRIVER
                  value: "false"
                - name: ROOK_ENABLE_DISCOVERY_DAEMON
                  value: "false"
                - name: ROOK_ENABLE_MACHINE_DISRUPTION_BUDGET
                  value: "false"
                - name: ROOK_DISABLE_DEVICE_HOTPLUG
                  value: "true"
                - name: ROOK_CSI_ALLOW_UNSUPPORTED_VERSION
                  value: "true"
                - name: CSI_VOLUME_REPLICATION_IMAGE
                  value: quay.io/csiaddons/volumereplication-operator:v0.1.0
                - name: ROOK_CSIADDONS_IMAGE
                  value: quay.io/csiaddons/k8s-sidecar:v0.2.1
                - name: ROOK_CSI_NFS_IMAGE
                  value: k8s.gcr.io/sig-storage/nfsplugin:v3.1.0
                - name: CSI_PROVISIONER_TOLERATIONS
                  value: |2-

                    - key: node.ocs.openshift.io/storage
                      operator: Equal
                      value: "true"
                      effect: NoSchedule
                - name: CSI_PLUGIN_TOLERATIONS
                  value: |2-

                    - key: node.ocs.openshift.io/storage
                      operator: Equal
                      value: "true"
                      effect: NoSchedule
                - name: NODE_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: spec.nodeName
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
                - name: POD_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                - name: ROOK_OBC_WATCH_OPERATOR_NAMESPACE
                  value: "true"
                image: rook/ceph:v1.9.0
                name: rook-ceph-operator
                ports:
                - containerPort: 9443
                  name: https-webhook
                  protocol: TCP
                resources: {}
                securityContext:
                  runAsGroup: 2016
                  runAsNonRoot: true
                  runAsUser: 2016
                volumeMounts:
                - mountPath: /var/lib/rook
                  name: rook-config
                - mountPath: /etc/ceph
                  name: default-config-dir
                - mountPath: /etc/webhook
                  name: webhook-cert
              serviceAccountName: rook-ceph-system
              tolerations:
              - effect: NoSchedule
                key: node.ocs.openshift.io/storage
                operator: Equal
                value: "true"
              volumes:
              - emptyDir: {}
                name: rook-config
              - emptyDir: {}
                name: default-config-dir
              - emptyDir: {}
                name: webhook-cert
      - name: ocs-metrics-exporter
        spec:
          replicas: 1
          selector:
            matchLabels:
              app.kubernetes.io/component: ocs-metrics-exporter
              app.kubernetes.io/name: ocs-metrics-exporter
          strategy: {}
          template:
            metadata:
              labels:
                app.kubernetes.io/component: ocs-metrics-exporter
                app.kubernetes.io/name: ocs-metrics-exporter
                app.kubernetes.io/version: 0.0.1
            spec:
              containers:
              - args:
                - --namespaces=openshift-storage
                command:
                - /usr/local/bin/metrics-exporter
                image: quay.io/ocs-dev/ocs-operator:latest
                name: ocs-metrics-exporter
                ports:
                - containerPort: 8080
                - containerPort: 8081
                resources: {}
                securityContext:
                  privileged: true
              serviceAccountName: ocs-metrics-exporter
              tolerations:
              - effect: NoSchedule
                key: node.ocs.openshift.io/storage
                operator: Equal
                value: "true"
      permissions:
      - rules:
        - apiGroups:
          - ""
          resources:
          - endpoints
          verbs:
          - get
          - watch
          - list
          - delete
          - update
          - create
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
          - create
          - delete
        - apiGroups:
          - coordination.k8s.io
          resources:
          - leases
          verbs:
          - get
          - watch
          - list
          - delete
          - update
          - create
        serviceAccountName: rook-csi-cephfs-provisioner-sa
      - rules:
        - apiGroups:
          - csiaddons.openshift.io
          resources:
          - csiaddonsnodes
          verbs:
          - create
        serviceAccountName: rook-csi-rbd-plugin-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - endpoints
          verbs:
          - get
          - watch
          - list
          - delete
          - update
          - create
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
          - watch
          - create
          - delete
          - update
        - apiGroups:
          - coordination.k8s.io
          resources:
          - leases
          verbs:
          - get
          - watch
          - list
          - delete
          - update
          - create
        - apiGroups:
          - csiaddons.openshift.io
          resources:
          - csiaddonsnodes
          verbs:
          - create
        serviceAccountName: rook-csi-rbd-provisioner-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - configmaps
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        serviceAccountName: rook-ceph-cmd-reporter
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - services
          - pods/log
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - batch
          resources:
          - jobs
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - ceph.rook.io
          resources:
          - '*'
          verbs:
          - '*'
        - apiGroups:
          - apps
          resources:
          - deployments/scale
          - deployments
          verbs:
          - patch
          - delete
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims
          verbs:
          - delete
        serviceAccountName: rook-ceph-mgr
      - rules:
        - apiGroups:
          - ""
          resources:
          - secrets
          verbs:
          - get
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - ceph.rook.io
          resources:
          - cephclusters
          - cephclusters/finalizers
          verbs:
          - get
          - list
          - create
          - update
          - delete
        serviceAccountName: rook-ceph-osd
      - rules:
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
        - apiGroups:
          - apps
          resources:
          - deployments
          verbs:
          - get
          - delete
        - apiGroups:
          - batch
          resources:
          - jobs
          verbs:
          - get
          - list
          - delete
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims
          verbs:
          - get
          - update
          - delete
          - list
        serviceAccountName: rook-ceph-purge-osd
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - configmaps
          - services
          verbs:
          - get
          - list
          - watch
          - patch
          - create
          - update
          - delete
        - apiGroups:
          - apps
          - extensions
          resources:
          - daemonsets
          - statefulsets
          - deployments
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - batch
          resources:
          - cronjobs
          verbs:
          - delete
        - apiGroups:
          - cert-manager.io
          resources:
          - certificates
          - issuers
          verbs:
          - get
          - create
          - delete
        serviceAccountName: rook-ceph-system
    strategy: deployment
  installModes:
  - supported: true
    type: OwnNamespace
  - supported: true
    type: SingleNamespace
  - supported: false
    type: MultiNamespace
  - supported: false
    type: AllNamespaces
  keywords:
  - storage
  - rook
  - ceph
  - block storage
  - shared filesystem
  - object storage
  links:
  - name: Source Code
    url: https://github.com/red-hat-storage/ocs-operator
  maintainers:
  - email: ocs-support@redhat.com
    name: Red Hat Support
  maturity: alpha
  minKubeVersion: 1.16.0
  provider:
    name: Red Hat
  relatedImages:
  - image: rook/ceph:v1.9.0
    name: rook-container
  - image: quay.io/ceph/ceph:v16
    name: ceph-container
  - image: quay.io/csiaddons/volumereplication-operator:v0.1.0
    name: volume-replication-operator
  - image: quay.io/csiaddons/k8s-sidecar:v0.2.1
    name: csiaddons-sidecar
  - image: k8s.gcr.io/sig-storage/nfsplugin:v3.1.0
    name: rook-csi-nfs
  - image: quay.io/ocs-dev/ocs-must-gather:latest
    name: ocs-must-gather
  - image: quay.io/ocs-dev/ocs-operator:latest
    name: ocs-metrics-exporter
  version: 4.11.0
