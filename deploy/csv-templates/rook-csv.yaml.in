apiVersion: operators.coreos.com/v1alpha1
kind: ClusterServiceVersion
metadata:
  annotations:
    alm-examples: |-
      [
        {
          "apiVersion": "ceph.rook.io/v1",
          "kind": "CephCluster",
          "metadata": {
            "name": "my-rook-ceph",
            "namespace": "my-rook-ceph"
          },
          "spec": {
            "cephVersion": {
              "image": "quay.io/ceph/ceph:v16.2.5"
            },
            "dataDirHostPath": "/var/lib/rook",
            "mon": {
              "count": 3
            },
            "dashboard": {
              "enabled": true
            },
            "network": {
              "hostNetwork": false
            },
            "rbdMirroring": {
              "workers": 0
            },
            "storage": {
              "useAllNodes": true,
              "useAllDevices": true
            }
          }
        },
        {
          "apiVersion": "ceph.rook.io/v1",
          "kind": "CephBlockPool",
          "metadata": {
            "name": "replicapool",
            "namespace": "my-rook-ceph"
          },
          "spec": {
            "failureDomain": "host",
            "replicated": {
              "size": 3
            },
            "annotations": null
          }
        },
        {
          "apiVersion": "ceph.rook.io/v1",
          "kind": "CephObjectStore",
          "metadata": {
            "name": "my-store",
            "namespace": "my-rook-ceph"
          },
          "spec": {
            "metadataPool": {
              "failureDomain": "host",
              "replicated": {
                "size": 3
              }
            },
            "dataPool": {
              "failureDomain": "host",
              "replicated": {
                "size": 3
              }
            },
            "gateway": {
              "type": "s3",
              "sslCertificateRef": null,
              "port": 8080,
              "securePort": null,
              "instances": 1,
              "placement": null,
              "annotations": null,
              "resources": null
            }
          }
        },
        {
          "apiVersion": "ceph.rook.io/v1",
          "kind": "CephObjectStoreUser",
          "metadata": {
            "name": "my-user",
            "namespace": "my-rook-ceph"
          },
          "spec": {
            "store": "my-store",
            "displayName": "my display name"
          }
        },
        {
          "apiVersion": "ceph.rook.io/v1",
          "kind": "CephNFS",
          "metadata": {
            "name": "my-nfs",
            "namespace": "rook-ceph"
          },
          "spec": {
            "rados": {
              "pool": "myfs-data0",
              "namespace": "nfs-ns"
            },
            "server": {
              "active": 3,
              "placement": null,
              "annotations": null,
              "resources": null
            }
          }
        },
        {
          "apiVersion": "ceph.rook.io/v1",
          "kind": "CephClient",
          "metadata": {
            "name": "cinder",
            "namespace": "rook-ceph"
          },
          "spec": {
            "caps": {
              "mon": "profile rbd",
              "osd": "profile rbd pool=volumes, profile rbd pool=vms, profile rbd-read-only pool=images"
            }
          }
        },
        {
          "apiVersion": "ceph.rook.io/v1",
          "kind": "CephFilesystem",
          "metadata": {
            "name": "myfs",
            "namespace": "rook-ceph"
          },
          "spec": {
            "dataPools": [
              {
                "compressionMode": "",
                "crushRoot": "",
                "deviceClass": "",
                "erasureCoded": {
                  "algorithm": "",
                  "codingChunks": 0,
                  "dataChunks": 0
                },
                "failureDomain": "host",
                "replicated": {
                  "requireSafeReplicaSize": false,
                  "size": 1,
                  "targetSizeRatio": 0.5
                }
              }
            ],
            "metadataPool": {
              "compressionMode": "",
              "crushRoot": "",
              "deviceClass": "",
              "erasureCoded": {
                "algorithm": "",
                "codingChunks": 0,
                "dataChunks": 0
              },
              "failureDomain": "",
              "replicated": {
                "requireSafeReplicaSize": false,
                "size": 1,
                "targetSizeRatio": 0
              }
            },
            "metadataServer": {
              "activeCount": 1,
              "activeStandby": true,
              "placement": {},
              "resources": {}
            },
            "preservePoolsOnDelete": false,
            "preserveFilesystemOnDelete": false
          }
        },
        {
          "apiVersion": "ceph.rook.io/v1",
          "kind": "CephRBDMirror",
          "metadata": {
            "name": "my-rbd-mirror",
            "namespace": "rook-ceph"
          },
          "spec": {
            "annotations": null,
            "count": 1,
            "placement": {
              "topologyKey": "kubernetes.io/hostname"
            },
            "resources": null
          }
        }
      ]
    capabilities: Basic Install
    tectonic-visibility: ocs
    repository: https://github.com/rook/rook
    containerImage: '{{.RookOperatorImage}}'
    externalClusterScript: |-
      JycnCkNvcHlyaWdodCAyMDIwIFRoZSBSb29rIEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQu
      CgpMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxp
      Y2Vuc2UiKTsKeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3
      aXRoIHRoZSBMaWNlbnNlLgpZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQK
      CglodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKClVubGVzcyByZXF1
      aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUK
      ZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElT
      IiBCQVNJUywKV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVp
      dGhlciBleHByZXNzIG9yIGltcGxpZWQuClNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmlj
      IGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKbGltaXRhdGlvbnMgdW5kZXIgdGhl
      IExpY2Vuc2UuCicnJwoKaW1wb3J0IGVycm5vCmltcG9ydCBzeXMKaW1wb3J0IGpzb24KaW1wb3J0
      IGFyZ3BhcnNlCmltcG9ydCB1bml0dGVzdAppbXBvcnQgcmUKaW1wb3J0IHJlcXVlc3RzCmltcG9y
      dCBzdWJwcm9jZXNzCmZyb20gb3MgaW1wb3J0IGxpbmVzZXAgYXMgTElORVNFUApmcm9tIG9zIGlt
      cG9ydCBwYXRoCgojIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgd2l0aCAyLngKdHJ5OgogICAgTW9k
      dWxlTm90Rm91bmRFcnJvcgpleGNlcHQ6CiAgICBNb2R1bGVOb3RGb3VuZEVycm9yID0gSW1wb3J0
      RXJyb3IKCnRyeToKICAgIGltcG9ydCByYWRvcwpleGNlcHQgTW9kdWxlTm90Rm91bmRFcnJvciBh
      cyBub01vZEVycjoKICAgIHByaW50KCJFcnJvcjogJXNcbkV4aXRpbmcgdGhlIHNjcmlwdC4uLiIg
      JSBub01vZEVycikKICAgIHN5cy5leGl0KDEpCgp0cnk6CiAgICAjIGZvciAyLjcueAogICAgZnJv
      bSBTdHJpbmdJTyBpbXBvcnQgU3RyaW5nSU8KZXhjZXB0IE1vZHVsZU5vdEZvdW5kRXJyb3I6CiAg
      ICAjIGZvciAzLngKICAgIGZyb20gaW8gaW1wb3J0IFN0cmluZ0lPCgp0cnk6CiAgICAjIGZvciAy
      LjcueAogICAgZnJvbSB1cmxwYXJzZSBpbXBvcnQgdXJscGFyc2UKZXhjZXB0IE1vZHVsZU5vdEZv
      dW5kRXJyb3I6CiAgICAjIGZvciAzLngKICAgIGZyb20gdXJsbGliLnBhcnNlIGltcG9ydCB1cmxw
      YXJzZQoKCmNsYXNzIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oRXhjZXB0aW9uKToKICAgIHBh
      c3MKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMj
      IyMjIyMjIyMjIyMjIyMgRHVtbXlSYWRvcyAjIyMjIyMjIyMjIyMjIyMjIyMKIyMjIyMjIyMjIyMj
      IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMgdGhpcyBpcyBtYWlubHkgZm9y
      IHRlc3RpbmcgYW5kIGNvdWxkIGJlIHVzZWQgd2hlcmUgJ3JhZG9zJyBpcyBub3QgYXZhaWxhYmxl
      CgoKY2xhc3MgRHVtbXlSYWRvcyhvYmplY3QpOgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAg
      ICAgIHNlbGYucmV0dXJuX3ZhbCA9IDAKICAgICAgICBzZWxmLmVycl9tZXNzYWdlID0gJycKICAg
      ICAgICBzZWxmLnN0YXRlID0gJ2Nvbm5lY3RlZCcKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFw
      ID0ge30KICAgICAgICBzZWxmLmNtZF9uYW1lcyA9IHt9CiAgICAgICAgc2VsZi5faW5pdF9jbWRf
      b3V0cHV0X21hcCgpCiAgICAgICAgc2VsZi5kdW1teV9ob3N0X2lwX21hcCA9IHt9CgogICAgZGVm
      IF9pbml0X2NtZF9vdXRwdXRfbWFwKHNlbGYpOgogICAgICAgIGpzb25fZmlsZV9uYW1lID0gJ3Rl
      c3QtZGF0YS9jZXBoLXN0YXR1cy1vdXQnCiAgICAgICAgc2NyaXB0X2RpciA9IHBhdGguYWJzcGF0
      aChwYXRoLmRpcm5hbWUoX19maWxlX18pKQogICAgICAgIGNlcGhfc3RhdHVzX3N0ciA9ICIiCiAg
      ICAgICAgd2l0aCBvcGVuKHBhdGguam9pbihzY3JpcHRfZGlyLCBqc29uX2ZpbGVfbmFtZSksICdy
      JykgYXMganNvbl9maWxlOgogICAgICAgICAgICBjZXBoX3N0YXR1c19zdHIgPSBqc29uX2ZpbGUu
      cmVhZCgpCiAgICAgICAgc2VsZi5jbWRfbmFtZXNbJ2ZzIGxzJ10gPSAnJyd7ImZvcm1hdCI6ICJq
      c29uIiwgInByZWZpeCI6ICJmcyBscyJ9JycnCiAgICAgICAgc2VsZi5jbWRfbmFtZXNbJ3F1b3J1
      bV9zdGF0dXMnXSA9ICcnJ3siZm9ybWF0IjogImpzb24iLCAicHJlZml4IjogInF1b3J1bV9zdGF0
      dXMifScnJwogICAgICAgIHNlbGYuY21kX25hbWVzWydjYXBzX2NoYW5nZV9kZWZhdWx0X3Bvb2xf
      cHJlZml4J10gPSAnJyd7ImNhcHMiOiBbIm1vbiIsICJhbGxvdyByLCBhbGxvdyBjb21tYW5kIHF1
      b3J1bV9zdGF0dXMsIGFsbG93IGNvbW1hbmQgdmVyc2lvbiIsICJtZ3IiLCAiYWxsb3cgY29tbWFu
      ZCBjb25maWciLCAib3NkIiwgImFsbG93IHJ3eCBwb29sPWRlZmF1bHQucmd3Lm1ldGEsIGFsbG93
      IHIgcG9vbD0ucmd3LnJvb3QsIGFsbG93IHJ3IHBvb2w9ZGVmYXVsdC5yZ3cuY29udHJvbCwgYWxs
      b3cgcnggcG9vbD1kZWZhdWx0LnJndy5sb2csIGFsbG93IHggcG9vbD1kZWZhdWx0LnJndy5idWNr
      ZXRzLmluZGV4Il0sICJlbnRpdHkiOiAiY2xpZW50LmhlYWx0aGNoZWNrZXIiLCAiZm9ybWF0Ijog
      Impzb24iLCAicHJlZml4IjogImF1dGggY2FwcyJ9JycnCiAgICAgICAgc2VsZi5jbWRfbmFtZXNb
      J21nciBzZXJ2aWNlcyddID0gJycneyJmb3JtYXQiOiAianNvbiIsICJwcmVmaXgiOiAibWdyIHNl
      cnZpY2VzIn0nJycKICAgICAgICAjIGFsbCB0aGUgY29tbWFuZHMgYW5kIHRoZWlyIG91dHB1dAog
      ICAgICAgIHNlbGYuY21kX291dHB1dF9tYXBbc2VsZi5jbWRfbmFtZXNbJ2ZzIGxzJ10KICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgIF0gPSAnJydbeyJuYW1lIjoibXlmcyIsIm1ldGFkYXRhX3Bv
      b2wiOiJteWZzLW1ldGFkYXRhIiwibWV0YWRhdGFfcG9vbF9pZCI6MiwiZGF0YV9wb29sX2lkcyI6
      WzNdLCJkYXRhX3Bvb2xzIjpbIm15ZnMtZGF0YTAiXX1dJycnCiAgICAgICAgc2VsZi5jbWRfb3V0
      cHV0X21hcFtzZWxmLmNtZF9uYW1lc1sncXVvcnVtX3N0YXR1cyddXSA9ICcnJ3siZWxlY3Rpb25f
      ZXBvY2giOjMsInF1b3J1bSI6WzBdLCJxdW9ydW1fbmFtZXMiOlsiYSJdLCJxdW9ydW1fbGVhZGVy
      X25hbWUiOiJhIiwicXVvcnVtX2FnZSI6MTQzODUsImZlYXR1cmVzIjp7InF1b3J1bV9jb24iOiI0
      NTQwMTM4MjkyODM2Njk2MDYzIiwicXVvcnVtX21vbiI6WyJrcmFrZW4iLCJsdW1pbm91cyIsIm1p
      bWljIiwib3NkbWFwLXBydW5lIiwibmF1dGlsdXMiLCJvY3RvcHVzIl19LCJtb25tYXAiOnsiZXBv
      Y2giOjEsImZzaWQiOiJhZjRlMTY3My0wYjcyLTQwMmQtOTkwYS0yMmQyOTE5ZDBmMWMiLCJtb2Rp
      ZmllZCI6IjIwMjAtMDUtMDdUMDM6MzY6MzkuOTE4MDM1WiIsImNyZWF0ZWQiOiIyMDIwLTA1LTA3
      VDAzOjM2OjM5LjkxODAzNVoiLCJtaW5fbW9uX3JlbGVhc2UiOjE1LCJtaW5fbW9uX3JlbGVhc2Vf
      bmFtZSI6Im9jdG9wdXMiLCJmZWF0dXJlcyI6eyJwZXJzaXN0ZW50IjpbImtyYWtlbiIsImx1bWlu
      b3VzIiwibWltaWMiLCJvc2RtYXAtcHJ1bmUiLCJuYXV0aWx1cyIsIm9jdG9wdXMiXSwib3B0aW9u
      YWwiOltdfSwibW9ucyI6W3sicmFuayI6MCwibmFtZSI6ImEiLCJwdWJsaWNfYWRkcnMiOnsiYWRk
      cnZlYyI6W3sidHlwZSI6InYyIiwiYWRkciI6IjEwLjExMC4yMDUuMTc0OjMzMDAiLCJub25jZSI6
      MH0seyJ0eXBlIjoidjEiLCJhZGRyIjoiMTAuMTEwLjIwNS4xNzQ6Njc4OSIsIm5vbmNlIjowfV19
      LCJhZGRyIjoiMTAuMTEwLjIwNS4xNzQ6Njc4OS8wIiwicHVibGljX2FkZHIiOiIxMC4xMTAuMjA1
      LjE3NDo2Nzg5LzAiLCJwcmlvcml0eSI6MCwid2VpZ2h0IjowfV19fScnJwogICAgICAgIHNlbGYu
      Y21kX291dHB1dF9tYXBbc2VsZi5jbWRfbmFtZXNbJ21nciBzZXJ2aWNlcyddXSA9ICcnJ3siZGFz
      aGJvYXJkIjoiaHR0cHM6Ly9jZXBoLWRhc2hib2FyZDo4NDQzLyIsInByb21ldGhldXMiOiJodHRw
      Oi8vY2VwaC1kYXNoYm9hcmQtZGI6OTI4My8ifScnJwogICAgICAgIHNlbGYuY21kX291dHB1dF9t
      YXBbJycneyJjYXBzIjogWyJtb24iLCAiYWxsb3cgciwgYWxsb3cgY29tbWFuZCBxdW9ydW1fc3Rh
      dHVzIiwgIm9zZCIsICJhbGxvdyByd3ggcG9vbD1kZWZhdWx0LnJndy5tZXRhLCBhbGxvdyByIHBv
      b2w9LnJndy5yb290LCBhbGxvdyBydyBwb29sPWRlZmF1bHQucmd3LmNvbnRyb2wsIGFsbG93IHgg
      cG9vbD1kZWZhdWx0LnJndy5idWNrZXRzLmluZGV4Il0sICJlbnRpdHkiOiAiY2xpZW50LmhlYWx0
      aGNoZWNrZXIiLCAiZm9ybWF0IjogImpzb24iLCAicHJlZml4IjogImF1dGggZ2V0LW9yLWNyZWF0
      ZSJ9JycnXSA9ICcnJ1t7ImVudGl0eSI6ImNsaWVudC5oZWFsdGhjaGVja2VyIiwia2V5IjoiQVFE
      RmtiTmVmdDViRlJBQVRuZExOVVNFS3J1b3p4aVppM2xyZEE9PSIsImNhcHMiOnsibW9uIjoiYWxs
      b3cgciwgYWxsb3cgY29tbWFuZCBxdW9ydW1fc3RhdHVzIiwib3NkIjoiYWxsb3cgcnd4IHBvb2w9
      ZGVmYXVsdC5yZ3cubWV0YSwgYWxsb3cgciBwb29sPS5yZ3cucm9vdCwgYWxsb3cgcncgcG9vbD1k
      ZWZhdWx0LnJndy5jb250cm9sLCBhbGxvdyB4IHBvb2w9ZGVmYXVsdC5yZ3cuYnVja2V0cy5pbmRl
      eCJ9fV0nJycKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWycnJ3siY2FwcyI6IFsibW9uIiwg
      InByb2ZpbGUgcmJkIiwgIm9zZCIsICJwcm9maWxlIHJiZCJdLCAiZW50aXR5IjogImNsaWVudC5j
      c2ktcmJkLW5vZGUiLCAiZm9ybWF0IjogImpzb24iLCAicHJlZml4IjogImF1dGggZ2V0LW9yLWNy
      ZWF0ZSJ9JycnXSA9ICcnJ1t7ImVudGl0eSI6ImNsaWVudC5jc2ktcmJkLW5vZGUiLCJrZXkiOiJB
      UUJPZ3JOZUhiSzFBeEFBdWJZQmVWOFMxVS9HUHpxNVNWZXE2Zz09IiwiY2FwcyI6eyJtb24iOiJw
      cm9maWxlIHJiZCIsIm9zZCI6InByb2ZpbGUgcmJkIn19XScnJwogICAgICAgIHNlbGYuY21kX291
      dHB1dF9tYXBbJycneyJjYXBzIjogWyJtb24iLCAicHJvZmlsZSByYmQiLCAibWdyIiwgImFsbG93
      IHJ3IiwgIm9zZCIsICJwcm9maWxlIHJiZCJdLCAiZW50aXR5IjogImNsaWVudC5jc2ktcmJkLXBy
      b3Zpc2lvbmVyIiwgImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJhdXRoIGdldC1vci1jcmVh
      dGUifScnJ10gPSAnJydbeyJlbnRpdHkiOiJjbGllbnQuY3NpLXJiZC1wcm92aXNpb25lciIsImtl
      eSI6IkFRQk5nck5lMWdleUt4QUE4ZWtWaVJkRStoc3M1T3dlWUJrd05nPT0iLCJjYXBzIjp7Im1n
      ciI6ImFsbG93IHJ3IiwibW9uIjoicHJvZmlsZSByYmQiLCJvc2QiOiJwcm9maWxlIHJiZCJ9fV0n
      JycKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWycnJ3siY2FwcyI6IFsibW9uIiwgImFsbG93
      IHIiLCAibWdyIiwgImFsbG93IHJ3IiwgIm9zZCIsICJhbGxvdyBydyB0YWcgY2VwaGZzICo9KiIs
      ICJtZHMiLCAiYWxsb3cgcnciXSwgImVudGl0eSI6ICJjbGllbnQuY3NpLWNlcGhmcy1ub2RlIiwg
      ImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJhdXRoIGdldC1vci1jcmVhdGUifScnJ10gPSAn
      JydbeyJlbnRpdHkiOiJjbGllbnQuY3NpLWNlcGhmcy1ub2RlIiwia2V5IjoiQVFCT2dyTmVFTnVu
      S3hBQVBDbWdFN1I2RzhEY1huYUoxRjMycWc9PSIsImNhcHMiOnsibWRzIjoiYWxsb3cgcnciLCJt
      Z3IiOiJhbGxvdyBydyIsIm1vbiI6ImFsbG93IHIiLCJvc2QiOiJhbGxvdyBydyB0YWcgY2VwaGZz
      ICo9KiJ9fV0nJycKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWycnJ3siY2FwcyI6IFsibW9u
      IiwgImFsbG93IHIiLCAibWdyIiwgImFsbG93IHJ3IiwgIm9zZCIsICJhbGxvdyBydyB0YWcgY2Vw
      aGZzIG1ldGFkYXRhPSoiXSwgImVudGl0eSI6ICJjbGllbnQuY3NpLWNlcGhmcy1wcm92aXNpb25l
      ciIsICJmb3JtYXQiOiAianNvbiIsICJwcmVmaXgiOiAiYXV0aCBnZXQtb3ItY3JlYXRlIn0nJydd
      ID0gJycnW3siZW50aXR5IjoiY2xpZW50LmNzaS1jZXBoZnMtcHJvdmlzaW9uZXIiLCJrZXkiOiJB
      UUJPZ3JOZUFGZ2NHQkFBdkdxS09BRDBEM3h4bVZZMFI5MTJkZz09IiwiY2FwcyI6eyJtZ3IiOiJh
      bGxvdyBydyIsIm1vbiI6ImFsbG93IHIiLCJvc2QiOiJhbGxvdyBydyB0YWcgY2VwaGZzIG1ldGFk
      YXRhPSoifX1dJycnCiAgICAgICAgc2VsZi5jbWRfb3V0cHV0X21hcFsnJyd7ImNhcHMiOiBbIm1v
      biIsICJhbGxvdyByLCBhbGxvdyBjb21tYW5kIHF1b3J1bV9zdGF0dXMsIGFsbG93IGNvbW1hbmQg
      dmVyc2lvbiIsICJtZ3IiLCAiYWxsb3cgY29tbWFuZCBjb25maWciLCAib3NkIiwgImFsbG93IHJ3
      eCBwb29sPWRlZmF1bHQucmd3Lm1ldGEsIGFsbG93IHIgcG9vbD0ucmd3LnJvb3QsIGFsbG93IHJ3
      IHBvb2w9ZGVmYXVsdC5yZ3cuY29udHJvbCwgYWxsb3cgcnggcG9vbD1kZWZhdWx0LnJndy5sb2cs
      IGFsbG93IHggcG9vbD1kZWZhdWx0LnJndy5idWNrZXRzLmluZGV4Il0sICJlbnRpdHkiOiAiY2xp
      ZW50LmhlYWx0aGNoZWNrZXIiLCAiZm9ybWF0IjogImpzb24iLCAicHJlZml4IjogImF1dGggZ2V0
      LW9yLWNyZWF0ZSJ9JycnXSA9ICcnJ1t7ImVudGl0eSI6ImNsaWVudC5oZWFsdGhjaGVja2VyIiwi
      a2V5IjoiQVFERmtiTmVmdDViRlJBQVRuZExOVVNFS3J1b3p4aVppM2xyZEE9PSIsImNhcHMiOnsi
      bW9uIjogImFsbG93IHIsIGFsbG93IGNvbW1hbmQgcXVvcnVtX3N0YXR1cywgYWxsb3cgY29tbWFu
      ZCB2ZXJzaW9uIiwgIm1nciI6ICJhbGxvdyBjb21tYW5kIGNvbmZpZyIsICJvc2QiOiAiYWxsb3cg
      cnd4IHBvb2w9ZGVmYXVsdC5yZ3cubWV0YSwgYWxsb3cgciBwb29sPS5yZ3cucm9vdCwgYWxsb3cg
      cncgcG9vbD1kZWZhdWx0LnJndy5jb250cm9sLCBhbGxvdyByeCBwb29sPWRlZmF1bHQucmd3Lmxv
      ZywgYWxsb3cgeCBwb29sPWRlZmF1bHQucmd3LmJ1Y2tldHMuaW5kZXgifX1dJycnCiAgICAgICAg
      c2VsZi5jbWRfb3V0cHV0X21hcFsnJyd7ImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJtZ3Ig
      c2VydmljZXMifScnJ10gPSAnJyd7ImRhc2hib2FyZCI6ICJodHRwOi8vcm9vay1jZXBoLW1nci1h
      LTU3Y2Y5Zjg0YmMtZjRqbmw6NzAwMC8iLCAicHJvbWV0aGV1cyI6ICJodHRwOi8vcm9vay1jZXBo
      LW1nci1hLTU3Y2Y5Zjg0YmMtZjRqbmw6OTI4My8ifScnJwogICAgICAgIHNlbGYuY21kX291dHB1
      dF9tYXBbJycneyJlbnRpdHkiOiAiY2xpZW50LmhlYWx0aGNoZWNrZXIiLCAiZm9ybWF0IjogImpz
      b24iLCAicHJlZml4IjogImF1dGggZ2V0In0nJyddID0gJycneyJkYXNoYm9hcmQiOiAiaHR0cDov
      L3Jvb2stY2VwaC1tZ3ItYS01N2NmOWY4NGJjLWY0am5sOjcwMDAvIiwgInByb21ldGhldXMiOiAi
      aHR0cDovL3Jvb2stY2VwaC1tZ3ItYS01N2NmOWY4NGJjLWY0am5sOjkyODMvIn0nJycKICAgICAg
      ICBzZWxmLmNtZF9vdXRwdXRfbWFwWycnJ3siZW50aXR5IjogImNsaWVudC5oZWFsdGhjaGVja2Vy
      IiwgImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJhdXRoIGdldCJ9JycnXSA9ICcnJ1t7ImVu
      dGl0eSI6ImNsaWVudC5oZWFsdGhjaGVja2VyIiwia2V5IjoiQVFERmtiTmVmdDViRlJBQVRuZExO
      VVNFS3J1b3p4aVppM2xyZEE9PSIsImNhcHMiOnsibW9uIjogImFsbG93IHIsIGFsbG93IGNvbW1h
      bmQgcXVvcnVtX3N0YXR1cywgYWxsb3cgY29tbWFuZCB2ZXJzaW9uIiwgIm1nciI6ICJhbGxvdyBj
      b21tYW5kIGNvbmZpZyIsICJvc2QiOiAiYWxsb3cgcnd4IHBvb2w9ZGVmYXVsdC5yZ3cubWV0YSwg
      YWxsb3cgciBwb29sPS5yZ3cucm9vdCwgYWxsb3cgcncgcG9vbD1kZWZhdWx0LnJndy5jb250cm9s
      LCBhbGxvdyByeCBwb29sPWRlZmF1bHQucmd3LmxvZywgYWxsb3cgeCBwb29sPWRlZmF1bHQucmd3
      LmJ1Y2tldHMuaW5kZXgifX1dJycnCiAgICAgICAgc2VsZi5jbWRfb3V0cHV0X21hcFtzZWxmLmNt
      ZF9uYW1lc1snY2Fwc19jaGFuZ2VfZGVmYXVsdF9wb29sX3ByZWZpeCddXSA9ICcnJ1t7fV0nJycK
      ICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWyd7ImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6
      ICJzdGF0dXMifSddID0gY2VwaF9zdGF0dXNfc3RyCgogICAgZGVmIHNodXRkb3duKHNlbGYpOgog
      ICAgICAgIHBhc3MKCiAgICBkZWYgZ2V0X2ZzaWQoc2VsZik6CiAgICAgICAgcmV0dXJuICdhZjRl
      MTY3My0wYjcyLTQwMmQtOTkwYS0yMmQyOTE5ZDBmMWMnCgogICAgZGVmIGNvbmZfcmVhZF9maWxl
      KHNlbGYpOgogICAgICAgIHBhc3MKCiAgICBkZWYgY29ubmVjdChzZWxmKToKICAgICAgICBwYXNz
      CgogICAgZGVmIHBvb2xfZXhpc3RzKHNlbGYsIHBvb2xfbmFtZSk6CiAgICAgICAgcmV0dXJuIFRy
      dWUKCiAgICBkZWYgbW9uX2NvbW1hbmQoc2VsZiwgY21kLCBvdXQpOgogICAgICAgIGpzb25fY21k
      ID0ganNvbi5sb2FkcyhjbWQpCiAgICAgICAganNvbl9jbWRfc3RyID0ganNvbi5kdW1wcyhqc29u
      X2NtZCwgc29ydF9rZXlzPVRydWUpCiAgICAgICAgY21kX291dHB1dCA9IHNlbGYuY21kX291dHB1
      dF9tYXBbanNvbl9jbWRfc3RyXQogICAgICAgIHJldHVybiBzZWxmLnJldHVybl92YWwsIFwKICAg
      ICAgICAgICAgY21kX291dHB1dCwgXAogICAgICAgICAgICAie30iLmZvcm1hdChzZWxmLmVycl9t
      ZXNzYWdlKS5lbmNvZGUoJ3V0Zi04JykKCiAgICBkZWYgX2NvbnZlcnRfaG9zdG5hbWVfdG9faXAo
      c2VsZiwgaG9zdF9uYW1lKToKICAgICAgICBpcF9yZWdfeCA9IHJlLmNvbXBpbGUocidcZHsxLDN9
      LlxkezEsM30uXGR7MSwzfS5cZHsxLDN9JykKICAgICAgICAjIGlmIHByb3ZpZGVkIGhvc3QgaXMg
      ZGlyZWN0bHkgYW4gSVAgYWRkcmVzcywgcmV0dXJuIHRoZSBzYW1lCiAgICAgICAgaWYgaXBfcmVn
      X3gubWF0Y2goaG9zdF9uYW1lKToKICAgICAgICAgICAgcmV0dXJuIGhvc3RfbmFtZQogICAgICAg
      IGltcG9ydCByYW5kb20KICAgICAgICBob3N0X2lwID0gc2VsZi5kdW1teV9ob3N0X2lwX21hcC5n
      ZXQoaG9zdF9uYW1lLCAiIikKICAgICAgICBpZiBub3QgaG9zdF9pcDoKICAgICAgICAgICAgaG9z
      dF9pcCA9ICIxNzIuOS57fS57fSIuZm9ybWF0KAogICAgICAgICAgICAgICAgcmFuZG9tLnJhbmRp
      bnQoMCwgMjU0KSwgcmFuZG9tLnJhbmRpbnQoMCwgMjU0KSkKICAgICAgICAgICAgc2VsZi5kdW1t
      eV9ob3N0X2lwX21hcFtob3N0X25hbWVdID0gaG9zdF9pcAogICAgICAgIGRlbCByYW5kb20KICAg
      ICAgICByZXR1cm4gaG9zdF9pcAoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIFJhZG9zKGNvbmZm
      aWxlPU5vbmUpOgogICAgICAgIHJldHVybiBEdW1teVJhZG9zKCkKCgpjbGFzcyBSYWRvc0pTT046
      CiAgICBFWFRFUk5BTF9VU0VSX05BTUUgPSAiY2xpZW50LmhlYWx0aGNoZWNrZXIiCiAgICBFWFRF
      Uk5BTF9SR1dfQURNSU5fT1BTX1VTRVJfTkFNRSA9ICJyZ3ctYWRtaW4tb3BzLXVzZXIiCiAgICBF
      TVBUWV9PVVRQVVRfTElTVCA9ICJFbXB0eSBvdXRwdXQgbGlzdCIKICAgIERFRkFVTFRfUkdXX1BP
      T0xfUFJFRklYID0gImRlZmF1bHQiCiAgICBERUZBVUxUX01PTklUT1JJTkdfRU5EUE9JTlRfUE9S
      VCA9ICI5MjgzIgoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIGdlbl9hcmdfcGFyc2VyKGNscywg
      YXJnc190b19wYXJzZT1Ob25lKToKICAgICAgICBhcmdQID0gYXJncGFyc2UuQXJndW1lbnRQYXJz
      ZXIoKQoKICAgICAgICBjb21tb25fZ3JvdXAgPSBhcmdQLmFkZF9hcmd1bWVudF9ncm91cCgnY29t
      bW9uJykKICAgICAgICBjb21tb25fZ3JvdXAuYWRkX2FyZ3VtZW50KCItLXZlcmJvc2UiLCAiLXYi
      LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uPSdzdG9yZV90cnVlJywg
      ZGVmYXVsdD1GYWxzZSkKICAgICAgICBjb21tb25fZ3JvdXAuYWRkX2FyZ3VtZW50KCItLWNlcGgt
      Y29uZiIsICItYyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJQcm92
      aWRlIGEgY2VwaCBjb25mIGZpbGUuIiwgdHlwZT1zdHIpCiAgICAgICAgY29tbW9uX2dyb3VwLmFk
      ZF9hcmd1bWVudCgiLS1ydW4tYXMtdXNlciIsICItdSIsIGRlZmF1bHQ9IiIsIHR5cGU9c3RyLAog
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0iUHJvdmlkZXMgYSB1c2VyIG5h
      bWUgdG8gY2hlY2sgdGhlIGNsdXN0ZXIncyBoZWFsdGggc3RhdHVzLCBtdXN0IGJlIHByZWZpeGVk
      IGJ5ICdjbGllbnQuJyIpCiAgICAgICAgY29tbW9uX2dyb3VwLmFkZF9hcmd1bWVudCgiLS1jbHVz
      dGVyLW5hbWUiLCBkZWZhdWx0PSJvcGVuc2hpZnQtc3RvcmFnZSIsCiAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICBoZWxwPSJDZXBoIGNsdXN0ZXIgbmFtZSIpCiAgICAgICAgY29tbW9u
      X2dyb3VwLmFkZF9hcmd1bWVudCgiLS1uYW1lc3BhY2UiLCBkZWZhdWx0PSIiLAogICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0iTmFtZXNwYWNlIHdoZXJlIENlcGhDbHVzdGVy
      IGlzIHJ1bm5pbmciKQogICAgICAgIGNvbW1vbl9ncm91cC5hZGRfYXJndW1lbnQoIi0tcmd3LXBv
      b2wtcHJlZml4IiwgZGVmYXVsdD0iIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
      IGhlbHA9IlJHVyBQb29sIHByZWZpeCIpCgogICAgICAgIG91dHB1dF9ncm91cCA9IGFyZ1AuYWRk
      X2FyZ3VtZW50X2dyb3VwKCdvdXRwdXQnKQogICAgICAgIG91dHB1dF9ncm91cC5hZGRfYXJndW1l
      bnQoIi0tZm9ybWF0IiwgIi10IiwgY2hvaWNlcz1bImpzb24iLCAiYmFzaCJdLAogICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdD0nanNvbicsIGhlbHA9IlByb3ZpZGVzIHRo
      ZSBvdXRwdXQgZm9ybWF0IChqc29uIHwgYmFzaCkiKQogICAgICAgIG91dHB1dF9ncm91cC5hZGRf
      YXJndW1lbnQoIi0tb3V0cHV0IiwgIi1vIiwgZGVmYXVsdD0iIiwKICAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgIGhlbHA9Ik91dHB1dCB3aWxsIGJlIHN0b3JlZCBpbnRvIHRoZSBwcm92
      aWRlZCBmaWxlIikKICAgICAgICBvdXRwdXRfZ3JvdXAuYWRkX2FyZ3VtZW50KCItLWNlcGhmcy1m
      aWxlc3lzdGVtLW5hbWUiLCBkZWZhdWx0PSIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgaGVscD0iUHJvdmlkZXMgdGhlIG5hbWUgb2YgdGhlIENlcGggZmlsZXN5c3RlbSIpCiAg
      ICAgICAgb3V0cHV0X2dyb3VwLmFkZF9hcmd1bWVudCgiLS1jZXBoZnMtZGF0YS1wb29sLW5hbWUi
      LCBkZWZhdWx0PSIiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0iUHJv
      dmlkZXMgdGhlIG5hbWUgb2YgdGhlIGNlcGhmcyBkYXRhIHBvb2wiKQogICAgICAgIG91dHB1dF9n
      cm91cC5hZGRfYXJndW1lbnQoIi0tcmJkLWRhdGEtcG9vbC1uYW1lIiwgZGVmYXVsdD0iIiwgcmVx
      dWlyZWQ9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJQcm92
      aWRlcyB0aGUgbmFtZSBvZiB0aGUgUkJEIGRhdGFwb29sIikKICAgICAgICBvdXRwdXRfZ3JvdXAu
      YWRkX2FyZ3VtZW50KCItLXJndy1lbmRwb2ludCIsIGRlZmF1bHQ9IiIsIHJlcXVpcmVkPUZhbHNl
      LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0iUmFkb3MgR2F0ZVdheSBl
      bmRwb2ludCAoaW4gPElQPjo8UE9SVD4gZm9ybWF0KSIpCiAgICAgICAgb3V0cHV0X2dyb3VwLmFk
      ZF9hcmd1bWVudCgiLS1yZ3ctdGxzLWNlcnQtcGF0aCIsIGRlZmF1bHQ9IiIsIHJlcXVpcmVkPUZh
      bHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0iUmFkb3MgR2F0ZVdh
      eSBlbmRwb2ludCBUTFMgY2VydGlmaWNhdGUiKQogICAgICAgIG91dHB1dF9ncm91cC5hZGRfYXJn
      dW1lbnQoIi0tcmd3LXNraXAtdGxzIiwgcmVxdWlyZWQ9RmFsc2UsIGRlZmF1bHQ9RmFsc2UsCiAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJJZ25vcmUgVExTIGNlcnRpZmlj
      YXRpb24gdmFsaWRhdGlvbiB3aGVuIGEgc2VsZi1zaWduZWQgY2VydGlmaWNhdGUgaXMgcHJvdmlk
      ZWQgKE5PVCBSRUNPTU1FTkRFRCIpCiAgICAgICAgb3V0cHV0X2dyb3VwLmFkZF9hcmd1bWVudCgi
      LS1tb25pdG9yaW5nLWVuZHBvaW50IiwgZGVmYXVsdD0iIiwgcmVxdWlyZWQ9RmFsc2UsCiAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJDZXBoIE1hbmFnZXIgcHJvbWV0aGV1
      cyBleHBvcnRlciBlbmRwb2ludHMgKGNvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIDxJUD4gZW50cmll
      cyBvZiBhY3RpdmUgYW5kIHN0YW5kYnkgbWdycykiKQogICAgICAgIG91dHB1dF9ncm91cC5hZGRf
      YXJndW1lbnQoIi0tbW9uaXRvcmluZy1lbmRwb2ludC1wb3J0IiwgZGVmYXVsdD0iIiwgcmVxdWly
      ZWQ9RmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJDZXBoIE1h
      bmFnZXIgcHJvbWV0aGV1cyBleHBvcnRlciBwb3J0IikKCiAgICAgICAgdXBncmFkZV9ncm91cCA9
      IGFyZ1AuYWRkX2FyZ3VtZW50X2dyb3VwKCd1cGdyYWRlJykKICAgICAgICB1cGdyYWRlX2dyb3Vw
      LmFkZF9hcmd1bWVudCgiLS11cGdyYWRlIiwgYWN0aW9uPSdzdG9yZV90cnVlJywgZGVmYXVsdD1G
      YWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJVcGdyYWRlcyB0
      aGUgJ3VzZXInIHdpdGggYWxsIHRoZSBwZXJtaXNzaW9ucyBuZWVkZWQgZm9yIHRoZSBuZXcgY2x1
      c3RlciB2ZXJzaW9uIikKCiAgICAgICAgaWYgYXJnc190b19wYXJzZToKICAgICAgICAgICAgYXNz
      ZXJ0IHR5cGUoYXJnc190b19wYXJzZSkgPT0gbGlzdCwgXAogICAgICAgICAgICAgICAgIkFyZ3Vt
      ZW50IHRvICdnZW5fYXJnX3BhcnNlcicgc2hvdWxkIGJlIGEgbGlzdCIKICAgICAgICBlbHNlOgog
      ICAgICAgICAgICBhcmdzX3RvX3BhcnNlID0gc3lzLmFyZ3ZbMTpdCiAgICAgICAgcmV0dXJuIGFy
      Z1AucGFyc2VfYXJncyhhcmdzX3RvX3BhcnNlKQoKICAgIGRlZiB2YWxpZGF0ZV9yZ3dfZW5kcG9p
      bnRfdGxzX2NlcnQoc2VsZik6CiAgICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci5yZ3dfdGxzX2Nl
      cnRfcGF0aDoKICAgICAgICAgICAgd2l0aCBvcGVuKHNlbGYuX2FyZ19wYXJzZXIucmd3X3Rsc19j
      ZXJ0X3BhdGgsIGVuY29kaW5nPSd1dGY4JykgYXMgZjoKICAgICAgICAgICAgICAgIGNvbnRlbnRz
      ID0gZi5yZWFkKCkKICAgICAgICAgICAgICAgIHJldHVybiBjb250ZW50cy5yc3RyaXAoKQoKICAg
      IGRlZiBfY2hlY2tfY29uZmxpY3Rpbmdfb3B0aW9ucyhzZWxmKToKICAgICAgICBpZiBub3Qgc2Vs
      Zi5fYXJnX3BhcnNlci51cGdyYWRlIGFuZCBub3Qgc2VsZi5fYXJnX3BhcnNlci5yYmRfZGF0YV9w
      b29sX25hbWU6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAg
      ICAgICAgICAgICAgICAiRWl0aGVyICctLXVwZ3JhZGUnIG9yICctLXJiZC1kYXRhLXBvb2wtbmFt
      ZSA8cG9vbF9uYW1lPicgc2hvdWxkIGJlIHNwZWNpZmllZCIpCiAgICAgICAgaWYgc2VsZi5fYXJn
      X3BhcnNlci51cGdyYWRlIGFuZCBzZWxmLl9hcmdfcGFyc2VyLnJiZF9kYXRhX3Bvb2xfbmFtZToK
      ICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAg
      ICAgICJCb3RoICctLXVwZ3JhZGUnIGFuZCAnLS1yYmQtZGF0YS1wb29sLW5hbWUgPHBvb2xfbmFt
      ZT4nIHNob3VsZCBub3QgYmUgc3BlY2lmaWVkLCBjaG9vc2Ugb25seSBvbmUiKQogICAgICAgICMg
      YSB1c2VyIG5hbWUgbXVzdCBiZSBwcm92aWRlZCB3aGlsZSB1c2luZyAnLS11cGdyYWRlJyBvcHRp
      b24KICAgICAgICBpZiBub3Qgc2VsZi5fYXJnX3BhcnNlci5ydW5fYXNfdXNlciBhbmQgc2VsZi5f
      YXJnX3BhcnNlci51cGdyYWRlOgogICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhj
      ZXB0aW9uKAogICAgICAgICAgICAgICAgIlBsZWFzZSBwcm92aWRlIGFuIGV4aXN0aW5nIHVzZXIt
      bmFtZSB0aHJvdWdoICctLXJ1bi1hcy11c2VyJyAob3IgJy11JykgZmxhZyB3aGlsZSB1cGdyYWRp
      bmciKQoKICAgIGRlZiBfaW52YWxpZF9lbmRwb2ludChzZWxmLCBlbmRwb2ludF9zdHIpOgogICAg
      ICAgIHRyeToKICAgICAgICAgICAgaXB2NCwgcG9ydCA9IGVuZHBvaW50X3N0ci5zcGxpdCgnOicp
      CiAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZh
      aWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAiTm90IGEgcHJvcGVyIGVuZHBvaW50OiB7
      fSwgPElQdjQ+OjxQT1JUPiwgZm9ybWF0IGlzIGV4cGVjdGVkIi5mb3JtYXQoZW5kcG9pbnRfc3Ry
      KSkKICAgICAgICBpcFBhcnRzID0gaXB2NC5zcGxpdCgnLicpCiAgICAgICAgaWYgbGVuKGlwUGFy
      dHMpICE9IDQ6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAg
      ICAgICAgICAgICAgICAiTm90IGEgdmFsaWQgSVAgYWRkcmVzczoge30iLmZvcm1hdChpcHY0KSkK
      ICAgICAgICBmb3IgZWFjaFBhcnQgaW4gaXBQYXJ0czoKICAgICAgICAgICAgaWYgbm90IGVhY2hQ
      YXJ0LmlzZGlnaXQoKToKICAgICAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNl
      cHRpb24oCiAgICAgICAgICAgICAgICAgICAgIklQIGFkZHJlc3MgcGFydHMgc2hvdWxkIGJlIG51
      bWJlcnM6IHt9Ii5mb3JtYXQoaXB2NCkpCiAgICAgICAgICAgIGludFBhcnQgPSBpbnQoZWFjaFBh
      cnQpCiAgICAgICAgICAgIGlmIGludFBhcnQgPCAwIG9yIGludFBhcnQgPiAyNTQ6CiAgICAgICAg
      ICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAg
      ICAgICJPdXQgb2YgcmFuZ2UgSVAgYWRkcmVzc2VzOiB7fSIuZm9ybWF0KGlwdjQpKQogICAgICAg
      IGlmIG5vdCBwb3J0LmlzZGlnaXQoKToKICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVy
      ZUV4Y2VwdGlvbigiUG9ydCBub3QgdmFsaWQ6IHt9Ii5mb3JtYXQocG9ydCkpCiAgICAgICAgaW50
      UG9ydCA9IGludChwb3J0KQogICAgICAgIGlmIGludFBvcnQgPCAxIG9yIGludFBvcnQgPiAyKiox
      Ni0xOgogICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAg
      ICAgICAgICAgIk91dCBvZiByYW5nZSBwb3J0IG51bWJlcjoge30iLmZvcm1hdChwb3J0KSkKICAg
      ICAgICByZXR1cm4gRmFsc2UKCiAgICBkZWYgZW5kcG9pbnRfZGlhbChzZWxmLCBlbmRwb2ludF9z
      dHIsIHRpbWVvdXQ9MywgY2VydD1Ob25lKToKICAgICAgICAjIGlmIHRoZSAnY2x1c3RlcicgaW5z
      dGFuY2UgaXMgYSBkdW1teSBvbmUsCiAgICAgICAgIyBkb24ndCB0cnkgdG8gcmVhY2ggb3V0IHRv
      IHRoZSBlbmRwb2ludAogICAgICAgIGlmIGlzaW5zdGFuY2Uoc2VsZi5jbHVzdGVyLCBEdW1teVJh
      ZG9zKToKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgcHJvdG9jb2xzID0gWyJodHRwIiwgImh0
      dHBzIl0KICAgICAgICBmb3IgcHJlZml4IGluIHByb3RvY29sczoKICAgICAgICAgICAgdHJ5Ogog
      ICAgICAgICAgICAgICAgZXAgPSAie306Ly97fSIuZm9ybWF0KHByZWZpeCwgZW5kcG9pbnRfc3Ry
      KQogICAgICAgICAgICAgICAgIyBJZiB2ZXJpZnkgaXMgc2V0IHRvIGEgcGF0aCB0byBhIGRpcmVj
      dG9yeSwKICAgICAgICAgICAgICAgICMgdGhlIGRpcmVjdG9yeSBtdXN0IGhhdmUgYmVlbiBwcm9j
      ZXNzZWQgdXNpbmcgdGhlIGNfcmVoYXNoIHV0aWxpdHkgc3VwcGxpZWQgd2l0aCBPcGVuU1NMLgog
      ICAgICAgICAgICAgICAgaWYgcHJlZml4ID09ICJodHRwcyIgYW5kIGNlcnQgYW5kIHNlbGYuX2Fy
      Z19wYXJzZXIucmd3X3NraXBfdGxzOgogICAgICAgICAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5o
      ZWFkKGVwLCB0aW1lb3V0PXRpbWVvdXQsIHZlcmlmeT1GYWxzZSkKICAgICAgICAgICAgICAgIGVs
      aWYgcHJlZml4ID09ICJodHRwcyIgYW5kIGNlcnQ6CiAgICAgICAgICAgICAgICAgICAgciA9IHJl
      cXVlc3RzLmhlYWQoZXAsIHRpbWVvdXQ9dGltZW91dCwgdmVyaWZ5PWNlcnQpCiAgICAgICAgICAg
      ICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHIgPSByZXF1ZXN0cy5oZWFkKGVwLCB0aW1l
      b3V0PXRpbWVvdXQpCiAgICAgICAgICAgICAgICBpZiByLnN0YXR1c19jb2RlID09IDIwMDoKICAg
      ICAgICAgICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAg
      ICAgY29udGludWUKICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAg
      ICAgICAgICAidW5hYmxlIHRvIGNvbm5lY3QgdG8gZW5kcG9pbnQ6IHt9Ii5mb3JtYXQoZW5kcG9p
      bnRfc3RyKSkKCiAgICBkZWYgX19pbml0X18oc2VsZiwgYXJnX2xpc3Q9Tm9uZSk6CiAgICAgICAg
      c2VsZi5vdXRfbWFwID0ge30KICAgICAgICBzZWxmLl9leGNsdWRlZF9rZXlzID0gc2V0KCkKICAg
      ICAgICBzZWxmLl9hcmdfcGFyc2VyID0gc2VsZi5nZW5fYXJnX3BhcnNlcihhcmdzX3RvX3BhcnNl
      PWFyZ19saXN0KQogICAgICAgIHNlbGYuX2NoZWNrX2NvbmZsaWN0aW5nX29wdGlvbnMoKQogICAg
      ICAgIHNlbGYucnVuX2FzX3VzZXIgPSBzZWxmLl9hcmdfcGFyc2VyLnJ1bl9hc191c2VyCiAgICAg
      ICAgc2VsZi5vdXRwdXRfZmlsZSA9IHNlbGYuX2FyZ19wYXJzZXIub3V0cHV0CiAgICAgICAgc2Vs
      Zi5jZXBoX2NvbmYgPSBzZWxmLl9hcmdfcGFyc2VyLmNlcGhfY29uZgogICAgICAgIHNlbGYuTUlO
      X1VTRVJfQ0FQX1BFUk1JU1NJT05TID0gewogICAgICAgICAgICAnbWdyJzogJ2FsbG93IGNvbW1h
      bmQgY29uZmlnJywKICAgICAgICAgICAgJ21vbic6ICdhbGxvdyByLCBhbGxvdyBjb21tYW5kIHF1
      b3J1bV9zdGF0dXMsIGFsbG93IGNvbW1hbmQgdmVyc2lvbicsCiAgICAgICAgICAgICdvc2QnOiAi
      YWxsb3cgcnd4IHBvb2w9ezB9LnJndy5tZXRhLCAiICsKICAgICAgICAgICAgImFsbG93IHIgcG9v
      bD0ucmd3LnJvb3QsICIgKwogICAgICAgICAgICAiYWxsb3cgcncgcG9vbD17MH0ucmd3LmNvbnRy
      b2wsICIgKwogICAgICAgICAgICAiYWxsb3cgcnggcG9vbD17MH0ucmd3LmxvZywgIiArCiAgICAg
      ICAgICAgICJhbGxvdyB4IHBvb2w9ezB9LnJndy5idWNrZXRzLmluZGV4IgogICAgICAgIH0KICAg
      ICAgICAjIGlmIHVzZXIgbm90IHByb3ZpZGVkLCBnaXZlIGEgZGVmYXVsdCB1c2VyCiAgICAgICAg
      aWYgbm90IHNlbGYucnVuX2FzX3VzZXIgYW5kIG5vdCBzZWxmLl9hcmdfcGFyc2VyLnVwZ3JhZGU6
      CiAgICAgICAgICAgIHNlbGYucnVuX2FzX3VzZXIgPSBzZWxmLkVYVEVSTkFMX1VTRVJfTkFNRQog
      ICAgICAgIGlmIG5vdCBzZWxmLl9hcmdfcGFyc2VyLnJnd19wb29sX3ByZWZpeCBhbmQgbm90IHNl
      bGYuX2FyZ19wYXJzZXIudXBncmFkZToKICAgICAgICAgICAgc2VsZi5fYXJnX3BhcnNlci5yZ3df
      cG9vbF9wcmVmaXggPSBzZWxmLkRFRkFVTFRfUkdXX1BPT0xfUFJFRklYCiAgICAgICAgaWYgc2Vs
      Zi5jZXBoX2NvbmY6CiAgICAgICAgICAgIHNlbGYuY2x1c3RlciA9IHJhZG9zLlJhZG9zKGNvbmZm
      aWxlPXNlbGYuY2VwaF9jb25mKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNlbGYuY2x1c3Rl
      ciA9IHJhZG9zLlJhZG9zKCkKICAgICAgICAgICAgc2VsZi5jbHVzdGVyLmNvbmZfcmVhZF9maWxl
      KCkKICAgICAgICBzZWxmLmNsdXN0ZXIuY29ubmVjdCgpCgogICAgZGVmIHNodXRkb3duKHNlbGYp
      OgogICAgICAgIGlmIHNlbGYuY2x1c3Rlci5zdGF0ZSA9PSAiY29ubmVjdGVkIjoKICAgICAgICAg
      ICAgc2VsZi5jbHVzdGVyLnNodXRkb3duKCkKCiAgICBkZWYgZ2V0X2ZzaWQoc2VsZik6CiAgICAg
      ICAgcmV0dXJuIHN0cihzZWxmLmNsdXN0ZXIuZ2V0X2ZzaWQoKSkKCiAgICBkZWYgX2NvbW1vbl9j
      bWRfanNvbl9nZW4oc2VsZiwgY21kX2pzb24pOgogICAgICAgIGNtZCA9IGpzb24uZHVtcHMoY21k
      X2pzb24sIHNvcnRfa2V5cz1UcnVlKQogICAgICAgIHJldF92YWwsIGNtZF9vdXQsIGVycl9tc2cg
      PSBzZWxmLmNsdXN0ZXIubW9uX2NvbW1hbmQoY21kLCBiJycpCiAgICAgICAgaWYgc2VsZi5fYXJn
      X3BhcnNlci52ZXJib3NlOgogICAgICAgICAgICBwcmludCgiQ29tbWFuZCBJbnB1dDoge30iLmZv
      cm1hdChjbWQpKQogICAgICAgICAgICBwcmludCgiUmV0dXJuIFZhbDoge31cbkNvbW1hbmQgT3V0
      cHV0OiB7fVxuRXJyb3IgTWVzc2FnZToge31cbi0tLS0tLS0tLS1cbiIuZm9ybWF0KAogICAgICAg
      ICAgICAgICAgICByZXRfdmFsLCBjbWRfb3V0LCBlcnJfbXNnKSkKICAgICAgICBqc29uX291dCA9
      IHt9CiAgICAgICAgIyBpZiB0aGVyZSBpcyBubyBlcnJvciAoaS5lOyByZXRfdmFsIGlzIFpFUk8p
      IGFuZCAnY21kX291dCcgaXMgbm90IGVtcHR5CiAgICAgICAgIyB0aGVuIGNvbnZlcnQgJ2NtZF9v
      dXQnIHRvIGEganNvbiBvdXRwdXQKICAgICAgICBpZiByZXRfdmFsID09IDAgYW5kIGNtZF9vdXQ6
      CiAgICAgICAgICAgIGpzb25fb3V0ID0ganNvbi5sb2FkcyhjbWRfb3V0KQogICAgICAgIHJldHVy
      biByZXRfdmFsLCBqc29uX291dCwgZXJyX21zZwoKICAgIGRlZiBnZXRfY2VwaF9leHRlcm5hbF9t
      b25fZGF0YShzZWxmKToKICAgICAgICBjbWRfanNvbiA9IHsicHJlZml4IjogInF1b3J1bV9zdGF0
      dXMiLCAiZm9ybWF0IjogImpzb24ifQogICAgICAgIHJldF92YWwsIGpzb25fb3V0LCBlcnJfbXNn
      ID0gc2VsZi5fY29tbW9uX2NtZF9qc29uX2dlbihjbWRfanNvbikKICAgICAgICAjIGlmIHRoZXJl
      IGlzIGFuIHVuc3VjY2Vzc2Z1bCBhdHRlbXB0LAogICAgICAgIGlmIHJldF92YWwgIT0gMCBvciBs
      ZW4oanNvbl9vdXQpID09IDA6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNl
      cHRpb24oCiAgICAgICAgICAgICAgICAiJ3F1b3J1bV9zdGF0dXMnIGNvbW1hbmQgZmFpbGVkLlxu
      IiArCiAgICAgICAgICAgICAgICAiRXJyb3I6IHt9Ii5mb3JtYXQoZXJyX21zZyBpZiByZXRfdmFs
      ICE9IDAgZWxzZSBzZWxmLkVNUFRZX09VVFBVVF9MSVNUKSkKICAgICAgICBxX2xlYWRlcl9uYW1l
      ID0ganNvbl9vdXRbJ3F1b3J1bV9sZWFkZXJfbmFtZSddCiAgICAgICAgcV9sZWFkZXJfZGV0YWls
      cyA9IHt9CiAgICAgICAgcV9sZWFkZXJfbWF0Y2hpbmdfbGlzdCA9IFtsIGZvciBsIGluIGpzb25f
      b3V0Wydtb25tYXAnXVsnbW9ucyddCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBp
      ZiBsWyduYW1lJ10gPT0gcV9sZWFkZXJfbmFtZV0KICAgICAgICBpZiBsZW4ocV9sZWFkZXJfbWF0
      Y2hpbmdfbGlzdCkgPT0gMDoKICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2Vw
      dGlvbigiTm8gbWF0Y2hpbmcgJ21vbicgZGV0YWlscyBmb3VuZCIpCiAgICAgICAgcV9sZWFkZXJf
      ZGV0YWlscyA9IHFfbGVhZGVyX21hdGNoaW5nX2xpc3RbMF0KICAgICAgICAjIGdldCB0aGUgYWRk
      cmVzcyB2ZWN0b3Igb2YgdGhlIHF1b3J1bS1sZWFkZXIKICAgICAgICBxX2xlYWRlcl9hZGRydmVj
      ID0gcV9sZWFkZXJfZGV0YWlscy5nZXQoCiAgICAgICAgICAgICdwdWJsaWNfYWRkcnMnLCB7fSku
      Z2V0KCdhZGRydmVjJywgW10pCiAgICAgICAgIyBpZiB0aGUgcXVvcnVtLWxlYWRlciBoYXMgb25s
      eSBvbmUgYWRkcmVzcyBpbiB0aGUgYWRkcmVzcy12ZWN0b3IKICAgICAgICAjIGFuZCBpdCBpcyBv
      ZiB0eXBlICd2MicgKGllOyB3aXRoIDxJUD46MzMwMCksCiAgICAgICAgIyByYWlzZSBhbiBleGNl
      cHRpb24gdG8gbWFrZSB1c2VyIGF3YXJlIHRoYXQKICAgICAgICAjIHRoZXkgaGF2ZSB0byBlbmFi
      bGUgJ3YxJyAoaWU7IHdpdGggPElQPjo2Nzg5KSB0eXBlIGFzIHdlbGwKICAgICAgICBpZiBsZW4o
      cV9sZWFkZXJfYWRkcnZlYykgPT0gMSBhbmQgcV9sZWFkZXJfYWRkcnZlY1swXVsndHlwZSddID09
      ICd2Mic6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAg
      ICAgICAgICAgICAiT25seSAndjInIGFkZHJlc3MgdHlwZSBpcyBlbmFibGVkLCB1c2VyIHNob3Vs
      ZCBhbHNvIGVuYWJsZSAndjEnIHR5cGUgYXMgd2VsbCIpCiAgICAgICAgaXBfcG9ydCA9IHN0cihx
      X2xlYWRlcl9kZXRhaWxzWydwdWJsaWNfYWRkciddLnNwbGl0KCcvJylbMF0pCiAgICAgICAgcmV0
      dXJuICJ7fT17fSIuZm9ybWF0KHN0cihxX2xlYWRlcl9uYW1lKSwgaXBfcG9ydCkKCiAgICBkZWYg
      X2pvaW5faG9zdF9wb3J0KHNlbGYsIGVuZHBvaW50LCBwb3J0KToKICAgICAgICBwb3J0ID0gInt9
      Ii5mb3JtYXQocG9ydCkKICAgICAgICAjIHJlZ2V4IHRvIGNoZWNrIHRoZSBnaXZlbiBlbmRwb2lu
      dCBpcyBlbmNsb3NlZCBpbiBzcXVhcmUgYnJhY2tldHMKICAgICAgICBpcHY2X3JlZ3ggPSByZS5j
      b21waWxlKHInXlxbW15dXSpcXSQnKQogICAgICAgICMgZW5kcG9pbnQgaGFzICc6JyBpbiBpdCBh
      bmQgaWYgbm90IChhbHJlYWR5KSBlbmNsb3NlZCBpbiBzcXVhcmUgYnJhY2tldHMKICAgICAgICBp
      ZiBlbmRwb2ludC5jb3VudCgnOicpIGFuZCBub3QgaXB2Nl9yZWd4Lm1hdGNoKGVuZHBvaW50KToK
      ICAgICAgICAgICAgZW5kcG9pbnQgPSAnW3t9XScuZm9ybWF0KGVuZHBvaW50KQogICAgICAgIGlm
      IG5vdCBwb3J0OgogICAgICAgICAgICByZXR1cm4gZW5kcG9pbnQKICAgICAgICByZXR1cm4gJzon
      LmpvaW4oW2VuZHBvaW50LCBwb3J0XSkKCiAgICBkZWYgX2NvbnZlcnRfaG9zdG5hbWVfdG9faXAo
      c2VsZiwgaG9zdF9uYW1lKToKICAgICAgICAjIGlmICdjbHVzdGVyJyBpbnN0YW5jZSBpcyBhIGR1
      bW15IHR5cGUsCiAgICAgICAgIyBjYWxsIHRoZSBkdW1teSBpbnN0YW5jZSdzICJjb252ZXJ0IiBt
      ZXRob2QKICAgICAgICBpZiBub3QgaG9zdF9uYW1lOgogICAgICAgICAgICByYWlzZSBFeGVjdXRp
      b25GYWlsdXJlRXhjZXB0aW9uKCJFbXB0eSBob3N0bmFtZSBwcm92aWRlZCIpCiAgICAgICAgaWYg
      aXNpbnN0YW5jZShzZWxmLmNsdXN0ZXIsIER1bW15UmFkb3MpOgogICAgICAgICAgICByZXR1cm4g
      c2VsZi5jbHVzdGVyLl9jb252ZXJ0X2hvc3RuYW1lX3RvX2lwKGhvc3RfbmFtZSkKICAgICAgICBp
      bXBvcnQgc29ja2V0CiAgICAgICAgaXAgPSBzb2NrZXQuZ2V0aG9zdGJ5bmFtZShob3N0X25hbWUp
      CiAgICAgICAgZGVsIHNvY2tldAogICAgICAgIHJldHVybiBpcAoKICAgIGRlZiBnZXRfYWN0aXZl
      X2FuZF9zdGFuZGJ5X21ncnMoc2VsZik6CiAgICAgICAgbW9uaXRvcmluZ19lbmRwb2ludF9wb3J0
      ID0gc2VsZi5fYXJnX3BhcnNlci5tb25pdG9yaW5nX2VuZHBvaW50X3BvcnQKICAgICAgICBtb25p
      dG9yaW5nX2VuZHBvaW50X2lwID0gc2VsZi5fYXJnX3BhcnNlci5tb25pdG9yaW5nX2VuZHBvaW50
      CiAgICAgICAgc3RhbmRieV9tZ3JzID0gW10KICAgICAgICBpZiBub3QgbW9uaXRvcmluZ19lbmRw
      b2ludF9pcDoKICAgICAgICAgICAgY21kX2pzb24gPSB7InByZWZpeCI6ICJzdGF0dXMiLCAiZm9y
      bWF0IjogImpzb24ifQogICAgICAgICAgICByZXRfdmFsLCBqc29uX291dCwgZXJyX21zZyA9IHNl
      bGYuX2NvbW1vbl9jbWRfanNvbl9nZW4oY21kX2pzb24pCiAgICAgICAgICAgICMgaWYgdGhlcmUg
      aXMgYW4gdW5zdWNjZXNzZnVsIGF0dGVtcHQsCiAgICAgICAgICAgIGlmIHJldF92YWwgIT0gMCBv
      ciBsZW4oanNvbl9vdXQpID09IDA6CiAgICAgICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWls
      dXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICInbWdyIHNlcnZpY2VzJyBjb21tYW5k
      IGZhaWxlZC5cbiIgKwogICAgICAgICAgICAgICAgICAgICJFcnJvcjoge30iLmZvcm1hdChlcnJf
      bXNnIGlmIHJldF92YWwgIT0gMCBlbHNlIHNlbGYuRU1QVFlfT1VUUFVUX0xJU1QpKQogICAgICAg
      ICAgICBtb25pdG9yaW5nX2VuZHBvaW50ID0ganNvbl9vdXQuZ2V0KCdtZ3JtYXAnLCB7fSkuZ2V0
      KAogICAgICAgICAgICAgICAgJ3NlcnZpY2VzJywge30pLmdldCgncHJvbWV0aGV1cycsICcnKQog
      ICAgICAgICAgICBpZiBub3QgbW9uaXRvcmluZ19lbmRwb2ludDoKICAgICAgICAgICAgICAgIHJh
      aXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgIidwcm9t
      ZXRoZXVzJyBzZXJ2aWNlIG5vdCBmb3VuZCwgaXMgdGhlIGV4cG9ydGVyIGVuYWJsZWQ/Jy5cbiIp
      CiAgICAgICAgICAgICMgbm93IGNoZWNrIHRoZSBzdGFuZC1ieSBtZ3ItcwogICAgICAgICAgICBz
      dGFuZGJ5X2FyciA9IGpzb25fb3V0LmdldCgnbWdybWFwJywge30pLmdldCgnc3RhbmRieXMnLCBb
      XSkKICAgICAgICAgICAgZm9yIGVhY2hfc3RhbmRieSBpbiBzdGFuZGJ5X2FycjoKICAgICAgICAg
      ICAgICAgIGlmICduYW1lJyBpbiBlYWNoX3N0YW5kYnkua2V5cygpOgogICAgICAgICAgICAgICAg
      ICAgIHN0YW5kYnlfbWdycy5hcHBlbmQoZWFjaF9zdGFuZGJ5WyduYW1lJ10pCiAgICAgICAgICAg
      IHRyeToKICAgICAgICAgICAgICAgIHBhcnNlZF9lbmRwb2ludCA9IHVybHBhcnNlKG1vbml0b3Jp
      bmdfZW5kcG9pbnQpCiAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgICAgICAg
      ICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICAgICAi
      aW52YWxpZCBlbmRwb2ludDoge30iLmZvcm1hdChtb25pdG9yaW5nX2VuZHBvaW50KSkKICAgICAg
      ICAgICAgbW9uaXRvcmluZ19lbmRwb2ludF9pcCA9IHBhcnNlZF9lbmRwb2ludC5ob3N0bmFtZQog
      ICAgICAgICAgICBpZiBub3QgbW9uaXRvcmluZ19lbmRwb2ludF9wb3J0OgogICAgICAgICAgICAg
      ICAgbW9uaXRvcmluZ19lbmRwb2ludF9wb3J0ID0gInt9Ii5mb3JtYXQocGFyc2VkX2VuZHBvaW50
      LnBvcnQpCgogICAgICAgICMgaWYgbW9uaXRvcmluZyBlbmRwb2ludCBwb3J0IGlzIG5vdCBzZXQs
      IHB1dCBhIGRlZmF1bHQgbW9uIHBvcnQKICAgICAgICBpZiBub3QgbW9uaXRvcmluZ19lbmRwb2lu
      dF9wb3J0OgogICAgICAgICAgICBtb25pdG9yaW5nX2VuZHBvaW50X3BvcnQgPSBzZWxmLkRFRkFV
      TFRfTU9OSVRPUklOR19FTkRQT0lOVF9QT1JUCgogICAgICAgIHRyeToKICAgICAgICAgICAgZmFp
      bGVkX2lwID0gbW9uaXRvcmluZ19lbmRwb2ludF9pcAogICAgICAgICAgICBtb25pdG9yaW5nX2Vu
      ZHBvaW50X2lwID0gc2VsZi5fY29udmVydF9ob3N0bmFtZV90b19pcCgKICAgICAgICAgICAgICAg
      IG1vbml0b3JpbmdfZW5kcG9pbnRfaXApCiAgICAgICAgICAgICMgY29sbGVjdCBhbGwgdGhlICdz
      dGFuZC1ieScgbWdyIGlwcwogICAgICAgICAgICBtZ3JfaXBzID0gW10KICAgICAgICAgICAgZm9y
      IGVhY2hfc3RhbmRieV9tZ3IgaW4gc3RhbmRieV9tZ3JzOgogICAgICAgICAgICAgICAgZmFpbGVk
      X2lwID0gZWFjaF9zdGFuZGJ5X21ncgogICAgICAgICAgICAgICAgbWdyX2lwcy5hcHBlbmQoCiAg
      ICAgICAgICAgICAgICAgICAgc2VsZi5fY29udmVydF9ob3N0bmFtZV90b19pcChlYWNoX3N0YW5k
      YnlfbWdyKSkKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1
      cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAiQ29udmVyc2lvbiBvZiBob3N0OiB7fSB0byBJ
      UCBmYWlsZWQuICIKICAgICAgICAgICAgICAgICJQbGVhc2UgZW50ZXIgdGhlIElQIGFkZHJlc3Nl
      cyBvZiBhbGwgdGhlIGNlcGgtbWdycyB3aXRoIHRoZSAnLS1tb25pdG9yaW5nLWVuZHBvaW50JyBm
      bGFnIi5mb3JtYXQoZmFpbGVkX2lwKSkKICAgICAgICBtb25pdG9yaW5nX2VuZHBvaW50ID0gc2Vs
      Zi5fam9pbl9ob3N0X3BvcnQoCiAgICAgICAgICAgIG1vbml0b3JpbmdfZW5kcG9pbnRfaXAsIG1v
      bml0b3JpbmdfZW5kcG9pbnRfcG9ydCkKICAgICAgICBzZWxmLl9pbnZhbGlkX2VuZHBvaW50KG1v
      bml0b3JpbmdfZW5kcG9pbnQpCiAgICAgICAgc2VsZi5lbmRwb2ludF9kaWFsKG1vbml0b3Jpbmdf
      ZW5kcG9pbnQpCgogICAgICAgICMgYWRkIHRoZSB2YWxpZGF0ZWQgYWN0aXZlIG1nciBJUCBpbnRv
      IHRoZSBmaXJzdCBpbmRleAogICAgICAgIG1ncl9pcHMuaW5zZXJ0KDAsIG1vbml0b3JpbmdfZW5k
      cG9pbnRfaXApCiAgICAgICAgYWxsX21ncl9pcHNfc3RyID0gIiwiLmpvaW4obWdyX2lwcykKICAg
      ICAgICByZXR1cm4gYWxsX21ncl9pcHNfc3RyLCBtb25pdG9yaW5nX2VuZHBvaW50X3BvcnQKCiAg
      ICBkZWYgY3JlYXRlX2NlcGhDU0lLZXlyaW5nX2NlcGhGU1Byb3Zpc2lvbmVyKHNlbGYpOgogICAg
      ICAgICcnJwogICAgICAgIGNvbW1hbmQ6IGNlcGggYXV0aCBnZXQtb3ItY3JlYXRlIGNsaWVudC5j
      c2ktY2VwaGZzLXByb3Zpc2lvbmVyIG1vbiAnYWxsb3cgcicgbWdyICdhbGxvdyBydycgb3NkICdh
      bGxvdyBydyB0YWcgY2VwaGZzIG1ldGFkYXRhPSonCiAgICAgICAgJycnCiAgICAgICAgY21kX2pz
      b24gPSB7InByZWZpeCI6ICJhdXRoIGdldC1vci1jcmVhdGUiLAogICAgICAgICAgICAgICAgICAg
      ICJlbnRpdHkiOiAiY2xpZW50LmNzaS1jZXBoZnMtcHJvdmlzaW9uZXIiLAogICAgICAgICAgICAg
      ICAgICAgICJjYXBzIjogWyJtb24iLCAiYWxsb3cgciIsICJtZ3IiLCAiYWxsb3cgcnciLAogICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICJvc2QiLCAiYWxsb3cgcncgdGFnIGNlcGhmcyBtZXRh
      ZGF0YT0qIl0sCiAgICAgICAgICAgICAgICAgICAgImZvcm1hdCI6ICJqc29uIn0KICAgICAgICBy
      ZXRfdmFsLCBqc29uX291dCwgZXJyX21zZyA9IHNlbGYuX2NvbW1vbl9jbWRfanNvbl9nZW4oY21k
      X2pzb24pCiAgICAgICAgIyBpZiB0aGVyZSBpcyBhbiB1bnN1Y2Nlc3NmdWwgYXR0ZW1wdCwKICAg
      ICAgICBpZiByZXRfdmFsICE9IDAgb3IgbGVuKGpzb25fb3V0KSA9PSAwOgogICAgICAgICAgICBy
      YWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgIidhdXRoIGdl
      dC1vci1jcmVhdGUgY2xpZW50LmNzaS1jZXBoZnMtcHJvdmlzaW9uZXInIGNvbW1hbmQgZmFpbGVk
      LlxuIiArCiAgICAgICAgICAgICAgICAiRXJyb3I6IHt9Ii5mb3JtYXQoZXJyX21zZyBpZiByZXRf
      dmFsICE9IDAgZWxzZSBzZWxmLkVNUFRZX09VVFBVVF9MSVNUKSkKICAgICAgICByZXR1cm4gc3Ry
      KGpzb25fb3V0WzBdWydrZXknXSkKCiAgICBkZWYgY3JlYXRlX2NlcGhDU0lLZXlyaW5nX2NlcGhG
      U05vZGUoc2VsZik6CiAgICAgICAgY21kX2pzb24gPSB7InByZWZpeCI6ICJhdXRoIGdldC1vci1j
      cmVhdGUiLAogICAgICAgICAgICAgICAgICAgICJlbnRpdHkiOiAiY2xpZW50LmNzaS1jZXBoZnMt
      bm9kZSIsCiAgICAgICAgICAgICAgICAgICAgImNhcHMiOiBbIm1vbiIsICJhbGxvdyByIiwKICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICAibWdyIiwgImFsbG93IHJ3IiwKICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICAib3NkIiwgImFsbG93IHJ3IHRhZyBjZXBoZnMgKj0qIiwKICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICAibWRzIiwgImFsbG93IHJ3Il0sCiAgICAgICAgICAgICAg
      ICAgICAgImZvcm1hdCI6ICJqc29uIn0KICAgICAgICByZXRfdmFsLCBqc29uX291dCwgZXJyX21z
      ZyA9IHNlbGYuX2NvbW1vbl9jbWRfanNvbl9nZW4oY21kX2pzb24pCiAgICAgICAgIyBpZiB0aGVy
      ZSBpcyBhbiB1bnN1Y2Nlc3NmdWwgYXR0ZW1wdCwKICAgICAgICBpZiByZXRfdmFsICE9IDAgb3Ig
      bGVuKGpzb25fb3V0KSA9PSAwOgogICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhj
      ZXB0aW9uKAogICAgICAgICAgICAgICAgIidhdXRoIGdldC1vci1jcmVhdGUgY2xpZW50LmNzaS1j
      ZXBoZnMtbm9kZScgY29tbWFuZCBmYWlsZWQuXG4iICsKICAgICAgICAgICAgICAgICJFcnJvcjog
      e30iLmZvcm1hdChlcnJfbXNnIGlmIHJldF92YWwgIT0gMCBlbHNlIHNlbGYuRU1QVFlfT1VUUFVU
      X0xJU1QpKQogICAgICAgIHJldHVybiBzdHIoanNvbl9vdXRbMF1bJ2tleSddKQoKICAgIGRlZiBj
      cmVhdGVfY2VwaENTSUtleXJpbmdfUkJEUHJvdmlzaW9uZXIoc2VsZik6CiAgICAgICAgY21kX2pz
      b24gPSB7InByZWZpeCI6ICJhdXRoIGdldC1vci1jcmVhdGUiLAogICAgICAgICAgICAgICAgICAg
      ICJlbnRpdHkiOiAiY2xpZW50LmNzaS1yYmQtcHJvdmlzaW9uZXIiLAogICAgICAgICAgICAgICAg
      ICAgICJjYXBzIjogWyJtb24iLCAicHJvZmlsZSByYmQiLAogICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgICJtZ3IiLCAiYWxsb3cgcnciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJv
      c2QiLCAicHJvZmlsZSByYmQiXSwKICAgICAgICAgICAgICAgICAgICAiZm9ybWF0IjogImpzb24i
      fQogICAgICAgIHJldF92YWwsIGpzb25fb3V0LCBlcnJfbXNnID0gc2VsZi5fY29tbW9uX2NtZF9q
      c29uX2dlbihjbWRfanNvbikKICAgICAgICAjIGlmIHRoZXJlIGlzIGFuIHVuc3VjY2Vzc2Z1bCBh
      dHRlbXB0LAogICAgICAgIGlmIHJldF92YWwgIT0gMCBvciBsZW4oanNvbl9vdXQpID09IDA6CiAg
      ICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAg
      ICAiJ2F1dGggZ2V0LW9yLWNyZWF0ZSBjbGllbnQuY3NpLXJiZC1wcm92aXNpb25lcicgY29tbWFu
      ZCBmYWlsZWQuXG4iICsKICAgICAgICAgICAgICAgICJFcnJvcjoge30iLmZvcm1hdChlcnJfbXNn
      IGlmIHJldF92YWwgIT0gMCBlbHNlIHNlbGYuRU1QVFlfT1VUUFVUX0xJU1QpKQogICAgICAgIHJl
      dHVybiBzdHIoanNvbl9vdXRbMF1bJ2tleSddKQoKICAgIGRlZiBnZXRfY2VwaGZzX2RhdGFfcG9v
      bF9kZXRhaWxzKHNlbGYpOgogICAgICAgIGNtZF9qc29uID0geyJwcmVmaXgiOiAiZnMgbHMiLCAi
      Zm9ybWF0IjogImpzb24ifQogICAgICAgIHJldF92YWwsIGpzb25fb3V0LCBlcnJfbXNnID0gc2Vs
      Zi5fY29tbW9uX2NtZF9qc29uX2dlbihjbWRfanNvbikKICAgICAgICAjIGlmIHRoZXJlIGlzIGFu
      IHVuc3VjY2Vzc2Z1bCBhdHRlbXB0LCByZXBvcnQgYW4gZXJyb3IKICAgICAgICBpZiByZXRfdmFs
      ICE9IDA6CiAgICAgICAgICAgICMgaWYgZnMgYW5kIGRhdGFfcG9vbCBhcmd1bWVudHMgYXJlIG5v
      dCBzZXQsIHNpbGVudGx5IHJldHVybgogICAgICAgICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLmNl
      cGhmc19maWxlc3lzdGVtX25hbWUgPT0gIiIgYW5kIHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX2Rh
      dGFfcG9vbF9uYW1lID09ICIiOgogICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICMg
      aWYgdXNlciBoYXMgcHJvdmlkZWQgYW55IG9mIHRoZQogICAgICAgICAgICAjICctLWNlcGhmcy1m
      aWxlc3lzdGVtLW5hbWUnIG9yICctLWNlcGhmcy1kYXRhLXBvb2wtbmFtZScgYXJndW1lbnRzLAog
      ICAgICAgICAgICAjIHJhaXNlIGFuIGV4Y2VwdGlvbiBhcyB3ZSBhcmUgdW5hYmxlIHRvIHZlcmlm
      eSB0aGUgYXJncwogICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAog
      ICAgICAgICAgICAgICAgIidmcyBscycgY2VwaCBjYWxsIGZhaWxlZCB3aXRoIGVycm9yOiB7fSIu
      Zm9ybWF0KGVycl9tc2cpKQoKICAgICAgICBtYXRjaGluZ19qc29uX291dCA9IHt9CiAgICAgICAg
      IyBpZiAnLS1jZXBoZnMtZmlsZXN5c3RlbS1uYW1lJyBhcmd1bWVudCBpcyBwcm92aWRlZCwKICAg
      ICAgICAjIGNoZWNrIHdoZXRoZXIgdGhlIHByb3ZpZGVkIGZpbGVzeXN0ZW0tbmFtZSBleGlzdHMg
      b3Igbm90CiAgICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci5jZXBoZnNfZmlsZXN5c3RlbV9uYW1l
      OgogICAgICAgICAgICAjIGdldCB0aGUgbWF0Y2hpbmcgbGlzdAogICAgICAgICAgICBtYXRjaGlu
      Z19qc29uX291dF9saXN0ID0gW21hdGNoZWQgZm9yIG1hdGNoZWQgaW4ganNvbl9vdXQKICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBzdHIobWF0Y2hlZFsnbmFtZSddKSA9
      PSBzZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19maWxlc3lzdGVtX25hbWVdCiAgICAgICAgICAgICMg
      dW5hYmxlIHRvIGZpbmQgYSBtYXRjaGluZyBmcy1uYW1lLCByYWlzZSBhbiBlcnJvcgogICAgICAg
      ICAgICBpZiBsZW4obWF0Y2hpbmdfanNvbl9vdXRfbGlzdCkgPT0gMDoKICAgICAgICAgICAgICAg
      IHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgKCJG
      aWxlc3lzdGVtIHByb3ZpZGVkLCAne30nLCAiICsKICAgICAgICAgICAgICAgICAgICAgImlzIG5v
      dCBmb3VuZCBpbiB0aGUgZnMtbGlzdDogJ3t9JyIpLmZvcm1hdCgKICAgICAgICAgICAgICAgICAg
      ICAgICAgc2VsZi5fYXJnX3BhcnNlci5jZXBoZnNfZmlsZXN5c3RlbV9uYW1lLAogICAgICAgICAg
      ICAgICAgICAgICAgICBbc3RyKHhbJ25hbWUnXSkgZm9yIHggaW4ganNvbl9vdXRdKSkKICAgICAg
      ICAgICAgbWF0Y2hpbmdfanNvbl9vdXQgPSBtYXRjaGluZ19qc29uX291dF9saXN0WzBdCiAgICAg
      ICAgIyBpZiBjZXBoZnMgZmlsZXN5c3RlbSBuYW1lIGlzIG5vdCBwcm92aWRlZCwKICAgICAgICAj
      IHRyeSB0byBnZXQgYSBkZWZhdWx0IGZzIG5hbWUgYnkgZG9pbmcgdGhlIGZvbGxvd2luZwogICAg
      ICAgIGVsc2U6CiAgICAgICAgICAgICMgYS4gY2hlY2sgaWYgdGhlcmUgaXMgb25seSBvbmUgZmls
      ZXN5c3RlbSBpcyBwcmVzZW50CiAgICAgICAgICAgIGlmIGxlbihqc29uX291dCkgPT0gMToKICAg
      ICAgICAgICAgICAgIG1hdGNoaW5nX2pzb25fb3V0ID0ganNvbl9vdXRbMF0KICAgICAgICAgICAg
      IyBiLiBvciBlbHNlLCBjaGVjayBpZiBkYXRhX3Bvb2wgbmFtZSBpcyBwcm92aWRlZAogICAgICAg
      ICAgICBlbGlmIHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX2RhdGFfcG9vbF9uYW1lOgogICAgICAg
      ICAgICAgICAgIyBhbmQgaWYgcHJlc2VudCwgY2hlY2sgd2hldGhlciB0aGVyZSBleGlzdHMgYSBm
      cyB3aGljaCBoYXMgdGhlIGRhdGFfcG9vbAogICAgICAgICAgICAgICAgZm9yIGVhY2hKIGluIGpz
      b25fb3V0OgogICAgICAgICAgICAgICAgICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX2Rh
      dGFfcG9vbF9uYW1lIGluIGVhY2hKWydkYXRhX3Bvb2xzJ106CiAgICAgICAgICAgICAgICAgICAg
      ICAgIG1hdGNoaW5nX2pzb25fb3V0ID0gZWFjaEoKICAgICAgICAgICAgICAgICAgICAgICAgYnJl
      YWsKICAgICAgICAgICAgICAgICMgaWYgdGhlcmUgaXMgbm8gbWF0Y2hpbmcgZnMgZXhpc3RzLCB0
      aGF0IG1lYW5zIHByb3ZpZGVkIGRhdGFfcG9vbCBuYW1lIGlzIGludmFsaWQKICAgICAgICAgICAg
      ICAgIGlmIG5vdCBtYXRjaGluZ19qc29uX291dDoKICAgICAgICAgICAgICAgICAgICByYWlzZSBF
      eGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICAgICAiUHJvdmlk
      ZWQgZGF0YV9wb29sIG5hbWUsIHt9LCBkb2VzIG5vdCBleGlzdHMiLmZvcm1hdCgKICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX2RhdGFfcG9vbF9uYW1l
      KSkKICAgICAgICAgICAgIyBjLiBpZiBub3RoaW5nIGlzIHNldCBhbmQgY291bGRuJ3QgZmluZCBh
      IGRlZmF1bHQsCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAjIGp1c3QgcmV0dXJu
      IHNpbGVudGx5CiAgICAgICAgICAgICAgICByZXR1cm4KCiAgICAgICAgaWYgbWF0Y2hpbmdfanNv
      bl9vdXQ6CiAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX2ZpbGVzeXN0ZW1fbmFt
      ZSA9IHN0cigKICAgICAgICAgICAgICAgIG1hdGNoaW5nX2pzb25fb3V0WyduYW1lJ10pCgogICAg
      ICAgIGlmIHR5cGUobWF0Y2hpbmdfanNvbl9vdXRbJ2RhdGFfcG9vbHMnXSkgPT0gbGlzdDoKICAg
      ICAgICAgICAgIyBpZiB0aGUgdXNlciBoYXMgYWxyZWFkeSBwcm92aWRlZCBkYXRhLXBvb2wtbmFt
      ZSwKICAgICAgICAgICAgIyB0aHJvdWdoIC0tY2VwaGZzLWRhdGEtcG9vbC1uYW1lCiAgICAgICAg
      ICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX2RhdGFfcG9vbF9uYW1lOgogICAgICAgICAg
      ICAgICAgIyBpZiB0aGUgcHJvdmlkZWQgbmFtZSBpcyBub3QgbWF0Y2hpbmcgd2l0aCB0aGUgb25l
      IGluIHRoZSBsaXN0CiAgICAgICAgICAgICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19k
      YXRhX3Bvb2xfbmFtZSBub3QgaW4gbWF0Y2hpbmdfanNvbl9vdXRbJ2RhdGFfcG9vbHMnXToKICAg
      ICAgICAgICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAg
      ICAgICAgICAgICAgICAgICAie306ICd7fScsIHt9OiB7fSIuZm9ybWF0KAogICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgIlByb3ZpZGVkIGRhdGEtcG9vbC1uYW1lIiwKICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX2RhdGFfcG9vbF9uYW1lLAogICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgImRvZXNuJ3QgbWF0Y2ggZnJvbSB0aGUgZGF0YS1wb29s
      cycgbGlzdCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbc3RyKHgpIGZvciB4IGluIG1h
      dGNoaW5nX2pzb25fb3V0WydkYXRhX3Bvb2xzJ11dKSkKICAgICAgICAgICAgIyBpZiBkYXRhX3Bv
      b2wgbmFtZSBpcyBub3QgcHJvdmlkZWQsCiAgICAgICAgICAgICMgdGhlbiB0cnkgdG8gZmluZCBh
      IGRlZmF1bHQgZGF0YSBwb29sIG5hbWUKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAg
      ICMgaWYgbm8gZGF0YV9wb29scyBleGlzdCwgc2lsZW50bHkgcmV0dXJuCiAgICAgICAgICAgICAg
      ICBpZiBsZW4obWF0Y2hpbmdfanNvbl9vdXRbJ2RhdGFfcG9vbHMnXSkgPT0gMDoKICAgICAgICAg
      ICAgICAgICAgICByZXR1cm4KICAgICAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZz
      X2RhdGFfcG9vbF9uYW1lID0gc3RyKAogICAgICAgICAgICAgICAgICAgIG1hdGNoaW5nX2pzb25f
      b3V0WydkYXRhX3Bvb2xzJ11bMF0pCiAgICAgICAgICAgICMgaWYgdGhlcmUgYXJlIG1vcmUgdGhh
      biBvbmUgJ2RhdGFfcG9vbHMnIGV4aXN0LAogICAgICAgICAgICAjIHRoZW4gd2FybiB0aGUgdXNl
      ciB0aGF0IHdlIGFyZSB1c2luZyB0aGUgc2VsZWN0ZWQgbmFtZQogICAgICAgICAgICBpZiBsZW4o
      bWF0Y2hpbmdfanNvbl9vdXRbJ2RhdGFfcG9vbHMnXSkgPiAxOgogICAgICAgICAgICAgICAgcHJp
      bnQoInt9OiB7fVxue306ICd7fSdcbiIuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgICJXQVJO
      SU5HOiBNdWx0aXBsZSBkYXRhIHBvb2xzIGRldGVjdGVkIiwKICAgICAgICAgICAgICAgICAgICBb
      c3RyKHgpIGZvciB4IGluIG1hdGNoaW5nX2pzb25fb3V0WydkYXRhX3Bvb2xzJ11dLAogICAgICAg
      ICAgICAgICAgICAgICJVc2luZyB0aGUgZGF0YS1wb29sIiwKICAgICAgICAgICAgICAgICAgICBz
      ZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19kYXRhX3Bvb2xfbmFtZSkpCgogICAgZGVmIGNyZWF0ZV9j
      ZXBoQ1NJS2V5cmluZ19SQkROb2RlKHNlbGYpOgogICAgICAgIGNtZF9qc29uID0geyJwcmVmaXgi
      OiAiYXV0aCBnZXQtb3ItY3JlYXRlIiwKICAgICAgICAgICAgICAgICAgICAiZW50aXR5IjogImNs
      aWVudC5jc2ktcmJkLW5vZGUiLAogICAgICAgICAgICAgICAgICAgICJjYXBzIjogWyJtb24iLCAi
      cHJvZmlsZSByYmQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJvc2QiLCAicHJvZmls
      ZSByYmQiXSwKICAgICAgICAgICAgICAgICAgICAiZm9ybWF0IjogImpzb24ifQogICAgICAgIHJl
      dF92YWwsIGpzb25fb3V0LCBlcnJfbXNnID0gc2VsZi5fY29tbW9uX2NtZF9qc29uX2dlbihjbWRf
      anNvbikKICAgICAgICAjIGlmIHRoZXJlIGlzIGFuIHVuc3VjY2Vzc2Z1bCBhdHRlbXB0LAogICAg
      ICAgIGlmIHJldF92YWwgIT0gMCBvciBsZW4oanNvbl9vdXQpID09IDA6CiAgICAgICAgICAgIHJh
      aXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAiJ2F1dGggZ2V0
      LW9yLWNyZWF0ZSBjbGllbnQuY3NpLXJiZC1ub2RlJyBjb21tYW5kIGZhaWxlZFxuIiArCiAgICAg
      ICAgICAgICAgICAiRXJyb3I6IHt9Ii5mb3JtYXQoZXJyX21zZyBpZiByZXRfdmFsICE9IDAgZWxz
      ZSBzZWxmLkVNUFRZX09VVFBVVF9MSVNUKSkKICAgICAgICByZXR1cm4gc3RyKGpzb25fb3V0WzBd
      WydrZXknXSkKCiAgICBkZWYgY3JlYXRlX2NoZWNrZXJLZXkoc2VsZik6CiAgICAgICAgY21kX2pz
      b24gPSB7InByZWZpeCI6ICJhdXRoIGdldC1vci1jcmVhdGUiLAogICAgICAgICAgICAgICAgICAg
      ICJlbnRpdHkiOiBzZWxmLnJ1bl9hc191c2VyLAogICAgICAgICAgICAgICAgICAgICJjYXBzIjog
      WyJtb24iLCBzZWxmLk1JTl9VU0VSX0NBUF9QRVJNSVNTSU9OU1snbW9uJ10sCiAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgIm1nciIsIHNlbGYuTUlOX1VTRVJfQ0FQX1BFUk1JU1NJT05TWydt
      Z3InXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAib3NkIiwgc2VsZi5NSU5fVVNFUl9D
      QVBfUEVSTUlTU0lPTlNbJ29zZCddLmZvcm1hdChzZWxmLl9hcmdfcGFyc2VyLnJnd19wb29sX3By
      ZWZpeCldLAogICAgICAgICAgICAgICAgICAgICJmb3JtYXQiOiAianNvbiJ9CiAgICAgICAgcmV0
      X3ZhbCwganNvbl9vdXQsIGVycl9tc2cgPSBzZWxmLl9jb21tb25fY21kX2pzb25fZ2VuKGNtZF9q
      c29uKQogICAgICAgICMgaWYgdGhlcmUgaXMgYW4gdW5zdWNjZXNzZnVsIGF0dGVtcHQsCiAgICAg
      ICAgaWYgcmV0X3ZhbCAhPSAwIG9yIGxlbihqc29uX291dCkgPT0gMDoKICAgICAgICAgICAgcmFp
      c2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICInYXV0aCBnZXQt
      b3ItY3JlYXRlIHt9JyBjb21tYW5kIGZhaWxlZFxuIi5mb3JtYXQoc2VsZi5ydW5fYXNfdXNlcikg
      KwogICAgICAgICAgICAgICAgIkVycm9yOiB7fSIuZm9ybWF0KGVycl9tc2cgaWYgcmV0X3ZhbCAh
      PSAwIGVsc2Ugc2VsZi5FTVBUWV9PVVRQVVRfTElTVCkpCiAgICAgICAgcmV0dXJuIHN0cihqc29u
      X291dFswXVsna2V5J10pCgogICAgZGVmIGdldF9jZXBoX2Rhc2hib2FyZF9saW5rKHNlbGYpOgog
      ICAgICAgIGNtZF9qc29uID0geyJwcmVmaXgiOiAibWdyIHNlcnZpY2VzIiwgImZvcm1hdCI6ICJq
      c29uIn0KICAgICAgICByZXRfdmFsLCBqc29uX291dCwgXyA9IHNlbGYuX2NvbW1vbl9jbWRfanNv
      bl9nZW4oY21kX2pzb24pCiAgICAgICAgIyBpZiB0aGVyZSBpcyBhbiB1bnN1Y2Nlc3NmdWwgYXR0
      ZW1wdCwKICAgICAgICBpZiByZXRfdmFsICE9IDAgb3IgbGVuKGpzb25fb3V0KSA9PSAwOgogICAg
      ICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIGlmIG5vdCAnZGFzaGJvYXJkJyBpbiBqc29uX291
      dDoKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAgICAgICByZXR1cm4ganNvbl9vdXRbJ2Rhc2hi
      b2FyZCddCgogICAgZGVmIGNyZWF0ZV9yZ3dfYWRtaW5fb3BzX3VzZXIoc2VsZik6CiAgICAgICAg
      Y21kID0gWydyYWRvc2d3LWFkbWluJywgJ3VzZXInLCAnY3JlYXRlJywgJy0tdWlkJywgc2VsZi5F
      WFRFUk5BTF9SR1dfQURNSU5fT1BTX1VTRVJfTkFNRSwgJy0tZGlzcGxheS1uYW1lJywKICAgICAg
      ICAgICAgICAgJ1Jvb2sgUkdXIEFkbWluIE9wcyB1c2VyJywgJy0tY2FwcycsICdidWNrZXRzPSo7
      dXNlcnM9Kjt1c2FnZT1yZWFkO21ldGFkYXRhPXJlYWQ7em9uZT1yZWFkJ10KICAgICAgICB0cnk6
      CiAgICAgICAgICAgIG91dHB1dCA9IHN1YnByb2Nlc3MuY2hlY2tfb3V0cHV0KGNtZCwKICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RkZXJyPXN1YnByb2Nlc3Mu
      UElQRSkKICAgICAgICBleGNlcHQgc3VicHJvY2Vzcy5DYWxsZWRQcm9jZXNzRXJyb3IgYXMgZXhl
      Y0VycjoKICAgICAgICAgICAgIyBpZiB0aGUgdXNlciBhbHJlYWR5IGV4aXN0cywgd2UganVzdCBx
      dWVyeSBpdAogICAgICAgICAgICBpZiBleGVjRXJyLnJldHVybmNvZGUgPT0gZXJybm8uRUVYSVNU
      OgogICAgICAgICAgICAgICAgY21kID0gWydyYWRvc2d3LWFkbWluJywgJ3VzZXInLCAnaW5mbycs
      CiAgICAgICAgICAgICAgICAgICAgICAgJy0tdWlkJywgc2VsZi5FWFRFUk5BTF9SR1dfQURNSU5f
      T1BTX1VTRVJfTkFNRQogICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgIHRy
      eToKICAgICAgICAgICAgICAgICAgICBvdXRwdXQgPSBzdWJwcm9jZXNzLmNoZWNrX291dHB1dChj
      bWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
      c3RkZXJyPXN1YnByb2Nlc3MuUElQRSkKICAgICAgICAgICAgICAgIGV4Y2VwdCBzdWJwcm9jZXNz
      LkNhbGxlZFByb2Nlc3NFcnJvciBhcyBleGVjRXJyOgogICAgICAgICAgICAgICAgICAgIGVycl9t
      c2cgPSAiZmFpbGVkIHRvIGV4ZWN1dGUgY29tbWFuZCAlcy4gT3V0cHV0OiAlcy4gQ29kZTogJXMu
      IEVycm9yOiAlcyIgJSAoCiAgICAgICAgICAgICAgICAgICAgICAgIGNtZCwgZXhlY0Vyci5vdXRw
      dXQsIGV4ZWNFcnIucmV0dXJuY29kZSwgZXhlY0Vyci5zdGRlcnIpCiAgICAgICAgICAgICAgICAg
      ICAgcmFpc2UgRXhjZXB0aW9uKGVycl9tc2cpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAg
      ICAgICBlcnJfbXNnID0gImZhaWxlZCB0byBleGVjdXRlIGNvbW1hbmQgJXMuIE91dHB1dDogJXMu
      IENvZGU6ICVzLiBFcnJvcjogJXMiICUgKAogICAgICAgICAgICAgICAgICAgIGNtZCwgZXhlY0Vy
      ci5vdXRwdXQsIGV4ZWNFcnIucmV0dXJuY29kZSwgZXhlY0Vyci5zdGRlcnIpCiAgICAgICAgICAg
      ICAgICByYWlzZSBFeGNlcHRpb24oZXJyX21zZykKCiAgICAgICAganNvbm91dHB1dCA9IGpzb24u
      bG9hZHMob3V0cHV0KQogICAgICAgIHJldHVybiBqc29ub3V0cHV0WyJrZXlzIl1bMF1bJ2FjY2Vz
      c19rZXknXSwganNvbm91dHB1dFsia2V5cyJdWzBdWydzZWNyZXRfa2V5J10KCiAgICBkZWYgX2dl
      bl9vdXRwdXRfbWFwKHNlbGYpOgogICAgICAgIGlmIHNlbGYub3V0X21hcDoKICAgICAgICAgICAg
      cmV0dXJuCiAgICAgICAgcG9vbHNfdG9fdmFsaWRhdGUgPSBbc2VsZi5fYXJnX3BhcnNlci5yYmRf
      ZGF0YV9wb29sX25hbWVdCiAgICAgICAgIyBpZiByZ3dfZW5kcG9pbnQgaXMgcHJvdmlkZWQsIHZh
      bGlkYXRlIGl0CiAgICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci5yZ3dfZW5kcG9pbnQ6CiAgICAg
      ICAgICAgIHNlbGYuX2ludmFsaWRfZW5kcG9pbnQoc2VsZi5fYXJnX3BhcnNlci5yZ3dfZW5kcG9p
      bnQpCiAgICAgICAgICAgIHNlbGYuZW5kcG9pbnRfZGlhbChzZWxmLl9hcmdfcGFyc2VyLnJnd19l
      bmRwb2ludCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNlcnQ9c2VsZi52YWxpZGF0
      ZV9yZ3dfZW5kcG9pbnRfdGxzX2NlcnQoKSkKICAgICAgICAgICAgcmd3X3Bvb2xfdG9fdmFsaWRh
      dGUgPSBbInswfS5yZ3cubWV0YSIuZm9ybWF0KHNlbGYuX2FyZ19wYXJzZXIucmd3X3Bvb2xfcHJl
      Zml4KSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIi5yZ3cucm9vdCIsCiAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ7MH0ucmd3LmNvbnRyb2wiLmZvcm1h
      dCgKICAgICAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIucmd3X3Bvb2xfcHJlZml4KSwKICAg
      ICAgICAgICAgICAgICJ7MH0ucmd3LmxvZyIuZm9ybWF0KAogICAgICAgICAgICAgICAgc2VsZi5f
      YXJnX3BhcnNlci5yZ3dfcG9vbF9wcmVmaXgpXQogICAgICAgICAgICBwb29sc190b192YWxpZGF0
      ZS5leHRlbmQocmd3X3Bvb2xfdG9fdmFsaWRhdGUpCgogICAgICAgIGZvciBwb29sIGluIHBvb2xz
      X3RvX3ZhbGlkYXRlOgogICAgICAgICAgICBpZiBub3Qgc2VsZi5jbHVzdGVyLnBvb2xfZXhpc3Rz
      KHBvb2wpOgogICAgICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigK
      ICAgICAgICAgICAgICAgICAgICAiVGhlIHByb3ZpZGVkIHBvb2wsICd7fScsIGRvZXMgbm90IGV4
      aXN0Ii5mb3JtYXQocG9vbCkpCiAgICAgICAgc2VsZi5fZXhjbHVkZWRfa2V5cy5hZGQoJ0NMVVNU
      RVJfTkFNRScpCiAgICAgICAgc2VsZi5nZXRfY2VwaGZzX2RhdGFfcG9vbF9kZXRhaWxzKCkKICAg
      ICAgICBzZWxmLm91dF9tYXBbJ05BTUVTUEFDRSddID0gc2VsZi5fYXJnX3BhcnNlci5uYW1lc3Bh
      Y2UKICAgICAgICBzZWxmLm91dF9tYXBbJ0NMVVNURVJfTkFNRSddID0gc2VsZi5fYXJnX3BhcnNl
      ci5jbHVzdGVyX25hbWUKICAgICAgICBzZWxmLm91dF9tYXBbJ1JPT0tfRVhURVJOQUxfRlNJRCdd
      ID0gc2VsZi5nZXRfZnNpZCgpCiAgICAgICAgc2VsZi5vdXRfbWFwWydST09LX0VYVEVSTkFMX1VT
      RVJOQU1FJ10gPSBzZWxmLnJ1bl9hc191c2VyCiAgICAgICAgc2VsZi5vdXRfbWFwWydST09LX0VY
      VEVSTkFMX0NFUEhfTU9OX0RBVEEnXSA9IHNlbGYuZ2V0X2NlcGhfZXh0ZXJuYWxfbW9uX2RhdGEo
      KQogICAgICAgIHNlbGYub3V0X21hcFsnUk9PS19FWFRFUk5BTF9VU0VSX1NFQ1JFVCddID0gc2Vs
      Zi5jcmVhdGVfY2hlY2tlcktleSgpCiAgICAgICAgc2VsZi5vdXRfbWFwWydST09LX0VYVEVSTkFM
      X0RBU0hCT0FSRF9MSU5LJ10gPSBzZWxmLmdldF9jZXBoX2Rhc2hib2FyZF9saW5rKCkKICAgICAg
      ICBzZWxmLm91dF9tYXBbJ0NTSV9SQkRfTk9ERV9TRUNSRVRfU0VDUkVUJ10gPSBzZWxmLmNyZWF0
      ZV9jZXBoQ1NJS2V5cmluZ19SQkROb2RlKCkKICAgICAgICBzZWxmLm91dF9tYXBbJ0NTSV9SQkRf
      UFJPVklTSU9ORVJfU0VDUkVUJ10gPSBzZWxmLmNyZWF0ZV9jZXBoQ1NJS2V5cmluZ19SQkRQcm92
      aXNpb25lcigpCiAgICAgICAgc2VsZi5vdXRfbWFwWydDRVBIRlNfUE9PTF9OQU1FJ10gPSBzZWxm
      Ll9hcmdfcGFyc2VyLmNlcGhmc19kYXRhX3Bvb2xfbmFtZQogICAgICAgIHNlbGYub3V0X21hcFsn
      Q0VQSEZTX0ZTX05BTUUnXSA9IHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX2ZpbGVzeXN0ZW1fbmFt
      ZQogICAgICAgIHNlbGYub3V0X21hcFsnQ1NJX0NFUEhGU19OT0RFX1NFQ1JFVCddID0gJycKICAg
      ICAgICBzZWxmLm91dF9tYXBbJ0NTSV9DRVBIRlNfUFJPVklTSU9ORVJfU0VDUkVUJ10gPSAnJwog
      ICAgICAgICMgY3JlYXRlIENlcGhGUyBub2RlIGFuZCBwcm92aXNpb25lciBrZXlyaW5nIG9ubHkg
      d2hlbiBNRFMgZXhpc3RzCiAgICAgICAgaWYgc2VsZi5vdXRfbWFwWydDRVBIRlNfRlNfTkFNRSdd
      IGFuZCBzZWxmLm91dF9tYXBbJ0NFUEhGU19QT09MX05BTUUnXToKICAgICAgICAgICAgc2VsZi5v
      dXRfbWFwWydDU0lfQ0VQSEZTX05PREVfU0VDUkVUJ10gPSBzZWxmLmNyZWF0ZV9jZXBoQ1NJS2V5
      cmluZ19jZXBoRlNOb2RlKAogICAgICAgICAgICApCiAgICAgICAgICAgIHNlbGYub3V0X21hcFsn
      Q1NJX0NFUEhGU19QUk9WSVNJT05FUl9TRUNSRVQnXSA9IHNlbGYuY3JlYXRlX2NlcGhDU0lLZXly
      aW5nX2NlcGhGU1Byb3Zpc2lvbmVyKCkKICAgICAgICBzZWxmLm91dF9tYXBbJ1JHV19FTkRQT0lO
      VCddID0gc2VsZi5fYXJnX3BhcnNlci5yZ3dfZW5kcG9pbnQKICAgICAgICBzZWxmLm91dF9tYXBb
      J1JHV19UTFNfQ0VSVCddID0gJycKICAgICAgICBzZWxmLm91dF9tYXBbJ01PTklUT1JJTkdfRU5E
      UE9JTlQnXSwgXAogICAgICAgICAgICBzZWxmLm91dF9tYXBbJ01PTklUT1JJTkdfRU5EUE9JTlRf
      UE9SVCddID0gc2VsZi5nZXRfYWN0aXZlX2FuZF9zdGFuZGJ5X21ncnMoKQogICAgICAgIHNlbGYu
      b3V0X21hcFsnUkJEX1BPT0xfTkFNRSddID0gc2VsZi5fYXJnX3BhcnNlci5yYmRfZGF0YV9wb29s
      X25hbWUKICAgICAgICBzZWxmLm91dF9tYXBbJ1JHV19QT09MX1BSRUZJWCddID0gc2VsZi5fYXJn
      X3BhcnNlci5yZ3dfcG9vbF9wcmVmaXgKICAgICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLnJnd19l
      bmRwb2ludDoKICAgICAgICAgICAgc2VsZi5vdXRfbWFwWydBQ0NFU1NfS0VZJ10sIHNlbGYub3V0
      X21hcFsnU0VDUkVUX0tFWSddID0gc2VsZi5jcmVhdGVfcmd3X2FkbWluX29wc191c2VyKCkKICAg
      ICAgICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci5yZ3dfdGxzX2NlcnRfcGF0aDoKICAgICAgICAg
      ICAgICAgIHNlbGYub3V0X21hcFsnUkdXX1RMU19DRVJUJ10gPSBzZWxmLnZhbGlkYXRlX3Jnd19l
      bmRwb2ludF90bHNfY2VydCgpCgogICAgZGVmIGdlbl9zaGVsbF9vdXQoc2VsZik6CiAgICAgICAg
      c2VsZi5fZ2VuX291dHB1dF9tYXAoKQogICAgICAgIHNoT3V0SU8gPSBTdHJpbmdJTygpCiAgICAg
      ICAgZm9yIGssIHYgaW4gc2VsZi5vdXRfbWFwLml0ZW1zKCk6CiAgICAgICAgICAgIGlmIHYgYW5k
      IGsgbm90IGluIHNlbGYuX2V4Y2x1ZGVkX2tleXM6CiAgICAgICAgICAgICAgICBzaE91dElPLndy
      aXRlKCdleHBvcnQge309e317fScuZm9ybWF0KGssIHYsIExJTkVTRVApKQogICAgICAgIHNoT3V0
      ID0gc2hPdXRJTy5nZXR2YWx1ZSgpCiAgICAgICAgc2hPdXRJTy5jbG9zZSgpCiAgICAgICAgcmV0
      dXJuIHNoT3V0CgogICAgZGVmIGdlbl9qc29uX291dChzZWxmKToKICAgICAgICBzZWxmLl9nZW5f
      b3V0cHV0X21hcCgpCiAgICAgICAganNvbl9vdXQgPSBbCiAgICAgICAgICAgIHsKICAgICAgICAg
      ICAgICAgICJuYW1lIjogInJvb2stY2VwaC1tb24tZW5kcG9pbnRzIiwKICAgICAgICAgICAgICAg
      ICJraW5kIjogIkNvbmZpZ01hcCIsCiAgICAgICAgICAgICAgICAiZGF0YSI6IHsKICAgICAgICAg
      ICAgICAgICAgICAiZGF0YSI6IHNlbGYub3V0X21hcFsnUk9PS19FWFRFUk5BTF9DRVBIX01PTl9E
      QVRBJ10sCiAgICAgICAgICAgICAgICAgICAgIm1heE1vbklkIjogIjAiLAogICAgICAgICAgICAg
      ICAgICAgICJtYXBwaW5nIjogInt9IgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAog
      ICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAibmFtZSI6ICJyb29rLWNlcGgtbW9uIiwKICAg
      ICAgICAgICAgICAgICJraW5kIjogIlNlY3JldCIsCiAgICAgICAgICAgICAgICAiZGF0YSI6IHsK
      ICAgICAgICAgICAgICAgICAgICAiYWRtaW4tc2VjcmV0IjogImFkbWluLXNlY3JldCIsCiAgICAg
      ICAgICAgICAgICAgICAgImZzaWQiOiBzZWxmLm91dF9tYXBbJ1JPT0tfRVhURVJOQUxfRlNJRCdd
      LAogICAgICAgICAgICAgICAgICAgICJtb24tc2VjcmV0IjogIm1vbi1zZWNyZXQiCiAgICAgICAg
      ICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAi
      bmFtZSI6ICJyb29rLWNlcGgtb3BlcmF0b3ItY3JlZHMiLAogICAgICAgICAgICAgICAgImtpbmQi
      OiAiU2VjcmV0IiwKICAgICAgICAgICAgICAgICJkYXRhIjogewogICAgICAgICAgICAgICAgICAg
      ICJ1c2VySUQiOiBzZWxmLm91dF9tYXBbJ1JPT0tfRVhURVJOQUxfVVNFUk5BTUUnXSwKICAgICAg
      ICAgICAgICAgICAgICAidXNlcktleSI6IHNlbGYub3V0X21hcFsnUk9PS19FWFRFUk5BTF9VU0VS
      X1NFQ1JFVCddCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsK
      ICAgICAgICAgICAgICAgICJuYW1lIjogInJvb2stY3NpLXJiZC1ub2RlIiwKICAgICAgICAgICAg
      ICAgICJraW5kIjogIlNlY3JldCIsCiAgICAgICAgICAgICAgICAiZGF0YSI6IHsKICAgICAgICAg
      ICAgICAgICAgICAidXNlcklEIjogJ2NzaS1yYmQtbm9kZScsCiAgICAgICAgICAgICAgICAgICAg
      InVzZXJLZXkiOiBzZWxmLm91dF9tYXBbJ0NTSV9SQkRfTk9ERV9TRUNSRVRfU0VDUkVUJ10KICAg
      ICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAg
      ICAgIm5hbWUiOiAiY2VwaC1yYmQiLAogICAgICAgICAgICAgICAgImtpbmQiOiAiU3RvcmFnZUNs
      YXNzIiwKICAgICAgICAgICAgICAgICJkYXRhIjogewogICAgICAgICAgICAgICAgICAgICJwb29s
      Ijogc2VsZi5vdXRfbWFwWydSQkRfUE9PTF9OQU1FJ10KICAgICAgICAgICAgICAgIH0KICAgICAg
      ICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgIm5hbWUiOiAibW9uaXRvcmlu
      Zy1lbmRwb2ludCIsCiAgICAgICAgICAgICAgICAia2luZCI6ICJDZXBoQ2x1c3RlciIsCiAgICAg
      ICAgICAgICAgICAiZGF0YSI6IHsKICAgICAgICAgICAgICAgICAgICAiTW9uaXRvcmluZ0VuZHBv
      aW50Ijogc2VsZi5vdXRfbWFwWydNT05JVE9SSU5HX0VORFBPSU5UJ10sCiAgICAgICAgICAgICAg
      ICAgICAgIk1vbml0b3JpbmdQb3J0Ijogc2VsZi5vdXRfbWFwWydNT05JVE9SSU5HX0VORFBPSU5U
      X1BPUlQnXQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgXQoKICAgICAg
      ICAjIGlmICdST09LX0VYVEVSTkFMX0RBU0hCT0FSRF9MSU5LJyBleGlzdHMsIHRoZW4gb25seSBh
      ZGQgJ3Jvb2stY2VwaC1kYXNoYm9hcmQtbGluaycgU2VjcmV0CiAgICAgICAgaWYgc2VsZi5vdXRf
      bWFwWydST09LX0VYVEVSTkFMX0RBU0hCT0FSRF9MSU5LJ106CiAgICAgICAgICAgIGpzb25fb3V0
      LmFwcGVuZCh7CiAgICAgICAgICAgICAgICAibmFtZSI6ICJyb29rLWNlcGgtZGFzaGJvYXJkLWxp
      bmsiLAogICAgICAgICAgICAgICAgImtpbmQiOiAiU2VjcmV0IiwKICAgICAgICAgICAgICAgICJk
      YXRhIjogewogICAgICAgICAgICAgICAgICAgICJ1c2VySUQiOiAnY2VwaC1kYXNoYm9hcmQtbGlu
      aycsCiAgICAgICAgICAgICAgICAgICAgInVzZXJLZXkiOiBzZWxmLm91dF9tYXBbJ1JPT0tfRVhU
      RVJOQUxfREFTSEJPQVJEX0xJTksnXQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQog
      ICAgICAgICMgaWYgJ0NTSV9SQkRfUFJPVklTSU9ORVJfU0VDUkVUJyBleGlzdHMsIHRoZW4gb25s
      eSBhZGQgJ3Jvb2stY3NpLXJiZC1wcm92aXNpb25lcicgU2VjcmV0CiAgICAgICAgaWYgc2VsZi5v
      dXRfbWFwWydDU0lfUkJEX1BST1ZJU0lPTkVSX1NFQ1JFVCddOgogICAgICAgICAgICBqc29uX291
      dC5hcHBlbmQoewogICAgICAgICAgICAgICAgIm5hbWUiOiAicm9vay1jc2ktcmJkLXByb3Zpc2lv
      bmVyIiwKICAgICAgICAgICAgICAgICJraW5kIjogIlNlY3JldCIsCiAgICAgICAgICAgICAgICAi
      ZGF0YSI6IHsKICAgICAgICAgICAgICAgICAgICAidXNlcklEIjogJ2NzaS1yYmQtcHJvdmlzaW9u
      ZXInLAogICAgICAgICAgICAgICAgICAgICJ1c2VyS2V5Ijogc2VsZi5vdXRfbWFwWydDU0lfUkJE
      X1BST1ZJU0lPTkVSX1NFQ1JFVCddCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KQog
      ICAgICAgICMgaWYgJ0NTSV9DRVBIRlNfUFJPVklTSU9ORVJfU0VDUkVUJyBleGlzdHMsIHRoZW4g
      b25seSBhZGQgJ3Jvb2stY3NpLWNlcGhmcy1wcm92aXNpb25lcicgU2VjcmV0CiAgICAgICAgaWYg
      c2VsZi5vdXRfbWFwWydDU0lfQ0VQSEZTX1BST1ZJU0lPTkVSX1NFQ1JFVCddOgogICAgICAgICAg
      ICBqc29uX291dC5hcHBlbmQoewogICAgICAgICAgICAgICAgIm5hbWUiOiAicm9vay1jc2ktY2Vw
      aGZzLXByb3Zpc2lvbmVyIiwKICAgICAgICAgICAgICAgICJraW5kIjogIlNlY3JldCIsCiAgICAg
      ICAgICAgICAgICAiZGF0YSI6IHsKICAgICAgICAgICAgICAgICAgICAiYWRtaW5JRCI6ICdjc2kt
      Y2VwaGZzLXByb3Zpc2lvbmVyJywKICAgICAgICAgICAgICAgICAgICAiYWRtaW5LZXkiOiBzZWxm
      Lm91dF9tYXBbJ0NTSV9DRVBIRlNfUFJPVklTSU9ORVJfU0VDUkVUJ10KICAgICAgICAgICAgICAg
      IH0sCiAgICAgICAgICAgIH0pCiAgICAgICAgIyBpZiAnQ1NJX0NFUEhGU19OT0RFX1NFQ1JFVCcg
      ZXhpc3RzLCB0aGVuIG9ubHkgYWRkICdyb29rLWNzaS1jZXBoZnMtbm9kZScgU2VjcmV0CiAgICAg
      ICAgaWYgc2VsZi5vdXRfbWFwWydDU0lfQ0VQSEZTX05PREVfU0VDUkVUJ106CiAgICAgICAgICAg
      IGpzb25fb3V0LmFwcGVuZCh7CiAgICAgICAgICAgICAgICAibmFtZSI6ICJyb29rLWNzaS1jZXBo
      ZnMtbm9kZSIsCiAgICAgICAgICAgICAgICAia2luZCI6ICJTZWNyZXQiLAogICAgICAgICAgICAg
      ICAgImRhdGEiOiB7CiAgICAgICAgICAgICAgICAgICAgImFkbWluSUQiOiAnY3NpLWNlcGhmcy1u
      b2RlJywKICAgICAgICAgICAgICAgICAgICAiYWRtaW5LZXkiOiBzZWxmLm91dF9tYXBbJ0NTSV9D
      RVBIRlNfTk9ERV9TRUNSRVQnXQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAg
      ICAgICMgaWYgJ0NFUEhGU19GU19OQU1FJyBleGlzdHMsIHRoZW4gb25seSBhZGQgJ2NlcGhmcycg
      U3RvcmFnZUNsYXNzCiAgICAgICAgaWYgc2VsZi5vdXRfbWFwWydDRVBIRlNfRlNfTkFNRSddOgog
      ICAgICAgICAgICBqc29uX291dC5hcHBlbmQoewogICAgICAgICAgICAgICAgIm5hbWUiOiAiY2Vw
      aGZzIiwKICAgICAgICAgICAgICAgICJraW5kIjogIlN0b3JhZ2VDbGFzcyIsCiAgICAgICAgICAg
      ICAgICAiZGF0YSI6IHsKICAgICAgICAgICAgICAgICAgICAiZnNOYW1lIjogc2VsZi5vdXRfbWFw
      WydDRVBIRlNfRlNfTkFNRSddLAogICAgICAgICAgICAgICAgICAgICJwb29sIjogc2VsZi5vdXRf
      bWFwWydDRVBIRlNfUE9PTF9OQU1FJ10KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkK
      ICAgICAgICAjIGlmICdSR1dfRU5EUE9JTlQnIGV4aXN0cywgdGhlbiBvbmx5IGFkZCAnY2VwaC1y
      Z3cnIFN0b3JhZ2VDbGFzcwogICAgICAgIGlmIHNlbGYub3V0X21hcFsnUkdXX0VORFBPSU5UJ106
      CiAgICAgICAgICAgIGpzb25fb3V0LmFwcGVuZCh7CiAgICAgICAgICAgICAgICAibmFtZSI6ICJj
      ZXBoLXJndyIsCiAgICAgICAgICAgICAgICAia2luZCI6ICJTdG9yYWdlQ2xhc3MiLAogICAgICAg
      ICAgICAgICAgImRhdGEiOiB7CiAgICAgICAgICAgICAgICAgICAgImVuZHBvaW50Ijogc2VsZi5v
      dXRfbWFwWydSR1dfRU5EUE9JTlQnXSwKICAgICAgICAgICAgICAgICAgICAicG9vbFByZWZpeCI6
      IHNlbGYub3V0X21hcFsnUkdXX1BPT0xfUFJFRklYJ10KICAgICAgICAgICAgICAgIH0KICAgICAg
      ICAgICAgfSkKICAgICAgICAgICAganNvbl9vdXQuYXBwZW5kKAogICAgICAgICAgICAgICAgewog
      ICAgICAgICAgICAgICAgICAgICJuYW1lIjogInJndy1hZG1pbi1vcHMtdXNlciIsCiAgICAgICAg
      ICAgICAgICAgICAgImtpbmQiOiAiU2VjcmV0IiwKICAgICAgICAgICAgICAgICAgICAiZGF0YSI6
      IHsKICAgICAgICAgICAgICAgICAgICAgICAgImFjY2Vzc0tleSI6IHNlbGYub3V0X21hcFsnQUND
      RVNTX0tFWSddLAogICAgICAgICAgICAgICAgICAgICAgICAic2VjcmV0S2V5Ijogc2VsZi5vdXRf
      bWFwWydTRUNSRVRfS0VZJ10KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9
      KQogICAgICAgICMgaWYgJ1JHV19UTFNfQ0VSVCcgZXhpc3RzLCB0aGVuIG9ubHkgYWRkIHRoZSAi
      Y2VwaC1yZ3ctdGxzLWNlcnQiIHNlY3JldAogICAgICAgIGlmIHNlbGYub3V0X21hcFsnUkdXX1RM
      U19DRVJUJ106CiAgICAgICAgICAgIGpzb25fb3V0LmFwcGVuZCh7CiAgICAgICAgICAgICAgICAi
      bmFtZSI6ICJjZXBoLXJndy10bHMtY2VydCIsCiAgICAgICAgICAgICAgICAia2luZCI6ICJTZWNy
      ZXQiLAogICAgICAgICAgICAgICAgImRhdGEiOiB7CiAgICAgICAgICAgICAgICAgICAgImNlcnQi
      OiBzZWxmLm91dF9tYXBbJ1JHV19UTFNfQ0VSVCddLAogICAgICAgICAgICAgICAgfQogICAgICAg
      ICAgICB9KQogICAgICAgIHJldHVybiBqc29uLmR1bXBzKGpzb25fb3V0KStMSU5FU0VQCgogICAg
      ZGVmIHVwZ3JhZGVfdXNlcl9wZXJtaXNzaW9ucyhzZWxmKToKICAgICAgICAjIGNoZWNrIHdoZXRo
      ZXIgdGhlIGdpdmVuIHVzZXIgZXhpc3RzIG9yIG5vdAogICAgICAgIGNtZF9qc29uID0geyJwcmVm
      aXgiOiAiYXV0aCBnZXQiLCAiZW50aXR5IjogInt9Ii5mb3JtYXQoCiAgICAgICAgICAgIHNlbGYu
      cnVuX2FzX3VzZXIpLCAiZm9ybWF0IjogImpzb24ifQogICAgICAgIHJldF92YWwsIGpzb25fb3V0
      LCBlcnJfbXNnID0gc2VsZi5fY29tbW9uX2NtZF9qc29uX2dlbihjbWRfanNvbikKICAgICAgICBp
      ZiByZXRfdmFsICE9IDAgb3IgbGVuKGpzb25fb3V0KSA9PSAwOgogICAgICAgICAgICByYWlzZSBF
      eGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKCInYXV0aCBnZXQge30nIGNvbW1hbmQgZmFpbGVkLlxu
      Ii5mb3JtYXQoc2VsZi5ydW5fYXNfdXNlcikgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICJFcnJvcjoge30iLmZvcm1hdChlcnJfbXNnIGlmIHJldF92YWwgIT0g
      MCBlbHNlIHNlbGYuRU1QVFlfT1VUUFVUX0xJU1QpKQogICAgICAgIGpfZmlyc3QgPSBqc29uX291
      dFswXQogICAgICAgIGV4aXN0aW5nX2NhcHMgPSBqX2ZpcnN0WydjYXBzJ10KICAgICAgICBvc2Rf
      Y2FwID0gIm9zZCIKICAgICAgICBjYXBfa2V5cyA9IFsibW9uIiwgIm1nciIsICJvc2QiXQogICAg
      ICAgIGZvciBlYWNoQ2FwIGluIGNhcF9rZXlzOgogICAgICAgICAgICBtaW5fY2FwX3ZhbHVlcyA9
      IHNlbGYuTUlOX1VTRVJfQ0FQX1BFUk1JU1NJT05TLmdldChlYWNoQ2FwLCAnJykKICAgICAgICAg
      ICAgY3VyX2NhcF92YWx1ZXMgPSBleGlzdGluZ19jYXBzLmdldChlYWNoQ2FwLCAnJykKICAgICAg
      ICAgICAgIyBkZXRlY3Qgcmd3LXBvb2wtcHJlZml4CiAgICAgICAgICAgIGlmIGVhY2hDYXAgPT0g
      b3NkX2NhcDoKICAgICAgICAgICAgICAgICMgaWYgZGlyZWN0bHkgcHJvdmlkZWQgdGhyb3VnaCAn
      LS1yZ3ctcG9vbC1wcmVmaXgnIGFyZ3VtZW50LCB1c2UgaXQKICAgICAgICAgICAgICAgIGlmIHNl
      bGYuX2FyZ19wYXJzZXIucmd3X3Bvb2xfcHJlZml4OgogICAgICAgICAgICAgICAgICAgIG1pbl9j
      YXBfdmFsdWVzID0gbWluX2NhcF92YWx1ZXMuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgICAg
      ICBzZWxmLl9hcmdfcGFyc2VyLnJnd19wb29sX3ByZWZpeCkKICAgICAgICAgICAgICAgICMgb3Ig
      ZWxzZSB0cnkgdG8gZGV0ZWN0IG9uZSBmcm9tIHRoZSBleGlzdGluZy9jdXJyZW50IG9zZCBjYXAg
      dmFsdWVzCiAgICAgICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgICAgIHJjID0gcmUu
      Y29tcGlsZShyJyBwb29sPShbXi5dKylcLnJnd1wuW14gXSonKQogICAgICAgICAgICAgICAgICAg
      ICMgJ2ZpbmRhbGwoKScgbWV0aG9kIHdpbGwgZ2l2ZSBhIGxpc3Qgb2YgcHJlZml4ZXMKICAgICAg
      ICAgICAgICAgICAgICAjIGFuZCAnc2V0JyB3aWxsIGVsaW1pbmF0ZSBhbnkgZHVwbGljYXRlcwog
      ICAgICAgICAgICAgICAgICAgIGN1cl9yZ3dfcG9vbF9wcmVmaXhfbGlzdCA9IGxpc3QoCiAgICAg
      ICAgICAgICAgICAgICAgICAgIHNldChyYy5maW5kYWxsKGN1cl9jYXBfdmFsdWVzKSkpCiAgICAg
      ICAgICAgICAgICAgICAgaWYgbGVuKGN1cl9yZ3dfcG9vbF9wcmVmaXhfbGlzdCkgIT0gMToKICAg
      ICAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICJVbmFibGUgdG8gZGV0ZXJtaW5lICdyZ3ctcG9vbC1w
      cmVmeCcuIFBsZWFzZSBwcm92aWRlIG9uZSB3aXRoICctLXJndy1wb29sLXByZWZpeCcgZmxhZyIp
      CiAgICAgICAgICAgICAgICAgICAgbWluX2NhcF92YWx1ZXMgPSBtaW5fY2FwX3ZhbHVlcy5mb3Jt
      YXQoCiAgICAgICAgICAgICAgICAgICAgICAgIGN1cl9yZ3dfcG9vbF9wcmVmaXhfbGlzdFswXSkK
      ICAgICAgICAgICAgY3VyX2NhcF9wZXJtX2xpc3QgPSBbeC5zdHJpcCgpCiAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgIGZvciB4IGluIGN1cl9jYXBfdmFsdWVzLnNwbGl0KCcsJykgaWYg
      eC5zdHJpcCgpXQogICAgICAgICAgICBtaW5fY2FwX3Blcm1fbGlzdCA9IFt4LnN0cmlwKCkKICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIHggaW4gbWluX2NhcF92YWx1ZXMuc3Bs
      aXQoJywnKSBpZiB4LnN0cmlwKCldCiAgICAgICAgICAgIG1pbl9jYXBfcGVybV9saXN0LmV4dGVu
      ZChjdXJfY2FwX3Blcm1fbGlzdCkKICAgICAgICAgICAgIyBlbGltaW5hdGUgZHVwbGljYXRlcyB3
      aXRob3V0IHVzaW5nICdzZXQnCiAgICAgICAgICAgICMgc2V0IHJlLW9yZGVycyBpdGVtcyBpbiB0
      aGUgbGlzdCBhbmQgd2UgaGF2ZSB0byBrZWVwIHRoZSBvcmRlcgogICAgICAgICAgICBuZXdfY2Fw
      X3Blcm1fbGlzdCA9IFtdCiAgICAgICAgICAgIFtuZXdfY2FwX3Blcm1fbGlzdC5hcHBlbmQoCiAg
      ICAgICAgICAgICAgICB4KSBmb3IgeCBpbiBtaW5fY2FwX3Blcm1fbGlzdCBpZiB4IG5vdCBpbiBu
      ZXdfY2FwX3Blcm1fbGlzdF0KICAgICAgICAgICAgZXhpc3RpbmdfY2Fwc1tlYWNoQ2FwXSA9ICIs
      ICIuam9pbihuZXdfY2FwX3Blcm1fbGlzdCkKICAgICAgICBjbWRfanNvbiA9IHsicHJlZml4Ijog
      ImF1dGggY2FwcyIsCiAgICAgICAgICAgICAgICAgICAgImVudGl0eSI6IHNlbGYucnVuX2FzX3Vz
      ZXIsCiAgICAgICAgICAgICAgICAgICAgImNhcHMiOiBbIm1vbiIsIGV4aXN0aW5nX2NhcHNbIm1v
      biJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtZ3IiLCBleGlzdGluZ19jYXBzWyJt
      Z3IiXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAib3NkIiwgZXhpc3RpbmdfY2Fwc1si
      b3NkIl1dLAogICAgICAgICAgICAgICAgICAgICJmb3JtYXQiOiAianNvbiJ9CiAgICAgICAgcmV0
      X3ZhbCwganNvbl9vdXQsIGVycl9tc2cgPSBzZWxmLl9jb21tb25fY21kX2pzb25fZ2VuKGNtZF9q
      c29uKQogICAgICAgIGlmIHJldF92YWwgIT0gMDoKICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9u
      RmFpbHVyZUV4Y2VwdGlvbigiJ2F1dGggY2FwcyB7fScgY29tbWFuZCBmYWlsZWQuXG4iLmZvcm1h
      dChzZWxmLnJ1bl9hc191c2VyKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgICAgIkVycm9yOiB7fSIuZm9ybWF0KGVycl9tc2cpKQogICAgICAgIHByaW50KCJVcGRh
      dGVkIHVzZXIsIHt9LCBzdWNjZXNzZnVsbHkuIi5mb3JtYXQoc2VsZi5ydW5fYXNfdXNlcikpCgog
      ICAgZGVmIG1haW4oc2VsZik6CiAgICAgICAgZ2VuZXJhdGVkX291dHB1dCA9ICcnCiAgICAgICAg
      aWYgc2VsZi5fYXJnX3BhcnNlci51cGdyYWRlOgogICAgICAgICAgICBzZWxmLnVwZ3JhZGVfdXNl
      cl9wZXJtaXNzaW9ucygpCiAgICAgICAgZWxpZiBzZWxmLl9hcmdfcGFyc2VyLmZvcm1hdCA9PSAn
      anNvbic6CiAgICAgICAgICAgIGdlbmVyYXRlZF9vdXRwdXQgPSBzZWxmLmdlbl9qc29uX291dCgp
      CiAgICAgICAgZWxpZiBzZWxmLl9hcmdfcGFyc2VyLmZvcm1hdCA9PSAnYmFzaCc6CiAgICAgICAg
      ICAgIGdlbmVyYXRlZF9vdXRwdXQgPSBzZWxmLmdlbl9zaGVsbF9vdXQoKQogICAgICAgIGVsc2U6
      CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oIlVuc3VwcG9ydGVk
      IGZvcm1hdDoge30iLmZvcm1hdCgKICAgICAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIuZm9y
      bWF0KSkKICAgICAgICBwcmludCgne30nLmZvcm1hdChnZW5lcmF0ZWRfb3V0cHV0KSkKICAgICAg
      ICBpZiBzZWxmLm91dHB1dF9maWxlIGFuZCBnZW5lcmF0ZWRfb3V0cHV0OgogICAgICAgICAgICBm
      T3V0ID0gb3BlbihzZWxmLm91dHB1dF9maWxlLCAndycpCiAgICAgICAgICAgIGZPdXQud3JpdGUo
      Z2VuZXJhdGVkX291dHB1dCkKICAgICAgICAgICAgZk91dC5jbG9zZSgpCgoKIyMjIyMjIyMjIyMj
      IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIyMjIyMjIyMjIyMjIyMjIyMj
      IyBNQUlOICMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
      IyMjIyMjIyMjIyMjIyMjIyMjIyMKaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoKICAgIHJqT2Jq
      ID0gUmFkb3NKU09OKCkKICAgIHRyeToKICAgICAgICByak9iai5tYWluKCkKICAgIGV4Y2VwdCBF
      eGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uIGFzIGVycjoKICAgICAgICBwcmludCgiRXhlY3V0aW9u
      IEZhaWxlZDoge30iLmZvcm1hdChlcnIpKQogICAgICAgIHJhaXNlIGVycgogICAgZXhjZXB0IEtl
      eUVycm9yIGFzIGtFcnI6CiAgICAgICAgcHJpbnQoIktleUVycm9yOiAlcyIsIGtFcnIpCiAgICBl
      eGNlcHQgT1NFcnJvciBhcyBvc0VycjoKICAgICAgICBwcmludCgiRXJyb3Igd2hpbGUgdHJ5aW5n
      IHRvIG91dHB1dCB0aGUgZGF0YToge30iLmZvcm1hdChvc0VycikpCiAgICBmaW5hbGx5OgogICAg
      ICAgIHJqT2JqLnNodXRkb3duKCkKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
      IyMjIyMjIyMjIyMjIyMKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIFRFU1QgIyMjIyMjIyMjIyMjIyMj
      IyMjIyMjCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwoj
      IGlub3JkZXIgdG8gdGVzdCB0aGUgcGFja2FnZSwKIyBjZCA8c2NyaXB0X2RpcmVjdG9yeT4KIyBw
      eXRob24gLW0gdW5pdHRlc3QgLS12ZXJib3NlIDxzY3JpcHRfbmFtZV93aXRob3V0X2RvdF9weT4K
      Y2xhc3MgVGVzdFJhZG9zSlNPTih1bml0dGVzdC5UZXN0Q2FzZSk6CiAgICBkZWYgc2V0VXAoc2Vs
      Zik6CiAgICAgICAgcHJpbnQoIlxuSSBhbSBpbiBzZXR1cCIpCiAgICAgICAgc2VsZi5yak9iaiA9
      IFJhZG9zSlNPTihbJy0tcmJkLWRhdGEtcG9vbC1uYW1lPWFiYycsCiAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgJy0tcmd3LWVuZHBvaW50PTEwLjEwLjIxMi4xMjI6OTAwMCcsICctLWZv
      cm1hdD1qc29uJ10pCiAgICAgICAgIyBmb3IgdGVzdGluZywgd2UgYXJlIHVzaW5nICdEdW1teVJh
      ZG9zJyBvYmplY3QKICAgICAgICBzZWxmLnJqT2JqLmNsdXN0ZXIgPSBEdW1teVJhZG9zLlJhZG9z
      KCkKCiAgICBkZWYgdGVhckRvd24oc2VsZik6CiAgICAgICAgcHJpbnQoIlxuSSBhbSB0ZWFyaW5n
      IGRvd24gdGhlIHNldHVwXG4iKQogICAgICAgIHNlbGYucmpPYmouc2h1dGRvd24oKQoKICAgIGRl
      ZiB0ZXN0X21ldGhvZF9tYWluX291dHB1dChzZWxmKToKICAgICAgICBwcmludCgiSlNPTiBPdXRw
      dXQiKQogICAgICAgIHNlbGYucmpPYmouX2FyZ19wYXJzZXIuZm9ybWF0ID0gImpzb24iCiAgICAg
      ICAgc2VsZi5yak9iai5tYWluKCkKICAgICAgICBwcmludCgiXG5cblNoZWxsIE91dHB1dCIpCiAg
      ICAgICAgc2VsZi5yak9iai5fYXJnX3BhcnNlci5mb3JtYXQgPSAiYmFzaCIKICAgICAgICBzZWxm
      LnJqT2JqLm1haW4oKQogICAgICAgIHByaW50KCJcblxuTm9uIGNvbXBhdGlibGUgb3V0cHV0ICgt
      LWFiY2QpIikKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYucmpPYmouX2FyZ19wYXJzZXIu
      Zm9ybWF0ID0gJ2FiY2QnCiAgICAgICAgICAgIHNlbGYucmpPYmoubWFpbigpCiAgICAgICAgICAg
      IHNlbGYuZmFpbCgiRnVuY3Rpb24gc2hvdWxkIGhhdmUgdGhyb3duIGFuIEV4Y2VwdGlvbiIpCiAg
      ICAgICAgZXhjZXB0IEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24gYXMgZXJyOgogICAgICAgICAg
      ICBwcmludCgiRXhjZXB0aW9uIHRocm93biBzdWNjZXNzZnVsbHk6IHt9Ii5mb3JtYXQoZXJyKSkK
      CiAgICBkZWYgdGVzdF9tZXRob2RfY3JlYXRlX2NlcGhDU0lLZXlyaW5nX2NlcGhGU1Byb3Zpc2lv
      bmVyKHNlbGYpOgogICAgICAgIGNzaUtleXJpbmcgPSBzZWxmLnJqT2JqLmNyZWF0ZV9jZXBoQ1NJ
      S2V5cmluZ19jZXBoRlNQcm92aXNpb25lcigpCiAgICAgICAgcHJpbnQoInt9Ii5mb3JtYXQoY3Np
      S2V5cmluZykpCgogICAgZGVmIHRlc3Rfbm9uX3plcm9fcmV0dXJuX2FuZF9lcnJvcihzZWxmKToK
      ICAgICAgICBzZWxmLnJqT2JqLmNsdXN0ZXIucmV0dXJuX3ZhbCA9IDEKICAgICAgICBzZWxmLnJq
      T2JqLmNsdXN0ZXIuZXJyX21lc3NhZ2UgPSAiRHVtbXkgRXJyb3IiCiAgICAgICAgdHJ5OgogICAg
      ICAgICAgICBzZWxmLnJqT2JqLmNyZWF0ZV9jaGVja2VyS2V5KCkKICAgICAgICAgICAgc2VsZi5m
      YWlsKCJGYWlsZWQgdG8gcmFpc2UgYW4gZXhjZXB0aW9uLCAnRXhlY3V0aW9uRmFpbHVyZUV4Y2Vw
      dGlvbiciKQogICAgICAgIGV4Y2VwdCBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uIGFzIGVycjoK
      ICAgICAgICAgICAgcHJpbnQoIlN1Y2Nlc3NmdWxseSB0aHJvd24gZXJyb3IuXG5FcnJvcjoge30i
      LmZvcm1hdChlcnIpKQoKICAgIGRlZiB0ZXN0X211bHRpX2ZpbGVzeXN0ZW1fc2NlbmFyaW8oc2Vs
      Zik6CiAgICAgICAgY21kX2tleSA9IHNlbGYucmpPYmouY2x1c3Rlci5jbWRfbmFtZXNbJ2ZzIGxz
      J10KICAgICAgICBjbWRfb3V0ID0gc2VsZi5yak9iai5jbHVzdGVyLmNtZF9vdXRwdXRfbWFwW2Nt
      ZF9rZXldCiAgICAgICAgY21kX2pzb25fb3V0ID0ganNvbi5sb2FkcyhjbWRfb3V0KQogICAgICAg
      IHNlY29uZF9mc19kZXRhaWxzID0gZGljdChjbWRfanNvbl9vdXRbMF0pCiAgICAgICAgc2Vjb25k
      X2ZzX2RldGFpbHNbJ25hbWUnXSArPSAnLTInCiAgICAgICAgY21kX2pzb25fb3V0LmFwcGVuZChz
      ZWNvbmRfZnNfZGV0YWlscykKICAgICAgICBzZWxmLnJqT2JqLmNsdXN0ZXIuY21kX291dHB1dF9t
      YXBbY21kX2tleV0gPSBqc29uLmR1bXBzKGNtZF9qc29uX291dCkKICAgICAgICAjIG11bHRpcGxl
      IGZpbGVzeXN0ZW0gcHJlc2VudCwKICAgICAgICAjIGJ1dCBubyBzcGVjaWZpYyAnLS1jZXBoZnMt
      ZmlsZXN5c3RlbS1uYW1lJyBhcmd1bWVudCBwcm92aWRlZAogICAgICAgIHRyeToKICAgICAgICAg
      ICAgc2VsZi5yak9iai5nZXRfY2VwaGZzX2RhdGFfcG9vbF9kZXRhaWxzKCkKICAgICAgICAgICAg
      cHJpbnQoIkFzIHdlIGFyZSByZXR1cm5pbmcgc2lsZW50bHksIG5vIGVycm9yIHRocm93biBhcyBl
      eHBlY3RlZCIpCiAgICAgICAgZXhjZXB0IEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24gYXMgZXJy
      OgogICAgICAgICAgICBzZWxmLmZhaWwoCiAgICAgICAgICAgICAgICAiU3VwcG9zZWQgdG8gZ2V0
      IHJldHVybmVkIHNpbGVudGx5LCBidXQgaW5zdGVhZCBlcnJvciB0aHJvd246IHt9Ii5mb3JtYXQo
      ZXJyKSkKICAgICAgICAjIHBhc3MgYW4gZXhpc3RpbmcgZmlsZXN5c3RlbSBuYW1lCiAgICAgICAg
      dHJ5OgogICAgICAgICAgICBzZWxmLnJqT2JqLl9hcmdfcGFyc2VyLmNlcGhmc19maWxlc3lzdGVt
      X25hbWUgPSBzZWNvbmRfZnNfZGV0YWlsc1snbmFtZSddCiAgICAgICAgICAgIHNlbGYucmpPYmou
      Z2V0X2NlcGhmc19kYXRhX3Bvb2xfZGV0YWlscygpCiAgICAgICAgZXhjZXB0IEV4ZWN1dGlvbkZh
      aWx1cmVFeGNlcHRpb24gYXMgZXJyOgogICAgICAgICAgICBzZWxmLmZhaWwoIlNob3VsZCBub3Qg
      aGF2ZSB0aHJvd24gZXJyb3I6IHt9Ii5mb3JtYXQoZXJyKSkKICAgICAgICAjIHBhc3MgYSBub24t
      ZXhpc3RpbmcgZmlsZXN5c3RlbSBuYW1lCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLnJq
      T2JqLl9hcmdfcGFyc2VyLmNlcGhmc19maWxlc3lzdGVtX25hbWUgKz0gIi1ub24tZXhpc3Rpbmct
      ZnMtbmFtZSIKICAgICAgICAgICAgc2VsZi5yak9iai5nZXRfY2VwaGZzX2RhdGFfcG9vbF9kZXRh
      aWxzKCkKICAgICAgICAgICAgc2VsZi5mYWlsKCJBbiBFeGNlcHRpb24gd2FzIGV4cGVjdGVkIHRv
      IGJlIHRocm93biIpCiAgICAgICAgZXhjZXB0IEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24gYXMg
      ZXJyOgogICAgICAgICAgICBwcmludCgiU3VjY2Vzc2Z1bGx5IHRocm93biBlcnJvcjoge30iLmZv
      cm1hdChlcnIpKQogICAgICAgICMgZW1wdHkgZmlsZS1zeXN0ZW0gYXJyYXkKICAgICAgICB0cnk6
      CiAgICAgICAgICAgIHNlbGYucmpPYmouY2x1c3Rlci5jbWRfb3V0cHV0X21hcFtjbWRfa2V5XSA9
      IGpzb24uZHVtcHMoW10pCiAgICAgICAgICAgIHNlbGYucmpPYmouZ2V0X2NlcGhmc19kYXRhX3Bv
      b2xfZGV0YWlscygpCiAgICAgICAgICAgIHNlbGYuZmFpbCgiQW4gRXhjZXB0aW9uIHdhcyBleHBl
      Y3RlZCB0byBiZSB0aHJvd24iKQogICAgICAgIGV4Y2VwdCBFeGVjdXRpb25GYWlsdXJlRXhjZXB0
      aW9uIGFzIGVycjoKICAgICAgICAgICAgcHJpbnQoIlN1Y2Nlc3NmdWxseSB0aHJvd24gZXJyb3I6
      IHt9Ii5mb3JtYXQoZXJyKSkKCiAgICBkZWYgdGVzdF9tdWx0aV9kYXRhX3Bvb2xfc2NlbmFyaW8o
      c2VsZik6CiAgICAgICAgY21kX2tleSA9IHNlbGYucmpPYmouY2x1c3Rlci5jbWRfbmFtZXNbJ2Zz
      IGxzJ10KICAgICAgICBjbWRfb3V0ID0gc2VsZi5yak9iai5jbHVzdGVyLmNtZF9vdXRwdXRfbWFw
      W2NtZF9rZXldCiAgICAgICAgY21kX2pzb25fb3V0ID0ganNvbi5sb2FkcyhjbWRfb3V0KQogICAg
      ICAgIGZpcnN0X2ZzX2RldGFpbHMgPSBjbWRfanNvbl9vdXRbMF0KICAgICAgICBuZXdfZGF0YV9w
      b29sX25hbWUgPSAnbXlmcy1kYXRhMScKICAgICAgICBmaXJzdF9mc19kZXRhaWxzWydkYXRhX3Bv
      b2xzJ10uYXBwZW5kKG5ld19kYXRhX3Bvb2xfbmFtZSkKICAgICAgICBwcmludCgiTW9kaWZpZWQg
      SlNPTiBDbWQgT3V0OiB7fSIuZm9ybWF0KGNtZF9qc29uX291dCkpCiAgICAgICAgc2VsZi5yak9i
      ai5fYXJnX3BhcnNlci5jZXBoZnNfZGF0YV9wb29sX25hbWUgPSBuZXdfZGF0YV9wb29sX25hbWUK
      ICAgICAgICBzZWxmLnJqT2JqLmNsdXN0ZXIuY21kX291dHB1dF9tYXBbY21kX2tleV0gPSBqc29u
      LmR1bXBzKGNtZF9qc29uX291dCkKICAgICAgICBzZWxmLnJqT2JqLmdldF9jZXBoZnNfZGF0YV9w
      b29sX2RldGFpbHMoKQogICAgICAgICMgdXNlIGEgbm9uLWV4aXN0aW5nIGRhdGEtcG9vbC1uYW1l
      CiAgICAgICAgYmFkX2RhdGFfcG9vbF9uYW1lID0gJ215ZnMtZGF0YTMnCiAgICAgICAgc2VsZi5y
      ak9iai5fYXJnX3BhcnNlci5jZXBoZnNfZGF0YV9wb29sX25hbWUgPSBiYWRfZGF0YV9wb29sX25h
      bWUKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYucmpPYmouZ2V0X2NlcGhmc19kYXRhX3Bv
      b2xfZGV0YWlscygpCiAgICAgICAgICAgIHNlbGYuZmFpbCgiQW4gRXhjZXB0aW9uIHdhcyBleHBl
      Y3RlZCB0byBiZSB0aHJvd24iKQogICAgICAgIGV4Y2VwdCBFeGVjdXRpb25GYWlsdXJlRXhjZXB0
      aW9uIGFzIGVycjoKICAgICAgICAgICAgcHJpbnQoIlN1Y2Nlc3NmdWxseSB0aHJvd24gZXJyb3I6
      IHt9Ii5mb3JtYXQoZXJyKSkKICAgICAgICAjIGVtcHR5IGRhdGEtcG9vbCBzY2VuYXJpbwogICAg
      ICAgIGZpcnN0X2ZzX2RldGFpbHNbJ2RhdGFfcG9vbHMnXSA9IFtdCiAgICAgICAgc2VsZi5yak9i
      ai5jbHVzdGVyLmNtZF9vdXRwdXRfbWFwW2NtZF9rZXldID0ganNvbi5kdW1wcyhjbWRfanNvbl9v
      dXQpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLnJqT2JqLmdldF9jZXBoZnNfZGF0YV9w
      b29sX2RldGFpbHMoKQogICAgICAgICAgICBzZWxmLmZhaWwoIkFuIEV4Y2VwdGlvbiB3YXMgZXhw
      ZWN0ZWQgdG8gYmUgdGhyb3duIikKICAgICAgICBleGNlcHQgRXhlY3V0aW9uRmFpbHVyZUV4Y2Vw
      dGlvbiBhcyBlcnI6CiAgICAgICAgICAgIHByaW50KCJTdWNjZXNzZnVsbHkgdGhyb3duIGVycm9y
      OiB7fSIuZm9ybWF0KGVycikpCgogICAgZGVmIHRlc3RfdmFsaWRfcmd3X2VuZHBvaW50KHNlbGYp
      OgogICAgICAgIHNlbGYucmpPYmouX2ludmFsaWRfZW5kcG9pbnQoIjEwLjEwLjIxMi4xMzM6ODAw
      MCIpCiAgICAgICAgIyBpbnZhbGlkIHBvcnQKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYu
      cmpPYmouX2ludmFsaWRfZW5kcG9pbnQoIjEwLjEwLjIxMi4xMzM6MjM4MDAwIikKICAgICAgICAg
      ICAgc2VsZi5mYWlsKCJBbiBFeGNlcHRpb24gd2FzIGV4cGVjdGVkIHRvIGJlIHRocm93biIpCiAg
      ICAgICAgZXhjZXB0IEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24gYXMgZXJyOgogICAgICAgICAg
      ICBwcmludCgiU3VjY2Vzc2Z1bGx5IHRocm93biBlcnJvcjoge30iLmZvcm1hdChlcnIpKQogICAg
      ICAgICMgb3V0IG9mIHJhbmdlIElQCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLnJqT2Jq
      Ll9pbnZhbGlkX2VuZHBvaW50KCIxMC4xMDMzLjIxMi4xMzM6ODAwMCIpCiAgICAgICAgICAgIHNl
      bGYuZmFpbCgiQW4gRXhjZXB0aW9uIHdhcyBleHBlY3RlZCB0byBiZSB0aHJvd24iKQogICAgICAg
      IGV4Y2VwdCBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uIGFzIGVycjoKICAgICAgICAgICAgcHJp
      bnQoIlN1Y2Nlc3NmdWxseSB0aHJvd24gZXJyb3I6IHt9Ii5mb3JtYXQoZXJyKSkKICAgICAgICAj
      IG1hbCBmb3JtYXR0ZWQgSVAKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYucmpPYmouX2lu
      dmFsaWRfZW5kcG9pbnQoIjEwLjEwMy4uMjEyLjEzMzo4MDAwIikKICAgICAgICAgICAgc2VsZi5m
      YWlsKCJBbiBFeGNlcHRpb24gd2FzIGV4cGVjdGVkIHRvIGJlIHRocm93biIpCiAgICAgICAgZXhj
      ZXB0IEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24gYXMgZXJyOgogICAgICAgICAgICBwcmludCgi
      U3VjY2Vzc2Z1bGx5IHRocm93biBlcnJvcjoge30iLmZvcm1hdChlcnIpKQogICAgICAgIHRyeToK
      ICAgICAgICAgICAgc2VsZi5yak9iai5faW52YWxpZF9lbmRwb2ludCgiMTAuMTAzLjIxMi4xMzM6
      OjgwMDAiKQogICAgICAgICAgICBzZWxmLmZhaWwoIkFuIEV4Y2VwdGlvbiB3YXMgZXhwZWN0ZWQg
      dG8gYmUgdGhyb3duIikKICAgICAgICBleGNlcHQgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbiBh
      cyBlcnI6CiAgICAgICAgICAgIHByaW50KCJTdWNjZXNzZnVsbHkgdGhyb3duIGVycm9yOiB7fSIu
      Zm9ybWF0KGVycikpCiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLnJqT2JqLl9pbnZhbGlk
      X2VuZHBvaW50KCIxMC4xMC4xMDMuMjEyLjEzMzo4MDAwIikKICAgICAgICAgICAgc2VsZi5mYWls
      KCJBbiBFeGNlcHRpb24gd2FzIGV4cGVjdGVkIHRvIGJlIHRocm93biIpCiAgICAgICAgZXhjZXB0
      IEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24gYXMgZXJyOgogICAgICAgICAgICBwcmludCgiU3Vj
      Y2Vzc2Z1bGx5IHRocm93biBlcnJvcjoge30iLmZvcm1hdChlcnIpKQoKICAgIGRlZiBhZGRfbm9u
      X2RlZmF1bHRfcG9vbF9wcmVmaXhfY21kKHNlbGYsIG5vbl9kZWZhdWx0X3Bvb2xfcHJlZml4KToK
      ICAgICAgICBqc29uX2NtZCA9IGpzb24ubG9hZHMoCiAgICAgICAgICAgIHNlbGYucmpPYmouY2x1
      c3Rlci5jbWRfbmFtZXNbJ2NhcHNfY2hhbmdlX2RlZmF1bHRfcG9vbF9wcmVmaXgnXSkKICAgICAg
      ICBjdXJfb3NkX2NhcHMgPSBqc29uX2NtZFsnY2FwcyddW2pzb25fY21kWydjYXBzJ10uaW5kZXgo
      J29zZCcpICsgMV0KICAgICAgICBuZXdfb3NkX2NhcHMgPSBjdXJfb3NkX2NhcHMucmVwbGFjZSgK
      ICAgICAgICAgICAgJ2RlZmF1bHQuJywgJ3t9LicuZm9ybWF0KG5vbl9kZWZhdWx0X3Bvb2xfcHJl
      Zml4KSkKICAgICAgICBhbGxfb3NkX2NhcHMgPSAie30sIHt9Ii5mb3JtYXQobmV3X29zZF9jYXBz
      LCBjdXJfb3NkX2NhcHMpCiAgICAgICAgY2Fwc19saXN0ID0gW3guc3RyaXAoKSBmb3IgeCBpbiBh
      bGxfb3NkX2NhcHMuc3BsaXQoJywnKSBpZiB4LnN0cmlwKCldCiAgICAgICAgbmV3X2NhcHNfbGlz
      dCA9IFtdCiAgICAgICAgW25ld19jYXBzX2xpc3QuYXBwZW5kKHgpIGZvciB4IGluIGNhcHNfbGlz
      dCBpZiB4IG5vdCBpbiBuZXdfY2Fwc19saXN0XQogICAgICAgIGFsbF9vc2RfY2FwcyA9ICIsICIu
      am9pbihuZXdfY2Fwc19saXN0KQogICAgICAgIGpzb25fY21kWydjYXBzJ11banNvbl9jbWRbJ2Nh
      cHMnXS5pbmRleCgnb3NkJykgKyAxXSA9IGFsbF9vc2RfY2FwcwogICAgICAgIHNlbGYucmpPYmou
      Y2x1c3Rlci5jbWRfbmFtZXNbJ2NhcHNfY2hhbmdlX25vbl9kZWZhdWx0X3Bvb2xfcHJlZml4J10g
      PSBqc29uLmR1bXBzKAogICAgICAgICAgICBqc29uX2NtZCkKICAgICAgICBzZWxmLnJqT2JqLmNs
      dXN0ZXIuY21kX291dHB1dF9tYXBbCiAgICAgICAgICAgIHNlbGYucmpPYmouY2x1c3Rlci5jbWRf
      bmFtZXNbJ2NhcHNfY2hhbmdlX25vbl9kZWZhdWx0X3Bvb2xfcHJlZml4J11dID0gJ1t7fV0nCgog
      ICAgZGVmIHRlc3RfdXBncmFkZV91c2VyX3Blcm1pc3Npb25zKHNlbGYpOgogICAgICAgIHNlbGYu
      cmpPYmogPSBSYWRvc0pTT04oCiAgICAgICAgICAgIFsnLS11cGdyYWRlJywgJy0tcnVuLWFzLXVz
      ZXI9Y2xpZW50LmhlYWx0aGNoZWNrZXInXSkKICAgICAgICAjIGZvciB0ZXN0aW5nLCB3ZSBhcmUg
      dXNpbmcgJ0R1bW15UmFkb3MnIG9iamVjdAogICAgICAgIHNlbGYucmpPYmouY2x1c3RlciA9IER1
      bW15UmFkb3MuUmFkb3MoKQogICAgICAgIHNlbGYucmpPYmoubWFpbigpCiAgICAgICAgc2VsZi5y
      ak9iaiA9IFJhZG9zSlNPTigKICAgICAgICAgICAgWyctLXVwZ3JhZGUnLCAnLS1ydW4tYXMtdXNl
      cj1jbGllbnQuaGVhbHRoY2hlY2tlcicsICctLXJndy1wb29sLXByZWZpeD1ub25EZWZhdWx0J10p
      CiAgICAgICAgc2VsZi5yak9iai5jbHVzdGVyID0gRHVtbXlSYWRvcy5SYWRvcygpCiAgICAgICAg
      c2VsZi5hZGRfbm9uX2RlZmF1bHRfcG9vbF9wcmVmaXhfY21kKCdub25EZWZhdWx0JykKICAgICAg
      ICBzZWxmLnJqT2JqLm1haW4oKQoKICAgIGRlZiB0ZXN0X21vbml0b3JpbmdfZW5kcG9pbnRfdmFs
      aWRhdGlvbihzZWxmKToKICAgICAgICBzZWxmLnJqT2JqID0gUmFkb3NKU09OKFsnLS1yYmQtZGF0
      YS1wb29sLW5hbWU9YWJjJywgJy0tZm9ybWF0PWpzb24nXSkKICAgICAgICBzZWxmLnJqT2JqLmNs
      dXN0ZXIgPSBEdW1teVJhZG9zLlJhZG9zKCkKCiAgICAgICAgdmFsaWRfaXBfcG9ydHMgPSBbKCIx
      MC4yMi4zMS4xMzEiLCAiMzUzNCIpLAogICAgICAgICAgICAgICAgICAgICAgICAgICgiMTAuMTc3
      LjMuODEiLCAiIiksICgiIiwgIiIpLCAoIiIsICI5MDkyIildCiAgICAgICAgZm9yIGVhY2hfaXBf
      cG9ydF9wYWlyIGluIHZhbGlkX2lwX3BvcnRzOgogICAgICAgICAgICAjIHJlc2V0IG1vbml0b3Jp
      bmcgaXAgYW5kIHBvcnQKICAgICAgICAgICAgc2VsZi5yak9iai5fYXJnX3BhcnNlci5tb25pdG9y
      aW5nX2VuZHBvaW50ID0gJycKICAgICAgICAgICAgc2VsZi5yak9iai5fYXJnX3BhcnNlci5tb25p
      dG9yaW5nX2VuZHBvaW50X3BvcnQgPSAnJwogICAgICAgICAgICBuZXdfbW9uX2lwLCBuZXdfbW9u
      X3BvcnQgPSBlYWNoX2lwX3BvcnRfcGFpcgogICAgICAgICAgICBjaGVja19pcF92YWwgPSBzZWxm
      LnJqT2JqLmNsdXN0ZXIuZHVtbXlfaG9zdF9pcF9tYXAuZ2V0KAogICAgICAgICAgICAgICAgbmV3
      X21vbl9pcCwgbmV3X21vbl9pcCkKICAgICAgICAgICAgY2hlY2tfcG9ydF92YWwgPSBSYWRvc0pT
      T04uREVGQVVMVF9NT05JVE9SSU5HX0VORFBPSU5UX1BPUlQKICAgICAgICAgICAgaWYgbmV3X21v
      bl9pcDoKICAgICAgICAgICAgICAgIHNlbGYucmpPYmouX2FyZ19wYXJzZXIubW9uaXRvcmluZ19l
      bmRwb2ludCA9IG5ld19tb25faXAKICAgICAgICAgICAgaWYgbmV3X21vbl9wb3J0OgogICAgICAg
      ICAgICAgICAgY2hlY2tfcG9ydF92YWwgPSBuZXdfbW9uX3BvcnQKICAgICAgICAgICAgICAgIHNl
      bGYucmpPYmouX2FyZ19wYXJzZXIubW9uaXRvcmluZ19lbmRwb2ludF9wb3J0ID0gbmV3X21vbl9w
      b3J0CiAgICAgICAgICAgICMgZm9yIHRlc3RpbmcsIHdlIGFyZSB1c2luZyAnRHVtbXlSYWRvcycg
      b2JqZWN0CiAgICAgICAgICAgIG1vbl9pcHMsIG1vbl9wb3J0ID0gc2VsZi5yak9iai5nZXRfYWN0
      aXZlX2FuZF9zdGFuZGJ5X21ncnMoKQogICAgICAgICAgICBtb25faXAgPSBtb25faXBzLnNwbGl0
      KCIsIilbMF0KICAgICAgICAgICAgaWYgY2hlY2tfaXBfdmFsIGFuZCBjaGVja19pcF92YWwgIT0g
      bW9uX2lwOgogICAgICAgICAgICAgICAgc2VsZi5mYWlsKCJFeHBlY3RlZCBJUDoge30sIFJldHVy
      bmVkIElQOiB7fSIuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgIGNoZWNrX2lwX3ZhbCwgbW9u
      X2lwKSkKICAgICAgICAgICAgaWYgY2hlY2tfcG9ydF92YWwgYW5kIGNoZWNrX3BvcnRfdmFsICE9
      IG1vbl9wb3J0OgogICAgICAgICAgICAgICAgc2VsZi5mYWlsKCJFeHBlY3RlZCBQb3J0OiAne30n
      LCBSZXR1cm5lZCBQb3J0OiAne30nIi5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgY2hlY2tf
      cG9ydF92YWwsIG1vbl9wb3J0KSkKICAgICAgICAgICAgcHJpbnQoIk1vbklQOiB7fSwgTW9uUG9y
      dDoge30iLmZvcm1hdChtb25faXAsIG1vbl9wb3J0KSkKCiAgICAgICAgaW52YWxpZF9pcF9wb3J0
      cyA9IFsoIjEwLjIyLjMxLjEzMS40MyIsICI1MzM0IiksICgiIiwgIjkxOTQzIiksCiAgICAgICAg
      ICAgICAgICAgICAgICAgICAgICAoIjEwLjE3Ny4zLjgxIiwgIjkwMzIwIiksICgiIiwgIjczNDIy
      IiksICgiMTAuMjMyLjEyLjgiLCAiOTA5MjIiKV0KICAgICAgICBmb3IgZWFjaF9pcF9wb3J0X3Bh
      aXIgaW4gaW52YWxpZF9pcF9wb3J0czoKICAgICAgICAgICAgIyByZXNldCB0aGUgY29tbWFuZC1s
      aW5lIG1vbml0b3JpbmcgYXJncwogICAgICAgICAgICBzZWxmLnJqT2JqLl9hcmdfcGFyc2VyLm1v
      bml0b3JpbmdfZW5kcG9pbnQgPSAnJwogICAgICAgICAgICBzZWxmLnJqT2JqLl9hcmdfcGFyc2Vy
      Lm1vbml0b3JpbmdfZW5kcG9pbnRfcG9ydCA9ICcnCiAgICAgICAgICAgIG5ld19tb25faXAsIG5l
      d19tb25fcG9ydCA9IGVhY2hfaXBfcG9ydF9wYWlyCiAgICAgICAgICAgIGlmIG5ld19tb25faXA6
      CiAgICAgICAgICAgICAgICBzZWxmLnJqT2JqLl9hcmdfcGFyc2VyLm1vbml0b3JpbmdfZW5kcG9p
      bnQgPSBuZXdfbW9uX2lwCiAgICAgICAgICAgIGlmIG5ld19tb25fcG9ydDoKICAgICAgICAgICAg
      ICAgIHNlbGYucmpPYmouX2FyZ19wYXJzZXIubW9uaXRvcmluZ19lbmRwb2ludF9wb3J0ID0gbmV3
      X21vbl9wb3J0CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIG1vbl9pcCwgbW9uX3Bv
      cnQgPSBzZWxmLnJqT2JqLmdldF9hY3RpdmVfYW5kX3N0YW5kYnlfbWdycygpCiAgICAgICAgICAg
      ICAgICBwcmludCgiW1dyb25nXSBNb25JUDoge30sIE1vblBvcnQ6IHt9Ii5mb3JtYXQobW9uX2lw
      LCBtb25fcG9ydCkpCiAgICAgICAgICAgICAgICBzZWxmLmZhaWwoIkFuIGV4Y2VwdGlvbiB3YXMg
      ZXhwZWN0ZWQiKQogICAgICAgICAgICBleGNlcHQgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbiBh
      cyBlcnI6CiAgICAgICAgICAgICAgICBwcmludCgiRXhjZXB0aW9uIHRocm93biBzdWNjZXNzZnVs
      bHk6IHt9Ii5mb3JtYXQoZXJyKSkK
  name: ceph.v{{.RookOperatorCsvVersion}}
  namespace: placeholder
spec:
  apiservicedefinitions: {}
  customresourcedefinitions:
    owned:
    - kind: CephCluster
      name: cephclusters.ceph.rook.io
      version: v1
      displayName: Ceph Cluster
      description: Represents a Ceph cluster.
    - kind: CephBlockPool
      name: cephblockpools.ceph.rook.io
      version: v1
      displayName: Ceph Block Pool
      description: Represents a Ceph Block Pool.
    - kind: CephObjectStore
      name: cephobjectstores.ceph.rook.io
      version: v1
      displayName: Ceph Object Store
      description: Represents a Ceph Object Store.
      specDescriptors:
      - description: Coding Chunks
        displayName: Coding Chunks
        path: dataPool.erasureCoded.codingChunks
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:dataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: Data Chunks
        displayName: Data Chunks
        path: dataPool.erasureCoded.dataChunks
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:dataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: failureDomain
        displayName: failureDomain
        path: dataPool.failureDomain
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:dataPool
        - urn:alm:descriptor:com.tectonic.ui:text
      - description: Size
        displayName: Size
        path: dataPool.replicated.size
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:dataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: Annotations
        displayName: Annotations
        path: gateway.annotations
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:io.kubernetes:annotations
      - description: Instances
        displayName: Instances
        path: gateway.instances
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: Resources
        displayName: Resources
        path: gateway.resources
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:com.tectonic.ui:resourceRequirements
      - description: placement
        displayName: placement
        path: gateway.placement
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:io.kubernetes:placement
      - description: securePort
        displayName: securePort
        path: gateway.securePort
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:io.kubernetes:securePort
      - description: sslCertificateRef
        displayName: sslCertificateRef
        path: gateway.sslCertificateRef
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:io.kubernetes:sslCertificateRef
      - description: Type
        displayName: Type
        path: gateway.type
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:com.tectonic.ui:text
      - description: Coding Chunks
        displayName: Coding Chunks
        path: metadataPool.erasureCoded.codingChunks
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:metadataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: Data Chunks
        displayName: Data Chunks
        path: metadataPool.erasureCoded.dataChunks
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:metadataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: failureDomain
        displayName: failureDomain
        path: metadataPool.failureDomain
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:metadataPool
        - urn:alm:descriptor:com.tectonic.ui:text
      - description: Size
        displayName: Size
        path: metadataPool.replicated.size
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:metadataPool
        - urn:alm:descriptor:com.tectonic.ui:number
    - kind: CephObjectStoreUser
      name: cephobjectstoreusers.ceph.rook.io
      version: v1
      displayName: Ceph Object Store User
      description: Represents a Ceph Object Store User.
    - kind: CephNFS
      name: cephnfses.ceph.rook.io
      version: v1
      displayName: Ceph NFS
      description: Represents a cluster of Ceph NFS ganesha gateways.
    - kind: CephClient
      name: cephclients.ceph.rook.io
      version: v1
      displayName: Ceph Client
      description: Represents a Ceph User.
    - kind: CephFilesystem
      name: cephfilesystems.ceph.rook.io
      version: v1
      displayName: Ceph Filesystem
      description: Represents a Ceph Filesystem.
    - kind: CephFilesystemMirror
      name: cephfilesystemmirrors.ceph.rook.io
      version: v1
      displayName: Ceph Filesystem Mirror
      description: Represents a Ceph Filesystem Mirror.
    - kind: CephRBDMirror
      name: cephrbdmirrors.ceph.rook.io
      version: v1
      displayName: Ceph RBD Mirror
      description: Represents a Ceph RBD Mirror.
    - kind: CephObjectRealm
      name: cephobjectrealms.ceph.rook.io
      version: v1
      displayName: Ceph Object Store Realm
      description: Represents a Ceph Object Store Realm.
    - kind: CephObjectZoneGroup
      name: cephobjectzonegroups.ceph.rook.io
      version: v1
      displayName: Ceph Object Store Zone Group
      description: Represents a Ceph Object Store Zone Group.
    - kind: CephObjectZone
      name: cephobjectzones.ceph.rook.io
      version: v1
      displayName: Ceph Object Store Zone
      description: Represents a Ceph Object Store Zone.
    - kind: VolumeReplicationClass
      name: volumereplicationclasses.replication.storage.openshift.io
      version: v1alpha1
    - kind: VolumeReplication
      name: volumereplications.replication.storage.openshift.io
      version: v1alpha1
  displayName: Rook-Ceph
  icon:
  - base64data: PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMiwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA3MCA3MCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNzAgNzA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojMkIyQjJCO30KPC9zdHlsZT4KPGc+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTUwLjUsNjcuNkgxOS45Yy04LDAtMTQuNS02LjUtMTQuNS0xNC41VjI5LjJjMC0xLjEsMC45LTIuMSwyLjEtMi4xaDU1LjRjMS4xLDAsMi4xLDAuOSwyLjEsMi4xdjIzLjkKCQkJCUM2NSw2MS4xLDU4LjUsNjcuNiw1MC41LDY3LjZ6IE05LjYsMzEuMnYyMS45YzAsNS43LDQuNiwxMC4zLDEwLjMsMTAuM2gzMC42YzUuNywwLDEwLjMtNC42LDEwLjMtMTAuM1YzMS4ySDkuNnoiLz4KCQk8L2c+CgkJPGc+CgkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00Mi40LDU2LjdIMjhjLTEuMSwwLTIuMS0wLjktMi4xLTIuMXYtNy4yYzAtNS4xLDQuMi05LjMsOS4zLTkuM3M5LjMsNC4yLDkuMyw5LjN2Ny4yCgkJCQlDNDQuNSw1NS43LDQzLjYsNTYuNyw0Mi40LDU2Ljd6IE0zMCw1Mi41aDEwLjN2LTUuMmMwLTIuOS0yLjMtNS4yLTUuMi01LjJjLTIuOSwwLTUuMiwyLjMtNS4yLDUuMlY1Mi41eiIvPgoJCTwvZz4KCQk8Zz4KCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTYyLjksMjMuMkM2Mi45LDIzLjIsNjIuOSwyMy4yLDYyLjksMjMuMmwtMTEuMSwwYy0xLjEsMC0yLjEtMC45LTIuMS0yLjFjMC0xLjEsMC45LTIuMSwyLjEtMi4xCgkJCQljMCwwLDAsMCwwLDBsOS4xLDBWNi43aC02Ljl2My41YzAsMC41LTAuMiwxLjEtMC42LDEuNWMtMC40LDAuNC0wLjksMC42LTEuNSwwLjZsMCwwbC0xMS4xLDBjLTEuMSwwLTIuMS0wLjktMi4xLTIuMVY2LjdoLTYuOQoJCQkJdjMuNWMwLDEuMS0wLjksMi4xLTIuMSwyLjFsLTExLjEsMGMtMC41LDAtMS4xLTAuMi0xLjUtMC42Yy0wLjQtMC40LTAuNi0wLjktMC42LTEuNVY2LjdIOS42djEyLjRoOWMxLjEsMCwyLjEsMC45LDIuMSwyLjEKCQkJCXMtMC45LDIuMS0yLjEsMi4xaC0xMWMtMS4xLDAtMi4xLTAuOS0yLjEtMi4xVjQuNmMwLTEuMSwwLjktMi4xLDIuMS0yLjFoMTEuMWMxLjEsMCwyLjEsMC45LDIuMSwyLjF2My41bDcsMFY0LjYKCQkJCWMwLTEuMSwwLjktMi4xLDIuMS0yLjFoMTEuMWMxLjEsMCwyLjEsMC45LDIuMSwyLjF2My41bDYuOSwwVjQuNmMwLTEuMSwwLjktMi4xLDIuMS0yLjFoMTEuMUM2NCwyLjYsNjUsMy41LDY1LDQuNnYxNi41CgkJCQljMCwwLjUtMC4yLDEuMS0wLjYsMS41QzY0LDIzLDYzLjQsMjMuMiw2Mi45LDIzLjJ6Ii8+CgkJPC9nPgoJPC9nPgo8L2c+Cjwvc3ZnPg==
    mediatype: image/svg+xml
  install:
    spec:
      clusterPermissions:
      - rules:
        - apiGroups:
          - ceph.rook.io
          resources:
          - '*'
          verbs:
          - get
          - watch
          - list
        serviceAccountName: rook-ceph-admission-controller-role
      - rules:
        - apiGroups:
          - ""
          - apps
          - extensions
          resources:
          - secrets
          - pods
          - pods/log
          - services
          - configmaps
          - deployments
          - daemonsets
          verbs:
          - get
          - list
          - watch
          - patch
          - create
          - update
          - delete
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - pods/log
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - pods/exec
          verbs:
          - create
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - nodes
          - nodes/proxy
          - services
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - events
          - persistentvolumes
          - persistentvolumeclaims
          - endpoints
          verbs:
          - get
          - list
          - watch
          - patch
          - create
          - update
          - delete
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - batch
          resources:
          - jobs
          - cronjobs
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - ceph.rook.io
          resources:
          - '*'
          verbs:
          - '*'
        - apiGroups:
          - rook.io
          resources:
          - '*'
          verbs:
          - '*'
        - apiGroups:
          - policy
          - apps
          - extensions
          resources:
          - poddisruptionbudgets
          - deployments
          - replicasets
          verbs:
          - '*'
        - apiGroups:
          - healthchecking.openshift.io
          resources:
          - machinedisruptionbudgets
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - machine.openshift.io
          resources:
          - machines
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - storage.k8s.io
          resources:
          - csidrivers
          verbs:
          - create
          - delete
          - get
          - update
        - apiGroups:
          - k8s.cni.cncf.io
          resources:
          - network-attachment-definitions
          verbs:
          - get
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - ""
          resources:
          - configmaps
          - nodes
          - nodes/proxy
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - events
          verbs:
          - create
          - patch
          - list
          - get
          - watch
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        serviceAccountName: rook-ceph-mgr
      - rules:
        - apiGroups:
          - ""
          resources:
          - secrets
          - configmaps
          verbs:
          - '*'
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - objectbucket.io
          resources:
          - '*'
          verbs:
          - '*'
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
        serviceAccountName: rook-ceph-osd
      - rules:
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
          - watch
        serviceAccountName: rook-ceph-mgr
      - rules:
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
          - update
        - apiGroups:
          - ""
          resources:
          - namespaces
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
        serviceAccountName: rook-csi-cephfs-plugin-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - secrets
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
          - create
          - delete
          - update
          - patch
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - events
          verbs:
          - list
          - watch
          - create
          - update
          - patch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshots
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotcontents
          verbs:
          - create
          - get
          - list
          - watch
          - update
          - delete
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotcontents/status
          verbs:
          - update
        - apiGroups:
          - apiextensions.k8s.io
          resources:
          - customresourcedefinitions
          verbs:
          - create
          - list
          - watch
          - delete
          - get
          - update
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshots/status
          verbs:
          - update
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments
          verbs:
          - get
          - list
          - watch
          - update
          - patch
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments/status
          verbs:
          - patch
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims/status
          verbs:
          - update
          - patch
        serviceAccountName: rook-csi-cephfs-provisioner-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - secrets
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
          - update
        - apiGroups:
          - ""
          resources:
          - namespaces
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - serviceaccounts
          verbs:
          - get
        serviceAccountName: rook-csi-rbd-plugin-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - secrets
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
          - create
          - delete
          - update
          - patch
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments
          verbs:
          - get
          - list
          - watch
          - update
          - patch
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments/status
          verbs:
          - patch
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - events
          verbs:
          - list
          - watch
          - create
          - update
          - patch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshots
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotcontents
          verbs:
          - create
          - get
          - list
          - watch
          - update
          - delete
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotcontents/status
          verbs:
          - update
        - apiGroups:
          - apiextensions.k8s.io
          resources:
          - customresourcedefinitions
          verbs:
          - create
          - list
          - watch
          - delete
          - get
          - update
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshots/status
          verbs:
          - update
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims/status
          verbs:
          - update
          - patch
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
        - apiGroups:
          - replication.storage.openshift.io
          resources:
          - volumereplications
          - volumereplicationclasses
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - replication.storage.openshift.io
          resources:
          - volumereplications/finalizers
          verbs:
          - update
        - apiGroups:
          - replication.storage.openshift.io
          resources:
          - volumereplications/status
          verbs:
          - get
          - patch
          - update
        - apiGroups:
          - replication.storage.openshift.io
          resources:
          - volumereplicationclasses/status
          verbs:
          - get
        - apiGroups:
          - ""
          resources:
          - serviceaccounts
          verbs:
          - get
        serviceAccountName: rook-csi-rbd-provisioner-sa
      - rules:
        - verbs:
          - use
          apiGroups:
          - security.openshift.io
          resources:
          - securitycontextconstraints
          resourceNames:
          - privileged
        serviceAccountName: rook-ceph-system
      deployments:
      - name: rook-ceph-operator
        spec:
          replicas: 1
          selector:
            matchLabels:
              app: rook-ceph-operator
          strategy: {}
          template:
            metadata:
              labels:
                app: rook-ceph-operator
            spec:
              containers:
              - args:
                - ceph
                - operator
                env:
                - name: ROOK_CURRENT_NAMESPACE_ONLY
                  value: "false"
                - name: FLEXVOLUME_DIR_PATH
                  value: /etc/kubernetes/kubelet-plugins/volume/exec
                - name: ROOK_DISCOVER_DEVICES_INTERVAL
                  value: 60m
                - name: ROOK_HOSTPATH_REQUIRES_PRIVILEGED
                  value: "true"
                - name: ROOK_ENABLE_SELINUX_RELABELING
                  value: "true"
                - name: ROOK_ENABLE_FSGROUP
                  value: "true"
                - name: ROOK_DISABLE_DEVICE_HOTPLUG
                  value: "false"
                - name: DISCOVER_DAEMON_UDEV_BLACKLIST
                  value: (?i)dm-[0-9]+,(?i)rbd[0-9]+,(?i)nbd[0-9]+
                - name: ROOK_ENABLE_MACHINE_DISRUPTION_BUDGET
                  value: "false"
                - name: ROOK_UNREACHABLE_NODE_TOLERATION_SECONDS
                  value: "5"
                - name: NODE_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: spec.nodeName
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
                - name: POD_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                image: '{{.RookOperatorImage}}'
                name: rook-ceph-operator
                resources: {}
                volumeMounts:
                - mountPath: /var/lib/rook
                  name: rook-config
                - mountPath: /etc/ceph
                  name: default-config-dir
              serviceAccountName: rook-ceph-system
              volumes:
              - emptyDir: {}
                name: rook-config
              - emptyDir: {}
                name: default-config-dir
      permissions:
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - configmaps
          - services
          verbs:
          - get
          - list
          - watch
          - patch
          - create
          - update
          - delete
        - apiGroups:
          - apps
          - extensions
          resources:
          - daemonsets
          - statefulsets
          - deployments
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - batch
          resources:
          - cronjobs
          verbs:
          - delete
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - ceph.rook.io
          resources:
          - cephclusters
          - cephclusters/finalizers
          verbs:
          - get
          - list
          - create
          - update
          - delete
        serviceAccountName: rook-ceph-osd
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - services
          - pods/log
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - batch
          resources:
          - jobs
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - ceph.rook.io
          resources:
          - '*'
          verbs:
          - '*'
        - apiGroups:
          - apps
          resources:
          - deployments/scale
          - deployments
          verbs:
          - patch
          - delete
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims
          verbs:
          - delete
        serviceAccountName: rook-ceph-mgr
      - rules:
        - apiGroups:
          - ""
          resources:
          - endpoints
          verbs:
          - get
          - watch
          - list
          - delete
          - update
          - create
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
          - create
          - delete
        - apiGroups:
          - coordination.k8s.io
          resources:
          - leases
          verbs:
          - get
          - watch
          - list
          - delete
          - update
          - create
        serviceAccountName: rook-csi-cephfs-provisioner-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - endpoints
          verbs:
          - get
          - watch
          - list
          - delete
          - update
          - create
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
          - watch
          - create
          - delete
          - update
        - apiGroups:
          - coordination.k8s.io
          resources:
          - leases
          verbs:
          - get
          - watch
          - list
          - delete
          - update
          - create
        serviceAccountName: rook-csi-rbd-provisioner-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - configmaps
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        serviceAccountName: rook-ceph-cmd-reporter
    strategy: deployment
  installModes:
  - type: OwnNamespace
    supported: true
  - type: SingleNamespace
    supported: true
  - type: MultiNamespace
    supported: false
  - type: AllNamespaces
    supported: false
  keywords:
  - rook
  - ceph
  - storage
  - object storage
  - open source
  - block storage
  - shared filesystem
  maintainers:
  - name: Red Hat, Inc.
    email: customerservice@redhat.com
  maturity: alpha
  provider:
    name: Red Hat, Inc.
  version: {{.RookOperatorCsvVersion}}
  replaces: rook-ceph.v1.1.1
  description: |2

    The Rook-Ceph storage operator packages, deploys, manages, upgrades and scales Ceph storage for providing persistent storage to infrastructure services (Logging, Metrics, Registry) as well as stateful applications in Kubernetes clusters.

    ## Rook-Ceph Storage Operator

    Rook runs as a cloud-native service in Kubernetes clusters for optimal integration with applications in need of storage, and handles the heavy-lifting behind the scenes such as provisioning and management.
    Rook orchestrates battle-tested open-source storage technology Ceph, which has years of production deployments and runs some of the worlds largest clusters.

    Ceph is a massively scalable, software-defined, cloud native storage platform that offers block, file and object storage services.
    Ceph can be used to back a wide variety of applications including relational databases, NoSQL databases, CI/CD tool-sets, messaging, AI/ML and analytics applications.
    Ceph is a proven storage platform that backs some of the world's largest storage deployments and has a large vibrant open source community backing the project.

    ## Supported features
    * **High Availability and resiliency** - Ceph has no single point of failures (SPOF) and all its components work natively in a highly available fashion
    * **Data Protection** - Ceph periodically scrub for inconsistent objects and repair them if necessary, making sure your replicas are always coherent
    * **Consistent storage platform across hybrid cloud** - Ceph can be deployed anywhere (on-premise or bare metal) and thus offers a similar experience regardless
    * **Block, File & Object storage service** - Ceph can expose your data through several storage interfaces, solving all the application use cases
    * **Scale up/down** - addition and removal of storage is fully covered by the operator.
    * **Dashboard** - The Operator deploys a dashboard for monitoring and introspecting your cluster.

    ## Before you start
    https://rook.io/docs/rook/v1.0/k8s-pre-reqs.html
  minKubeVersion: 1.10.0
  labels:
    alm-owner-etcd: rookoperator
    operated-by: rookoperator
  selector:
    matchLabels:
      alm-owner-etcd: rookoperator
      operated-by: rookoperator
  links:
  - name: Blog
    url: https://blog.rook.io
  - name: Documentation
    url: https://rook.github.io/docs/rook/v1.0/
