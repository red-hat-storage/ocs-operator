apiVersion: operators.coreos.com/v1alpha1
kind: ClusterServiceVersion
metadata:
  annotations:
    alm-examples: |-
      [
        {
          "apiVersion": "ceph.rook.io/v1",
          "kind": "CephCluster",
          "metadata": {
            "name": "my-rook-ceph",
            "namespace": "my-rook-ceph"
          },
          "spec": {
            "cephVersion": {
              "image": "ceph/ceph:v15.2.7"
            },
            "dataDirHostPath": "/var/lib/rook",
            "mon": {
              "count": 3
            },
            "dashboard": {
              "enabled": true
            },
            "network": {
              "hostNetwork": false
            },
            "rbdMirroring": {
              "workers": 0
            },
            "storage": {
              "useAllNodes": true,
              "useAllDevices": true
            }
          }
        },
        {
          "apiVersion": "ceph.rook.io/v1",
          "kind": "CephBlockPool",
          "metadata": {
            "name": "replicapool",
            "namespace": "my-rook-ceph"
          },
          "spec": {
            "failureDomain": "host",
            "replicated": {
              "size": 3
            },
            "annotations": null
          }
        },
        {
          "apiVersion": "ceph.rook.io/v1",
          "kind": "CephObjectStore",
          "metadata": {
            "name": "my-store",
            "namespace": "my-rook-ceph"
          },
          "spec": {
            "metadataPool": {
              "failureDomain": "host",
              "replicated": {
                "size": 3
              }
            },
            "dataPool": {
              "failureDomain": "host",
              "replicated": {
                "size": 3
              }
            },
            "gateway": {
              "type": "s3",
              "sslCertificateRef": null,
              "port": 8080,
              "securePort": null,
              "instances": 1,
              "placement": null,
              "annotations": null,
              "resources": null
            }
          }
        },
        {
          "apiVersion": "ceph.rook.io/v1",
          "kind": "CephObjectStoreUser",
          "metadata": {
            "name": "my-user",
            "namespace": "my-rook-ceph"
          },
          "spec": {
            "store": "my-store",
            "displayName": "my display name"
          }
        },
        {
          "apiVersion": "ceph.rook.io/v1",
          "kind": "CephNFS",
          "metadata": {
            "name": "my-nfs",
            "namespace": "rook-ceph"
          },
          "spec": {
            "rados": {
              "pool": "myfs-data0",
              "namespace": "nfs-ns"
            },
            "server": {
              "active": 3,
              "placement": null,
              "annotations": null,
              "resources": null
            }
          }
        },
        {
          "apiVersion": "ceph.rook.io/v1",
          "kind": "CephClient",
          "metadata": {
            "name": "cinder",
            "namespace": "rook-ceph"
          },
          "spec": {
            "caps": {
              "mon": "profile rbd",
              "osd": "profile rbd pool=volumes, profile rbd pool=vms, profile rbd-read-only pool=images"
            }
          }
        },
        {
          "apiVersion": "ceph.rook.io/v1",
          "kind": "CephFilesystem",
          "metadata": {
            "name": "myfs",
            "namespace": "rook-ceph"
          },
          "spec": {
            "dataPools": [
              {
                "compressionMode": "",
                "crushRoot": "",
                "deviceClass": "",
                "erasureCoded": {
                  "algorithm": "",
                  "codingChunks": 0,
                  "dataChunks": 0
                },
                "failureDomain": "host",
                "replicated": {
                  "requireSafeReplicaSize": false,
                  "size": 1,
                  "targetSizeRatio": 0.5
                }
              }
            ],
            "metadataPool": {
              "compressionMode": "",
              "crushRoot": "",
              "deviceClass": "",
              "erasureCoded": {
                "algorithm": "",
                "codingChunks": 0,
                "dataChunks": 0
              },
              "failureDomain": "",
              "replicated": {
                "requireSafeReplicaSize": false,
                "size": 1,
                "targetSizeRatio": 0
              }
            },
            "metadataServer": {
              "activeCount": 1,
              "activeStandby": true,
              "placement": {},
              "resources": {}
            },
            "preservePoolsOnDelete": false,
            "preserveFilesystemOnDelete": false
          }
        },
        {
          "apiVersion": "ceph.rook.io/v1",
          "kind": "CephRBDMirror",
          "metadata": {
            "name": "my-rbd-mirror",
            "namespace": "rook-ceph"
          },
          "spec": {
            "annotations": null,
            "count": 1,
            "placement": {
              "topologyKey": "kubernetes.io/hostname"
            },
            "resources": null
          }
        }
      ]
    capabilities: Basic Install
    tectonic-visibility: ocs
    repository: https://github.com/rook/rook
    containerImage: '{{.RookOperatorImage}}'
    externalClusterScript: |-
      JycnCkNvcHlyaWdodCAyMDIwIFRoZSBSb29rIEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQu
      CgpMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxp
      Y2Vuc2UiKTsKeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3
      aXRoIHRoZSBMaWNlbnNlLgpZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQK
      CglodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKClVubGVzcyByZXF1
      aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUK
      ZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElT
      IiBCQVNJUywKV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVp
      dGhlciBleHByZXNzIG9yIGltcGxpZWQuClNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmlj
      IGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKbGltaXRhdGlvbnMgdW5kZXIgdGhl
      IExpY2Vuc2UuCicnJwoKaW1wb3J0IHN5cwppbXBvcnQganNvbgppbXBvcnQgYXJncGFyc2UKaW1w
      b3J0IHVuaXR0ZXN0CmltcG9ydCByZQppbXBvcnQgcmVxdWVzdHMKZnJvbSBvcyBpbXBvcnQgbGlu
      ZXNlcCBhcyBMSU5FU0VQCgojIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgd2l0aCAyLngKdHJ5Ogog
      ICAgTW9kdWxlTm90Rm91bmRFcnJvcgpleGNlcHQ6CiAgICBNb2R1bGVOb3RGb3VuZEVycm9yID0g
      SW1wb3J0RXJyb3IKCnRyeToKICAgIGltcG9ydCByYWRvcwpleGNlcHQgTW9kdWxlTm90Rm91bmRF
      cnJvciBhcyBub01vZEVycjoKICAgIHByaW50KCJFcnJvcjogJXNcbkV4aXRpbmcgdGhlIHNjcmlw
      dC4uLiIgJSBub01vZEVycikKICAgIHN5cy5leGl0KDEpCgp0cnk6CiAgICAjIGZvciAyLjcueAog
      ICAgZnJvbSBTdHJpbmdJTyBpbXBvcnQgU3RyaW5nSU8KZXhjZXB0IE1vZHVsZU5vdEZvdW5kRXJy
      b3I6CiAgICAjIGZvciAzLngKICAgIGZyb20gaW8gaW1wb3J0IFN0cmluZ0lPCgp0cnk6CiAgICAj
      IGZvciAyLjcueAogICAgZnJvbSB1cmxwYXJzZSBpbXBvcnQgdXJscGFyc2UKZXhjZXB0IE1vZHVs
      ZU5vdEZvdW5kRXJyb3I6CiAgICAjIGZvciAzLngKICAgIGZyb20gdXJsbGliLnBhcnNlIGltcG9y
      dCB1cmxwYXJzZQoKCmNsYXNzIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oRXhjZXB0aW9uKToK
      ICAgIHBhc3MKCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
      IwojIyMjIyMjIyMjIyMjIyMjIyMgRHVtbXlSYWRvcyAjIyMjIyMjIyMjIyMjIyMjIyMKIyMjIyMj
      IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMgdGhpcyBpcyBtYWlu
      bHkgZm9yIHRlc3RpbmcgYW5kIGNvdWxkIGJlIHVzZWQgd2hlcmUgJ3JhZG9zJyBpcyBub3QgYXZh
      aWxhYmxlCgoKY2xhc3MgRHVtbXlSYWRvcyhvYmplY3QpOgogICAgZGVmIF9faW5pdF9fKHNlbGYp
      OgogICAgICAgIHNlbGYucmV0dXJuX3ZhbCA9IDAKICAgICAgICBzZWxmLmVycl9tZXNzYWdlID0g
      JycKICAgICAgICBzZWxmLnN0YXRlID0gJ2Nvbm5lY3RlZCcKICAgICAgICBzZWxmLmNtZF9vdXRw
      dXRfbWFwID0ge30KICAgICAgICBzZWxmLmNtZF9uYW1lcyA9IHt9CiAgICAgICAgc2VsZi5faW5p
      dF9jbWRfb3V0cHV0X21hcCgpCiAgICAgICAgc2VsZi5kdW1teV9ob3N0X2lwX21hcCA9IHt9Cgog
      ICAgZGVmIF9pbml0X2NtZF9vdXRwdXRfbWFwKHNlbGYpOgogICAgICAgIHNlbGYuY21kX25hbWVz
      WydmcyBscyddID0gJycneyJmb3JtYXQiOiAianNvbiIsICJwcmVmaXgiOiAiZnMgbHMifScnJwog
      ICAgICAgIHNlbGYuY21kX25hbWVzWydxdW9ydW1fc3RhdHVzJ10gPSAnJyd7ImZvcm1hdCI6ICJq
      c29uIiwgInByZWZpeCI6ICJxdW9ydW1fc3RhdHVzIn0nJycKICAgICAgICBzZWxmLmNtZF9uYW1l
      c1snY2Fwc19jaGFuZ2VfZGVmYXVsdF9wb29sX3ByZWZpeCddID0gJycneyJjYXBzIjogWyJtb24i
      LCAiYWxsb3cgciwgYWxsb3cgY29tbWFuZCBxdW9ydW1fc3RhdHVzLCBhbGxvdyBjb21tYW5kIHZl
      cnNpb24iLCAibWdyIiwgImFsbG93IGNvbW1hbmQgY29uZmlnIiwgIm9zZCIsICJhbGxvdyByd3gg
      cG9vbD1kZWZhdWx0LnJndy5tZXRhLCBhbGxvdyByIHBvb2w9LnJndy5yb290LCBhbGxvdyBydyBw
      b29sPWRlZmF1bHQucmd3LmNvbnRyb2wsIGFsbG93IHJ4IHBvb2w9ZGVmYXVsdC5yZ3cubG9nLCBh
      bGxvdyB4IHBvb2w9ZGVmYXVsdC5yZ3cuYnVja2V0cy5pbmRleCJdLCAiZW50aXR5IjogImNsaWVu
      dC5oZWFsdGhjaGVja2VyIiwgImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJhdXRoIGNhcHMi
      fScnJwogICAgICAgICMgYWxsIHRoZSBjb21tYW5kcyBhbmQgdGhlaXIgb3V0cHV0CiAgICAgICAg
      c2VsZi5jbWRfb3V0cHV0X21hcFtzZWxmLmNtZF9uYW1lc1snZnMgbHMnXQogICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgXSA9ICcnJ1t7Im5hbWUiOiJteWZzIiwibWV0YWRhdGFfcG9vbCI6Im15
      ZnMtbWV0YWRhdGEiLCJtZXRhZGF0YV9wb29sX2lkIjoyLCJkYXRhX3Bvb2xfaWRzIjpbM10sImRh
      dGFfcG9vbHMiOlsibXlmcy1kYXRhMCJdfV0nJycKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFw
      W3NlbGYuY21kX25hbWVzWydxdW9ydW1fc3RhdHVzJ11dID0gJycneyJlbGVjdGlvbl9lcG9jaCI6
      MywicXVvcnVtIjpbMF0sInF1b3J1bV9uYW1lcyI6WyJhIl0sInF1b3J1bV9sZWFkZXJfbmFtZSI6
      ImEiLCJxdW9ydW1fYWdlIjoxNDM4NSwiZmVhdHVyZXMiOnsicXVvcnVtX2NvbiI6IjQ1NDAxMzgy
      OTI4MzY2OTYwNjMiLCJxdW9ydW1fbW9uIjpbImtyYWtlbiIsImx1bWlub3VzIiwibWltaWMiLCJv
      c2RtYXAtcHJ1bmUiLCJuYXV0aWx1cyIsIm9jdG9wdXMiXX0sIm1vbm1hcCI6eyJlcG9jaCI6MSwi
      ZnNpZCI6ImFmNGUxNjczLTBiNzItNDAyZC05OTBhLTIyZDI5MTlkMGYxYyIsIm1vZGlmaWVkIjoi
      MjAyMC0wNS0wN1QwMzozNjozOS45MTgwMzVaIiwiY3JlYXRlZCI6IjIwMjAtMDUtMDdUMDM6MzY6
      MzkuOTE4MDM1WiIsIm1pbl9tb25fcmVsZWFzZSI6MTUsIm1pbl9tb25fcmVsZWFzZV9uYW1lIjoi
      b2N0b3B1cyIsImZlYXR1cmVzIjp7InBlcnNpc3RlbnQiOlsia3Jha2VuIiwibHVtaW5vdXMiLCJt
      aW1pYyIsIm9zZG1hcC1wcnVuZSIsIm5hdXRpbHVzIiwib2N0b3B1cyJdLCJvcHRpb25hbCI6W119
      LCJtb25zIjpbeyJyYW5rIjowLCJuYW1lIjoiYSIsInB1YmxpY19hZGRycyI6eyJhZGRydmVjIjpb
      eyJ0eXBlIjoidjIiLCJhZGRyIjoiMTAuMTEwLjIwNS4xNzQ6MzMwMCIsIm5vbmNlIjowfSx7InR5
      cGUiOiJ2MSIsImFkZHIiOiIxMC4xMTAuMjA1LjE3NDo2Nzg5Iiwibm9uY2UiOjB9XX0sImFkZHIi
      OiIxMC4xMTAuMjA1LjE3NDo2Nzg5LzAiLCJwdWJsaWNfYWRkciI6IjEwLjExMC4yMDUuMTc0OjY3
      ODkvMCIsInByaW9yaXR5IjowLCJ3ZWlnaHQiOjB9XX19JycnCiAgICAgICAgc2VsZi5jbWRfb3V0
      cHV0X21hcFsnJyd7ImNhcHMiOiBbIm1vbiIsICJhbGxvdyByLCBhbGxvdyBjb21tYW5kIHF1b3J1
      bV9zdGF0dXMiLCAib3NkIiwgImFsbG93IHJ3eCBwb29sPWRlZmF1bHQucmd3Lm1ldGEsIGFsbG93
      IHIgcG9vbD0ucmd3LnJvb3QsIGFsbG93IHJ3IHBvb2w9ZGVmYXVsdC5yZ3cuY29udHJvbCwgYWxs
      b3cgeCBwb29sPWRlZmF1bHQucmd3LmJ1Y2tldHMuaW5kZXgiXSwgImVudGl0eSI6ICJjbGllbnQu
      aGVhbHRoY2hlY2tlciIsICJmb3JtYXQiOiAianNvbiIsICJwcmVmaXgiOiAiYXV0aCBnZXQtb3It
      Y3JlYXRlIn0nJyddID0gJycnW3siZW50aXR5IjoiY2xpZW50LmhlYWx0aGNoZWNrZXIiLCJrZXki
      OiJBUURGa2JOZWZ0NWJGUkFBVG5kTE5VU0VLcnVvenhpWmkzbHJkQT09IiwiY2FwcyI6eyJtb24i
      OiJhbGxvdyByLCBhbGxvdyBjb21tYW5kIHF1b3J1bV9zdGF0dXMiLCJvc2QiOiJhbGxvdyByd3gg
      cG9vbD1kZWZhdWx0LnJndy5tZXRhLCBhbGxvdyByIHBvb2w9LnJndy5yb290LCBhbGxvdyBydyBw
      b29sPWRlZmF1bHQucmd3LmNvbnRyb2wsIGFsbG93IHggcG9vbD1kZWZhdWx0LnJndy5idWNrZXRz
      LmluZGV4In19XScnJwogICAgICAgIHNlbGYuY21kX291dHB1dF9tYXBbJycneyJjYXBzIjogWyJt
      b24iLCAicHJvZmlsZSByYmQiLCAib3NkIiwgInByb2ZpbGUgcmJkIl0sICJlbnRpdHkiOiAiY2xp
      ZW50LmNzaS1yYmQtbm9kZSIsICJmb3JtYXQiOiAianNvbiIsICJwcmVmaXgiOiAiYXV0aCBnZXQt
      b3ItY3JlYXRlIn0nJyddID0gJycnW3siZW50aXR5IjoiY2xpZW50LmNzaS1yYmQtbm9kZSIsImtl
      eSI6IkFRQk9nck5lSGJLMUF4QUF1YllCZVY4UzFVL0dQenE1U1ZlcTZnPT0iLCJjYXBzIjp7Im1v
      biI6InByb2ZpbGUgcmJkIiwib3NkIjoicHJvZmlsZSByYmQifX1dJycnCiAgICAgICAgc2VsZi5j
      bWRfb3V0cHV0X21hcFsnJyd7ImNhcHMiOiBbIm1vbiIsICJwcm9maWxlIHJiZCIsICJtZ3IiLCAi
      YWxsb3cgcnciLCAib3NkIiwgInByb2ZpbGUgcmJkIl0sICJlbnRpdHkiOiAiY2xpZW50LmNzaS1y
      YmQtcHJvdmlzaW9uZXIiLCAiZm9ybWF0IjogImpzb24iLCAicHJlZml4IjogImF1dGggZ2V0LW9y
      LWNyZWF0ZSJ9JycnXSA9ICcnJ1t7ImVudGl0eSI6ImNsaWVudC5jc2ktcmJkLXByb3Zpc2lvbmVy
      Iiwia2V5IjoiQVFCTmdyTmUxZ2V5S3hBQThla1ZpUmRFK2hzczVPd2VZQmt3Tmc9PSIsImNhcHMi
      OnsibWdyIjoiYWxsb3cgcnciLCJtb24iOiJwcm9maWxlIHJiZCIsIm9zZCI6InByb2ZpbGUgcmJk
      In19XScnJwogICAgICAgIHNlbGYuY21kX291dHB1dF9tYXBbJycneyJjYXBzIjogWyJtb24iLCAi
      YWxsb3cgciIsICJtZ3IiLCAiYWxsb3cgcnciLCAib3NkIiwgImFsbG93IHJ3IHRhZyBjZXBoZnMg
      Kj0qIiwgIm1kcyIsICJhbGxvdyBydyJdLCAiZW50aXR5IjogImNsaWVudC5jc2ktY2VwaGZzLW5v
      ZGUiLCAiZm9ybWF0IjogImpzb24iLCAicHJlZml4IjogImF1dGggZ2V0LW9yLWNyZWF0ZSJ9Jycn
      XSA9ICcnJ1t7ImVudGl0eSI6ImNsaWVudC5jc2ktY2VwaGZzLW5vZGUiLCJrZXkiOiJBUUJPZ3JO
      ZUVOdW5LeEFBUENtZ0U3UjZHOERjWG5hSjFGMzJxZz09IiwiY2FwcyI6eyJtZHMiOiJhbGxvdyBy
      dyIsIm1nciI6ImFsbG93IHJ3IiwibW9uIjoiYWxsb3cgciIsIm9zZCI6ImFsbG93IHJ3IHRhZyBj
      ZXBoZnMgKj0qIn19XScnJwogICAgICAgIHNlbGYuY21kX291dHB1dF9tYXBbJycneyJjYXBzIjog
      WyJtb24iLCAiYWxsb3cgciIsICJtZ3IiLCAiYWxsb3cgcnciLCAib3NkIiwgImFsbG93IHJ3IHRh
      ZyBjZXBoZnMgbWV0YWRhdGE9KiJdLCAiZW50aXR5IjogImNsaWVudC5jc2ktY2VwaGZzLXByb3Zp
      c2lvbmVyIiwgImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJhdXRoIGdldC1vci1jcmVhdGUi
      fScnJ10gPSAnJydbeyJlbnRpdHkiOiJjbGllbnQuY3NpLWNlcGhmcy1wcm92aXNpb25lciIsImtl
      eSI6IkFRQk9nck5lQUZnY0dCQUF2R3FLT0FEMEQzeHhtVlkwUjkxMmRnPT0iLCJjYXBzIjp7Im1n
      ciI6ImFsbG93IHJ3IiwibW9uIjoiYWxsb3cgciIsIm9zZCI6ImFsbG93IHJ3IHRhZyBjZXBoZnMg
      bWV0YWRhdGE9KiJ9fV0nJycKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWycnJ3siY2FwcyI6
      IFsibW9uIiwgImFsbG93IHIsIGFsbG93IGNvbW1hbmQgcXVvcnVtX3N0YXR1cywgYWxsb3cgY29t
      bWFuZCB2ZXJzaW9uIiwgIm1nciIsICJhbGxvdyBjb21tYW5kIGNvbmZpZyIsICJvc2QiLCAiYWxs
      b3cgcnd4IHBvb2w9ZGVmYXVsdC5yZ3cubWV0YSwgYWxsb3cgciBwb29sPS5yZ3cucm9vdCwgYWxs
      b3cgcncgcG9vbD1kZWZhdWx0LnJndy5jb250cm9sLCBhbGxvdyByeCBwb29sPWRlZmF1bHQucmd3
      LmxvZywgYWxsb3cgeCBwb29sPWRlZmF1bHQucmd3LmJ1Y2tldHMuaW5kZXgiXSwgImVudGl0eSI6
      ICJjbGllbnQuaGVhbHRoY2hlY2tlciIsICJmb3JtYXQiOiAianNvbiIsICJwcmVmaXgiOiAiYXV0
      aCBnZXQtb3ItY3JlYXRlIn0nJyddID0gJycnW3siZW50aXR5IjoiY2xpZW50LmhlYWx0aGNoZWNr
      ZXIiLCJrZXkiOiJBUURGa2JOZWZ0NWJGUkFBVG5kTE5VU0VLcnVvenhpWmkzbHJkQT09IiwiY2Fw
      cyI6eyJtb24iOiAiYWxsb3cgciwgYWxsb3cgY29tbWFuZCBxdW9ydW1fc3RhdHVzLCBhbGxvdyBj
      b21tYW5kIHZlcnNpb24iLCAibWdyIjogImFsbG93IGNvbW1hbmQgY29uZmlnIiwgIm9zZCI6ICJh
      bGxvdyByd3ggcG9vbD1kZWZhdWx0LnJndy5tZXRhLCBhbGxvdyByIHBvb2w9LnJndy5yb290LCBh
      bGxvdyBydyBwb29sPWRlZmF1bHQucmd3LmNvbnRyb2wsIGFsbG93IHJ4IHBvb2w9ZGVmYXVsdC5y
      Z3cubG9nLCBhbGxvdyB4IHBvb2w9ZGVmYXVsdC5yZ3cuYnVja2V0cy5pbmRleCJ9fV0nJycKICAg
      ICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWycnJ3siZm9ybWF0IjogImpzb24iLCAicHJlZml4Ijog
      Im1nciBzZXJ2aWNlcyJ9JycnXSA9ICcnJ3siZGFzaGJvYXJkIjogImh0dHA6Ly9yb29rLWNlcGgt
      bWdyLWEtNTdjZjlmODRiYy1mNGpubDo3MDAwLyIsICJwcm9tZXRoZXVzIjogImh0dHA6Ly9yb29r
      LWNlcGgtbWdyLWEtNTdjZjlmODRiYy1mNGpubDo5MjgzLyJ9JycnCiAgICAgICAgc2VsZi5jbWRf
      b3V0cHV0X21hcFsnJyd7ImVudGl0eSI6ICJjbGllbnQuaGVhbHRoY2hlY2tlciIsICJmb3JtYXQi
      OiAianNvbiIsICJwcmVmaXgiOiAiYXV0aCBnZXQifScnJ10gPSAnJyd7ImRhc2hib2FyZCI6ICJo
      dHRwOi8vcm9vay1jZXBoLW1nci1hLTU3Y2Y5Zjg0YmMtZjRqbmw6NzAwMC8iLCAicHJvbWV0aGV1
      cyI6ICJodHRwOi8vcm9vay1jZXBoLW1nci1hLTU3Y2Y5Zjg0YmMtZjRqbmw6OTI4My8ifScnJwog
      ICAgICAgIHNlbGYuY21kX291dHB1dF9tYXBbJycneyJlbnRpdHkiOiAiY2xpZW50LmhlYWx0aGNo
      ZWNrZXIiLCAiZm9ybWF0IjogImpzb24iLCAicHJlZml4IjogImF1dGggZ2V0In0nJyddID0gJycn
      W3siZW50aXR5IjoiY2xpZW50LmhlYWx0aGNoZWNrZXIiLCJrZXkiOiJBUURGa2JOZWZ0NWJGUkFB
      VG5kTE5VU0VLcnVvenhpWmkzbHJkQT09IiwiY2FwcyI6eyJtb24iOiAiYWxsb3cgciwgYWxsb3cg
      Y29tbWFuZCBxdW9ydW1fc3RhdHVzLCBhbGxvdyBjb21tYW5kIHZlcnNpb24iLCAibWdyIjogImFs
      bG93IGNvbW1hbmQgY29uZmlnIiwgIm9zZCI6ICJhbGxvdyByd3ggcG9vbD1kZWZhdWx0LnJndy5t
      ZXRhLCBhbGxvdyByIHBvb2w9LnJndy5yb290LCBhbGxvdyBydyBwb29sPWRlZmF1bHQucmd3LmNv
      bnRyb2wsIGFsbG93IHJ4IHBvb2w9ZGVmYXVsdC5yZ3cubG9nLCBhbGxvdyB4IHBvb2w9ZGVmYXVs
      dC5yZ3cuYnVja2V0cy5pbmRleCJ9fV0nJycKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwW3Nl
      bGYuY21kX25hbWVzWydjYXBzX2NoYW5nZV9kZWZhdWx0X3Bvb2xfcHJlZml4J11dID0gJycnW3t9
      XScnJwoKICAgIGRlZiBzaHV0ZG93bihzZWxmKToKICAgICAgICBwYXNzCgogICAgZGVmIGdldF9m
      c2lkKHNlbGYpOgogICAgICAgIHJldHVybiAnYWY0ZTE2NzMtMGI3Mi00MDJkLTk5MGEtMjJkMjkx
      OWQwZjFjJwoKICAgIGRlZiBjb25mX3JlYWRfZmlsZShzZWxmKToKICAgICAgICBwYXNzCgogICAg
      ZGVmIGNvbm5lY3Qoc2VsZik6CiAgICAgICAgcGFzcwoKICAgIGRlZiBwb29sX2V4aXN0cyhzZWxm
      LCBwb29sX25hbWUpOgogICAgICAgIHJldHVybiBUcnVlCgogICAgZGVmIG1vbl9jb21tYW5kKHNl
      bGYsIGNtZCwgb3V0KToKICAgICAgICBqc29uX2NtZCA9IGpzb24ubG9hZHMoY21kKQogICAgICAg
      IGpzb25fY21kX3N0ciA9IGpzb24uZHVtcHMoanNvbl9jbWQsIHNvcnRfa2V5cz1UcnVlKQogICAg
      ICAgIGNtZF9vdXRwdXQgPSBzZWxmLmNtZF9vdXRwdXRfbWFwW2pzb25fY21kX3N0cl0KICAgICAg
      ICByZXR1cm4gc2VsZi5yZXR1cm5fdmFsLCBcCiAgICAgICAgICAgIGNtZF9vdXRwdXQsIFwKICAg
      ICAgICAgICAgInt9Ii5mb3JtYXQoc2VsZi5lcnJfbWVzc2FnZSkuZW5jb2RlKCd1dGYtOCcpCgog
      ICAgZGVmIF9jb252ZXJ0X2hvc3RuYW1lX3RvX2lwKHNlbGYsIGhvc3RfbmFtZSk6CiAgICAgICAg
      aXBfcmVnX3ggPSByZS5jb21waWxlKHInXGR7MSwzfS5cZHsxLDN9LlxkezEsM30uXGR7MSwzfScp
      CiAgICAgICAgIyBpZiBwcm92aWRlZCBob3N0IGlzIGRpcmVjdGx5IGFuIElQIGFkZHJlc3MsIHJl
      dHVybiB0aGUgc2FtZQogICAgICAgIGlmIGlwX3JlZ194Lm1hdGNoKGhvc3RfbmFtZSk6CiAgICAg
      ICAgICAgIHJldHVybiBob3N0X25hbWUKICAgICAgICBpbXBvcnQgcmFuZG9tCiAgICAgICAgaG9z
      dF9pcCA9IHNlbGYuZHVtbXlfaG9zdF9pcF9tYXAuZ2V0KGhvc3RfbmFtZSwgIiIpCiAgICAgICAg
      aWYgbm90IGhvc3RfaXA6CiAgICAgICAgICAgIGhvc3RfaXAgPSAiMTcyLjkue30ue30iLmZvcm1h
      dCgKICAgICAgICAgICAgICAgIHJhbmRvbS5yYW5kaW50KDAsIDI1NSksIHJhbmRvbS5yYW5kaW50
      KDAsIDI1NSkpCiAgICAgICAgICAgIHNlbGYuZHVtbXlfaG9zdF9pcF9tYXBbaG9zdF9uYW1lXSA9
      IGhvc3RfaXAKICAgICAgICBkZWwgcmFuZG9tCiAgICAgICAgcmV0dXJuIGhvc3RfaXAKCiAgICBA
      Y2xhc3NtZXRob2QKICAgIGRlZiBSYWRvcyhjb25mZmlsZT1Ob25lKToKICAgICAgICByZXR1cm4g
      RHVtbXlSYWRvcygpCgoKY2xhc3MgUmFkb3NKU09OOgogICAgRVhURVJOQUxfVVNFUl9OQU1FID0g
      ImNsaWVudC5oZWFsdGhjaGVja2VyIgogICAgRU1QVFlfT1VUUFVUX0xJU1QgPSAiRW1wdHkgb3V0
      cHV0IGxpc3QiCiAgICBERUZBVUxUX1JHV19QT09MX1BSRUZJWCA9ICJkZWZhdWx0IgogICAgREVG
      QVVMVF9NT05JVE9SSU5HX0VORFBPSU5UX1BPUlQgPSAiOTI4MyIKCiAgICBAY2xhc3NtZXRob2QK
      ICAgIGRlZiBnZW5fYXJnX3BhcnNlcihjbHMsIGFyZ3NfdG9fcGFyc2U9Tm9uZSk6CiAgICAgICAg
      YXJnUCA9IGFyZ3BhcnNlLkFyZ3VtZW50UGFyc2VyKCkKCiAgICAgICAgY29tbW9uX2dyb3VwID0g
      YXJnUC5hZGRfYXJndW1lbnRfZ3JvdXAoJ2NvbW1vbicpCiAgICAgICAgY29tbW9uX2dyb3VwLmFk
      ZF9hcmd1bWVudCgiLS12ZXJib3NlIiwgIi12IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgIGFjdGlvbj0nc3RvcmVfdHJ1ZScsIGRlZmF1bHQ9RmFsc2UpCiAgICAgICAgY29tbW9u
      X2dyb3VwLmFkZF9hcmd1bWVudCgiLS1jZXBoLWNvbmYiLCAiLWMiLAogICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgaGVscD0iUHJvdmlkZSBhIGNlcGggY29uZiBmaWxlLiIsIHR5cGU9
      c3RyKQogICAgICAgIGNvbW1vbl9ncm91cC5hZGRfYXJndW1lbnQoIi0tcnVuLWFzLXVzZXIiLCAi
      LXUiLCBkZWZhdWx0PSIiLCB0eXBlPXN0ciwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
      ICAgIGhlbHA9IlByb3ZpZGVzIGEgdXNlciBuYW1lIHRvIGNoZWNrIHRoZSBjbHVzdGVyJ3MgaGVh
      bHRoIHN0YXR1cywgbXVzdCBiZSBwcmVmaXhlZCBieSAnY2xpZW50LiciKQogICAgICAgIGNvbW1v
      bl9ncm91cC5hZGRfYXJndW1lbnQoIi0tY2x1c3Rlci1uYW1lIiwgZGVmYXVsdD0ib3BlbnNoaWZ0
      LXN0b3JhZ2UiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGVscD0iQ2VwaCBj
      bHVzdGVyIG5hbWUiKQogICAgICAgIGNvbW1vbl9ncm91cC5hZGRfYXJndW1lbnQoIi0tbmFtZXNw
      YWNlIiwgZGVmYXVsdD0iIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlbHA9
      Ik5hbWVzcGFjZSB3aGVyZSBDZXBoQ2x1c3RlciBpcyBydW5uaW5nIikKICAgICAgICBjb21tb25f
      Z3JvdXAuYWRkX2FyZ3VtZW50KCItLXJndy1wb29sLXByZWZpeCIsIGRlZmF1bHQ9IiIsCiAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJSR1cgUG9vbCBwcmVmaXgiKQoKICAg
      ICAgICBvdXRwdXRfZ3JvdXAgPSBhcmdQLmFkZF9hcmd1bWVudF9ncm91cCgnb3V0cHV0JykKICAg
      ICAgICBvdXRwdXRfZ3JvdXAuYWRkX2FyZ3VtZW50KCItLWZvcm1hdCIsICItdCIsIGNob2ljZXM9
      WyJqc29uIiwgImJhc2giXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1
      bHQ9J2pzb24nLCBoZWxwPSJQcm92aWRlcyB0aGUgb3V0cHV0IGZvcm1hdCAoanNvbiB8IGJhc2gp
      IikKICAgICAgICBvdXRwdXRfZ3JvdXAuYWRkX2FyZ3VtZW50KCItLW91dHB1dCIsICItbyIsIGRl
      ZmF1bHQ9IiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWxwPSJPdXRwdXQg
      d2lsbCBiZSBzdG9yZWQgaW50byB0aGUgcHJvdmlkZWQgZmlsZSIpCiAgICAgICAgb3V0cHV0X2dy
      b3VwLmFkZF9hcmd1bWVudCgiLS1jZXBoZnMtZmlsZXN5c3RlbS1uYW1lIiwgZGVmYXVsdD0iIiwK
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlbHA9IlByb3ZpZGVzIHRoZSBuYW1l
      IG9mIHRoZSBDZXBoIGZpbGVzeXN0ZW0iKQogICAgICAgIG91dHB1dF9ncm91cC5hZGRfYXJndW1l
      bnQoIi0tY2VwaGZzLWRhdGEtcG9vbC1uYW1lIiwgZGVmYXVsdD0iIiwKICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgIGhlbHA9IlByb3ZpZGVzIHRoZSBuYW1lIG9mIHRoZSBjZXBoZnMg
      ZGF0YSBwb29sIikKICAgICAgICBvdXRwdXRfZ3JvdXAuYWRkX2FyZ3VtZW50KCItLXJiZC1kYXRh
      LXBvb2wtbmFtZSIsIGRlZmF1bHQ9IiIsIHJlcXVpcmVkPUZhbHNlLAogICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgaGVscD0iUHJvdmlkZXMgdGhlIG5hbWUgb2YgdGhlIFJCRCBkYXRh
      cG9vbCIpCiAgICAgICAgb3V0cHV0X2dyb3VwLmFkZF9hcmd1bWVudCgiLS1yZ3ctZW5kcG9pbnQi
      LCBkZWZhdWx0PSIiLCByZXF1aXJlZD1GYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgIGhlbHA9IlJhZG9zIEdhdGVXYXkgZW5kcG9pbnQgKGluIDxJUD46PFBPUlQ+IGZvcm1h
      dCkiKQogICAgICAgIG91dHB1dF9ncm91cC5hZGRfYXJndW1lbnQoIi0tbW9uaXRvcmluZy1lbmRw
      b2ludCIsIGRlZmF1bHQ9IiIsIHJlcXVpcmVkPUZhbHNlLAogICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgaGVscD0iQ2VwaCBNYW5hZ2VyIHByb21ldGhldXMgZXhwb3J0ZXIgZW5kcG9p
      bnRzIGNvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIDxJUD4gZW50cmllcyIpCiAgICAgICAgb3V0cHV0
      X2dyb3VwLmFkZF9hcmd1bWVudCgiLS1tb25pdG9yaW5nLWVuZHBvaW50LXBvcnQiLCBkZWZhdWx0
      PSIiLCByZXF1aXJlZD1GYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhl
      bHA9IkNlcGggTWFuYWdlciBwcm9tZXRoZXVzIGV4cG9ydGVyIHBvcnQiKQoKICAgICAgICB1cGdy
      YWRlX2dyb3VwID0gYXJnUC5hZGRfYXJndW1lbnRfZ3JvdXAoJ3VwZ3JhZGUnKQogICAgICAgIHVw
      Z3JhZGVfZ3JvdXAuYWRkX2FyZ3VtZW50KCItLXVwZ3JhZGUiLCBhY3Rpb249J3N0b3JlX3RydWUn
      LCBkZWZhdWx0PUZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlbHA9
      IlVwZ3JhZGVzIHRoZSAndXNlcicgd2l0aCBhbGwgdGhlIHBlcm1pc3Npb25zIG5lZWRlZCBmb3Ig
      dGhlIG5ldyBjbHVzdGVyIHZlcnNpb24iKQoKICAgICAgICBpZiBhcmdzX3RvX3BhcnNlOgogICAg
      ICAgICAgICBhc3NlcnQgdHlwZShhcmdzX3RvX3BhcnNlKSA9PSBsaXN0LCBcCiAgICAgICAgICAg
      ICAgICAiQXJndW1lbnQgdG8gJ2dlbl9hcmdfcGFyc2VyJyBzaG91bGQgYmUgYSBsaXN0IgogICAg
      ICAgIGVsc2U6CiAgICAgICAgICAgIGFyZ3NfdG9fcGFyc2UgPSBzeXMuYXJndlsxOl0KICAgICAg
      ICByZXR1cm4gYXJnUC5wYXJzZV9hcmdzKGFyZ3NfdG9fcGFyc2UpCgogICAgZGVmIF9jaGVja19j
      b25mbGljdGluZ19vcHRpb25zKHNlbGYpOgogICAgICAgIGlmIG5vdCBzZWxmLl9hcmdfcGFyc2Vy
      LnVwZ3JhZGUgYW5kIG5vdCBzZWxmLl9hcmdfcGFyc2VyLnJiZF9kYXRhX3Bvb2xfbmFtZToKICAg
      ICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAg
      ICJFaXRoZXIgJy0tdXBncmFkZScgb3IgJy0tcmJkLWRhdGEtcG9vbC1uYW1lIDxwb29sX25hbWU+
      JyBzaG91bGQgYmUgc3BlY2lmaWVkIikKICAgICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLnVwZ3Jh
      ZGUgYW5kIHNlbGYuX2FyZ19wYXJzZXIucmJkX2RhdGFfcG9vbF9uYW1lOgogICAgICAgICAgICBy
      YWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgIkJvdGggJy0t
      dXBncmFkZScgYW5kICctLXJiZC1kYXRhLXBvb2wtbmFtZSA8cG9vbF9uYW1lPicgc2hvdWxkIG5v
      dCBiZSBzcGVjaWZpZWQsIGNob29zZSBvbmx5IG9uZSIpCiAgICAgICAgIyBhIHVzZXIgbmFtZSBt
      dXN0IGJlIHByb3ZpZGVkIHdoaWxlIHVzaW5nICctLXVwZ3JhZGUnIG9wdGlvbgogICAgICAgIGlm
      IG5vdCBzZWxmLl9hcmdfcGFyc2VyLnJ1bl9hc191c2VyIGFuZCBzZWxmLl9hcmdfcGFyc2VyLnVw
      Z3JhZGU6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAg
      ICAgICAgICAgICAiUGxlYXNlIHByb3ZpZGUgYW4gZXhpc3RpbmcgdXNlci1uYW1lIHRocm91Z2gg
      Jy0tcnVuLWFzLXVzZXInIChvciAnLXUnKSBmbGFnIHdoaWxlIHVwZ3JhZGluZyIpCgogICAgZGVm
      IF9pbnZhbGlkX2VuZHBvaW50KHNlbGYsIGVuZHBvaW50X3N0cik6CiAgICAgICAgdHJ5OgogICAg
      ICAgICAgICBpcHY0LCBwb3J0ID0gZW5kcG9pbnRfc3RyLnNwbGl0KCc6JykKICAgICAgICBleGNl
      cHQgVmFsdWVFcnJvcjoKICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlv
      bigKICAgICAgICAgICAgICAgICJOb3QgYSBwcm9wZXIgZW5kcG9pbnQ6IHt9LCA8SVB2ND46PFBP
      UlQ+LCBmb3JtYXQgaXMgZXhwZWN0ZWQiLmZvcm1hdChlbmRwb2ludF9zdHIpKQogICAgICAgIGlw
      UGFydHMgPSBpcHY0LnNwbGl0KCcuJykKICAgICAgICBpZiBsZW4oaXBQYXJ0cykgIT0gNDoKICAg
      ICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAg
      ICJOb3QgYSB2YWxpZCBJUCBhZGRyZXNzOiB7fSIuZm9ybWF0KGlwdjQpKQogICAgICAgIGZvciBl
      YWNoUGFydCBpbiBpcFBhcnRzOgogICAgICAgICAgICBpZiBub3QgZWFjaFBhcnQuaXNkaWdpdCgp
      OgogICAgICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAg
      ICAgICAgICAgICAgICAiSVAgYWRkcmVzcyBwYXJ0cyBzaG91bGQgYmUgbnVtYmVyczoge30iLmZv
      cm1hdChpcHY0KSkKICAgICAgICAgICAgaW50UGFydCA9IGludChlYWNoUGFydCkKICAgICAgICAg
      ICAgaWYgaW50UGFydCA8IDAgb3IgaW50UGFydCA+IDI1NDoKICAgICAgICAgICAgICAgIHJhaXNl
      IEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgIk91dCBvZiBy
      YW5nZSBJUCBhZGRyZXNzZXM6IHt9Ii5mb3JtYXQoaXB2NCkpCiAgICAgICAgaWYgbm90IHBvcnQu
      aXNkaWdpdCgpOgogICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKCJQ
      b3J0IG5vdCB2YWxpZDoge30iLmZvcm1hdChwb3J0KSkKICAgICAgICBpbnRQb3J0ID0gaW50KHBv
      cnQpCiAgICAgICAgaWYgaW50UG9ydCA8IDEgb3IgaW50UG9ydCA+IDIqKjE2LTE6CiAgICAgICAg
      ICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAiT3V0
      IG9mIHJhbmdlIHBvcnQgbnVtYmVyOiB7fSIuZm9ybWF0KHBvcnQpKQogICAgICAgIHJldHVybiBG
      YWxzZQoKICAgIGRlZiBlbmRwb2ludF9kaWFsKHNlbGYsIGVuZHBvaW50X3N0ciwgdGltZW91dD0z
      KToKICAgICAgICAjIGlmIHRoZSAnY2x1c3RlcicgaW5zdGFuY2UgaXMgYSBkdW1teSBvbmUsCiAg
      ICAgICAgIyBkb24ndCB0cnkgdG8gcmVhY2ggb3V0IHRvIHRoZSBlbmRwb2ludAogICAgICAgIGlm
      IGlzaW5zdGFuY2Uoc2VsZi5jbHVzdGVyLCBEdW1teVJhZG9zKToKICAgICAgICAgICAgcmV0dXJu
      CiAgICAgICAgcHJvdG9jb2xzID0gWyJodHRwIiwgImh0dHBzIl0KICAgICAgICBmb3IgcHJlZml4
      IGluIHByb3RvY29sczoKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZXAgPSAie306
      Ly97fSIuZm9ybWF0KHByZWZpeCwgZW5kcG9pbnRfc3RyKQogICAgICAgICAgICAgICAgciA9IHJl
      cXVlc3RzLmhlYWQoZXAsIHRpbWVvdXQ9dGltZW91dCkKICAgICAgICAgICAgICAgIGlmIHIuc3Rh
      dHVzX2NvZGUgPT0gMjAwOgogICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICBl
      eGNlcHQ6CiAgICAgICAgICAgICAgICBjb250aW51ZQogICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZh
      aWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICJ1bmFibGUgdG8gY29ubmVjdCB0byBlbmRwb2lu
      dDoge30iLmZvcm1hdChlbmRwb2ludF9zdHIpKQoKICAgIGRlZiBfX2luaXRfXyhzZWxmLCBhcmdf
      bGlzdD1Ob25lKToKICAgICAgICBzZWxmLm91dF9tYXAgPSB7fQogICAgICAgIHNlbGYuX2V4Y2x1
      ZGVkX2tleXMgPSBzZXQoKQogICAgICAgIHNlbGYuX2FyZ19wYXJzZXIgPSBzZWxmLmdlbl9hcmdf
      cGFyc2VyKGFyZ3NfdG9fcGFyc2U9YXJnX2xpc3QpCiAgICAgICAgc2VsZi5fY2hlY2tfY29uZmxp
      Y3Rpbmdfb3B0aW9ucygpCiAgICAgICAgc2VsZi5ydW5fYXNfdXNlciA9IHNlbGYuX2FyZ19wYXJz
      ZXIucnVuX2FzX3VzZXIKICAgICAgICBzZWxmLm91dHB1dF9maWxlID0gc2VsZi5fYXJnX3BhcnNl
      ci5vdXRwdXQKICAgICAgICBzZWxmLmNlcGhfY29uZiA9IHNlbGYuX2FyZ19wYXJzZXIuY2VwaF9j
      b25mCiAgICAgICAgc2VsZi5NSU5fVVNFUl9DQVBfUEVSTUlTU0lPTlMgPSB7CiAgICAgICAgICAg
      ICdtZ3InOiAnYWxsb3cgY29tbWFuZCBjb25maWcnLAogICAgICAgICAgICAnbW9uJzogJ2FsbG93
      IHIsIGFsbG93IGNvbW1hbmQgcXVvcnVtX3N0YXR1cywgYWxsb3cgY29tbWFuZCB2ZXJzaW9uJywK
      ICAgICAgICAgICAgJ29zZCc6ICJhbGxvdyByd3ggcG9vbD17MH0ucmd3Lm1ldGEsICIgKwogICAg
      ICAgICAgICAiYWxsb3cgciBwb29sPS5yZ3cucm9vdCwgIiArCiAgICAgICAgICAgICJhbGxvdyBy
      dyBwb29sPXswfS5yZ3cuY29udHJvbCwgIiArCiAgICAgICAgICAgICJhbGxvdyByeCBwb29sPXsw
      fS5yZ3cubG9nLCAiICsKICAgICAgICAgICAgImFsbG93IHggcG9vbD17MH0ucmd3LmJ1Y2tldHMu
      aW5kZXgiCiAgICAgICAgfQogICAgICAgICMgaWYgdXNlciBub3QgcHJvdmlkZWQsIGdpdmUgYSBk
      ZWZhdWx0IHVzZXIKICAgICAgICBpZiBub3Qgc2VsZi5ydW5fYXNfdXNlciBhbmQgbm90IHNlbGYu
      X2FyZ19wYXJzZXIudXBncmFkZToKICAgICAgICAgICAgc2VsZi5ydW5fYXNfdXNlciA9IHNlbGYu
      RVhURVJOQUxfVVNFUl9OQU1FCiAgICAgICAgaWYgbm90IHNlbGYuX2FyZ19wYXJzZXIucmd3X3Bv
      b2xfcHJlZml4IGFuZCBub3Qgc2VsZi5fYXJnX3BhcnNlci51cGdyYWRlOgogICAgICAgICAgICBz
      ZWxmLl9hcmdfcGFyc2VyLnJnd19wb29sX3ByZWZpeCA9IHNlbGYuREVGQVVMVF9SR1dfUE9PTF9Q
      UkVGSVgKICAgICAgICBpZiBzZWxmLmNlcGhfY29uZjoKICAgICAgICAgICAgc2VsZi5jbHVzdGVy
      ID0gcmFkb3MuUmFkb3MoY29uZmZpbGU9c2VsZi5jZXBoX2NvbmYpCiAgICAgICAgZWxzZToKICAg
      ICAgICAgICAgc2VsZi5jbHVzdGVyID0gcmFkb3MuUmFkb3MoKQogICAgICAgICAgICBzZWxmLmNs
      dXN0ZXIuY29uZl9yZWFkX2ZpbGUoKQogICAgICAgIHNlbGYuY2x1c3Rlci5jb25uZWN0KCkKCiAg
      ICBkZWYgc2h1dGRvd24oc2VsZik6CiAgICAgICAgaWYgc2VsZi5jbHVzdGVyLnN0YXRlID09ICJj
      b25uZWN0ZWQiOgogICAgICAgICAgICBzZWxmLmNsdXN0ZXIuc2h1dGRvd24oKQoKICAgIGRlZiBn
      ZXRfZnNpZChzZWxmKToKICAgICAgICByZXR1cm4gc3RyKHNlbGYuY2x1c3Rlci5nZXRfZnNpZCgp
      KQoKICAgIGRlZiBfY29tbW9uX2NtZF9qc29uX2dlbihzZWxmLCBjbWRfanNvbik6CiAgICAgICAg
      Y21kID0ganNvbi5kdW1wcyhjbWRfanNvbiwgc29ydF9rZXlzPVRydWUpCiAgICAgICAgcmV0X3Zh
      bCwgY21kX291dCwgZXJyX21zZyA9IHNlbGYuY2x1c3Rlci5tb25fY29tbWFuZChjbWQsIGInJykK
      ICAgICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLnZlcmJvc2U6CiAgICAgICAgICAgIHByaW50KCJD
      b21tYW5kIElucHV0OiB7fSIuZm9ybWF0KGNtZCkpCiAgICAgICAgICAgIHByaW50KCJSZXR1cm4g
      VmFsOiB7fVxuQ29tbWFuZCBPdXRwdXQ6IHt9XG5FcnJvciBNZXNzYWdlOiB7fVxuLS0tLS0tLS0t
      LVxuIi5mb3JtYXQoCiAgICAgICAgICAgICAgICAgIHJldF92YWwsIGNtZF9vdXQsIGVycl9tc2cp
      KQogICAgICAgIGpzb25fb3V0ID0ge30KICAgICAgICAjIGlmIHRoZXJlIGlzIG5vIGVycm9yIChp
      LmU7IHJldF92YWwgaXMgWkVSTykgYW5kICdjbWRfb3V0JyBpcyBub3QgZW1wdHkKICAgICAgICAj
      IHRoZW4gY29udmVydCAnY21kX291dCcgdG8gYSBqc29uIG91dHB1dAogICAgICAgIGlmIHJldF92
      YWwgPT0gMCBhbmQgY21kX291dDoKICAgICAgICAgICAganNvbl9vdXQgPSBqc29uLmxvYWRzKGNt
      ZF9vdXQpCiAgICAgICAgcmV0dXJuIHJldF92YWwsIGpzb25fb3V0LCBlcnJfbXNnCgogICAgZGVm
      IGdldF9jZXBoX2V4dGVybmFsX21vbl9kYXRhKHNlbGYpOgogICAgICAgIGNtZF9qc29uID0geyJw
      cmVmaXgiOiAicXVvcnVtX3N0YXR1cyIsICJmb3JtYXQiOiAianNvbiJ9CiAgICAgICAgcmV0X3Zh
      bCwganNvbl9vdXQsIGVycl9tc2cgPSBzZWxmLl9jb21tb25fY21kX2pzb25fZ2VuKGNtZF9qc29u
      KQogICAgICAgICMgaWYgdGhlcmUgaXMgYW4gdW5zdWNjZXNzZnVsIGF0dGVtcHQsCiAgICAgICAg
      aWYgcmV0X3ZhbCAhPSAwIG9yIGxlbihqc29uX291dCkgPT0gMDoKICAgICAgICAgICAgcmFpc2Ug
      RXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICIncXVvcnVtX3N0YXR1
      cycgY29tbWFuZCBmYWlsZWQuXG4iICsKICAgICAgICAgICAgICAgICJFcnJvcjoge30iLmZvcm1h
      dChlcnJfbXNnIGlmIHJldF92YWwgIT0gMCBlbHNlIHNlbGYuRU1QVFlfT1VUUFVUX0xJU1QpKQog
      ICAgICAgIHFfbGVhZGVyX25hbWUgPSBqc29uX291dFsncXVvcnVtX2xlYWRlcl9uYW1lJ10KICAg
      ICAgICBxX2xlYWRlcl9kZXRhaWxzID0ge30KICAgICAgICBxX2xlYWRlcl9tYXRjaGluZ19saXN0
      ID0gW2wgZm9yIGwgaW4ganNvbl9vdXRbJ21vbm1hcCddWydtb25zJ10KICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgIGlmIGxbJ25hbWUnXSA9PSBxX2xlYWRlcl9uYW1lXQogICAgICAg
      IGlmIGxlbihxX2xlYWRlcl9tYXRjaGluZ19saXN0KSA9PSAwOgogICAgICAgICAgICByYWlzZSBF
      eGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKCJObyBtYXRjaGluZyAnbW9uJyBkZXRhaWxzIGZvdW5k
      IikKICAgICAgICBxX2xlYWRlcl9kZXRhaWxzID0gcV9sZWFkZXJfbWF0Y2hpbmdfbGlzdFswXQog
      ICAgICAgIGlwX3BvcnQgPSBzdHIocV9sZWFkZXJfZGV0YWlsc1sncHVibGljX2FkZHInXS5zcGxp
      dCgnLycpWzBdKQogICAgICAgIHJldHVybiAie309e30iLmZvcm1hdChzdHIocV9sZWFkZXJfbmFt
      ZSksIGlwX3BvcnQpCgogICAgZGVmIF9qb2luX2hvc3RfcG9ydChzZWxmLCBlbmRwb2ludCwgcG9y
      dCk6CiAgICAgICAgcG9ydCA9ICJ7fSIuZm9ybWF0KHBvcnQpCiAgICAgICAgIyByZWdleCB0byBj
      aGVjayB0aGUgZ2l2ZW4gZW5kcG9pbnQgaXMgZW5jbG9zZWQgaW4gc3F1YXJlIGJyYWNrZXRzCiAg
      ICAgICAgaXB2Nl9yZWd4ID0gcmUuY29tcGlsZShyJ15cW1teXV0qXF0kJykKICAgICAgICAjIGVu
      ZHBvaW50IGhhcyAnOicgaW4gaXQgYW5kIGlmIG5vdCAoYWxyZWFkeSkgZW5jbG9zZWQgaW4gc3F1
      YXJlIGJyYWNrZXRzCiAgICAgICAgaWYgZW5kcG9pbnQuY291bnQoJzonKSBhbmQgbm90IGlwdjZf
      cmVneC5tYXRjaChlbmRwb2ludCk6CiAgICAgICAgICAgIGVuZHBvaW50ID0gJ1t7fV0nLmZvcm1h
      dChlbmRwb2ludCkKICAgICAgICBpZiBub3QgcG9ydDoKICAgICAgICAgICAgcmV0dXJuIGVuZHBv
      aW50CiAgICAgICAgcmV0dXJuICc6Jy5qb2luKFtlbmRwb2ludCwgcG9ydF0pCgogICAgZGVmIF9j
      b252ZXJ0X2hvc3RuYW1lX3RvX2lwKHNlbGYsIGhvc3RfbmFtZSk6CiAgICAgICAgIyBpZiAnY2x1
      c3RlcicgaW5zdGFuY2UgaXMgYSBkdW1teSB0eXBlLAogICAgICAgICMgY2FsbCB0aGUgZHVtbXkg
      aW5zdGFuY2UncyAiY29udmVydCIgbWV0aG9kCiAgICAgICAgaWYgbm90IGhvc3RfbmFtZToKICAg
      ICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigiRW1wdHkgaG9zdG5hbWUg
      cHJvdmlkZWQiKQogICAgICAgIGlmIGlzaW5zdGFuY2Uoc2VsZi5jbHVzdGVyLCBEdW1teVJhZG9z
      KToKICAgICAgICAgICAgcmV0dXJuIHNlbGYuY2x1c3Rlci5fY29udmVydF9ob3N0bmFtZV90b19p
      cChob3N0X25hbWUpCiAgICAgICAgaW1wb3J0IHNvY2tldAogICAgICAgIGlwID0gc29ja2V0Lmdl
      dGhvc3RieW5hbWUoaG9zdF9uYW1lKQogICAgICAgIGRlbCBzb2NrZXQKICAgICAgICByZXR1cm4g
      aXAKCiAgICBkZWYgZ2V0X2FjdGl2ZV9jZXBoX21ncihzZWxmKToKICAgICAgICBtb25pdG9yaW5n
      X2VuZHBvaW50X3BvcnQgPSBzZWxmLl9hcmdfcGFyc2VyLm1vbml0b3JpbmdfZW5kcG9pbnRfcG9y
      dAogICAgICAgIG1vbml0b3JpbmdfZW5kcG9pbnRfaXAgPSBzZWxmLl9hcmdfcGFyc2VyLm1vbml0
      b3JpbmdfZW5kcG9pbnQKICAgICAgICBpZiBub3QgbW9uaXRvcmluZ19lbmRwb2ludF9pcDoKICAg
      ICAgICAgICAgY21kX2pzb24gPSB7InByZWZpeCI6ICJtZ3Igc2VydmljZXMiLCAiZm9ybWF0Ijog
      Impzb24ifQogICAgICAgICAgICByZXRfdmFsLCBqc29uX291dCwgZXJyX21zZyA9IHNlbGYuX2Nv
      bW1vbl9jbWRfanNvbl9nZW4oY21kX2pzb24pCiAgICAgICAgICAgICMgaWYgdGhlcmUgaXMgYW4g
      dW5zdWNjZXNzZnVsIGF0dGVtcHQsCiAgICAgICAgICAgIGlmIHJldF92YWwgIT0gMCBvciBsZW4o
      anNvbl9vdXQpID09IDA6CiAgICAgICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhj
      ZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICInbWdyIHNlcnZpY2VzJyBjb21tYW5kIGZhaWxl
      ZC5cbiIgKwogICAgICAgICAgICAgICAgICAgICJFcnJvcjoge30iLmZvcm1hdChlcnJfbXNnIGlm
      IHJldF92YWwgIT0gMCBlbHNlIHNlbGYuRU1QVFlfT1VUUFVUX0xJU1QpKQogICAgICAgICAgICBt
      b25pdG9yaW5nX2VuZHBvaW50ID0ganNvbl9vdXQuZ2V0KCdwcm9tZXRoZXVzJykKICAgICAgICAg
      ICAgaWYgbm90IG1vbml0b3JpbmdfZW5kcG9pbnQ6CiAgICAgICAgICAgICAgICByYWlzZSBFeGVj
      dXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICIncHJvbWV0aGV1cycg
      c2VydmljZSBub3QgZm91bmQsIGlzIHRoZSBleHBvcnRlciBlbmFibGVkPycuXG4iKQogICAgICAg
      ICAgICB0cnk6CiAgICAgICAgICAgICAgICBwYXJzZWRfZW5kcG9pbnQgPSB1cmxwYXJzZShtb25p
      dG9yaW5nX2VuZHBvaW50KQogICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICAg
      ICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAg
      ICAgImludmFsaWQgZW5kcG9pbnQ6IHt9Ii5mb3JtYXQobW9uaXRvcmluZ19lbmRwb2ludCkpCiAg
      ICAgICAgICAgIG1vbml0b3JpbmdfZW5kcG9pbnRfaXAgPSBwYXJzZWRfZW5kcG9pbnQuaG9zdG5h
      bWUKICAgICAgICAgICAgaWYgbm90IG1vbml0b3JpbmdfZW5kcG9pbnRfcG9ydDoKICAgICAgICAg
      ICAgICAgIG1vbml0b3JpbmdfZW5kcG9pbnRfcG9ydCA9ICJ7fSIuZm9ybWF0KHBhcnNlZF9lbmRw
      b2ludC5wb3J0KQoKICAgICAgICAjIGlmIG1vbml0b3JpbmcgZW5kcG9pbnQgcG9ydCBpcyBub3Qg
      c2V0LCBwdXQgYSBkZWZhdWx0IG1vbiBwb3J0CiAgICAgICAgaWYgbm90IG1vbml0b3JpbmdfZW5k
      cG9pbnRfcG9ydDoKICAgICAgICAgICAgbW9uaXRvcmluZ19lbmRwb2ludF9wb3J0ID0gc2VsZi5E
      RUZBVUxUX01PTklUT1JJTkdfRU5EUE9JTlRfUE9SVAoKICAgICAgICB0cnk6CiAgICAgICAgICAg
      IG1vbml0b3JpbmdfZW5kcG9pbnRfaXAgPSBzZWxmLl9jb252ZXJ0X2hvc3RuYW1lX3RvX2lwKAog
      ICAgICAgICAgICAgICAgbW9uaXRvcmluZ19lbmRwb2ludF9pcCkKICAgICAgICBleGNlcHQ6CiAg
      ICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAg
      ICAidW5hYmxlIHRvIGNvbnZlcnQgYSBob3N0bmFtZSB0byBhbiBJUCBhZGRyZXNzLCBtb25pdG9y
      aW5nIGhvc3QgbmFtZToge30iLmZvcm1hdChtb25pdG9yaW5nX2VuZHBvaW50X2lwKSkKICAgICAg
      ICBtb25pdG9yaW5nX2VuZHBvaW50ID0gc2VsZi5fam9pbl9ob3N0X3BvcnQoCiAgICAgICAgICAg
      IG1vbml0b3JpbmdfZW5kcG9pbnRfaXAsIG1vbml0b3JpbmdfZW5kcG9pbnRfcG9ydCkKICAgICAg
      ICBzZWxmLl9pbnZhbGlkX2VuZHBvaW50KG1vbml0b3JpbmdfZW5kcG9pbnQpCiAgICAgICAgc2Vs
      Zi5lbmRwb2ludF9kaWFsKG1vbml0b3JpbmdfZW5kcG9pbnQpCgogICAgICAgIHNlbGYudmFsaWRh
      dGVfbW9uaXRvcmluZ19lbmRwb2ludChtb25pdG9yaW5nX2VuZHBvaW50X3BvcnQpCiAgICAgICAg
      cmV0dXJuIG1vbml0b3JpbmdfZW5kcG9pbnRfaXAsIG1vbml0b3JpbmdfZW5kcG9pbnRfcG9ydAoK
      ICAgIGRlZiB2YWxpZGF0ZV9tb25pdG9yaW5nX2VuZHBvaW50KHNlbGYsIHBvcnQpOgogICAgICAg
      IGlmIHBvcnQgIT0gc2VsZi5ERUZBVUxUX01PTklUT1JJTkdfRU5EUE9JTlRfUE9SVDoKICAgICAg
      ICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICIn
      cHJvbWV0aGV1cycgc2VydmljZSBwb3J0IG11c3QgbGlzdGVuIG9uIHswfS4gWW91IGNhbiBjaGFu
      Z2UgaXQgd2l0aCAnY2VwaCBjb25maWcgc2V0IG1nciBtZ3IvcHJvbWV0aGV1cy9zZXJ2ZXJfcG9y
      dCB7MH0nLlxuIi5mb3JtYXQoc2VsZi5ERUZBVUxUX01PTklUT1JJTkdfRU5EUE9JTlRfUE9SVCkp
      CgogICAgZGVmIGNyZWF0ZV9jZXBoQ1NJS2V5cmluZ19jZXBoRlNQcm92aXNpb25lcihzZWxmKToK
      ICAgICAgICAnJycKICAgICAgICBjb21tYW5kOiBjZXBoIGF1dGggZ2V0LW9yLWNyZWF0ZSBjbGll
      bnQuY3NpLWNlcGhmcy1wcm92aXNpb25lciBtb24gJ2FsbG93IHInIG1nciAnYWxsb3cgcncnIG9z
      ZCAnYWxsb3cgcncgdGFnIGNlcGhmcyBtZXRhZGF0YT0qJwogICAgICAgICcnJwogICAgICAgIGNt
      ZF9qc29uID0geyJwcmVmaXgiOiAiYXV0aCBnZXQtb3ItY3JlYXRlIiwKICAgICAgICAgICAgICAg
      ICAgICAiZW50aXR5IjogImNsaWVudC5jc2ktY2VwaGZzLXByb3Zpc2lvbmVyIiwKICAgICAgICAg
      ICAgICAgICAgICAiY2FwcyI6IFsibW9uIiwgImFsbG93IHIiLCAibWdyIiwgImFsbG93IHJ3IiwK
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAib3NkIiwgImFsbG93IHJ3IHRhZyBjZXBoZnMg
      bWV0YWRhdGE9KiJdLAogICAgICAgICAgICAgICAgICAgICJmb3JtYXQiOiAianNvbiJ9CiAgICAg
      ICAgcmV0X3ZhbCwganNvbl9vdXQsIGVycl9tc2cgPSBzZWxmLl9jb21tb25fY21kX2pzb25fZ2Vu
      KGNtZF9qc29uKQogICAgICAgICMgaWYgdGhlcmUgaXMgYW4gdW5zdWNjZXNzZnVsIGF0dGVtcHQs
      CiAgICAgICAgaWYgcmV0X3ZhbCAhPSAwIG9yIGxlbihqc29uX291dCkgPT0gMDoKICAgICAgICAg
      ICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICInYXV0
      aCBnZXQtb3ItY3JlYXRlIGNsaWVudC5jc2ktY2VwaGZzLXByb3Zpc2lvbmVyJyBjb21tYW5kIGZh
      aWxlZC5cbiIgKwogICAgICAgICAgICAgICAgIkVycm9yOiB7fSIuZm9ybWF0KGVycl9tc2cgaWYg
      cmV0X3ZhbCAhPSAwIGVsc2Ugc2VsZi5FTVBUWV9PVVRQVVRfTElTVCkpCiAgICAgICAgcmV0dXJu
      IHN0cihqc29uX291dFswXVsna2V5J10pCgogICAgZGVmIGNyZWF0ZV9jZXBoQ1NJS2V5cmluZ19j
      ZXBoRlNOb2RlKHNlbGYpOgogICAgICAgIGNtZF9qc29uID0geyJwcmVmaXgiOiAiYXV0aCBnZXQt
      b3ItY3JlYXRlIiwKICAgICAgICAgICAgICAgICAgICAiZW50aXR5IjogImNsaWVudC5jc2ktY2Vw
      aGZzLW5vZGUiLAogICAgICAgICAgICAgICAgICAgICJjYXBzIjogWyJtb24iLCAiYWxsb3cgciIs
      CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1nciIsICJhbGxvdyBydyIsCiAgICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgIm9zZCIsICJhbGxvdyBydyB0YWcgY2VwaGZzICo9KiIsCiAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgIm1kcyIsICJhbGxvdyBydyJdLAogICAgICAgICAg
      ICAgICAgICAgICJmb3JtYXQiOiAianNvbiJ9CiAgICAgICAgcmV0X3ZhbCwganNvbl9vdXQsIGVy
      cl9tc2cgPSBzZWxmLl9jb21tb25fY21kX2pzb25fZ2VuKGNtZF9qc29uKQogICAgICAgICMgaWYg
      dGhlcmUgaXMgYW4gdW5zdWNjZXNzZnVsIGF0dGVtcHQsCiAgICAgICAgaWYgcmV0X3ZhbCAhPSAw
      IG9yIGxlbihqc29uX291dCkgPT0gMDoKICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVy
      ZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICInYXV0aCBnZXQtb3ItY3JlYXRlIGNsaWVudC5j
      c2ktY2VwaGZzLW5vZGUnIGNvbW1hbmQgZmFpbGVkLlxuIiArCiAgICAgICAgICAgICAgICAiRXJy
      b3I6IHt9Ii5mb3JtYXQoZXJyX21zZyBpZiByZXRfdmFsICE9IDAgZWxzZSBzZWxmLkVNUFRZX09V
      VFBVVF9MSVNUKSkKICAgICAgICByZXR1cm4gc3RyKGpzb25fb3V0WzBdWydrZXknXSkKCiAgICBk
      ZWYgY3JlYXRlX2NlcGhDU0lLZXlyaW5nX1JCRFByb3Zpc2lvbmVyKHNlbGYpOgogICAgICAgIGNt
      ZF9qc29uID0geyJwcmVmaXgiOiAiYXV0aCBnZXQtb3ItY3JlYXRlIiwKICAgICAgICAgICAgICAg
      ICAgICAiZW50aXR5IjogImNsaWVudC5jc2ktcmJkLXByb3Zpc2lvbmVyIiwKICAgICAgICAgICAg
      ICAgICAgICAiY2FwcyI6IFsibW9uIiwgInByb2ZpbGUgcmJkIiwKICAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICAibWdyIiwgImFsbG93IHJ3IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAg
      ICAib3NkIiwgInByb2ZpbGUgcmJkIl0sCiAgICAgICAgICAgICAgICAgICAgImZvcm1hdCI6ICJq
      c29uIn0KICAgICAgICByZXRfdmFsLCBqc29uX291dCwgZXJyX21zZyA9IHNlbGYuX2NvbW1vbl9j
      bWRfanNvbl9nZW4oY21kX2pzb24pCiAgICAgICAgIyBpZiB0aGVyZSBpcyBhbiB1bnN1Y2Nlc3Nm
      dWwgYXR0ZW1wdCwKICAgICAgICBpZiByZXRfdmFsICE9IDAgb3IgbGVuKGpzb25fb3V0KSA9PSAw
      OgogICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAg
      ICAgICAgIidhdXRoIGdldC1vci1jcmVhdGUgY2xpZW50LmNzaS1yYmQtcHJvdmlzaW9uZXInIGNv
      bW1hbmQgZmFpbGVkLlxuIiArCiAgICAgICAgICAgICAgICAiRXJyb3I6IHt9Ii5mb3JtYXQoZXJy
      X21zZyBpZiByZXRfdmFsICE9IDAgZWxzZSBzZWxmLkVNUFRZX09VVFBVVF9MSVNUKSkKICAgICAg
      ICByZXR1cm4gc3RyKGpzb25fb3V0WzBdWydrZXknXSkKCiAgICBkZWYgZ2V0X2NlcGhmc19kYXRh
      X3Bvb2xfZGV0YWlscyhzZWxmKToKICAgICAgICBjbWRfanNvbiA9IHsicHJlZml4IjogImZzIGxz
      IiwgImZvcm1hdCI6ICJqc29uIn0KICAgICAgICByZXRfdmFsLCBqc29uX291dCwgZXJyX21zZyA9
      IHNlbGYuX2NvbW1vbl9jbWRfanNvbl9nZW4oY21kX2pzb24pCiAgICAgICAgIyBpZiB0aGVyZSBp
      cyBhbiB1bnN1Y2Nlc3NmdWwgYXR0ZW1wdCwgcmVwb3J0IGFuIGVycm9yCiAgICAgICAgaWYgcmV0
      X3ZhbCAhPSAwOgogICAgICAgICAgICAjIGlmIGZzIGFuZCBkYXRhX3Bvb2wgYXJndW1lbnRzIGFy
      ZSBub3Qgc2V0LCBzaWxlbnRseSByZXR1cm4KICAgICAgICAgICAgaWYgc2VsZi5fYXJnX3BhcnNl
      ci5jZXBoZnNfZmlsZXN5c3RlbV9uYW1lID09ICIiIGFuZCBzZWxmLl9hcmdfcGFyc2VyLmNlcGhm
      c19kYXRhX3Bvb2xfbmFtZSA9PSAiIjoKICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAg
      ICAjIGlmIHVzZXIgaGFzIHByb3ZpZGVkIGFueSBvZiB0aGUKICAgICAgICAgICAgIyAnLS1jZXBo
      ZnMtZmlsZXN5c3RlbS1uYW1lJyBvciAnLS1jZXBoZnMtZGF0YS1wb29sLW5hbWUnIGFyZ3VtZW50
      cywKICAgICAgICAgICAgIyByYWlzZSBhbiBleGNlcHRpb24gYXMgd2UgYXJlIHVuYWJsZSB0byB2
      ZXJpZnkgdGhlIGFyZ3MKICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlv
      bigKICAgICAgICAgICAgICAgICInZnMgbHMnIGNlcGggY2FsbCBmYWlsZWQgd2l0aCBlcnJvcjog
      e30iLmZvcm1hdChlcnJfbXNnKSkKCiAgICAgICAgbWF0Y2hpbmdfanNvbl9vdXQgPSB7fQogICAg
      ICAgICMgaWYgJy0tY2VwaGZzLWZpbGVzeXN0ZW0tbmFtZScgYXJndW1lbnQgaXMgcHJvdmlkZWQs
      CiAgICAgICAgIyBjaGVjayB3aGV0aGVyIHRoZSBwcm92aWRlZCBmaWxlc3lzdGVtLW5hbWUgZXhp
      c3RzIG9yIG5vdAogICAgICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX2ZpbGVzeXN0ZW1f
      bmFtZToKICAgICAgICAgICAgIyBnZXQgdGhlIG1hdGNoaW5nIGxpc3QKICAgICAgICAgICAgbWF0
      Y2hpbmdfanNvbl9vdXRfbGlzdCA9IFttYXRjaGVkIGZvciBtYXRjaGVkIGluIGpzb25fb3V0CiAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgc3RyKG1hdGNoZWRbJ25hbWUn
      XSkgPT0gc2VsZi5fYXJnX3BhcnNlci5jZXBoZnNfZmlsZXN5c3RlbV9uYW1lXQogICAgICAgICAg
      ICAjIHVuYWJsZSB0byBmaW5kIGEgbWF0Y2hpbmcgZnMtbmFtZSwgcmFpc2UgYW4gZXJyb3IKICAg
      ICAgICAgICAgaWYgbGVuKG1hdGNoaW5nX2pzb25fb3V0X2xpc3QpID09IDA6CiAgICAgICAgICAg
      ICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAg
      ICgiRmlsZXN5c3RlbSBwcm92aWRlZCwgJ3t9JywgIiArCiAgICAgICAgICAgICAgICAgICAgICJp
      cyBub3QgZm91bmQgaW4gdGhlIGZzLWxpc3Q6ICd7fSciKS5mb3JtYXQoCiAgICAgICAgICAgICAg
      ICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX2ZpbGVzeXN0ZW1fbmFtZSwKICAgICAg
      ICAgICAgICAgICAgICAgICAgW3N0cih4WyduYW1lJ10pIGZvciB4IGluIGpzb25fb3V0XSkpCiAg
      ICAgICAgICAgIG1hdGNoaW5nX2pzb25fb3V0ID0gbWF0Y2hpbmdfanNvbl9vdXRfbGlzdFswXQog
      ICAgICAgICMgaWYgY2VwaGZzIGZpbGVzeXN0ZW0gbmFtZSBpcyBub3QgcHJvdmlkZWQsCiAgICAg
      ICAgIyB0cnkgdG8gZ2V0IGEgZGVmYXVsdCBmcyBuYW1lIGJ5IGRvaW5nIHRoZSBmb2xsb3dpbmcK
      ICAgICAgICBlbHNlOgogICAgICAgICAgICAjIGEuIGNoZWNrIGlmIHRoZXJlIGlzIG9ubHkgb25l
      IGZpbGVzeXN0ZW0gaXMgcHJlc2VudAogICAgICAgICAgICBpZiBsZW4oanNvbl9vdXQpID09IDE6
      CiAgICAgICAgICAgICAgICBtYXRjaGluZ19qc29uX291dCA9IGpzb25fb3V0WzBdCiAgICAgICAg
      ICAgICMgYi4gb3IgZWxzZSwgY2hlY2sgaWYgZGF0YV9wb29sIG5hbWUgaXMgcHJvdmlkZWQKICAg
      ICAgICAgICAgZWxpZiBzZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19kYXRhX3Bvb2xfbmFtZToKICAg
      ICAgICAgICAgICAgICMgYW5kIGlmIHByZXNlbnQsIGNoZWNrIHdoZXRoZXIgdGhlcmUgZXhpc3Rz
      IGEgZnMgd2hpY2ggaGFzIHRoZSBkYXRhX3Bvb2wKICAgICAgICAgICAgICAgIGZvciBlYWNoSiBp
      biBqc29uX291dDoKICAgICAgICAgICAgICAgICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLmNlcGhm
      c19kYXRhX3Bvb2xfbmFtZSBpbiBlYWNoSlsnZGF0YV9wb29scyddOgogICAgICAgICAgICAgICAg
      ICAgICAgICBtYXRjaGluZ19qc29uX291dCA9IGVhY2hKCiAgICAgICAgICAgICAgICAgICAgICAg
      IGJyZWFrCiAgICAgICAgICAgICAgICAjIGlmIHRoZXJlIGlzIG5vIG1hdGNoaW5nIGZzIGV4aXN0
      cywgdGhhdCBtZWFucyBwcm92aWRlZCBkYXRhX3Bvb2wgbmFtZSBpcyBpbnZhbGlkCiAgICAgICAg
      ICAgICAgICBpZiBub3QgbWF0Y2hpbmdfanNvbl9vdXQ6CiAgICAgICAgICAgICAgICAgICAgcmFp
      c2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICAgICAgICAgIlBy
      b3ZpZGVkIGRhdGFfcG9vbCBuYW1lLCB7fSwgZG9lcyBub3QgZXhpc3RzIi5mb3JtYXQoCiAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19kYXRhX3Bvb2xf
      bmFtZSkpCiAgICAgICAgICAgICMgYy4gaWYgbm90aGluZyBpcyBzZXQgYW5kIGNvdWxkbid0IGZp
      bmQgYSBkZWZhdWx0LAogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgIyBqdXN0IHJl
      dHVybiBzaWxlbnRseQogICAgICAgICAgICAgICAgcmV0dXJuCgogICAgICAgIGlmIG1hdGNoaW5n
      X2pzb25fb3V0OgogICAgICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19maWxlc3lzdGVt
      X25hbWUgPSBzdHIoCiAgICAgICAgICAgICAgICBtYXRjaGluZ19qc29uX291dFsnbmFtZSddKQoK
      ICAgICAgICBpZiB0eXBlKG1hdGNoaW5nX2pzb25fb3V0WydkYXRhX3Bvb2xzJ10pID09IGxpc3Q6
      CiAgICAgICAgICAgICMgaWYgdGhlIHVzZXIgaGFzIGFscmVhZHkgcHJvdmlkZWQgZGF0YS1wb29s
      LW5hbWUsCiAgICAgICAgICAgICMgdGhyb3VnaCAtLWNlcGhmcy1kYXRhLXBvb2wtbmFtZQogICAg
      ICAgICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19kYXRhX3Bvb2xfbmFtZToKICAgICAg
      ICAgICAgICAgICMgaWYgdGhlIHByb3ZpZGVkIG5hbWUgaXMgbm90IG1hdGNoaW5nIHdpdGggdGhl
      IG9uZSBpbiB0aGUgbGlzdAogICAgICAgICAgICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci5jZXBo
      ZnNfZGF0YV9wb29sX25hbWUgbm90IGluIG1hdGNoaW5nX2pzb25fb3V0WydkYXRhX3Bvb2xzJ106
      CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAg
      ICAgICAgICAgICAgICAgICAgICAgInt9OiAne30nLCB7fToge30iLmZvcm1hdCgKICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgICJQcm92aWRlZCBkYXRhLXBvb2wtbmFtZSIsCiAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19kYXRhX3Bvb2xfbmFtZSwK
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgICJkb2Vzbid0IG1hdGNoIGZyb20gdGhlIGRhdGEt
      cG9vbHMnIGxpc3QiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgW3N0cih4KSBmb3IgeCBp
      biBtYXRjaGluZ19qc29uX291dFsnZGF0YV9wb29scyddXSkpCiAgICAgICAgICAgICMgaWYgZGF0
      YV9wb29sIG5hbWUgaXMgbm90IHByb3ZpZGVkLAogICAgICAgICAgICAjIHRoZW4gdHJ5IHRvIGZp
      bmQgYSBkZWZhdWx0IGRhdGEgcG9vbCBuYW1lCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAg
      ICAgICAjIGlmIG5vIGRhdGFfcG9vbHMgZXhpc3QsIHNpbGVudGx5IHJldHVybgogICAgICAgICAg
      ICAgICAgaWYgbGVuKG1hdGNoaW5nX2pzb25fb3V0WydkYXRhX3Bvb2xzJ10pID09IDA6CiAgICAg
      ICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLmNl
      cGhmc19kYXRhX3Bvb2xfbmFtZSA9IHN0cigKICAgICAgICAgICAgICAgICAgICBtYXRjaGluZ19q
      c29uX291dFsnZGF0YV9wb29scyddWzBdKQogICAgICAgICAgICAjIGlmIHRoZXJlIGFyZSBtb3Jl
      IHRoYW4gb25lICdkYXRhX3Bvb2xzJyBleGlzdCwKICAgICAgICAgICAgIyB0aGVuIHdhcm4gdGhl
      IHVzZXIgdGhhdCB3ZSBhcmUgdXNpbmcgdGhlIHNlbGVjdGVkIG5hbWUKICAgICAgICAgICAgaWYg
      bGVuKG1hdGNoaW5nX2pzb25fb3V0WydkYXRhX3Bvb2xzJ10pID4gMToKICAgICAgICAgICAgICAg
      IHByaW50KCJ7fToge31cbnt9OiAne30nXG4iLmZvcm1hdCgKICAgICAgICAgICAgICAgICAgICAi
      V0FSTklORzogTXVsdGlwbGUgZGF0YSBwb29scyBkZXRlY3RlZCIsCiAgICAgICAgICAgICAgICAg
      ICAgW3N0cih4KSBmb3IgeCBpbiBtYXRjaGluZ19qc29uX291dFsnZGF0YV9wb29scyddXSwKICAg
      ICAgICAgICAgICAgICAgICAiVXNpbmcgdGhlIGRhdGEtcG9vbCIsCiAgICAgICAgICAgICAgICAg
      ICAgc2VsZi5fYXJnX3BhcnNlci5jZXBoZnNfZGF0YV9wb29sX25hbWUpKQoKICAgIGRlZiBjcmVh
      dGVfY2VwaENTSUtleXJpbmdfUkJETm9kZShzZWxmKToKICAgICAgICBjbWRfanNvbiA9IHsicHJl
      Zml4IjogImF1dGggZ2V0LW9yLWNyZWF0ZSIsCiAgICAgICAgICAgICAgICAgICAgImVudGl0eSI6
      ICJjbGllbnQuY3NpLXJiZC1ub2RlIiwKICAgICAgICAgICAgICAgICAgICAiY2FwcyI6IFsibW9u
      IiwgInByb2ZpbGUgcmJkIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAib3NkIiwgInBy
      b2ZpbGUgcmJkIl0sCiAgICAgICAgICAgICAgICAgICAgImZvcm1hdCI6ICJqc29uIn0KICAgICAg
      ICByZXRfdmFsLCBqc29uX291dCwgZXJyX21zZyA9IHNlbGYuX2NvbW1vbl9jbWRfanNvbl9nZW4o
      Y21kX2pzb24pCiAgICAgICAgIyBpZiB0aGVyZSBpcyBhbiB1bnN1Y2Nlc3NmdWwgYXR0ZW1wdCwK
      ICAgICAgICBpZiByZXRfdmFsICE9IDAgb3IgbGVuKGpzb25fb3V0KSA9PSAwOgogICAgICAgICAg
      ICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgIidhdXRo
      IGdldC1vci1jcmVhdGUgY2xpZW50LmNzaS1yYmQtbm9kZScgY29tbWFuZCBmYWlsZWRcbiIgKwog
      ICAgICAgICAgICAgICAgIkVycm9yOiB7fSIuZm9ybWF0KGVycl9tc2cgaWYgcmV0X3ZhbCAhPSAw
      IGVsc2Ugc2VsZi5FTVBUWV9PVVRQVVRfTElTVCkpCiAgICAgICAgcmV0dXJuIHN0cihqc29uX291
      dFswXVsna2V5J10pCgogICAgZGVmIGNyZWF0ZV9jaGVja2VyS2V5KHNlbGYpOgogICAgICAgIGNt
      ZF9qc29uID0geyJwcmVmaXgiOiAiYXV0aCBnZXQtb3ItY3JlYXRlIiwKICAgICAgICAgICAgICAg
      ICAgICAiZW50aXR5Ijogc2VsZi5ydW5fYXNfdXNlciwKICAgICAgICAgICAgICAgICAgICAiY2Fw
      cyI6IFsibW9uIiwgc2VsZi5NSU5fVVNFUl9DQVBfUEVSTUlTU0lPTlNbJ21vbiddLAogICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgICJtZ3IiLCBzZWxmLk1JTl9VU0VSX0NBUF9QRVJNSVNTSU9O
      U1snbWdyJ10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIm9zZCIsIHNlbGYuTUlOX1VT
      RVJfQ0FQX1BFUk1JU1NJT05TWydvc2QnXS5mb3JtYXQoc2VsZi5fYXJnX3BhcnNlci5yZ3dfcG9v
      bF9wcmVmaXgpXSwKICAgICAgICAgICAgICAgICAgICAiZm9ybWF0IjogImpzb24ifQogICAgICAg
      IHJldF92YWwsIGpzb25fb3V0LCBlcnJfbXNnID0gc2VsZi5fY29tbW9uX2NtZF9qc29uX2dlbihj
      bWRfanNvbikKICAgICAgICAjIGlmIHRoZXJlIGlzIGFuIHVuc3VjY2Vzc2Z1bCBhdHRlbXB0LAog
      ICAgICAgIGlmIHJldF92YWwgIT0gMCBvciBsZW4oanNvbl9vdXQpID09IDA6CiAgICAgICAgICAg
      IHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAiJ2F1dGgg
      Z2V0LW9yLWNyZWF0ZSB7fScgY29tbWFuZCBmYWlsZWRcbiIuZm9ybWF0KHNlbGYucnVuX2FzX3Vz
      ZXIpICsKICAgICAgICAgICAgICAgICJFcnJvcjoge30iLmZvcm1hdChlcnJfbXNnIGlmIHJldF92
      YWwgIT0gMCBlbHNlIHNlbGYuRU1QVFlfT1VUUFVUX0xJU1QpKQogICAgICAgIHJldHVybiBzdHIo
      anNvbl9vdXRbMF1bJ2tleSddKQoKICAgIGRlZiBfZ2VuX291dHB1dF9tYXAoc2VsZik6CiAgICAg
      ICAgaWYgc2VsZi5vdXRfbWFwOgogICAgICAgICAgICByZXR1cm4KICAgICAgICBwb29sc190b192
      YWxpZGF0ZSA9IFtzZWxmLl9hcmdfcGFyc2VyLnJiZF9kYXRhX3Bvb2xfbmFtZV0KICAgICAgICAj
      IGlmIHJnd19lbmRwb2ludCBpcyBwcm92aWRlZCwgdmFsaWRhdGUgaXQKICAgICAgICBpZiBzZWxm
      Ll9hcmdfcGFyc2VyLnJnd19lbmRwb2ludDoKICAgICAgICAgICAgc2VsZi5faW52YWxpZF9lbmRw
      b2ludChzZWxmLl9hcmdfcGFyc2VyLnJnd19lbmRwb2ludCkKICAgICAgICAgICAgc2VsZi5lbmRw
      b2ludF9kaWFsKHNlbGYuX2FyZ19wYXJzZXIucmd3X2VuZHBvaW50KQogICAgICAgICAgICByZ3df
      cG9vbF90b192YWxpZGF0ZSA9IFsiezB9LnJndy5tZXRhIi5mb3JtYXQoc2VsZi5fYXJnX3BhcnNl
      ci5yZ3dfcG9vbF9wcmVmaXgpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAi
      LnJndy5yb290IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInswfS5yZ3cu
      Y29udHJvbCIuZm9ybWF0KAogICAgICAgICAgICAgICAgc2VsZi5fYXJnX3BhcnNlci5yZ3dfcG9v
      bF9wcmVmaXgpLAogICAgICAgICAgICAgICAgInswfS5yZ3cubG9nIi5mb3JtYXQoCiAgICAgICAg
      ICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLnJnd19wb29sX3ByZWZpeCldCiAgICAgICAgICAgIHBv
      b2xzX3RvX3ZhbGlkYXRlLmV4dGVuZChyZ3dfcG9vbF90b192YWxpZGF0ZSkKICAgICAgICBmb3Ig
      cG9vbCBpbiBwb29sc190b192YWxpZGF0ZToKICAgICAgICAgICAgaWYgbm90IHNlbGYuY2x1c3Rl
      ci5wb29sX2V4aXN0cyhwb29sKToKICAgICAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1
      cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgIlRoZSBwcm92aWRlZCBwb29sLCAne30n
      LCBkb2VzIG5vdCBleGlzdCIuZm9ybWF0KHBvb2wpKQogICAgICAgIHNlbGYuX2V4Y2x1ZGVkX2tl
      eXMuYWRkKCdDTFVTVEVSX05BTUUnKQogICAgICAgIHNlbGYuZ2V0X2NlcGhmc19kYXRhX3Bvb2xf
      ZGV0YWlscygpCiAgICAgICAgc2VsZi5vdXRfbWFwWydOQU1FU1BBQ0UnXSA9IHNlbGYuX2FyZ19w
      YXJzZXIubmFtZXNwYWNlCiAgICAgICAgc2VsZi5vdXRfbWFwWydDTFVTVEVSX05BTUUnXSA9IHNl
      bGYuX2FyZ19wYXJzZXIuY2x1c3Rlcl9uYW1lCiAgICAgICAgc2VsZi5vdXRfbWFwWydST09LX0VY
      VEVSTkFMX0ZTSUQnXSA9IHNlbGYuZ2V0X2ZzaWQoKQogICAgICAgIHNlbGYub3V0X21hcFsnUk9P
      S19FWFRFUk5BTF9VU0VSTkFNRSddID0gc2VsZi5ydW5fYXNfdXNlcgogICAgICAgIHNlbGYub3V0
      X21hcFsnUk9PS19FWFRFUk5BTF9DRVBIX01PTl9EQVRBJ10gPSBzZWxmLmdldF9jZXBoX2V4dGVy
      bmFsX21vbl9kYXRhKCkKICAgICAgICBzZWxmLm91dF9tYXBbJ1JPT0tfRVhURVJOQUxfVVNFUl9T
      RUNSRVQnXSA9IHNlbGYuY3JlYXRlX2NoZWNrZXJLZXkoKQogICAgICAgIHNlbGYub3V0X21hcFsn
      Q1NJX1JCRF9OT0RFX1NFQ1JFVF9TRUNSRVQnXSA9IHNlbGYuY3JlYXRlX2NlcGhDU0lLZXlyaW5n
      X1JCRE5vZGUoKQogICAgICAgIHNlbGYub3V0X21hcFsnQ1NJX1JCRF9QUk9WSVNJT05FUl9TRUNS
      RVQnXSA9IHNlbGYuY3JlYXRlX2NlcGhDU0lLZXlyaW5nX1JCRFByb3Zpc2lvbmVyKCkKICAgICAg
      ICBzZWxmLm91dF9tYXBbJ0NFUEhGU19QT09MX05BTUUnXSA9IHNlbGYuX2FyZ19wYXJzZXIuY2Vw
      aGZzX2RhdGFfcG9vbF9uYW1lCiAgICAgICAgc2VsZi5vdXRfbWFwWydDRVBIRlNfRlNfTkFNRSdd
      ID0gc2VsZi5fYXJnX3BhcnNlci5jZXBoZnNfZmlsZXN5c3RlbV9uYW1lCiAgICAgICAgc2VsZi5v
      dXRfbWFwWydDU0lfQ0VQSEZTX05PREVfU0VDUkVUJ10gPSAnJwogICAgICAgIHNlbGYub3V0X21h
      cFsnQ1NJX0NFUEhGU19QUk9WSVNJT05FUl9TRUNSRVQnXSA9ICcnCiAgICAgICAgIyBjcmVhdGUg
      Q2VwaEZTIG5vZGUgYW5kIHByb3Zpc2lvbmVyIGtleXJpbmcgb25seSB3aGVuIE1EUyBleGlzdHMK
      ICAgICAgICBpZiBzZWxmLm91dF9tYXBbJ0NFUEhGU19GU19OQU1FJ10gYW5kIHNlbGYub3V0X21h
      cFsnQ0VQSEZTX1BPT0xfTkFNRSddOgogICAgICAgICAgICBzZWxmLm91dF9tYXBbJ0NTSV9DRVBI
      RlNfTk9ERV9TRUNSRVQnXSA9IHNlbGYuY3JlYXRlX2NlcGhDU0lLZXlyaW5nX2NlcGhGU05vZGUo
      CiAgICAgICAgICAgICkKICAgICAgICAgICAgc2VsZi5vdXRfbWFwWydDU0lfQ0VQSEZTX1BST1ZJ
      U0lPTkVSX1NFQ1JFVCddID0gc2VsZi5jcmVhdGVfY2VwaENTSUtleXJpbmdfY2VwaEZTUHJvdmlz
      aW9uZXIoKQogICAgICAgIHNlbGYub3V0X21hcFsnUkdXX0VORFBPSU5UJ10gPSBzZWxmLl9hcmdf
      cGFyc2VyLnJnd19lbmRwb2ludAogICAgICAgIHNlbGYub3V0X21hcFsnTU9OSVRPUklOR19FTkRQ
      T0lOVCddLCBcCiAgICAgICAgICAgIHNlbGYub3V0X21hcFsnTU9OSVRPUklOR19FTkRQT0lOVF9Q
      T1JUJ10gPSBzZWxmLmdldF9hY3RpdmVfY2VwaF9tZ3IoKQogICAgICAgIHNlbGYub3V0X21hcFsn
      UkJEX1BPT0xfTkFNRSddID0gc2VsZi5fYXJnX3BhcnNlci5yYmRfZGF0YV9wb29sX25hbWUKICAg
      ICAgICBzZWxmLm91dF9tYXBbJ1JHV19QT09MX1BSRUZJWCddID0gc2VsZi5fYXJnX3BhcnNlci5y
      Z3dfcG9vbF9wcmVmaXgKCiAgICBkZWYgZ2VuX3NoZWxsX291dChzZWxmKToKICAgICAgICBzZWxm
      Ll9nZW5fb3V0cHV0X21hcCgpCiAgICAgICAgc2hPdXRJTyA9IFN0cmluZ0lPKCkKICAgICAgICBm
      b3IgaywgdiBpbiBzZWxmLm91dF9tYXAuaXRlbXMoKToKICAgICAgICAgICAgaWYgdiBhbmQgayBu
      b3QgaW4gc2VsZi5fZXhjbHVkZWRfa2V5czoKICAgICAgICAgICAgICAgIHNoT3V0SU8ud3JpdGUo
      J2V4cG9ydCB7fT17fXt9Jy5mb3JtYXQoaywgdiwgTElORVNFUCkpCiAgICAgICAgc2hPdXQgPSBz
      aE91dElPLmdldHZhbHVlKCkKICAgICAgICBzaE91dElPLmNsb3NlKCkKICAgICAgICByZXR1cm4g
      c2hPdXQKCiAgICBkZWYgZ2VuX2pzb25fb3V0KHNlbGYpOgogICAgICAgIHNlbGYuX2dlbl9vdXRw
      dXRfbWFwKCkKICAgICAgICBqc29uX291dCA9IFsKICAgICAgICAgICAgewogICAgICAgICAgICAg
      ICAgIm5hbWUiOiAicm9vay1jZXBoLW1vbi1lbmRwb2ludHMiLAogICAgICAgICAgICAgICAgImtp
      bmQiOiAiQ29uZmlnTWFwIiwKICAgICAgICAgICAgICAgICJkYXRhIjogewogICAgICAgICAgICAg
      ICAgICAgICJkYXRhIjogc2VsZi5vdXRfbWFwWydST09LX0VYVEVSTkFMX0NFUEhfTU9OX0RBVEEn
      XSwKICAgICAgICAgICAgICAgICAgICAibWF4TW9uSWQiOiAiMCIsCiAgICAgICAgICAgICAgICAg
      ICAgIm1hcHBpbmciOiAie30iCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAg
      ICAgICAgIHsKICAgICAgICAgICAgICAgICJuYW1lIjogInJvb2stY2VwaC1tb24iLAogICAgICAg
      ICAgICAgICAgImtpbmQiOiAiU2VjcmV0IiwKICAgICAgICAgICAgICAgICJkYXRhIjogewogICAg
      ICAgICAgICAgICAgICAgICJhZG1pbi1zZWNyZXQiOiAiYWRtaW4tc2VjcmV0IiwKICAgICAgICAg
      ICAgICAgICAgICAiZnNpZCI6IHNlbGYub3V0X21hcFsnUk9PS19FWFRFUk5BTF9GU0lEJ10sCiAg
      ICAgICAgICAgICAgICAgICAgIm1vbi1zZWNyZXQiOiAibW9uLXNlY3JldCIKICAgICAgICAgICAg
      ICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICJuYW1l
      IjogInJvb2stY2VwaC1vcGVyYXRvci1jcmVkcyIsCiAgICAgICAgICAgICAgICAia2luZCI6ICJT
      ZWNyZXQiLAogICAgICAgICAgICAgICAgImRhdGEiOiB7CiAgICAgICAgICAgICAgICAgICAgInVz
      ZXJJRCI6IHNlbGYub3V0X21hcFsnUk9PS19FWFRFUk5BTF9VU0VSTkFNRSddLAogICAgICAgICAg
      ICAgICAgICAgICJ1c2VyS2V5Ijogc2VsZi5vdXRfbWFwWydST09LX0VYVEVSTkFMX1VTRVJfU0VD
      UkVUJ10KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgewogICAg
      ICAgICAgICAgICAgIm5hbWUiOiAicm9vay1jc2ktcmJkLW5vZGUiLAogICAgICAgICAgICAgICAg
      ImtpbmQiOiAiU2VjcmV0IiwKICAgICAgICAgICAgICAgICJkYXRhIjogewogICAgICAgICAgICAg
      ICAgICAgICJ1c2VySUQiOiAnY3NpLXJiZC1ub2RlJywKICAgICAgICAgICAgICAgICAgICAidXNl
      cktleSI6IHNlbGYub3V0X21hcFsnQ1NJX1JCRF9OT0RFX1NFQ1JFVF9TRUNSRVQnXQogICAgICAg
      ICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAi
      bmFtZSI6ICJjZXBoLXJiZCIsCiAgICAgICAgICAgICAgICAia2luZCI6ICJTdG9yYWdlQ2xhc3Mi
      LAogICAgICAgICAgICAgICAgImRhdGEiOiB7CiAgICAgICAgICAgICAgICAgICAgInBvb2wiOiBz
      ZWxmLm91dF9tYXBbJ1JCRF9QT09MX05BTUUnXQogICAgICAgICAgICAgICAgfQogICAgICAgICAg
      ICB9LAogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAibmFtZSI6ICJtb25pdG9yaW5nLWVu
      ZHBvaW50IiwKICAgICAgICAgICAgICAgICJraW5kIjogIkNlcGhDbHVzdGVyIiwKICAgICAgICAg
      ICAgICAgICJkYXRhIjogewogICAgICAgICAgICAgICAgICAgICJNb25pdG9yaW5nRW5kcG9pbnQi
      OiBzZWxmLm91dF9tYXBbJ01PTklUT1JJTkdfRU5EUE9JTlQnXSwKICAgICAgICAgICAgICAgICAg
      ICAiTW9uaXRvcmluZ1BvcnQiOiBzZWxmLm91dF9tYXBbJ01PTklUT1JJTkdfRU5EUE9JTlRfUE9S
      VCddCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICBdCgogICAgICAgICMg
      aWYgJ0NTSV9SQkRfUFJPVklTSU9ORVJfU0VDUkVUJyBleGlzdHMsIHRoZW4gb25seSBhZGQgJ3Jv
      b2stY3NpLXJiZC1wcm92aXNpb25lcicgU2VjcmV0CiAgICAgICAgaWYgc2VsZi5vdXRfbWFwWydD
      U0lfUkJEX1BST1ZJU0lPTkVSX1NFQ1JFVCddOgogICAgICAgICAgICBqc29uX291dC5hcHBlbmQo
      ewogICAgICAgICAgICAgICAgIm5hbWUiOiAicm9vay1jc2ktcmJkLXByb3Zpc2lvbmVyIiwKICAg
      ICAgICAgICAgICAgICJraW5kIjogIlNlY3JldCIsCiAgICAgICAgICAgICAgICAiZGF0YSI6IHsK
      ICAgICAgICAgICAgICAgICAgICAidXNlcklEIjogJ2NzaS1yYmQtcHJvdmlzaW9uZXInLAogICAg
      ICAgICAgICAgICAgICAgICJ1c2VyS2V5Ijogc2VsZi5vdXRfbWFwWydDU0lfUkJEX1BST1ZJU0lP
      TkVSX1NFQ1JFVCddCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9KQogICAgICAgICMg
      aWYgJ0NTSV9DRVBIRlNfUFJPVklTSU9ORVJfU0VDUkVUJyBleGlzdHMsIHRoZW4gb25seSBhZGQg
      J3Jvb2stY3NpLWNlcGhmcy1wcm92aXNpb25lcicgU2VjcmV0CiAgICAgICAgaWYgc2VsZi5vdXRf
      bWFwWydDU0lfQ0VQSEZTX1BST1ZJU0lPTkVSX1NFQ1JFVCddOgogICAgICAgICAgICBqc29uX291
      dC5hcHBlbmQoewogICAgICAgICAgICAgICAgIm5hbWUiOiAicm9vay1jc2ktY2VwaGZzLXByb3Zp
      c2lvbmVyIiwKICAgICAgICAgICAgICAgICJraW5kIjogIlNlY3JldCIsCiAgICAgICAgICAgICAg
      ICAiZGF0YSI6IHsKICAgICAgICAgICAgICAgICAgICAiYWRtaW5JRCI6ICdjc2ktY2VwaGZzLXBy
      b3Zpc2lvbmVyJywKICAgICAgICAgICAgICAgICAgICAiYWRtaW5LZXkiOiBzZWxmLm91dF9tYXBb
      J0NTSV9DRVBIRlNfUFJPVklTSU9ORVJfU0VDUkVUJ10KICAgICAgICAgICAgICAgIH0sCiAgICAg
      ICAgICAgIH0pCiAgICAgICAgIyBpZiAnQ1NJX0NFUEhGU19OT0RFX1NFQ1JFVCcgZXhpc3RzLCB0
      aGVuIG9ubHkgYWRkICdyb29rLWNzaS1jZXBoZnMtbm9kZScgU2VjcmV0CiAgICAgICAgaWYgc2Vs
      Zi5vdXRfbWFwWydDU0lfQ0VQSEZTX05PREVfU0VDUkVUJ106CiAgICAgICAgICAgIGpzb25fb3V0
      LmFwcGVuZCh7CiAgICAgICAgICAgICAgICAibmFtZSI6ICJyb29rLWNzaS1jZXBoZnMtbm9kZSIs
      CiAgICAgICAgICAgICAgICAia2luZCI6ICJTZWNyZXQiLAogICAgICAgICAgICAgICAgImRhdGEi
      OiB7CiAgICAgICAgICAgICAgICAgICAgImFkbWluSUQiOiAnY3NpLWNlcGhmcy1ub2RlJywKICAg
      ICAgICAgICAgICAgICAgICAiYWRtaW5LZXkiOiBzZWxmLm91dF9tYXBbJ0NTSV9DRVBIRlNfTk9E
      RV9TRUNSRVQnXQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQogICAgICAgICMgaWYg
      J0NFUEhGU19GU19OQU1FJyBleGlzdHMsIHRoZW4gb25seSBhZGQgJ2NlcGhmcycgU3RvcmFnZUNs
      YXNzCiAgICAgICAgaWYgc2VsZi5vdXRfbWFwWydDRVBIRlNfRlNfTkFNRSddOgogICAgICAgICAg
      ICBqc29uX291dC5hcHBlbmQoewogICAgICAgICAgICAgICAgIm5hbWUiOiAiY2VwaGZzIiwKICAg
      ICAgICAgICAgICAgICJraW5kIjogIlN0b3JhZ2VDbGFzcyIsCiAgICAgICAgICAgICAgICAiZGF0
      YSI6IHsKICAgICAgICAgICAgICAgICAgICAiZnNOYW1lIjogc2VsZi5vdXRfbWFwWydDRVBIRlNf
      RlNfTkFNRSddLAogICAgICAgICAgICAgICAgICAgICJwb29sIjogc2VsZi5vdXRfbWFwWydDRVBI
      RlNfUE9PTF9OQU1FJ10KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAj
      IGlmICdSR1dfRU5EUE9JTlQnIGV4aXN0cywgdGhlbiBvbmx5IGFkZCAnY2VwaC1yZ3cnIFN0b3Jh
      Z2VDbGFzcwogICAgICAgIGlmIHNlbGYub3V0X21hcFsnUkdXX0VORFBPSU5UJ106CiAgICAgICAg
      ICAgIGpzb25fb3V0LmFwcGVuZCh7CiAgICAgICAgICAgICAgICAibmFtZSI6ICJjZXBoLXJndyIs
      CiAgICAgICAgICAgICAgICAia2luZCI6ICJTdG9yYWdlQ2xhc3MiLAogICAgICAgICAgICAgICAg
      ImRhdGEiOiB7CiAgICAgICAgICAgICAgICAgICAgImVuZHBvaW50Ijogc2VsZi5vdXRfbWFwWydS
      R1dfRU5EUE9JTlQnXSwKICAgICAgICAgICAgICAgICAgICAicG9vbFByZWZpeCI6IHNlbGYub3V0
      X21hcFsnUkdXX1BPT0xfUFJFRklYJ10KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkK
      ICAgICAgICByZXR1cm4ganNvbi5kdW1wcyhqc29uX291dCkrTElORVNFUAoKICAgIGRlZiB1cGdy
      YWRlX3VzZXJfcGVybWlzc2lvbnMoc2VsZik6CiAgICAgICAgIyBjaGVjayB3aGV0aGVyIHRoZSBn
      aXZlbiB1c2VyIGV4aXN0cyBvciBub3QKICAgICAgICBjbWRfanNvbiA9IHsicHJlZml4IjogImF1
      dGggZ2V0IiwgImVudGl0eSI6ICJ7fSIuZm9ybWF0KAogICAgICAgICAgICBzZWxmLnJ1bl9hc191
      c2VyKSwgImZvcm1hdCI6ICJqc29uIn0KICAgICAgICByZXRfdmFsLCBqc29uX291dCwgZXJyX21z
      ZyA9IHNlbGYuX2NvbW1vbl9jbWRfanNvbl9nZW4oY21kX2pzb24pCiAgICAgICAgaWYgcmV0X3Zh
      bCAhPSAwIG9yIGxlbihqc29uX291dCkgPT0gMDoKICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9u
      RmFpbHVyZUV4Y2VwdGlvbigiJ2F1dGggZ2V0IHt9JyBjb21tYW5kIGZhaWxlZC5cbiIuZm9ybWF0
      KHNlbGYucnVuX2FzX3VzZXIpICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgICAiRXJyb3I6IHt9Ii5mb3JtYXQoZXJyX21zZyBpZiByZXRfdmFsICE9IDAgZWxzZSBz
      ZWxmLkVNUFRZX09VVFBVVF9MSVNUKSkKICAgICAgICBqX2ZpcnN0ID0ganNvbl9vdXRbMF0KICAg
      ICAgICBleGlzdGluZ19jYXBzID0gal9maXJzdFsnY2FwcyddCiAgICAgICAgb3NkX2NhcCA9ICJv
      c2QiCiAgICAgICAgY2FwX2tleXMgPSBbIm1vbiIsICJtZ3IiLCAib3NkIl0KICAgICAgICBmb3Ig
      ZWFjaENhcCBpbiBjYXBfa2V5czoKICAgICAgICAgICAgbWluX2NhcF92YWx1ZXMgPSBzZWxmLk1J
      Tl9VU0VSX0NBUF9QRVJNSVNTSU9OUy5nZXQoZWFjaENhcCwgJycpCiAgICAgICAgICAgIGN1cl9j
      YXBfdmFsdWVzID0gZXhpc3RpbmdfY2Fwcy5nZXQoZWFjaENhcCwgJycpCiAgICAgICAgICAgICMg
      ZGV0ZWN0IHJndy1wb29sLXByZWZpeAogICAgICAgICAgICBpZiBlYWNoQ2FwID09IG9zZF9jYXA6
      CiAgICAgICAgICAgICAgICAjIGlmIGRpcmVjdGx5IHByb3ZpZGVkIHRocm91Z2ggJy0tcmd3LXBv
      b2wtcHJlZml4JyBhcmd1bWVudCwgdXNlIGl0CiAgICAgICAgICAgICAgICBpZiBzZWxmLl9hcmdf
      cGFyc2VyLnJnd19wb29sX3ByZWZpeDoKICAgICAgICAgICAgICAgICAgICBtaW5fY2FwX3ZhbHVl
      cyA9IG1pbl9jYXBfdmFsdWVzLmZvcm1hdCgKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5f
      YXJnX3BhcnNlci5yZ3dfcG9vbF9wcmVmaXgpCiAgICAgICAgICAgICAgICAjIG9yIGVsc2UgdHJ5
      IHRvIGRldGVjdCBvbmUgZnJvbSB0aGUgZXhpc3RpbmcvY3VycmVudCBvc2QgY2FwIHZhbHVlcwog
      ICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICByYyA9IHJlLmNvbXBpbGUo
      cicgcG9vbD0oW14uXSspXC5yZ3dcLlteIF0qJykKICAgICAgICAgICAgICAgICAgICAjICdmaW5k
      YWxsKCknIG1ldGhvZCB3aWxsIGdpdmUgYSBsaXN0IG9mIHByZWZpeGVzCiAgICAgICAgICAgICAg
      ICAgICAgIyBhbmQgJ3NldCcgd2lsbCBlbGltaW5hdGUgYW55IGR1cGxpY2F0ZXMKICAgICAgICAg
      ICAgICAgICAgICBjdXJfcmd3X3Bvb2xfcHJlZml4X2xpc3QgPSBsaXN0KAogICAgICAgICAgICAg
      ICAgICAgICAgICBzZXQocmMuZmluZGFsbChjdXJfY2FwX3ZhbHVlcykpKQogICAgICAgICAgICAg
      ICAgICAgIGlmIGxlbihjdXJfcmd3X3Bvb2xfcHJlZml4X2xpc3QpICE9IDE6CiAgICAgICAgICAg
      ICAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICAiVW5hYmxlIHRvIGRldGVybWluZSAncmd3LXBvb2wtcHJlZngnLiBQ
      bGVhc2UgcHJvdmlkZSBvbmUgd2l0aCAnLS1yZ3ctcG9vbC1wcmVmaXgnIGZsYWciKQogICAgICAg
      ICAgICAgICAgICAgIG1pbl9jYXBfdmFsdWVzID0gbWluX2NhcF92YWx1ZXMuZm9ybWF0KAogICAg
      ICAgICAgICAgICAgICAgICAgICBjdXJfcmd3X3Bvb2xfcHJlZml4X2xpc3RbMF0pCiAgICAgICAg
      ICAgIGN1cl9jYXBfcGVybV9saXN0ID0gW3guc3RyaXAoKQogICAgICAgICAgICAgICAgICAgICAg
      ICAgICAgICAgICBmb3IgeCBpbiBjdXJfY2FwX3ZhbHVlcy5zcGxpdCgnLCcpIGlmIHguc3RyaXAo
      KV0KICAgICAgICAgICAgbWluX2NhcF9wZXJtX2xpc3QgPSBbeC5zdHJpcCgpCiAgICAgICAgICAg
      ICAgICAgICAgICAgICAgICAgICAgIGZvciB4IGluIG1pbl9jYXBfdmFsdWVzLnNwbGl0KCcsJykg
      aWYgeC5zdHJpcCgpXQogICAgICAgICAgICBtaW5fY2FwX3Blcm1fbGlzdC5leHRlbmQoY3VyX2Nh
      cF9wZXJtX2xpc3QpCiAgICAgICAgICAgICMgZWxpbWluYXRlIGR1cGxpY2F0ZXMgd2l0aG91dCB1
      c2luZyAnc2V0JwogICAgICAgICAgICAjIHNldCByZS1vcmRlcnMgaXRlbXMgaW4gdGhlIGxpc3Qg
      YW5kIHdlIGhhdmUgdG8ga2VlcCB0aGUgb3JkZXIKICAgICAgICAgICAgbmV3X2NhcF9wZXJtX2xp
      c3QgPSBbXQogICAgICAgICAgICBbbmV3X2NhcF9wZXJtX2xpc3QuYXBwZW5kKAogICAgICAgICAg
      ICAgICAgeCkgZm9yIHggaW4gbWluX2NhcF9wZXJtX2xpc3QgaWYgeCBub3QgaW4gbmV3X2NhcF9w
      ZXJtX2xpc3RdCiAgICAgICAgICAgIGV4aXN0aW5nX2NhcHNbZWFjaENhcF0gPSAiLCAiLmpvaW4o
      bmV3X2NhcF9wZXJtX2xpc3QpCiAgICAgICAgY21kX2pzb24gPSB7InByZWZpeCI6ICJhdXRoIGNh
      cHMiLAogICAgICAgICAgICAgICAgICAgICJlbnRpdHkiOiBzZWxmLnJ1bl9hc191c2VyLAogICAg
      ICAgICAgICAgICAgICAgICJjYXBzIjogWyJtb24iLCBleGlzdGluZ19jYXBzWyJtb24iXSwKICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICAibWdyIiwgZXhpc3RpbmdfY2Fwc1sibWdyIl0sCiAg
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgIm9zZCIsIGV4aXN0aW5nX2NhcHNbIm9zZCJdXSwK
      ICAgICAgICAgICAgICAgICAgICAiZm9ybWF0IjogImpzb24ifQogICAgICAgIHJldF92YWwsIGpz
      b25fb3V0LCBlcnJfbXNnID0gc2VsZi5fY29tbW9uX2NtZF9qc29uX2dlbihjbWRfanNvbikKICAg
      ICAgICBpZiByZXRfdmFsICE9IDA6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVF
      eGNlcHRpb24oIidhdXRoIGNhcHMge30nIGNvbW1hbmQgZmFpbGVkLlxuIi5mb3JtYXQoc2VsZi5y
      dW5fYXNfdXNlcikgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
      ICJFcnJvcjoge30iLmZvcm1hdChlcnJfbXNnKSkKICAgICAgICBwcmludCgiVXBkYXRlZCB1c2Vy
      LCB7fSwgc3VjY2Vzc2Z1bGx5LiIuZm9ybWF0KHNlbGYucnVuX2FzX3VzZXIpKQoKICAgIGRlZiBt
      YWluKHNlbGYpOgogICAgICAgIGdlbmVyYXRlZF9vdXRwdXQgPSAnJwogICAgICAgIGlmIHNlbGYu
      X2FyZ19wYXJzZXIudXBncmFkZToKICAgICAgICAgICAgc2VsZi51cGdyYWRlX3VzZXJfcGVybWlz
      c2lvbnMoKQogICAgICAgIGVsaWYgc2VsZi5fYXJnX3BhcnNlci5mb3JtYXQgPT0gJ2pzb24nOgog
      ICAgICAgICAgICBnZW5lcmF0ZWRfb3V0cHV0ID0gc2VsZi5nZW5fanNvbl9vdXQoKQogICAgICAg
      IGVsaWYgc2VsZi5fYXJnX3BhcnNlci5mb3JtYXQgPT0gJ2Jhc2gnOgogICAgICAgICAgICBnZW5l
      cmF0ZWRfb3V0cHV0ID0gc2VsZi5nZW5fc2hlbGxfb3V0KCkKICAgICAgICBlbHNlOgogICAgICAg
      ICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKCJVbnN1cHBvcnRlZCBmb3JtYXQ6
      IHt9Ii5mb3JtYXQoCiAgICAgICAgICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLmZvcm1hdCkpCiAg
      ICAgICAgcHJpbnQoJ3t9Jy5mb3JtYXQoZ2VuZXJhdGVkX291dHB1dCkpCiAgICAgICAgaWYgc2Vs
      Zi5vdXRwdXRfZmlsZSBhbmQgZ2VuZXJhdGVkX291dHB1dDoKICAgICAgICAgICAgZk91dCA9IG9w
      ZW4oc2VsZi5vdXRwdXRfZmlsZSwgJ3cnKQogICAgICAgICAgICBmT3V0LndyaXRlKGdlbmVyYXRl
      ZF9vdXRwdXQpCiAgICAgICAgICAgIGZPdXQuY2xvc2UoKQoKCiMjIyMjIyMjIyMjIyMjIyMjIyMj
      IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMjIyMjIyMjIyMjIyMjIyMjIyMgTUFJTiAj
      IyMjIyMjIyMjIyMjIyMjIyMjIyMKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
      IyMjIyMjIyMjIyMjCmlmIF9fbmFtZV9fID09ICdfX21haW5fXyc6CiAgICByak9iaiA9IFJhZG9z
      SlNPTigpCiAgICB0cnk6CiAgICAgICAgcmpPYmoubWFpbigpCiAgICBleGNlcHQgRXhlY3V0aW9u
      RmFpbHVyZUV4Y2VwdGlvbiBhcyBlcnI6CiAgICAgICAgcHJpbnQoIkV4ZWN1dGlvbiBGYWlsZWQ6
      IHt9Ii5mb3JtYXQoZXJyKSkKICAgIGV4Y2VwdCBLZXlFcnJvciBhcyBrRXJyOgogICAgICAgIHBy
      aW50KCJLZXlFcnJvcjogJXMiLCBrRXJyKQogICAgZXhjZXB0IE9TRXJyb3IgYXMgb3NFcnI6CiAg
      ICAgICAgcHJpbnQoIkVycm9yIHdoaWxlIHRyeWluZyB0byBvdXRwdXQgdGhlIGRhdGE6IHt9Ii5m
      b3JtYXQob3NFcnIpKQogICAgZmluYWxseToKICAgICAgICByak9iai5zaHV0ZG93bigpCgoKIyMj
      IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiMjIyMjIyMjIyMj
      IyMjIyMjIyMjIyBURVNUICMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMjIyMjIyMjIyMjIyMjIyMj
      IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKIyBpbm9yZGVyIHRvIHRlc3QgdGhlIHBhY2th
      Z2UsCiMgY2QgPHNjcmlwdF9kaXJlY3Rvcnk+CiMgcHl0aG9uIC1tIHVuaXR0ZXN0IC0tdmVyYm9z
      ZSA8c2NyaXB0X25hbWVfd2l0aG91dF9kb3RfcHk+CmNsYXNzIFRlc3RSYWRvc0pTT04odW5pdHRl
      c3QuVGVzdENhc2UpOgogICAgZGVmIHNldFVwKHNlbGYpOgogICAgICAgIHByaW50KCJcbkkgYW0g
      aW4gc2V0dXAiKQogICAgICAgIHNlbGYucmpPYmogPSBSYWRvc0pTT04oWyctLXJiZC1kYXRhLXBv
      b2wtbmFtZT1hYmMnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICctLXJndy1lbmRw
      b2ludD0xMC4xMC4yMTIuMTIyOjkwMDAnLCAnLS1mb3JtYXQ9anNvbiddKQogICAgICAgICMgZm9y
      IHRlc3RpbmcsIHdlIGFyZSB1c2luZyAnRHVtbXlSYWRvcycgb2JqZWN0CiAgICAgICAgc2VsZi5y
      ak9iai5jbHVzdGVyID0gRHVtbXlSYWRvcy5SYWRvcygpCgogICAgZGVmIHRlYXJEb3duKHNlbGYp
      OgogICAgICAgIHByaW50KCJcbkkgYW0gdGVhcmluZyBkb3duIHRoZSBzZXR1cFxuIikKICAgICAg
      ICBzZWxmLnJqT2JqLnNodXRkb3duKCkKCiAgICBkZWYgdGVzdF9tZXRob2RfbWFpbl9vdXRwdXQo
      c2VsZik6CiAgICAgICAgcHJpbnQoIkpTT04gT3V0cHV0IikKICAgICAgICBzZWxmLnJqT2JqLl9h
      cmdfcGFyc2VyLmZvcm1hdCA9ICJqc29uIgogICAgICAgIHNlbGYucmpPYmoubWFpbigpCiAgICAg
      ICAgcHJpbnQoIlxuXG5TaGVsbCBPdXRwdXQiKQogICAgICAgIHNlbGYucmpPYmouX2FyZ19wYXJz
      ZXIuZm9ybWF0ID0gImJhc2giCiAgICAgICAgc2VsZi5yak9iai5tYWluKCkKICAgICAgICBwcmlu
      dCgiXG5cbk5vbiBjb21wYXRpYmxlIG91dHB1dCAoLS1hYmNkKSIpCiAgICAgICAgdHJ5OgogICAg
      ICAgICAgICBzZWxmLnJqT2JqLl9hcmdfcGFyc2VyLmZvcm1hdCA9ICdhYmNkJwogICAgICAgICAg
      ICBzZWxmLnJqT2JqLm1haW4oKQogICAgICAgICAgICBzZWxmLmZhaWwoIkZ1bmN0aW9uIHNob3Vs
      ZCBoYXZlIHRocm93biBhbiBFeGNlcHRpb24iKQogICAgICAgIGV4Y2VwdCBFeGVjdXRpb25GYWls
      dXJlRXhjZXB0aW9uIGFzIGVycjoKICAgICAgICAgICAgcHJpbnQoIkV4Y2VwdGlvbiB0aHJvd24g
      c3VjY2Vzc2Z1bGx5OiB7fSIuZm9ybWF0KGVycikpCgogICAgZGVmIHRlc3RfbWV0aG9kX2NyZWF0
      ZV9jZXBoQ1NJS2V5cmluZ19jZXBoRlNQcm92aXNpb25lcihzZWxmKToKICAgICAgICBjc2lLZXly
      aW5nID0gc2VsZi5yak9iai5jcmVhdGVfY2VwaENTSUtleXJpbmdfY2VwaEZTUHJvdmlzaW9uZXIo
      KQogICAgICAgIHByaW50KCJ7fSIuZm9ybWF0KGNzaUtleXJpbmcpKQoKICAgIGRlZiB0ZXN0X25v
      bl96ZXJvX3JldHVybl9hbmRfZXJyb3Ioc2VsZik6CiAgICAgICAgc2VsZi5yak9iai5jbHVzdGVy
      LnJldHVybl92YWwgPSAxCiAgICAgICAgc2VsZi5yak9iai5jbHVzdGVyLmVycl9tZXNzYWdlID0g
      IkR1bW15IEVycm9yIgogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5yak9iai5jcmVhdGVf
      Y2hlY2tlcktleSgpCiAgICAgICAgICAgIHNlbGYuZmFpbCgiRmFpbGVkIHRvIHJhaXNlIGFuIGV4
      Y2VwdGlvbiwgJ0V4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24nIikKICAgICAgICBleGNlcHQgRXhl
      Y3V0aW9uRmFpbHVyZUV4Y2VwdGlvbiBhcyBlcnI6CiAgICAgICAgICAgIHByaW50KCJTdWNjZXNz
      ZnVsbHkgdGhyb3duIGVycm9yLlxuRXJyb3I6IHt9Ii5mb3JtYXQoZXJyKSkKCiAgICBkZWYgdGVz
      dF9tdWx0aV9maWxlc3lzdGVtX3NjZW5hcmlvKHNlbGYpOgogICAgICAgIGNtZF9rZXkgPSBzZWxm
      LnJqT2JqLmNsdXN0ZXIuY21kX25hbWVzWydmcyBscyddCiAgICAgICAgY21kX291dCA9IHNlbGYu
      cmpPYmouY2x1c3Rlci5jbWRfb3V0cHV0X21hcFtjbWRfa2V5XQogICAgICAgIGNtZF9qc29uX291
      dCA9IGpzb24ubG9hZHMoY21kX291dCkKICAgICAgICBzZWNvbmRfZnNfZGV0YWlscyA9IGRpY3Qo
      Y21kX2pzb25fb3V0WzBdKQogICAgICAgIHNlY29uZF9mc19kZXRhaWxzWyduYW1lJ10gKz0gJy0y
      JwogICAgICAgIGNtZF9qc29uX291dC5hcHBlbmQoc2Vjb25kX2ZzX2RldGFpbHMpCiAgICAgICAg
      c2VsZi5yak9iai5jbHVzdGVyLmNtZF9vdXRwdXRfbWFwW2NtZF9rZXldID0ganNvbi5kdW1wcyhj
      bWRfanNvbl9vdXQpCiAgICAgICAgIyBtdWx0aXBsZSBmaWxlc3lzdGVtIHByZXNlbnQsCiAgICAg
      ICAgIyBidXQgbm8gc3BlY2lmaWMgJy0tY2VwaGZzLWZpbGVzeXN0ZW0tbmFtZScgYXJndW1lbnQg
      cHJvdmlkZWQKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYucmpPYmouZ2V0X2NlcGhmc19k
      YXRhX3Bvb2xfZGV0YWlscygpCiAgICAgICAgICAgIHByaW50KCJBcyB3ZSBhcmUgcmV0dXJuaW5n
      IHNpbGVudGx5LCBubyBlcnJvciB0aHJvd24gYXMgZXhwZWN0ZWQiKQogICAgICAgIGV4Y2VwdCBF
      eGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uIGFzIGVycjoKICAgICAgICAgICAgc2VsZi5mYWlsKAog
      ICAgICAgICAgICAgICAgIlN1cHBvc2VkIHRvIGdldCByZXR1cm5lZCBzaWxlbnRseSwgYnV0IGlu
      c3RlYWQgZXJyb3IgdGhyb3duOiB7fSIuZm9ybWF0KGVycikpCiAgICAgICAgIyBwYXNzIGFuIGV4
      aXN0aW5nIGZpbGVzeXN0ZW0gbmFtZQogICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5yak9i
      ai5fYXJnX3BhcnNlci5jZXBoZnNfZmlsZXN5c3RlbV9uYW1lID0gc2Vjb25kX2ZzX2RldGFpbHNb
      J25hbWUnXQogICAgICAgICAgICBzZWxmLnJqT2JqLmdldF9jZXBoZnNfZGF0YV9wb29sX2RldGFp
      bHMoKQogICAgICAgIGV4Y2VwdCBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uIGFzIGVycjoKICAg
      ICAgICAgICAgc2VsZi5mYWlsKCJTaG91bGQgbm90IGhhdmUgdGhyb3duIGVycm9yOiB7fSIuZm9y
      bWF0KGVycikpCiAgICAgICAgIyBwYXNzIGEgbm9uLWV4aXN0aW5nIGZpbGVzeXN0ZW0gbmFtZQog
      ICAgICAgIHRyeToKICAgICAgICAgICAgc2VsZi5yak9iai5fYXJnX3BhcnNlci5jZXBoZnNfZmls
      ZXN5c3RlbV9uYW1lICs9ICItbm9uLWV4aXN0aW5nLWZzLW5hbWUiCiAgICAgICAgICAgIHNlbGYu
      cmpPYmouZ2V0X2NlcGhmc19kYXRhX3Bvb2xfZGV0YWlscygpCiAgICAgICAgICAgIHNlbGYuZmFp
      bCgiQW4gRXhjZXB0aW9uIHdhcyBleHBlY3RlZCB0byBiZSB0aHJvd24iKQogICAgICAgIGV4Y2Vw
      dCBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uIGFzIGVycjoKICAgICAgICAgICAgcHJpbnQoIlN1
      Y2Nlc3NmdWxseSB0aHJvd24gZXJyb3I6IHt9Ii5mb3JtYXQoZXJyKSkKICAgICAgICAjIGVtcHR5
      IGZpbGUtc3lzdGVtIGFycmF5CiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLnJqT2JqLmNs
      dXN0ZXIuY21kX291dHB1dF9tYXBbY21kX2tleV0gPSBqc29uLmR1bXBzKFtdKQogICAgICAgICAg
      ICBzZWxmLnJqT2JqLmdldF9jZXBoZnNfZGF0YV9wb29sX2RldGFpbHMoKQogICAgICAgICAgICBz
      ZWxmLmZhaWwoIkFuIEV4Y2VwdGlvbiB3YXMgZXhwZWN0ZWQgdG8gYmUgdGhyb3duIikKICAgICAg
      ICBleGNlcHQgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbiBhcyBlcnI6CiAgICAgICAgICAgIHBy
      aW50KCJTdWNjZXNzZnVsbHkgdGhyb3duIGVycm9yOiB7fSIuZm9ybWF0KGVycikpCgogICAgZGVm
      IHRlc3RfbXVsdGlfZGF0YV9wb29sX3NjZW5hcmlvKHNlbGYpOgogICAgICAgIGNtZF9rZXkgPSBz
      ZWxmLnJqT2JqLmNsdXN0ZXIuY21kX25hbWVzWydmcyBscyddCiAgICAgICAgY21kX291dCA9IHNl
      bGYucmpPYmouY2x1c3Rlci5jbWRfb3V0cHV0X21hcFtjbWRfa2V5XQogICAgICAgIGNtZF9qc29u
      X291dCA9IGpzb24ubG9hZHMoY21kX291dCkKICAgICAgICBmaXJzdF9mc19kZXRhaWxzID0gY21k
      X2pzb25fb3V0WzBdCiAgICAgICAgbmV3X2RhdGFfcG9vbF9uYW1lID0gJ215ZnMtZGF0YTEnCiAg
      ICAgICAgZmlyc3RfZnNfZGV0YWlsc1snZGF0YV9wb29scyddLmFwcGVuZChuZXdfZGF0YV9wb29s
      X25hbWUpCiAgICAgICAgcHJpbnQoIk1vZGlmaWVkIEpTT04gQ21kIE91dDoge30iLmZvcm1hdChj
      bWRfanNvbl9vdXQpKQogICAgICAgIHNlbGYucmpPYmouX2FyZ19wYXJzZXIuY2VwaGZzX2RhdGFf
      cG9vbF9uYW1lID0gbmV3X2RhdGFfcG9vbF9uYW1lCiAgICAgICAgc2VsZi5yak9iai5jbHVzdGVy
      LmNtZF9vdXRwdXRfbWFwW2NtZF9rZXldID0ganNvbi5kdW1wcyhjbWRfanNvbl9vdXQpCiAgICAg
      ICAgc2VsZi5yak9iai5nZXRfY2VwaGZzX2RhdGFfcG9vbF9kZXRhaWxzKCkKICAgICAgICAjIHVz
      ZSBhIG5vbi1leGlzdGluZyBkYXRhLXBvb2wtbmFtZQogICAgICAgIGJhZF9kYXRhX3Bvb2xfbmFt
      ZSA9ICdteWZzLWRhdGEzJwogICAgICAgIHNlbGYucmpPYmouX2FyZ19wYXJzZXIuY2VwaGZzX2Rh
      dGFfcG9vbF9uYW1lID0gYmFkX2RhdGFfcG9vbF9uYW1lCiAgICAgICAgdHJ5OgogICAgICAgICAg
      ICBzZWxmLnJqT2JqLmdldF9jZXBoZnNfZGF0YV9wb29sX2RldGFpbHMoKQogICAgICAgICAgICBz
      ZWxmLmZhaWwoIkFuIEV4Y2VwdGlvbiB3YXMgZXhwZWN0ZWQgdG8gYmUgdGhyb3duIikKICAgICAg
      ICBleGNlcHQgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbiBhcyBlcnI6CiAgICAgICAgICAgIHBy
      aW50KCJTdWNjZXNzZnVsbHkgdGhyb3duIGVycm9yOiB7fSIuZm9ybWF0KGVycikpCiAgICAgICAg
      IyBlbXB0eSBkYXRhLXBvb2wgc2NlbmFyaW8KICAgICAgICBmaXJzdF9mc19kZXRhaWxzWydkYXRh
      X3Bvb2xzJ10gPSBbXQogICAgICAgIHNlbGYucmpPYmouY2x1c3Rlci5jbWRfb3V0cHV0X21hcFtj
      bWRfa2V5XSA9IGpzb24uZHVtcHMoY21kX2pzb25fb3V0KQogICAgICAgIHRyeToKICAgICAgICAg
      ICAgc2VsZi5yak9iai5nZXRfY2VwaGZzX2RhdGFfcG9vbF9kZXRhaWxzKCkKICAgICAgICAgICAg
      c2VsZi5mYWlsKCJBbiBFeGNlcHRpb24gd2FzIGV4cGVjdGVkIHRvIGJlIHRocm93biIpCiAgICAg
      ICAgZXhjZXB0IEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24gYXMgZXJyOgogICAgICAgICAgICBw
      cmludCgiU3VjY2Vzc2Z1bGx5IHRocm93biBlcnJvcjoge30iLmZvcm1hdChlcnIpKQoKICAgIGRl
      ZiB0ZXN0X3ZhbGlkX3Jnd19lbmRwb2ludChzZWxmKToKICAgICAgICBzZWxmLnJqT2JqLl9pbnZh
      bGlkX2VuZHBvaW50KCIxMC4xMC4yMTIuMTMzOjgwMDAiKQogICAgICAgICMgaW52YWxpZCBwb3J0
      CiAgICAgICAgdHJ5OgogICAgICAgICAgICBzZWxmLnJqT2JqLl9pbnZhbGlkX2VuZHBvaW50KCIx
      MC4xMC4yMTIuMTMzOjIzODAwMCIpCiAgICAgICAgICAgIHNlbGYuZmFpbCgiQW4gRXhjZXB0aW9u
      IHdhcyBleHBlY3RlZCB0byBiZSB0aHJvd24iKQogICAgICAgIGV4Y2VwdCBFeGVjdXRpb25GYWls
      dXJlRXhjZXB0aW9uIGFzIGVycjoKICAgICAgICAgICAgcHJpbnQoIlN1Y2Nlc3NmdWxseSB0aHJv
      d24gZXJyb3I6IHt9Ii5mb3JtYXQoZXJyKSkKICAgICAgICAjIG91dCBvZiByYW5nZSBJUAogICAg
      ICAgIHRyeToKICAgICAgICAgICAgc2VsZi5yak9iai5faW52YWxpZF9lbmRwb2ludCgiMTAuMTAz
      My4yMTIuMTMzOjgwMDAiKQogICAgICAgICAgICBzZWxmLmZhaWwoIkFuIEV4Y2VwdGlvbiB3YXMg
      ZXhwZWN0ZWQgdG8gYmUgdGhyb3duIikKICAgICAgICBleGNlcHQgRXhlY3V0aW9uRmFpbHVyZUV4
      Y2VwdGlvbiBhcyBlcnI6CiAgICAgICAgICAgIHByaW50KCJTdWNjZXNzZnVsbHkgdGhyb3duIGVy
      cm9yOiB7fSIuZm9ybWF0KGVycikpCiAgICAgICAgIyBtYWwgZm9ybWF0dGVkIElQCiAgICAgICAg
      dHJ5OgogICAgICAgICAgICBzZWxmLnJqT2JqLl9pbnZhbGlkX2VuZHBvaW50KCIxMC4xMDMuLjIx
      Mi4xMzM6ODAwMCIpCiAgICAgICAgICAgIHNlbGYuZmFpbCgiQW4gRXhjZXB0aW9uIHdhcyBleHBl
      Y3RlZCB0byBiZSB0aHJvd24iKQogICAgICAgIGV4Y2VwdCBFeGVjdXRpb25GYWlsdXJlRXhjZXB0
      aW9uIGFzIGVycjoKICAgICAgICAgICAgcHJpbnQoIlN1Y2Nlc3NmdWxseSB0aHJvd24gZXJyb3I6
      IHt9Ii5mb3JtYXQoZXJyKSkKICAgICAgICB0cnk6CiAgICAgICAgICAgIHNlbGYucmpPYmouX2lu
      dmFsaWRfZW5kcG9pbnQoIjEwLjEwMy4yMTIuMTMzOjo4MDAwIikKICAgICAgICAgICAgc2VsZi5m
      YWlsKCJBbiBFeGNlcHRpb24gd2FzIGV4cGVjdGVkIHRvIGJlIHRocm93biIpCiAgICAgICAgZXhj
      ZXB0IEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24gYXMgZXJyOgogICAgICAgICAgICBwcmludCgi
      U3VjY2Vzc2Z1bGx5IHRocm93biBlcnJvcjoge30iLmZvcm1hdChlcnIpKQogICAgICAgIHRyeToK
      ICAgICAgICAgICAgc2VsZi5yak9iai5faW52YWxpZF9lbmRwb2ludCgiMTAuMTAuMTAzLjIxMi4x
      MzM6ODAwMCIpCiAgICAgICAgICAgIHNlbGYuZmFpbCgiQW4gRXhjZXB0aW9uIHdhcyBleHBlY3Rl
      ZCB0byBiZSB0aHJvd24iKQogICAgICAgIGV4Y2VwdCBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9u
      IGFzIGVycjoKICAgICAgICAgICAgcHJpbnQoIlN1Y2Nlc3NmdWxseSB0aHJvd24gZXJyb3I6IHt9
      Ii5mb3JtYXQoZXJyKSkKCiAgICBkZWYgYWRkX25vbl9kZWZhdWx0X3Bvb2xfcHJlZml4X2NtZChz
      ZWxmLCBub25fZGVmYXVsdF9wb29sX3ByZWZpeCk6CiAgICAgICAganNvbl9jbWQgPSBqc29uLmxv
      YWRzKAogICAgICAgICAgICBzZWxmLnJqT2JqLmNsdXN0ZXIuY21kX25hbWVzWydjYXBzX2NoYW5n
      ZV9kZWZhdWx0X3Bvb2xfcHJlZml4J10pCiAgICAgICAgY3VyX29zZF9jYXBzID0ganNvbl9jbWRb
      J2NhcHMnXVtqc29uX2NtZFsnY2FwcyddLmluZGV4KCdvc2QnKSArIDFdCiAgICAgICAgbmV3X29z
      ZF9jYXBzID0gY3VyX29zZF9jYXBzLnJlcGxhY2UoCiAgICAgICAgICAgICdkZWZhdWx0LicsICd7
      fS4nLmZvcm1hdChub25fZGVmYXVsdF9wb29sX3ByZWZpeCkpCiAgICAgICAgYWxsX29zZF9jYXBz
      ID0gInt9LCB7fSIuZm9ybWF0KG5ld19vc2RfY2FwcywgY3VyX29zZF9jYXBzKQogICAgICAgIGNh
      cHNfbGlzdCA9IFt4LnN0cmlwKCkgZm9yIHggaW4gYWxsX29zZF9jYXBzLnNwbGl0KCcsJykgaWYg
      eC5zdHJpcCgpXQogICAgICAgIG5ld19jYXBzX2xpc3QgPSBbXQogICAgICAgIFtuZXdfY2Fwc19s
      aXN0LmFwcGVuZCh4KSBmb3IgeCBpbiBjYXBzX2xpc3QgaWYgeCBub3QgaW4gbmV3X2NhcHNfbGlz
      dF0KICAgICAgICBhbGxfb3NkX2NhcHMgPSAiLCAiLmpvaW4obmV3X2NhcHNfbGlzdCkKICAgICAg
      ICBqc29uX2NtZFsnY2FwcyddW2pzb25fY21kWydjYXBzJ10uaW5kZXgoJ29zZCcpICsgMV0gPSBh
      bGxfb3NkX2NhcHMKICAgICAgICBzZWxmLnJqT2JqLmNsdXN0ZXIuY21kX25hbWVzWydjYXBzX2No
      YW5nZV9ub25fZGVmYXVsdF9wb29sX3ByZWZpeCddID0ganNvbi5kdW1wcygKICAgICAgICAgICAg
      anNvbl9jbWQpCiAgICAgICAgc2VsZi5yak9iai5jbHVzdGVyLmNtZF9vdXRwdXRfbWFwWwogICAg
      ICAgICAgICBzZWxmLnJqT2JqLmNsdXN0ZXIuY21kX25hbWVzWydjYXBzX2NoYW5nZV9ub25fZGVm
      YXVsdF9wb29sX3ByZWZpeCddXSA9ICdbe31dJwoKICAgIGRlZiB0ZXN0X3VwZ3JhZGVfdXNlcl9w
      ZXJtaXNzaW9ucyhzZWxmKToKICAgICAgICBzZWxmLnJqT2JqID0gUmFkb3NKU09OKAogICAgICAg
      ICAgICBbJy0tdXBncmFkZScsICctLXJ1bi1hcy11c2VyPWNsaWVudC5oZWFsdGhjaGVja2VyJ10p
      CiAgICAgICAgIyBmb3IgdGVzdGluZywgd2UgYXJlIHVzaW5nICdEdW1teVJhZG9zJyBvYmplY3QK
      ICAgICAgICBzZWxmLnJqT2JqLmNsdXN0ZXIgPSBEdW1teVJhZG9zLlJhZG9zKCkKICAgICAgICBz
      ZWxmLnJqT2JqLm1haW4oKQogICAgICAgIHNlbGYucmpPYmogPSBSYWRvc0pTT04oCiAgICAgICAg
      ICAgIFsnLS11cGdyYWRlJywgJy0tcnVuLWFzLXVzZXI9Y2xpZW50LmhlYWx0aGNoZWNrZXInLCAn
      LS1yZ3ctcG9vbC1wcmVmaXg9bm9uRGVmYXVsdCddKQogICAgICAgIHNlbGYucmpPYmouY2x1c3Rl
      ciA9IER1bW15UmFkb3MuUmFkb3MoKQogICAgICAgIHNlbGYuYWRkX25vbl9kZWZhdWx0X3Bvb2xf
      cHJlZml4X2NtZCgnbm9uRGVmYXVsdCcpCiAgICAgICAgc2VsZi5yak9iai5tYWluKCkKCiAgICBk
      ZWYgdGVzdF9tb25pdG9yaW5nX2VuZHBvaW50X3ZhbGlkYXRpb24oc2VsZik6CiAgICAgICAgc2Vs
      Zi5yak9iaiA9IFJhZG9zSlNPTihbJy0tcmJkLWRhdGEtcG9vbC1uYW1lPWFiYycsICctLWZvcm1h
      dD1qc29uJ10pCiAgICAgICAgc2VsZi5yak9iai5jbHVzdGVyID0gRHVtbXlSYWRvcy5SYWRvcygp
      CgogICAgICAgIHZhbGlkX2lwX3BvcnRzID0gWygiMTAuMjIuMzEuMTMxIiwgIjkyODMiKSwKICAg
      ICAgICAgICAgICAgICAgICAgICAgICAoIjEwLjE3Ny4zLjgxIiwgIiIpLCAoIiIsICIiKSwgKCIi
      LCAiOTI4MyIpXQogICAgICAgIGZvciBlYWNoX2lwX3BvcnRfcGFpciBpbiB2YWxpZF9pcF9wb3J0
      czoKICAgICAgICAgICAgIyByZXNldCBtb25pdG9yaW5nIGlwIGFuZCBwb3J0CiAgICAgICAgICAg
      IHNlbGYucmpPYmouX2FyZ19wYXJzZXIubW9uaXRvcmluZ19lbmRwb2ludCA9ICcnCiAgICAgICAg
      ICAgIHNlbGYucmpPYmouX2FyZ19wYXJzZXIubW9uaXRvcmluZ19lbmRwb2ludF9wb3J0ID0gJycK
      ICAgICAgICAgICAgbmV3X21vbl9pcCwgbmV3X21vbl9wb3J0ID0gZWFjaF9pcF9wb3J0X3BhaXIK
      ICAgICAgICAgICAgY2hlY2tfaXBfdmFsID0gc2VsZi5yak9iai5jbHVzdGVyLmR1bW15X2hvc3Rf
      aXBfbWFwLmdldCgKICAgICAgICAgICAgICAgIG5ld19tb25faXAsIG5ld19tb25faXApCiAgICAg
      ICAgICAgIGNoZWNrX3BvcnRfdmFsID0gUmFkb3NKU09OLkRFRkFVTFRfTU9OSVRPUklOR19FTkRQ
      T0lOVF9QT1JUCiAgICAgICAgICAgIGlmIG5ld19tb25faXA6CiAgICAgICAgICAgICAgICBzZWxm
      LnJqT2JqLl9hcmdfcGFyc2VyLm1vbml0b3JpbmdfZW5kcG9pbnQgPSBuZXdfbW9uX2lwCiAgICAg
      ICAgICAgIGlmIG5ld19tb25fcG9ydDoKICAgICAgICAgICAgICAgIGNoZWNrX3BvcnRfdmFsID0g
      bmV3X21vbl9wb3J0CiAgICAgICAgICAgICAgICBzZWxmLnJqT2JqLl9hcmdfcGFyc2VyLm1vbml0
      b3JpbmdfZW5kcG9pbnRfcG9ydCA9IG5ld19tb25fcG9ydAogICAgICAgICAgICAjIGZvciB0ZXN0
      aW5nLCB3ZSBhcmUgdXNpbmcgJ0R1bW15UmFkb3MnIG9iamVjdAogICAgICAgICAgICBtb25faXAs
      IG1vbl9wb3J0ID0gc2VsZi5yak9iai5nZXRfYWN0aXZlX2NlcGhfbWdyKCkKICAgICAgICAgICAg
      aWYgY2hlY2tfaXBfdmFsIGFuZCBjaGVja19pcF92YWwgIT0gbW9uX2lwOgogICAgICAgICAgICAg
      ICAgc2VsZi5mYWlsKCJFeHBlY3RlZCBJUDoge30sIFJldHVybmVkIElQOiB7fSIuZm9ybWF0KAog
      ICAgICAgICAgICAgICAgICAgIGNoZWNrX2lwX3ZhbCwgbW9uX2lwKSkKICAgICAgICAgICAgaWYg
      Y2hlY2tfcG9ydF92YWwgYW5kIGNoZWNrX3BvcnRfdmFsICE9IG1vbl9wb3J0OgogICAgICAgICAg
      ICAgICAgc2VsZi5mYWlsKCJFeHBlY3RlZCBQb3J0OiAne30nLCBSZXR1cm5lZCBQb3J0OiAne30n
      Ii5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgY2hlY2tfcG9ydF92YWwsIG1vbl9wb3J0KSkK
      ICAgICAgICAgICAgcHJpbnQoIk1vbklQOiB7fSwgTW9uUG9ydDoge30iLmZvcm1hdChtb25faXAs
      IG1vbl9wb3J0KSkKCiAgICAgICAgaW52YWxpZF9pcF9wb3J0cyA9IFsoIjEwLjIyLjMxLjEzMS40
      MyIsICI1MzM0IiksICgiIiwgIjkxOTQiKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICgi
      MTAuMTc3LjMuODEiLCAiOTAzMjAiKSwgKCIiLCAiNzM0MjIiKSwgKCIxMC4yMzIuMTIuOCIsICI5
      MDkyIildCiAgICAgICAgZm9yIGVhY2hfaXBfcG9ydF9wYWlyIGluIGludmFsaWRfaXBfcG9ydHM6
      CiAgICAgICAgICAgICMgcmVzZXQgdGhlIGNvbW1hbmQtbGluZSBtb25pdG9yaW5nIGFyZ3MKICAg
      ICAgICAgICAgc2VsZi5yak9iai5fYXJnX3BhcnNlci5tb25pdG9yaW5nX2VuZHBvaW50ID0gJycK
      ICAgICAgICAgICAgc2VsZi5yak9iai5fYXJnX3BhcnNlci5tb25pdG9yaW5nX2VuZHBvaW50X3Bv
      cnQgPSAnJwogICAgICAgICAgICBuZXdfbW9uX2lwLCBuZXdfbW9uX3BvcnQgPSBlYWNoX2lwX3Bv
      cnRfcGFpcgogICAgICAgICAgICBpZiBuZXdfbW9uX2lwOgogICAgICAgICAgICAgICAgc2VsZi5y
      ak9iai5fYXJnX3BhcnNlci5tb25pdG9yaW5nX2VuZHBvaW50ID0gbmV3X21vbl9pcAogICAgICAg
      ICAgICBpZiBuZXdfbW9uX3BvcnQ6CiAgICAgICAgICAgICAgICBzZWxmLnJqT2JqLl9hcmdfcGFy
      c2VyLm1vbml0b3JpbmdfZW5kcG9pbnRfcG9ydCA9IG5ld19tb25fcG9ydAogICAgICAgICAgICB0
      cnk6CiAgICAgICAgICAgICAgICBtb25faXAsIG1vbl9wb3J0ID0gc2VsZi5yak9iai5nZXRfYWN0
      aXZlX2NlcGhfbWdyKCkKICAgICAgICAgICAgICAgIHByaW50KCJbV3JvbmddIE1vbklQOiB7fSwg
      TW9uUG9ydDoge30iLmZvcm1hdChtb25faXAsIG1vbl9wb3J0KSkKICAgICAgICAgICAgICAgIHNl
      bGYuZmFpbCgiQW4gZXhjZXB0aW9uIHdhcyBleHBlY3RlZCIpCiAgICAgICAgICAgIGV4Y2VwdCBF
      eGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uIGFzIGVycjoKICAgICAgICAgICAgICAgIHByaW50KCJF
      eGNlcHRpb24gdGhyb3duIHN1Y2Nlc3NmdWxseToge30iLmZvcm1hdChlcnIpKQo=
  name: ceph.v{{.RookOperatorCsvVersion}}
  namespace: placeholder
spec:
  apiservicedefinitions: {}
  customresourcedefinitions:
    owned:
    - kind: CephBlockPool
      name: cephblockpools.ceph.rook.io
      version: v1
    - kind: CephClient
      name: cephclients.ceph.rook.io
      version: v1
    - kind: CephCluster
      name: cephclusters.ceph.rook.io
      version: v1
    - kind: CephFilesystem
      name: cephfilesystems.ceph.rook.io
      version: v1
    - kind: CephNFS
      name: cephnfses.ceph.rook.io
      version: v1
    - kind: CephObjectRealm
      name: cephobjectrealms.ceph.rook.io
      version: v1
    - kind: CephObjectStore
      name: cephobjectstores.ceph.rook.io
      version: v1
    - kind: CephObjectStoreUser
      name: cephobjectstoreusers.ceph.rook.io
      version: v1
    - kind: CephObjectZoneGroup
      name: cephobjectzonegroups.ceph.rook.io
      version: v1
    - kind: CephObjectZone
      name: cephobjectzones.ceph.rook.io
      version: v1
    - kind: CephRBDMirror
      name: cephrbdmirrors.ceph.rook.io
      version: v1
    - kind: CephCluster
      name: cephclusters.ceph.rook.io
      version: v1
      displayName: Ceph Cluster
      description: Represents a Ceph cluster.
    - kind: CephBlockPool
      name: cephblockpools.ceph.rook.io
      version: v1
      displayName: Ceph Block Pool
      description: Represents a Ceph Block Pool.
    - kind: CephObjectStore
      name: cephobjectstores.ceph.rook.io
      version: v1
      displayName: Ceph Object Store
      description: Represents a Ceph Object Store.
      specDescriptors:
      - description: Coding Chunks
        displayName: Coding Chunks
        path: dataPool.erasureCoded.codingChunks
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:dataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: Data Chunks
        displayName: Data Chunks
        path: dataPool.erasureCoded.dataChunks
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:dataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: failureDomain
        displayName: failureDomain
        path: dataPool.failureDomain
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:dataPool
        - urn:alm:descriptor:com.tectonic.ui:text
      - description: Size
        displayName: Size
        path: dataPool.replicated.size
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:dataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: Annotations
        displayName: Annotations
        path: gateway.annotations
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:io.kubernetes:annotations
      - description: Instances
        displayName: Instances
        path: gateway.instances
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: Resources
        displayName: Resources
        path: gateway.resources
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:com.tectonic.ui:resourceRequirements
      - description: placement
        displayName: placement
        path: gateway.placement
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:io.kubernetes:placement
      - description: securePort
        displayName: securePort
        path: gateway.securePort
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:io.kubernetes:securePort
      - description: sslCertificateRef
        displayName: sslCertificateRef
        path: gateway.sslCertificateRef
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:io.kubernetes:sslCertificateRef
      - description: Type
        displayName: Type
        path: gateway.type
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:com.tectonic.ui:text
      - description: Coding Chunks
        displayName: Coding Chunks
        path: metadataPool.erasureCoded.codingChunks
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:metadataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: Data Chunks
        displayName: Data Chunks
        path: metadataPool.erasureCoded.dataChunks
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:metadataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: failureDomain
        displayName: failureDomain
        path: metadataPool.failureDomain
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:metadataPool
        - urn:alm:descriptor:com.tectonic.ui:text
      - description: Size
        displayName: Size
        path: metadataPool.replicated.size
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:metadataPool
        - urn:alm:descriptor:com.tectonic.ui:number
    - kind: CephObjectStoreUser
      name: cephobjectstoreusers.ceph.rook.io
      version: v1
      displayName: Ceph Object Store User
      description: Represents a Ceph Object Store User.
    - kind: CephNFS
      name: cephnfses.ceph.rook.io
      version: v1
      displayName: Ceph NFS
      description: Represents a cluster of Ceph NFS ganesha gateways.
    - kind: CephClient
      name: cephclients.ceph.rook.io
      version: v1
      displayName: Ceph Client
      description: Represents a Ceph User.
    - kind: CephFilesystem
      name: cephfilesystems.ceph.rook.io
      version: v1
      displayName: Ceph Filesystem
      description: Represents a Ceph Filesystem.
    - kind: CephRBDMirror
      name: cephrbdmirrors.ceph.rook.io
      version: v1
      displayName: Ceph RBD Mirror
      description: Represents a Ceph RBD Mirror.
    - kind: CephObjectRealm
      name: cephobjectrealms.ceph.rook.io
      version: v1
      displayName: Ceph Object Store Realm
      description: Represents a Ceph Object Store Realm.
    - kind: CephObjectZoneGroup
      name: cephobjectzonegroups.ceph.rook.io
      version: v1
      displayName: Ceph Object Store Zone Group
      description: Represents a Ceph Object Store Zone Group.
    - kind: CephObjectZone
      name: cephobjectzones.ceph.rook.io
      version: v1
      displayName: Ceph Object Store Zone
      description: Represents a Ceph Object Store Zone.
  displayName: Rook-Ceph
  icon:
  - base64data: PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDIzLjAuMiwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCA3MCA3MCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNzAgNzA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj4KCS5zdDB7ZmlsbDojMkIyQjJCO30KPC9zdHlsZT4KPGc+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTUwLjUsNjcuNkgxOS45Yy04LDAtMTQuNS02LjUtMTQuNS0xNC41VjI5LjJjMC0xLjEsMC45LTIuMSwyLjEtMi4xaDU1LjRjMS4xLDAsMi4xLDAuOSwyLjEsMi4xdjIzLjkKCQkJCUM2NSw2MS4xLDU4LjUsNjcuNiw1MC41LDY3LjZ6IE05LjYsMzEuMnYyMS45YzAsNS43LDQuNiwxMC4zLDEwLjMsMTAuM2gzMC42YzUuNywwLDEwLjMtNC42LDEwLjMtMTAuM1YzMS4ySDkuNnoiLz4KCQk8L2c+CgkJPGc+CgkJCTxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik00Mi40LDU2LjdIMjhjLTEuMSwwLTIuMS0wLjktMi4xLTIuMXYtNy4yYzAtNS4xLDQuMi05LjMsOS4zLTkuM3M5LjMsNC4yLDkuMyw5LjN2Ny4yCgkJCQlDNDQuNSw1NS43LDQzLjYsNTYuNyw0Mi40LDU2Ljd6IE0zMCw1Mi41aDEwLjN2LTUuMmMwLTIuOS0yLjMtNS4yLTUuMi01LjJjLTIuOSwwLTUuMiwyLjMtNS4yLDUuMlY1Mi41eiIvPgoJCTwvZz4KCQk8Zz4KCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTYyLjksMjMuMkM2Mi45LDIzLjIsNjIuOSwyMy4yLDYyLjksMjMuMmwtMTEuMSwwYy0xLjEsMC0yLjEtMC45LTIuMS0yLjFjMC0xLjEsMC45LTIuMSwyLjEtMi4xCgkJCQljMCwwLDAsMCwwLDBsOS4xLDBWNi43aC02Ljl2My41YzAsMC41LTAuMiwxLjEtMC42LDEuNWMtMC40LDAuNC0wLjksMC42LTEuNSwwLjZsMCwwbC0xMS4xLDBjLTEuMSwwLTIuMS0wLjktMi4xLTIuMVY2LjdoLTYuOQoJCQkJdjMuNWMwLDEuMS0wLjksMi4xLTIuMSwyLjFsLTExLjEsMGMtMC41LDAtMS4xLTAuMi0xLjUtMC42Yy0wLjQtMC40LTAuNi0wLjktMC42LTEuNVY2LjdIOS42djEyLjRoOWMxLjEsMCwyLjEsMC45LDIuMSwyLjEKCQkJCXMtMC45LDIuMS0yLjEsMi4xaC0xMWMtMS4xLDAtMi4xLTAuOS0yLjEtMi4xVjQuNmMwLTEuMSwwLjktMi4xLDIuMS0yLjFoMTEuMWMxLjEsMCwyLjEsMC45LDIuMSwyLjF2My41bDcsMFY0LjYKCQkJCWMwLTEuMSwwLjktMi4xLDIuMS0yLjFoMTEuMWMxLjEsMCwyLjEsMC45LDIuMSwyLjF2My41bDYuOSwwVjQuNmMwLTEuMSwwLjktMi4xLDIuMS0yLjFoMTEuMUM2NCwyLjYsNjUsMy41LDY1LDQuNnYxNi41CgkJCQljMCwwLjUtMC4yLDEuMS0wLjYsMS41QzY0LDIzLDYzLjQsMjMuMiw2Mi45LDIzLjJ6Ii8+CgkJPC9nPgoJPC9nPgo8L2c+Cjwvc3ZnPg==
    mediatype: image/svg+xml
  install:
    spec:
      clusterPermissions:
      - rules:
        - apiGroups:
          - ceph.rook.io
          resources:
          - '*'
          verbs:
          - get
          - watch
          - list
        serviceAccountName: rook-ceph-admission-controller-role
      - rules:
        - apiGroups:
          - ""
          - apps
          - extensions
          resources:
          - secrets
          - pods
          - pods/log
          - services
          - configmaps
          - deployments
          - daemonsets
          verbs:
          - get
          - list
          - watch
          - patch
          - create
          - update
          - delete
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - nodes
          - nodes/proxy
          - services
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - events
          - persistentvolumes
          - persistentvolumeclaims
          - endpoints
          verbs:
          - get
          - list
          - watch
          - patch
          - create
          - update
          - delete
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - batch
          resources:
          - jobs
          - cronjobs
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - ceph.rook.io
          resources:
          - '*'
          verbs:
          - '*'
        - apiGroups:
          - rook.io
          resources:
          - '*'
          verbs:
          - '*'
        - apiGroups:
          - policy
          - apps
          - extensions
          resources:
          - poddisruptionbudgets
          - deployments
          - replicasets
          verbs:
          - '*'
        - apiGroups:
          - healthchecking.openshift.io
          resources:
          - machinedisruptionbudgets
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - machine.openshift.io
          resources:
          - machines
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - storage.k8s.io
          resources:
          - csidrivers
          verbs:
          - create
          - delete
          - get
          - update
        - apiGroups:
          - k8s.cni.cncf.io
          resources:
          - network-attachment-definitions
          verbs:
          - get
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - ""
          resources:
          - configmaps
          - nodes
          - nodes/proxy
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - events
          verbs:
          - create
          - patch
          - list
          - get
          - watch
        serviceAccountName: rook-ceph-mgr
      - rules:
        - apiGroups:
          - ""
          resources:
          - secrets
          - configmaps
          verbs:
          - '*'
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - objectbucket.io
          resources:
          - '*'
          verbs:
          - '*'
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
        serviceAccountName: rook-ceph-osd
      - rules:
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
          - watch
        serviceAccountName: rook-ceph-mgr
      - rules:
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
          - update
        - apiGroups:
          - ""
          resources:
          - namespaces
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
        serviceAccountName: rook-csi-cephfs-plugin-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - secrets
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
          - create
          - delete
          - update
          - patch
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - events
          verbs:
          - list
          - watch
          - create
          - update
          - patch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshots
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotcontents
          verbs:
          - create
          - get
          - list
          - watch
          - update
          - delete
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotcontents/status
          verbs:
          - update
        - apiGroups:
          - apiextensions.k8s.io
          resources:
          - customresourcedefinitions
          verbs:
          - create
          - list
          - watch
          - delete
          - get
          - update
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshots/status
          verbs:
          - update
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments
          verbs:
          - get
          - list
          - watch
          - update
          - patch
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments/status
          verbs:
          - patch
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims/status
          verbs:
          - update
          - patch
        serviceAccountName: rook-csi-cephfs-provisioner-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - secrets
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
          - update
        - apiGroups:
          - ""
          resources:
          - namespaces
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
        serviceAccountName: rook-csi-rbd-plugin-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - secrets
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
          - create
          - delete
          - update
          - patch
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments
          verbs:
          - get
          - list
          - watch
          - update
          - patch
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments/status
          verbs:
          - patch
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - events
          verbs:
          - list
          - watch
          - create
          - update
          - patch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshots
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotcontents
          verbs:
          - create
          - get
          - list
          - watch
          - update
          - delete
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotcontents/status
          verbs:
          - update
        - apiGroups:
          - apiextensions.k8s.io
          resources:
          - customresourcedefinitions
          verbs:
          - create
          - list
          - watch
          - delete
          - get
          - update
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshots/status
          verbs:
          - update
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims/status
          verbs:
          - update
          - patch
        serviceAccountName: rook-csi-rbd-provisioner-sa
      - rules:
        - verbs:
          - use
          apiGroups:
          - security.openshift.io
          resources:
          - securitycontextconstraints
          resourceNames:
          - privileged
        serviceAccountName: rook-ceph-system
      deployments:
      - name: rook-ceph-operator
        spec:
          replicas: 1
          selector:
            matchLabels:
              app: rook-ceph-operator
          strategy: {}
          template:
            metadata:
              labels:
                app: rook-ceph-operator
            spec:
              containers:
              - args:
                - ceph
                - operator
                env:
                - name: ROOK_CURRENT_NAMESPACE_ONLY
                  value: "false"
                - name: FLEXVOLUME_DIR_PATH
                  value: /etc/kubernetes/kubelet-plugins/volume/exec
                - name: ROOK_ALLOW_MULTIPLE_FILESYSTEMS
                  value: "false"
                - name: ROOK_LOG_LEVEL
                  value: INFO
                - name: ROOK_DISCOVER_DEVICES_INTERVAL
                  value: 60m
                - name: ROOK_HOSTPATH_REQUIRES_PRIVILEGED
                  value: "true"
                - name: ROOK_ENABLE_SELINUX_RELABELING
                  value: "true"
                - name: ROOK_ENABLE_FSGROUP
                  value: "true"
                - name: ROOK_DISABLE_DEVICE_HOTPLUG
                  value: "false"
                - name: DISCOVER_DAEMON_UDEV_BLACKLIST
                  value: (?i)dm-[0-9]+,(?i)rbd[0-9]+,(?i)nbd[0-9]+
                - name: ROOK_ENABLE_FLEX_DRIVER
                  value: "false"
                - name: ROOK_ENABLE_DISCOVERY_DAEMON
                  value: "false"
                - name: ROOK_ENABLE_MACHINE_DISRUPTION_BUDGET
                  value: "false"
                - name: ROOK_UNREACHABLE_NODE_TOLERATION_SECONDS
                  value: "5"
                - name: NODE_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: spec.nodeName
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
                - name: POD_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                image: '{{.RookOperatorImage}}'
                name: rook-ceph-operator
                resources: {}
                volumeMounts:
                - mountPath: /var/lib/rook
                  name: rook-config
                - mountPath: /etc/ceph
                  name: default-config-dir
              serviceAccountName: rook-ceph-system
              volumes:
              - emptyDir: {}
                name: rook-config
              - emptyDir: {}
                name: default-config-dir
      permissions:
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - configmaps
          - services
          verbs:
          - get
          - list
          - watch
          - patch
          - create
          - update
          - delete
        - apiGroups:
          - apps
          - extensions
          resources:
          - daemonsets
          - statefulsets
          - deployments
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - batch
          resources:
          - cronjobs
          verbs:
          - delete
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - ceph.rook.io
          resources:
          - cephclusters
          - cephclusters/finalizers
          verbs:
          - get
          - list
          - create
          - update
          - delete
        serviceAccountName: rook-ceph-osd
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - services
          - pods/log
          verbs:
          - get
          - list
          - watch
          - delete
        - apiGroups:
          - batch
          resources:
          - jobs
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - ceph.rook.io
          resources:
          - '*'
          verbs:
          - '*'
        serviceAccountName: rook-ceph-mgr
      - rules:
        - apiGroups:
          - ""
          resources:
          - endpoints
          verbs:
          - get
          - watch
          - list
          - delete
          - update
          - create
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
          - create
          - delete
        - apiGroups:
          - coordination.k8s.io
          resources:
          - leases
          verbs:
          - get
          - watch
          - list
          - delete
          - update
          - create
        serviceAccountName: rook-csi-cephfs-provisioner-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - endpoints
          verbs:
          - get
          - watch
          - list
          - delete
          - update
          - create
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
          - watch
          - create
          - delete
          - update
        - apiGroups:
          - coordination.k8s.io
          resources:
          - leases
          verbs:
          - get
          - watch
          - list
          - delete
          - update
          - create
        serviceAccountName: rook-csi-rbd-provisioner-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - configmaps
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        serviceAccountName: rook-ceph-cmd-reporter
    strategy: deployment
  installModes:
  - type: OwnNamespace
    supported: true
  - type: SingleNamespace
    supported: true
  - type: MultiNamespace
    supported: false
  - type: AllNamespaces
    supported: false
  keywords:
  - rook
  - ceph
  - storage
  - object storage
  - open source
  - block storage
  - shared filesystem
  maintainers:
  - name: Red Hat, Inc.
    email: customerservice@redhat.com
  maturity: alpha
  provider:
    name: Red Hat, Inc.
  version: {{.RookOperatorCsvVersion}}
  replaces: rook-ceph.v1.1.1
  description: |2

    The Rook-Ceph storage operator packages, deploys, manages, upgrades and scales Ceph storage for providing persistent storage to infrastructure services (Logging, Metrics, Registry) as well as stateful applications in Kubernetes clusters.

    ## Rook-Ceph Storage Operator

    Rook runs as a cloud-native service in Kubernetes clusters for optimal integration with applications in need of storage, and handles the heavy-lifting behind the scenes such as provisioning and management.
    Rook orchestrates battle-tested open-source storage technology Ceph, which has years of production deployments and runs some of the worlds largest clusters.

    Ceph is a massively scalable, software-defined, cloud native storage platform that offers block, file and object storage services.
    Ceph can be used to back a wide variety of applications including relational databases, NoSQL databases, CI/CD tool-sets, messaging, AI/ML and analytics applications.
    Ceph is a proven storage platform that backs some of the world's largest storage deployments and has a large vibrant open source community backing the project.

    ## Supported features
    * **High Availability and resiliency** - Ceph has no single point of failures (SPOF) and all its components work natively in a highly available fashion
    * **Data Protection** - Ceph periodically scrub for inconsistent objects and repair them if necessary, making sure your replicas are always coherent
    * **Consistent storage platform across hybrid cloud** - Ceph can be deployed anywhere (on-premise or bare metal) and thus offers a similar experience regardless
    * **Block, File & Object storage service** - Ceph can expose your data through several storage interfaces, solving all the application use cases
    * **Scale up/down** - addition and removal of storage is fully covered by the operator.
    * **Dashboard** - The Operator deploys a dashboard for monitoring and introspecting your cluster.

    ## Before you start
    https://rook.io/docs/rook/v1.0/k8s-pre-reqs.html
  minKubeVersion: 1.10.0
  labels:
    alm-owner-etcd: rookoperator
    operated-by: rookoperator
  selector:
    matchLabels:
      alm-owner-etcd: rookoperator
      operated-by: rookoperator
  links:
  - name: Blog
    url: https://blog.rook.io
  - name: Documentation
    url: https://rook.github.io/docs/rook/v1.0/
