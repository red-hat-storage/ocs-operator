---
apiVersion: operators.coreos.com/v1alpha1
kind: ClusterServiceVersion
metadata:
  annotations:
    alm-examples: |2-

      [
          {
              "apiVersion": "ocs.openshift.io/v1",
              "kind": "StorageCluster",
              "metadata": {
                  "name": "example-storagecluster",
                  "namespace": "openshift-storage"
              },
              "spec": {
                  "manageNodes": false,
                  "monPVCTemplate": {
                      "spec": {
                          "accessModes": [
                              "ReadWriteOnce"
                          ],
                          "resources": {
                              "requests": {
                                  "storage": "10Gi"
                              }
                          },
                          "storageClassName": "gp2-csi"
                      }
                  },
                  "storageDeviceSets": [
                      {
                          "count": 3,
                          "dataPVCTemplate": {
                              "spec": {
                                  "accessModes": [
                                      "ReadWriteOnce"
                                  ],
                                  "resources": {
                                      "requests": {
                                          "storage": "1Ti"
                                      }
                                  },
                                  "storageClassName": "gp2-csi",
                                  "volumeMode": "Block"
                              }
                          },
                          "name": "example-deviceset",
                          "placement": {},
                          "portable": true,
                          "resources": {}
                      }
                  ]
              }
          }
      ]
    capabilities: Deep Insights
    categories: Storage
    containerImage: quay.io/ocs-dev/ocs-operator:4.12.0
    description: The Container Storage provides hyperconverged storage for applications
      within an OpenShift cluster.
    external.features.ocs.openshift.io/export-script: |-
      IiIiCkNvcHlyaWdodCAyMDIwIFRoZSBSb29rIEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQu
      CgpMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxp
      Y2Vuc2UiKTsKeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3
      aXRoIHRoZSBMaWNlbnNlLgpZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQK
      CglodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKClVubGVzcyByZXF1
      aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUK
      ZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElT
      IiBCQVNJUywKV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVp
      dGhlciBleHByZXNzIG9yIGltcGxpZWQuClNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmlj
      IGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKbGltaXRhdGlvbnMgdW5kZXIgdGhl
      IExpY2Vuc2UuCiIiIgoKaW1wb3J0IGVycm5vCmltcG9ydCBzeXMKaW1wb3J0IGpzb24KaW1wb3J0
      IGFyZ3BhcnNlCmltcG9ydCByZQppbXBvcnQgc3VicHJvY2VzcwppbXBvcnQgaG1hYwpmcm9tIGhh
      c2hsaWIgaW1wb3J0IHNoYTEgYXMgc2hhCmZyb20gb3MgaW1wb3J0IGxpbmVzZXAgYXMgTElORVNF
      UApmcm9tIG9zIGltcG9ydCBwYXRoCmZyb20gZW1haWwudXRpbHMgaW1wb3J0IGZvcm1hdGRhdGUK
      aW1wb3J0IHVybGxpYi5wYXJzZQoKaW1wb3J0IHJlcXVlc3RzCmZyb20gcmVxdWVzdHMuYXV0aCBp
      bXBvcnQgQXV0aEJhc2UKCk1vZHVsZU5vdEZvdW5kRXJyb3IgPSBJbXBvcnRFcnJvcgoKdHJ5Ogog
      ICAgaW1wb3J0IHJhZG9zCmV4Y2VwdCBNb2R1bGVOb3RGb3VuZEVycm9yIGFzIG5vTW9kRXJyOgog
      ICAgcHJpbnQoIkVycm9yOiAlc1xuRXhpdGluZyB0aGUgc2NyaXB0Li4uIiAlIG5vTW9kRXJyKQog
      ICAgc3lzLmV4aXQoMSkKCnRyeToKICAgIGltcG9ydCByYmQKZXhjZXB0IE1vZHVsZU5vdEZvdW5k
      RXJyb3IgYXMgbm9Nb2RFcnI6CiAgICBwcmludCgiRXJyb3I6ICVzXG5FeGl0aW5nIHRoZSBzY3Jp
      cHQuLi4iICUgbm9Nb2RFcnIpCiAgICBzeXMuZXhpdCgxKQoKdHJ5OgogICAgIyBmb3IgMi43LngK
      ICAgIGZyb20gU3RyaW5nSU8gaW1wb3J0IFN0cmluZ0lPCmV4Y2VwdCBNb2R1bGVOb3RGb3VuZEVy
      cm9yOgogICAgIyBmb3IgMy54CiAgICBmcm9tIGlvIGltcG9ydCBTdHJpbmdJTwoKdHJ5OgogICAg
      IyBmb3IgMi43LngKICAgIGZyb20gdXJscGFyc2UgaW1wb3J0IHVybHBhcnNlCmV4Y2VwdCBNb2R1
      bGVOb3RGb3VuZEVycm9yOgogICAgIyBmb3IgMy54CiAgICBmcm9tIHVybGxpYi5wYXJzZSBpbXBv
      cnQgdXJscGFyc2UKCnB5M2sgPSBGYWxzZQp0cnk6CiAgICBmcm9tIHVybHBhcnNlIGltcG9ydCB1
      cmxwYXJzZQogICAgZnJvbSBiYXNlNjQgaW1wb3J0IGVuY29kZXN0cmluZwpleGNlcHQ6CiAgICBw
      eTNrID0gVHJ1ZQogICAgZnJvbSB1cmxsaWIucGFyc2UgaW1wb3J0IHVybHBhcnNlCiAgICBmcm9t
      IGJhc2U2NCBpbXBvcnQgZW5jb2RlYnl0ZXMgYXMgZW5jb2Rlc3RyaW5nCgoKY2xhc3MgRXhlY3V0
      aW9uRmFpbHVyZUV4Y2VwdGlvbihFeGNlcHRpb24pOgogICAgcGFzcwoKCiMjIyMjIyMjIyMjIyMj
      IyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwojIyMjIyMjIyMjIyMjIyMjIyMgRHVt
      bXlSYWRvcyAjIyMjIyMjIyMjIyMjIyMjIyMKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
      IyMjIyMjIyMjIyMjIyMjIyMjCiMgdGhpcyBpcyBtYWlubHkgZm9yIHRlc3RpbmcgYW5kIGNvdWxk
      IGJlIHVzZWQgd2hlcmUgJ3JhZG9zJyBpcyBub3QgYXZhaWxhYmxlCgoKY2xhc3MgRHVtbXlSYWRv
      cyhvYmplY3QpOgogICAgZGVmIF9faW5pdF9fKHNlbGYpOgogICAgICAgIHNlbGYucmV0dXJuX3Zh
      bCA9IDAKICAgICAgICBzZWxmLmVycl9tZXNzYWdlID0gIiIKICAgICAgICBzZWxmLnN0YXRlID0g
      ImNvbm5lY3RlZCIKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwID0ge30KICAgICAgICBzZWxm
      LmNtZF9uYW1lcyA9IHt9CiAgICAgICAgc2VsZi5faW5pdF9jbWRfb3V0cHV0X21hcCgpCiAgICAg
      ICAgc2VsZi5kdW1teV9ob3N0X2lwX21hcCA9IHt9CgogICAgZGVmIF9pbml0X2NtZF9vdXRwdXRf
      bWFwKHNlbGYpOgogICAgICAgIGpzb25fZmlsZV9uYW1lID0gInRlc3QtZGF0YS9jZXBoLXN0YXR1
      cy1vdXQiCiAgICAgICAgc2NyaXB0X2RpciA9IHBhdGguYWJzcGF0aChwYXRoLmRpcm5hbWUoX19m
      aWxlX18pKQogICAgICAgIGNlcGhfc3RhdHVzX3N0ciA9ICIiCiAgICAgICAgd2l0aCBvcGVuKAog
      ICAgICAgICAgICBwYXRoLmpvaW4oc2NyaXB0X2RpciwganNvbl9maWxlX25hbWUpLCBtb2RlPSJy
      IiwgZW5jb2Rpbmc9IlVURi04IgogICAgICAgICkgYXMganNvbl9maWxlOgogICAgICAgICAgICBj
      ZXBoX3N0YXR1c19zdHIgPSBqc29uX2ZpbGUucmVhZCgpCiAgICAgICAgc2VsZi5jbWRfbmFtZXNb
      ImZzIGxzIl0gPSAiIiJ7ImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJmcyBscyJ9IiIiCiAg
      ICAgICAgc2VsZi5jbWRfbmFtZXNbCiAgICAgICAgICAgICJxdW9ydW1fc3RhdHVzIgogICAgICAg
      IF0gPSAiIiJ7ImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJxdW9ydW1fc3RhdHVzIn0iIiIK
      ICAgICAgICBzZWxmLmNtZF9uYW1lc1sKICAgICAgICAgICAgIm1nciBzZXJ2aWNlcyIKICAgICAg
      ICBdID0gIiIieyJmb3JtYXQiOiAianNvbiIsICJwcmVmaXgiOiAibWdyIHNlcnZpY2VzIn0iIiIK
      ICAgICAgICAjIGFsbCB0aGUgY29tbWFuZHMgYW5kIHRoZWlyIG91dHB1dAogICAgICAgIHNlbGYu
      Y21kX291dHB1dF9tYXBbCiAgICAgICAgICAgIHNlbGYuY21kX25hbWVzWyJmcyBscyJdCiAgICAg
      ICAgXSA9ICIiIlt7Im5hbWUiOiJteWZzIiwibWV0YWRhdGFfcG9vbCI6Im15ZnMtbWV0YWRhdGEi
      LCJtZXRhZGF0YV9wb29sX2lkIjoyLCJkYXRhX3Bvb2xfaWRzIjpbM10sImRhdGFfcG9vbHMiOlsi
      bXlmcy1yZXBsaWNhdGVkIl19XSIiIgogICAgICAgIHNlbGYuY21kX291dHB1dF9tYXBbCiAgICAg
      ICAgICAgIHNlbGYuY21kX25hbWVzWyJxdW9ydW1fc3RhdHVzIl0KICAgICAgICBdID0gIiIieyJl
      bGVjdGlvbl9lcG9jaCI6MywicXVvcnVtIjpbMF0sInF1b3J1bV9uYW1lcyI6WyJhIl0sInF1b3J1
      bV9sZWFkZXJfbmFtZSI6ImEiLCJxdW9ydW1fYWdlIjoxNDM4NSwiZmVhdHVyZXMiOnsicXVvcnVt
      X2NvbiI6IjQ1NDAxMzgyOTI4MzY2OTYwNjMiLCJxdW9ydW1fbW9uIjpbImtyYWtlbiIsImx1bWlu
      b3VzIiwibWltaWMiLCJvc2RtYXAtcHJ1bmUiLCJuYXV0aWx1cyIsIm9jdG9wdXMiXX0sIm1vbm1h
      cCI6eyJlcG9jaCI6MSwiZnNpZCI6ImFmNGUxNjczLTBiNzItNDAyZC05OTBhLTIyZDI5MTlkMGYx
      YyIsIm1vZGlmaWVkIjoiMjAyMC0wNS0wN1QwMzozNjozOS45MTgwMzVaIiwiY3JlYXRlZCI6IjIw
      MjAtMDUtMDdUMDM6MzY6MzkuOTE4MDM1WiIsIm1pbl9tb25fcmVsZWFzZSI6MTUsIm1pbl9tb25f
      cmVsZWFzZV9uYW1lIjoib2N0b3B1cyIsImZlYXR1cmVzIjp7InBlcnNpc3RlbnQiOlsia3Jha2Vu
      IiwibHVtaW5vdXMiLCJtaW1pYyIsIm9zZG1hcC1wcnVuZSIsIm5hdXRpbHVzIiwib2N0b3B1cyJd
      LCJvcHRpb25hbCI6W119LCJtb25zIjpbeyJyYW5rIjowLCJuYW1lIjoiYSIsInB1YmxpY19hZGRy
      cyI6eyJhZGRydmVjIjpbeyJ0eXBlIjoidjIiLCJhZGRyIjoiMTAuMTEwLjIwNS4xNzQ6MzMwMCIs
      Im5vbmNlIjowfSx7InR5cGUiOiJ2MSIsImFkZHIiOiIxMC4xMTAuMjA1LjE3NDo2Nzg5Iiwibm9u
      Y2UiOjB9XX0sImFkZHIiOiIxMC4xMTAuMjA1LjE3NDo2Nzg5LzAiLCJwdWJsaWNfYWRkciI6IjEw
      LjExMC4yMDUuMTc0OjY3ODkvMCIsInByaW9yaXR5IjowLCJ3ZWlnaHQiOjB9XX19IiIiCiAgICAg
      ICAgc2VsZi5jbWRfb3V0cHV0X21hcFsKICAgICAgICAgICAgc2VsZi5jbWRfbmFtZXNbIm1nciBz
      ZXJ2aWNlcyJdCiAgICAgICAgXSA9ICIiInsiZGFzaGJvYXJkIjoiaHR0cHM6Ly9jZXBoLWRhc2hi
      b2FyZDo4NDQzLyIsInByb21ldGhldXMiOiJodHRwOi8vY2VwaC1kYXNoYm9hcmQtZGI6OTI4My8i
      fSIiIgogICAgICAgIHNlbGYuY21kX291dHB1dF9tYXBbCiAgICAgICAgICAgICIiInsiY2FwcyI6
      IFsibW9uIiwgImFsbG93IHIsIGFsbG93IGNvbW1hbmQgcXVvcnVtX3N0YXR1cyIsICJvc2QiLCAi
      YWxsb3cgcnd4IHBvb2w9ZGVmYXVsdC5yZ3cubWV0YSwgYWxsb3cgciBwb29sPS5yZ3cucm9vdCwg
      YWxsb3cgcncgcG9vbD1kZWZhdWx0LnJndy5jb250cm9sLCBhbGxvdyB4IHBvb2w9ZGVmYXVsdC5y
      Z3cuYnVja2V0cy5pbmRleCJdLCAiZW50aXR5IjogImNsaWVudC5oZWFsdGhjaGVja2VyIiwgImZv
      cm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJhdXRoIGdldC1vci1jcmVhdGUifSIiIgogICAgICAg
      IF0gPSAiIiJbeyJlbnRpdHkiOiJjbGllbnQuaGVhbHRoY2hlY2tlciIsImtleSI6IkFRREZrYk5l
      ZnQ1YkZSQUFUbmRMTlVTRUtydW96eGlaaTNscmRBPT0iLCJjYXBzIjp7Im1vbiI6ImFsbG93IHIs
      IGFsbG93IGNvbW1hbmQgcXVvcnVtX3N0YXR1cyIsIm9zZCI6ImFsbG93IHJ3eCBwb29sPWRlZmF1
      bHQucmd3Lm1ldGEsIGFsbG93IHIgcG9vbD0ucmd3LnJvb3QsIGFsbG93IHJ3IHBvb2w9ZGVmYXVs
      dC5yZ3cuY29udHJvbCwgYWxsb3cgeCBwb29sPWRlZmF1bHQucmd3LmJ1Y2tldHMuaW5kZXgifX1d
      IiIiCiAgICAgICAgc2VsZi5jbWRfb3V0cHV0X21hcFsKICAgICAgICAgICAgIiIieyJjYXBzIjog
      WyJtb24iLCAicHJvZmlsZSByYmQsIGFsbG93IGNvbW1hbmQgJ29zZCBibG9ja2xpc3QnIiwgIm9z
      ZCIsICJwcm9maWxlIHJiZCJdLCAiZW50aXR5IjogImNsaWVudC5jc2ktcmJkLW5vZGUiLCAiZm9y
      bWF0IjogImpzb24iLCAicHJlZml4IjogImF1dGggZ2V0LW9yLWNyZWF0ZSJ9IiIiCiAgICAgICAg
      XSA9ICIiIlt7ImVudGl0eSI6ImNsaWVudC5jc2ktcmJkLW5vZGUiLCJrZXkiOiJBUUJPZ3JOZUhi
      SzFBeEFBdWJZQmVWOFMxVS9HUHpxNVNWZXE2Zz09IiwiY2FwcyI6eyJtb24iOiJwcm9maWxlIHJi
      ZCwgYWxsb3cgY29tbWFuZCAnb3NkIGJsb2NrbGlzdCciLCJvc2QiOiJwcm9maWxlIHJiZCJ9fV0i
      IiIKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWwogICAgICAgICAgICAiIiJ7ImNhcHMiOiBb
      Im1vbiIsICJwcm9maWxlIHJiZCwgYWxsb3cgY29tbWFuZCAnb3NkIGJsb2NrbGlzdCciLCAibWdy
      IiwgImFsbG93IHJ3IiwgIm9zZCIsICJwcm9maWxlIHJiZCJdLCAiZW50aXR5IjogImNsaWVudC5j
      c2ktcmJkLXByb3Zpc2lvbmVyIiwgImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJhdXRoIGdl
      dC1vci1jcmVhdGUifSIiIgogICAgICAgIF0gPSAiIiJbeyJlbnRpdHkiOiJjbGllbnQuY3NpLXJi
      ZC1wcm92aXNpb25lciIsImtleSI6IkFRQk5nck5lMWdleUt4QUE4ZWtWaVJkRStoc3M1T3dlWUJr
      d05nPT0iLCJjYXBzIjp7Im1nciI6ImFsbG93IHJ3IiwibW9uIjoicHJvZmlsZSByYmQsIGFsbG93
      IGNvbW1hbmQgJ29zZCBibG9ja2xpc3QnIiwib3NkIjoicHJvZmlsZSByYmQifX1dIiIiCiAgICAg
      ICAgc2VsZi5jbWRfb3V0cHV0X21hcFsKICAgICAgICAgICAgIiIieyJjYXBzIjogWyJtb24iLCAi
      YWxsb3cgciwgYWxsb3cgY29tbWFuZCAnb3NkIGJsb2NrbGlzdCciLCAibWdyIiwgImFsbG93IHJ3
      IiwgIm9zZCIsICJhbGxvdyBydyB0YWcgY2VwaGZzICo9KiIsICJtZHMiLCAiYWxsb3cgcnciXSwg
      ImVudGl0eSI6ICJjbGllbnQuY3NpLWNlcGhmcy1ub2RlIiwgImZvcm1hdCI6ICJqc29uIiwgInBy
      ZWZpeCI6ICJhdXRoIGdldC1vci1jcmVhdGUifSIiIgogICAgICAgIF0gPSAiIiJbeyJlbnRpdHki
      OiJjbGllbnQuY3NpLWNlcGhmcy1ub2RlIiwia2V5IjoiQVFCT2dyTmVFTnVuS3hBQVBDbWdFN1I2
      RzhEY1huYUoxRjMycWc9PSIsImNhcHMiOnsibWRzIjoiYWxsb3cgcnciLCJtZ3IiOiJhbGxvdyBy
      dyIsIm1vbiI6ImFsbG93IHIsIGFsbG93IGNvbW1hbmQgJ29zZCBibG9ja2xpc3QnIiwib3NkIjoi
      YWxsb3cgcncgdGFnIGNlcGhmcyAqPSoifX1dIiIiCiAgICAgICAgc2VsZi5jbWRfb3V0cHV0X21h
      cFsKICAgICAgICAgICAgIiIieyJjYXBzIjogWyJtb24iLCAiYWxsb3cgciwgYWxsb3cgY29tbWFu
      ZCAnb3NkIGJsb2NrbGlzdCciLCAibWdyIiwgImFsbG93IHJ3IiwgIm9zZCIsICJhbGxvdyBydyB0
      YWcgY2VwaGZzIG1ldGFkYXRhPSoiXSwgImVudGl0eSI6ICJjbGllbnQuY3NpLWNlcGhmcy1wcm92
      aXNpb25lciIsICJmb3JtYXQiOiAianNvbiIsICJwcmVmaXgiOiAiYXV0aCBnZXQtb3ItY3JlYXRl
      In0iIiIKICAgICAgICBdID0gIiIiW3siZW50aXR5IjoiY2xpZW50LmNzaS1jZXBoZnMtcHJvdmlz
      aW9uZXIiLCJrZXkiOiJBUUJPZ3JOZUFGZ2NHQkFBdkdxS09BRDBEM3h4bVZZMFI5MTJkZz09Iiwi
      Y2FwcyI6eyJtZ3IiOiJhbGxvdyBydyIsIm1vbiI6ImFsbG93IHIsIGFsbG93IGNvbW1hbmQgJ29z
      ZCBibG9ja2xpc3QnIiwib3NkIjoiYWxsb3cgcncgdGFnIGNlcGhmcyBtZXRhZGF0YT0qIn19XSIi
      IgogICAgICAgIHNlbGYuY21kX291dHB1dF9tYXBbCiAgICAgICAgICAgICIiInsiY2FwcyI6IFsi
      bW9uIiwgImFsbG93IHIsIGFsbG93IGNvbW1hbmQgJ29zZCBibG9ja2xpc3QnIiwgIm1nciIsICJh
      bGxvdyBydyIsICJvc2QiLCAiYWxsb3cgcncgdGFnIGNlcGhmcyBtZXRhZGF0YT0qIl0sICJlbnRp
      dHkiOiAiY2xpZW50LmNzaS1jZXBoZnMtcHJvdmlzaW9uZXItb3BlbnNoaWZ0LXN0b3JhZ2UiLCAi
      Zm9ybWF0IjogImpzb24iLCAicHJlZml4IjogImF1dGggZ2V0LW9yLWNyZWF0ZSJ9IiIiCiAgICAg
      ICAgXSA9ICIiIlt7ImVudGl0eSI6ImNsaWVudC5jc2ktY2VwaGZzLXByb3Zpc2lvbmVyLW9wZW5z
      aGlmdC1zdG9yYWdlIiwia2V5IjoiQlFCT2dyTmVBRmdjR0JBQXZHcUtPQUQwRDN4eG1WWTBSOTEy
      ZGc9PSIsImNhcHMiOnsibWdyIjoiYWxsb3cgcnciLCJtb24iOiJhbGxvdyByLCBhbGxvdyBjb21t
      YW5kICdvc2QgYmxvY2tsaXN0JyIsIm9zZCI6ImFsbG93IHJ3IHRhZyBjZXBoZnMgbWV0YWRhdGE9
      KiJ9fV0iIiIKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWwogICAgICAgICAgICAiIiJ7ImNh
      cHMiOiBbIm1vbiIsICJhbGxvdyByLCBhbGxvdyBjb21tYW5kICdvc2QgYmxvY2tsaXN0JyIsICJt
      Z3IiLCAiYWxsb3cgcnciLCAib3NkIiwgImFsbG93IHJ3IHRhZyBjZXBoZnMgbWV0YWRhdGE9bXlm
      cyJdLCAiZW50aXR5IjogImNsaWVudC5jc2ktY2VwaGZzLXByb3Zpc2lvbmVyLW9wZW5zaGlmdC1z
      dG9yYWdlLW15ZnMiLCAiZm9ybWF0IjogImpzb24iLCAicHJlZml4IjogImF1dGggZ2V0LW9yLWNy
      ZWF0ZSJ9IiIiCiAgICAgICAgXSA9ICIiIlt7ImVudGl0eSI6ImNsaWVudC5jc2ktY2VwaGZzLXBy
      b3Zpc2lvbmVyLW9wZW5zaGlmdC1zdG9yYWdlLW15ZnMiLCJrZXkiOiJDUUJPZ3JOZUFGZ2NHQkFB
      dkdxS09BRDBEM3h4bVZZMFI5MTJkZz09IiwiY2FwcyI6eyJtZ3IiOiJhbGxvdyBydyIsIm1vbiI6
      ImFsbG93IHIsIGFsbG93IGNvbW1hbmQgJ29zZCBibG9ja2xpc3QnIiwib3NkIjoiYWxsb3cgcncg
      dGFnIGNlcGhmcyBtZXRhZGF0YT1teWZzIn19XSIiIgogICAgICAgIHNlbGYuY21kX291dHB1dF9t
      YXBbCiAgICAgICAgICAgICIiInsiY2FwcyI6IFsibW9uIiwgImFsbG93IHIsIGFsbG93IGNvbW1h
      bmQgcXVvcnVtX3N0YXR1cywgYWxsb3cgY29tbWFuZCB2ZXJzaW9uIiwgIm1nciIsICJhbGxvdyBj
      b21tYW5kIGNvbmZpZyIsICJvc2QiLCAiYWxsb3cgcnd4IHBvb2w9ZGVmYXVsdC5yZ3cubWV0YSwg
      YWxsb3cgciBwb29sPS5yZ3cucm9vdCwgYWxsb3cgcncgcG9vbD1kZWZhdWx0LnJndy5jb250cm9s
      LCBhbGxvdyByeCBwb29sPWRlZmF1bHQucmd3LmxvZywgYWxsb3cgeCBwb29sPWRlZmF1bHQucmd3
      LmJ1Y2tldHMuaW5kZXgiXSwgImVudGl0eSI6ICJjbGllbnQuaGVhbHRoY2hlY2tlciIsICJmb3Jt
      YXQiOiAianNvbiIsICJwcmVmaXgiOiAiYXV0aCBnZXQtb3ItY3JlYXRlIn0iIiIKICAgICAgICBd
      ID0gIiIiW3siZW50aXR5IjoiY2xpZW50LmhlYWx0aGNoZWNrZXIiLCJrZXkiOiJBUURGa2JOZWZ0
      NWJGUkFBVG5kTE5VU0VLcnVvenhpWmkzbHJkQT09IiwiY2FwcyI6eyJtb24iOiAiYWxsb3cgciwg
      YWxsb3cgY29tbWFuZCBxdW9ydW1fc3RhdHVzLCBhbGxvdyBjb21tYW5kIHZlcnNpb24iLCAibWdy
      IjogImFsbG93IGNvbW1hbmQgY29uZmlnIiwgIm9zZCI6ICJhbGxvdyByd3ggcG9vbD1kZWZhdWx0
      LnJndy5tZXRhLCBhbGxvdyByIHBvb2w9LnJndy5yb290LCBhbGxvdyBydyBwb29sPWRlZmF1bHQu
      cmd3LmNvbnRyb2wsIGFsbG93IHJ4IHBvb2w9ZGVmYXVsdC5yZ3cubG9nLCBhbGxvdyB4IHBvb2w9
      ZGVmYXVsdC5yZ3cuYnVja2V0cy5pbmRleCJ9fV0iIiIKICAgICAgICBzZWxmLmNtZF9vdXRwdXRf
      bWFwWwogICAgICAgICAgICAiIiJ7ImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJtZ3Igc2Vy
      dmljZXMifSIiIgogICAgICAgIF0gPSAiIiJ7ImRhc2hib2FyZCI6ICJodHRwOi8vcm9vay1jZXBo
      LW1nci1hLTU3Y2Y5Zjg0YmMtZjRqbmw6NzAwMC8iLCAicHJvbWV0aGV1cyI6ICJodHRwOi8vcm9v
      ay1jZXBoLW1nci1hLTU3Y2Y5Zjg0YmMtZjRqbmw6OTI4My8ifSIiIgogICAgICAgIHNlbGYuY21k
      X291dHB1dF9tYXBbCiAgICAgICAgICAgICIiInsiZW50aXR5IjogImNsaWVudC5oZWFsdGhjaGVj
      a2VyIiwgImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJhdXRoIGdldCJ9IiIiCiAgICAgICAg
      XSA9ICIiInsiZGFzaGJvYXJkIjogImh0dHA6Ly9yb29rLWNlcGgtbWdyLWEtNTdjZjlmODRiYy1m
      NGpubDo3MDAwLyIsICJwcm9tZXRoZXVzIjogImh0dHA6Ly9yb29rLWNlcGgtbWdyLWEtNTdjZjlm
      ODRiYy1mNGpubDo5MjgzLyJ9IiIiCiAgICAgICAgc2VsZi5jbWRfb3V0cHV0X21hcFsKICAgICAg
      ICAgICAgIiIieyJlbnRpdHkiOiAiY2xpZW50LmhlYWx0aGNoZWNrZXIiLCAiZm9ybWF0IjogImpz
      b24iLCAicHJlZml4IjogImF1dGggZ2V0In0iIiIKICAgICAgICBdID0gIiIiW3siZW50aXR5Ijoi
      Y2xpZW50LmhlYWx0aGNoZWNrZXIiLCJrZXkiOiJBUURGa2JOZWZ0NWJGUkFBVG5kTE5VU0VLcnVv
      enhpWmkzbHJkQT09IiwiY2FwcyI6eyJtb24iOiAiYWxsb3cgciwgYWxsb3cgY29tbWFuZCBxdW9y
      dW1fc3RhdHVzLCBhbGxvdyBjb21tYW5kIHZlcnNpb24iLCAibWdyIjogImFsbG93IGNvbW1hbmQg
      Y29uZmlnIiwgIm9zZCI6ICJhbGxvdyByd3ggcG9vbD1kZWZhdWx0LnJndy5tZXRhLCBhbGxvdyBy
      IHBvb2w9LnJndy5yb290LCBhbGxvdyBydyBwb29sPWRlZmF1bHQucmd3LmNvbnRyb2wsIGFsbG93
      IHJ4IHBvb2w9ZGVmYXVsdC5yZ3cubG9nLCBhbGxvdyB4IHBvb2w9ZGVmYXVsdC5yZ3cuYnVja2V0
      cy5pbmRleCJ9fV0iIiIKICAgICAgICBzZWxmLmNtZF9vdXRwdXRfbWFwWwogICAgICAgICAgICAi
      IiJ7ImVudGl0eSI6ICJjbGllbnQuY3NpLWNlcGhmcy1ub2RlIiwgImZvcm1hdCI6ICJqc29uIiwg
      InByZWZpeCI6ICJhdXRoIGdldCJ9IiIiCiAgICAgICAgXSA9ICIiIltdIiIiCiAgICAgICAgc2Vs
      Zi5jbWRfb3V0cHV0X21hcFsKICAgICAgICAgICAgIiIieyJlbnRpdHkiOiAiY2xpZW50LmNzaS1y
      YmQtbm9kZSIsICJmb3JtYXQiOiAianNvbiIsICJwcmVmaXgiOiAiYXV0aCBnZXQifSIiIgogICAg
      ICAgIF0gPSAiIiJbXSIiIgogICAgICAgIHNlbGYuY21kX291dHB1dF9tYXBbCiAgICAgICAgICAg
      ICIiInsiZW50aXR5IjogImNsaWVudC5jc2ktcmJkLXByb3Zpc2lvbmVyIiwgImZvcm1hdCI6ICJq
      c29uIiwgInByZWZpeCI6ICJhdXRoIGdldCJ9IiIiCiAgICAgICAgXSA9ICIiIltdIiIiCiAgICAg
      ICAgc2VsZi5jbWRfb3V0cHV0X21hcFsKICAgICAgICAgICAgIiIieyJlbnRpdHkiOiAiY2xpZW50
      LmNzaS1jZXBoZnMtcHJvdmlzaW9uZXIiLCAiZm9ybWF0IjogImpzb24iLCAicHJlZml4IjogImF1
      dGggZ2V0In0iIiIKICAgICAgICBdID0gIiIiW10iIiIKICAgICAgICBzZWxmLmNtZF9vdXRwdXRf
      bWFwWwogICAgICAgICAgICAiIiJ7ImVudGl0eSI6ICJjbGllbnQuY3NpLWNlcGhmcy1wcm92aXNp
      b25lci1vcGVuc2hpZnQtc3RvcmFnZSIsICJmb3JtYXQiOiAianNvbiIsICJwcmVmaXgiOiAiYXV0
      aCBnZXQifSIiIgogICAgICAgIF0gPSAiIiJbXSIiIgogICAgICAgIHNlbGYuY21kX291dHB1dF9t
      YXBbCiAgICAgICAgICAgICIiInsiZW50aXR5IjogImNsaWVudC5jc2ktY2VwaGZzLXByb3Zpc2lv
      bmVyLW9wZW5zaGlmdC1zdG9yYWdlLW15ZnMiLCAiZm9ybWF0IjogImpzb24iLCAicHJlZml4Ijog
      ImF1dGggZ2V0In0iIiIKICAgICAgICBdID0gIiIiW10iIiIKICAgICAgICBzZWxmLmNtZF9vdXRw
      dXRfbWFwWwogICAgICAgICAgICAiIiJ7ImVudGl0eSI6ICJjbGllbnQuY3NpLWNlcGhmcy1wcm92
      aXNpb25lciIsICJmb3JtYXQiOiAianNvbiIsICJwcmVmaXgiOiAiYXV0aCBnZXQifSIiIgogICAg
      ICAgIF0gPSAiIiJbeyJlbnRpdHkiOiJjbGllbnQuY3NpLWNlcGhmcy1wcm92aXNpb25lciIsImtl
      eSI6IkFRREZrYk5lZnQ1YkZSQUFUbmRMTlVTRUtydW96eGlaaTNscmRBPT0iLCJjYXBzIjp7Im1v
      biI6ImFsbG93IHIiLCAibWdyIjoiYWxsb3cgcnciLCAib3NkIjoiYWxsb3cgcncgdGFnIGNlcGhm
      cyBtZXRhZGF0YT0qIn19XSIiIgogICAgICAgIHNlbGYuY21kX291dHB1dF9tYXBbCiAgICAgICAg
      ICAgICIiInsiY2FwcyI6IFsibW9uIiwgImFsbG93IHIsIGFsbG93IGNvbW1hbmQgJ29zZCBibG9j
      a2xpc3QnIiwgIm1nciIsICJhbGxvdyBydyIsICJvc2QiLCAiYWxsb3cgcncgdGFnIGNlcGhmcyBt
      ZXRhZGF0YT0qIl0sICJlbnRpdHkiOiAiY2xpZW50LmNzaS1jZXBoZnMtcHJvdmlzaW9uZXIiLCAi
      Zm9ybWF0IjogImpzb24iLCAicHJlZml4IjogImF1dGggY2FwcyJ9IiIiCiAgICAgICAgXSA9ICIi
      Ilt7ImVudGl0eSI6ImNsaWVudC5jc2ktY2VwaGZzLXByb3Zpc2lvbmVyIiwia2V5IjoiQVFERmti
      TmVmdDViRlJBQVRuZExOVVNFS3J1b3p4aVppM2xyZEE9PSIsImNhcHMiOnsibW9uIjoiYWxsb3cg
      ciwgIGFsbG93IGNvbW1hbmQgJ29zZCBibG9ja2xpc3QnIiwgIm1nciI6ImFsbG93IHJ3IiwgIm9z
      ZCI6ImFsbG93IHJ3IHRhZyBjZXBoZnMgbWV0YWRhdGE9KiJ9fV0iIiIKICAgICAgICBzZWxmLmNt
      ZF9vdXRwdXRfbWFwWyd7ImZvcm1hdCI6ICJqc29uIiwgInByZWZpeCI6ICJzdGF0dXMifSddID0g
      Y2VwaF9zdGF0dXNfc3RyCgogICAgZGVmIHNodXRkb3duKHNlbGYpOgogICAgICAgIHBhc3MKCiAg
      ICBkZWYgZ2V0X2ZzaWQoc2VsZik6CiAgICAgICAgcmV0dXJuICJhZjRlMTY3My0wYjcyLTQwMmQt
      OTkwYS0yMmQyOTE5ZDBmMWMiCgogICAgZGVmIGNvbmZfcmVhZF9maWxlKHNlbGYpOgogICAgICAg
      IHBhc3MKCiAgICBkZWYgY29ubmVjdChzZWxmKToKICAgICAgICBwYXNzCgogICAgZGVmIHBvb2xf
      ZXhpc3RzKHNlbGYsIHBvb2xfbmFtZSk6CiAgICAgICAgcmV0dXJuIFRydWUKCiAgICBkZWYgbW9u
      X2NvbW1hbmQoc2VsZiwgY21kLCBvdXQpOgogICAgICAgIGpzb25fY21kID0ganNvbi5sb2Fkcyhj
      bWQpCiAgICAgICAganNvbl9jbWRfc3RyID0ganNvbi5kdW1wcyhqc29uX2NtZCwgc29ydF9rZXlz
      PVRydWUpCiAgICAgICAgY21kX291dHB1dCA9IHNlbGYuY21kX291dHB1dF9tYXBbanNvbl9jbWRf
      c3RyXQogICAgICAgIHJldHVybiAoCiAgICAgICAgICAgIHNlbGYucmV0dXJuX3ZhbCwKICAgICAg
      ICAgICAgY21kX291dHB1dCwKICAgICAgICAgICAgInt9Ii5mb3JtYXQoc2VsZi5lcnJfbWVzc2Fn
      ZSkuZW5jb2RlKCJ1dGYtOCIpLAogICAgICAgICkKCiAgICBkZWYgX2NvbnZlcnRfaG9zdG5hbWVf
      dG9faXAoc2VsZiwgaG9zdF9uYW1lKToKICAgICAgICBpcF9yZWdfeCA9IHJlLmNvbXBpbGUociJc
      ZHsxLDN9LlxkezEsM30uXGR7MSwzfS5cZHsxLDN9IikKICAgICAgICAjIGlmIHByb3ZpZGVkIGhv
      c3QgaXMgZGlyZWN0bHkgYW4gSVAgYWRkcmVzcywgcmV0dXJuIHRoZSBzYW1lCiAgICAgICAgaWYg
      aXBfcmVnX3gubWF0Y2goaG9zdF9uYW1lKToKICAgICAgICAgICAgcmV0dXJuIGhvc3RfbmFtZQog
      ICAgICAgIGltcG9ydCByYW5kb20KCiAgICAgICAgaG9zdF9pcCA9IHNlbGYuZHVtbXlfaG9zdF9p
      cF9tYXAuZ2V0KGhvc3RfbmFtZSwgIiIpCiAgICAgICAgaWYgbm90IGhvc3RfaXA6CiAgICAgICAg
      ICAgIGhvc3RfaXAgPSAiMTcyLjkue30ue30iLmZvcm1hdCgKICAgICAgICAgICAgICAgIHJhbmRv
      bS5yYW5kaW50KDAsIDI1NCksIHJhbmRvbS5yYW5kaW50KDAsIDI1NCkKICAgICAgICAgICAgKQog
      ICAgICAgICAgICBzZWxmLmR1bW15X2hvc3RfaXBfbWFwW2hvc3RfbmFtZV0gPSBob3N0X2lwCiAg
      ICAgICAgZGVsIHJhbmRvbQogICAgICAgIHJldHVybiBob3N0X2lwCgogICAgQGNsYXNzbWV0aG9k
      CiAgICBkZWYgUmFkb3MoY29uZmZpbGU9Tm9uZSk6CiAgICAgICAgcmV0dXJuIER1bW15UmFkb3Mo
      KQoKCmNsYXNzIFMzQXV0aChBdXRoQmFzZSk6CgogICAgIiIiQXR0YWNoZXMgQVdTIEF1dGhlbnRp
      Y2F0aW9uIHRvIHRoZSBnaXZlbiBSZXF1ZXN0IG9iamVjdC4iIiIKCiAgICBzZXJ2aWNlX2Jhc2Vf
      dXJsID0gInMzLmFtYXpvbmF3cy5jb20iCgogICAgZGVmIF9faW5pdF9fKHNlbGYsIGFjY2Vzc19r
      ZXksIHNlY3JldF9rZXksIHNlcnZpY2VfdXJsPU5vbmUpOgogICAgICAgIGlmIHNlcnZpY2VfdXJs
      OgogICAgICAgICAgICBzZWxmLnNlcnZpY2VfYmFzZV91cmwgPSBzZXJ2aWNlX3VybAogICAgICAg
      IHNlbGYuYWNjZXNzX2tleSA9IHN0cihhY2Nlc3Nfa2V5KQogICAgICAgIHNlbGYuc2VjcmV0X2tl
      eSA9IHN0cihzZWNyZXRfa2V5KQoKICAgIGRlZiBfX2NhbGxfXyhzZWxmLCByKToKICAgICAgICAj
      IENyZWF0ZSBkYXRlIGhlYWRlciBpZiBpdCBpcyBub3QgY3JlYXRlZCB5ZXQuCiAgICAgICAgaWYg
      ImRhdGUiIG5vdCBpbiByLmhlYWRlcnMgYW5kICJ4LWFtei1kYXRlIiBub3QgaW4gci5oZWFkZXJz
      OgogICAgICAgICAgICByLmhlYWRlcnNbImRhdGUiXSA9IGZvcm1hdGRhdGUodGltZXZhbD1Ob25l
      LCBsb2NhbHRpbWU9RmFsc2UsIHVzZWdtdD1UcnVlKQogICAgICAgIHNpZ25hdHVyZSA9IHNlbGYu
      Z2V0X3NpZ25hdHVyZShyKQogICAgICAgIGlmIHB5M2s6CiAgICAgICAgICAgIHNpZ25hdHVyZSA9
      IHNpZ25hdHVyZS5kZWNvZGUoInV0Zi04IikKICAgICAgICByLmhlYWRlcnNbIkF1dGhvcml6YXRp
      b24iXSA9ICJBV1MgJXM6JXMiICUgKHNlbGYuYWNjZXNzX2tleSwgc2lnbmF0dXJlKQogICAgICAg
      IHJldHVybiByCgogICAgZGVmIGdldF9zaWduYXR1cmUoc2VsZiwgcik6CiAgICAgICAgY2Fub25p
      Y2FsX3N0cmluZyA9IHNlbGYuZ2V0X2Nhbm9uaWNhbF9zdHJpbmcoci51cmwsIHIuaGVhZGVycywg
      ci5tZXRob2QpCiAgICAgICAgaWYgcHkzazoKICAgICAgICAgICAga2V5ID0gc2VsZi5zZWNyZXRf
      a2V5LmVuY29kZSgidXRmLTgiKQogICAgICAgICAgICBtc2cgPSBjYW5vbmljYWxfc3RyaW5nLmVu
      Y29kZSgidXRmLTgiKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGtleSA9IHNlbGYuc2VjcmV0
      X2tleQogICAgICAgICAgICBtc2cgPSBjYW5vbmljYWxfc3RyaW5nCiAgICAgICAgaCA9IGhtYWMu
      bmV3KGtleSwgbXNnLCBkaWdlc3Rtb2Q9c2hhKQogICAgICAgIHJldHVybiBlbmNvZGVzdHJpbmco
      aC5kaWdlc3QoKSkuc3RyaXAoKQoKICAgIGRlZiBnZXRfY2Fub25pY2FsX3N0cmluZyhzZWxmLCB1
      cmwsIGhlYWRlcnMsIG1ldGhvZCk6CiAgICAgICAgcGFyc2VkdXJsID0gdXJscGFyc2UodXJsKQog
      ICAgICAgIG9iamVjdGtleSA9IHBhcnNlZHVybC5wYXRoWzE6XQoKICAgICAgICBidWNrZXQgPSBw
      YXJzZWR1cmwubmV0bG9jWzogLWxlbihzZWxmLnNlcnZpY2VfYmFzZV91cmwpXQogICAgICAgIGlm
      IGxlbihidWNrZXQpID4gMToKICAgICAgICAgICAgIyByZW1vdmUgbGFzdCBkb3QKICAgICAgICAg
      ICAgYnVja2V0ID0gYnVja2V0WzotMV0KCiAgICAgICAgaW50ZXJlc3RpbmdfaGVhZGVycyA9IHsi
      Y29udGVudC1tZDUiOiAiIiwgImNvbnRlbnQtdHlwZSI6ICIiLCAiZGF0ZSI6ICIifQogICAgICAg
      IGZvciBrZXkgaW4gaGVhZGVyczoKICAgICAgICAgICAgbGsgPSBrZXkubG93ZXIoKQogICAgICAg
      ICAgICB0cnk6CiAgICAgICAgICAgICAgICBsayA9IGxrLmRlY29kZSgidXRmLTgiKQogICAgICAg
      ICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgICAgIGlmIGhlYWRlcnNb
      a2V5XSBhbmQgKAogICAgICAgICAgICAgICAgbGsgaW4gaW50ZXJlc3RpbmdfaGVhZGVycy5rZXlz
      KCkgb3IgbGsuc3RhcnRzd2l0aCgieC1hbXotIikKICAgICAgICAgICAgKToKICAgICAgICAgICAg
      ICAgIGludGVyZXN0aW5nX2hlYWRlcnNbbGtdID0gaGVhZGVyc1trZXldLnN0cmlwKCkKCiAgICAg
      ICAgIyBJZiB4LWFtei1kYXRlIGlzIHVzZWQgaXQgc3VwZXJzZWRlcyB0aGUgZGF0ZSBoZWFkZXIu
      CiAgICAgICAgaWYgbm90IHB5M2s6CiAgICAgICAgICAgIGlmICJ4LWFtei1kYXRlIiBpbiBpbnRl
      cmVzdGluZ19oZWFkZXJzOgogICAgICAgICAgICAgICAgaW50ZXJlc3RpbmdfaGVhZGVyc1siZGF0
      ZSJdID0gIiIKICAgICAgICBlbHNlOgogICAgICAgICAgICBpZiAieC1hbXotZGF0ZSIgaW4gaW50
      ZXJlc3RpbmdfaGVhZGVyczoKICAgICAgICAgICAgICAgIGludGVyZXN0aW5nX2hlYWRlcnNbImRh
      dGUiXSA9ICIiCgogICAgICAgIGJ1ZiA9ICIlc1xuIiAlIG1ldGhvZAogICAgICAgIGZvciBrZXkg
      aW4gc29ydGVkKGludGVyZXN0aW5nX2hlYWRlcnMua2V5cygpKToKICAgICAgICAgICAgdmFsID0g
      aW50ZXJlc3RpbmdfaGVhZGVyc1trZXldCiAgICAgICAgICAgIGlmIGtleS5zdGFydHN3aXRoKCJ4
      LWFtei0iKToKICAgICAgICAgICAgICAgIGJ1ZiArPSAiJXM6JXNcbiIgJSAoa2V5LCB2YWwpCiAg
      ICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBidWYgKz0gIiVzXG4iICUgdmFsCgogICAg
      ICAgICMgYXBwZW5kIHRoZSBidWNrZXQgaWYgaXQgZXhpc3RzCiAgICAgICAgaWYgYnVja2V0ICE9
      ICIiOgogICAgICAgICAgICBidWYgKz0gIi8lcyIgJSBidWNrZXQKCiAgICAgICAgIyBhZGQgdGhl
      IG9iamVjdGtleS4gZXZlbiBpZiBpdCBkb2Vzbid0IGV4aXN0LCBhZGQgdGhlIHNsYXNoCiAgICAg
      ICAgYnVmICs9ICIvJXMiICUgb2JqZWN0a2V5CgogICAgICAgIHJldHVybiBidWYKCgpjbGFzcyBS
      YWRvc0pTT046CiAgICBFWFRFUk5BTF9VU0VSX05BTUUgPSAiY2xpZW50LmhlYWx0aGNoZWNrZXIi
      CiAgICBFWFRFUk5BTF9SR1dfQURNSU5fT1BTX1VTRVJfTkFNRSA9ICJyZ3ctYWRtaW4tb3BzLXVz
      ZXIiCiAgICBFTVBUWV9PVVRQVVRfTElTVCA9ICJFbXB0eSBvdXRwdXQgbGlzdCIKICAgIERFRkFV
      TFRfUkdXX1BPT0xfUFJFRklYID0gImRlZmF1bHQiCiAgICBERUZBVUxUX01PTklUT1JJTkdfRU5E
      UE9JTlRfUE9SVCA9ICI5MjgzIgoKICAgIEBjbGFzc21ldGhvZAogICAgZGVmIGdlbl9hcmdfcGFy
      c2VyKGNscywgYXJnc190b19wYXJzZT1Ob25lKToKICAgICAgICBhcmdQID0gYXJncGFyc2UuQXJn
      dW1lbnRQYXJzZXIoKQoKICAgICAgICBjb21tb25fZ3JvdXAgPSBhcmdQLmFkZF9hcmd1bWVudF9n
      cm91cCgiY29tbW9uIikKICAgICAgICBjb21tb25fZ3JvdXAuYWRkX2FyZ3VtZW50KCItLXZlcmJv
      c2UiLCAiLXYiLCBhY3Rpb249InN0b3JlX3RydWUiLCBkZWZhdWx0PUZhbHNlKQogICAgICAgIGNv
      bW1vbl9ncm91cC5hZGRfYXJndW1lbnQoCiAgICAgICAgICAgICItLWNlcGgtY29uZiIsICItYyIs
      IGhlbHA9IlByb3ZpZGUgYSBjZXBoIGNvbmYgZmlsZS4iLCB0eXBlPXN0cgogICAgICAgICkKICAg
      ICAgICBjb21tb25fZ3JvdXAuYWRkX2FyZ3VtZW50KAogICAgICAgICAgICAiLS1ydW4tYXMtdXNl
      ciIsCiAgICAgICAgICAgICItdSIsCiAgICAgICAgICAgIGRlZmF1bHQ9IiIsCiAgICAgICAgICAg
      IHR5cGU9c3RyLAogICAgICAgICAgICBoZWxwPSJQcm92aWRlcyBhIHVzZXIgbmFtZSB0byBjaGVj
      ayB0aGUgY2x1c3RlcidzIGhlYWx0aCBzdGF0dXMsIG11c3QgYmUgcHJlZml4ZWQgYnkgJ2NsaWVu
      dC4nIiwKICAgICAgICApCiAgICAgICAgY29tbW9uX2dyb3VwLmFkZF9hcmd1bWVudCgKICAgICAg
      ICAgICAgIi0tY2x1c3Rlci1uYW1lIiwgZGVmYXVsdD0iIiwgaGVscD0iQ2VwaCBjbHVzdGVyIG5h
      bWUiCiAgICAgICAgKQogICAgICAgIGNvbW1vbl9ncm91cC5hZGRfYXJndW1lbnQoCiAgICAgICAg
      ICAgICItLW5hbWVzcGFjZSIsIGRlZmF1bHQ9IiIsIGhlbHA9Ik5hbWVzcGFjZSB3aGVyZSBDZXBo
      Q2x1c3RlciBpcyBydW5uaW5nIgogICAgICAgICkKICAgICAgICBjb21tb25fZ3JvdXAuYWRkX2Fy
      Z3VtZW50KAogICAgICAgICAgICAiLS1yZ3ctcG9vbC1wcmVmaXgiLCBkZWZhdWx0PSIiLCBoZWxw
      PSJSR1cgUG9vbCBwcmVmaXgiCiAgICAgICAgKQogICAgICAgIGNvbW1vbl9ncm91cC5hZGRfYXJn
      dW1lbnQoCiAgICAgICAgICAgICItLXJlc3RyaWN0ZWQtYXV0aC1wZXJtaXNzaW9uIiwKICAgICAg
      ICAgICAgZGVmYXVsdD1GYWxzZSwKICAgICAgICAgICAgaGVscD0iUmVzdHJpY3RlZCBjZXBoQ1NJ
      S2V5cmluZ3MgYXV0aCBwZXJtaXNzaW9ucyB0byBzcGVjaWZpYyBwb29scywgY2x1c3Rlci4iCiAg
      ICAgICAgICAgICsgIk1hbmRhdG9yeSBmbGFncyB0aGF0IG5lZWQgdG8gYmUgc2V0IGFyZSAtLXJi
      ZC1kYXRhLXBvb2wtbmFtZSwgYW5kIC0tY2x1c3Rlci1uYW1lLiIKICAgICAgICAgICAgKyAiLS1j
      ZXBoZnMtZmlsZXN5c3RlbS1uYW1lIGZsYWcgY2FuIGFsc28gYmUgcGFzc2VkIGluIGNhc2Ugb2Yg
      Y2VwaGZzIHVzZXIgcmVzdHJpY3Rpb24sIHNvIGl0IGNhbiByZXN0cmljdCB1c2VyIHRvIHBhcnRp
      Y3VsYXIgY2VwaGZzIGZpbGVzeXN0ZW0iCiAgICAgICAgICAgICsgInNhbXBsZSBydW46IGBweXRo
      b24zIC9ldGMvY2VwaC9jcmVhdGUtZXh0ZXJuYWwtY2x1c3Rlci1yZXNvdXJjZXMucHkgLS1jZXBo
      ZnMtZmlsZXN5c3RlbS1uYW1lIG15ZnMgLS1yYmQtZGF0YS1wb29sLW5hbWUgcmVwbGljYXBvb2wg
      LS1jbHVzdGVyLW5hbWUgcm9va1N0b3JhZ2UgLS1yZXN0cmljdGVkLWF1dGgtcGVybWlzc2lvbiB0
      cnVlYCIKICAgICAgICAgICAgKyAiTm90ZTogUmVzdHJpY3RpbmcgdGhlIHVzZXJzIHBlciBwb29s
      LCBhbmQgcGVyIGNsdXN0ZXIgd2lsbCByZXF1aXJlIHRvIGNyZWF0ZSBuZXcgdXNlcnMgYW5kIG5l
      dyBzZWNyZXRzIGZvciB0aGF0IHVzZXJzLiIsCiAgICAgICAgKQoKICAgICAgICBvdXRwdXRfZ3Jv
      dXAgPSBhcmdQLmFkZF9hcmd1bWVudF9ncm91cCgib3V0cHV0IikKICAgICAgICBvdXRwdXRfZ3Jv
      dXAuYWRkX2FyZ3VtZW50KAogICAgICAgICAgICAiLS1mb3JtYXQiLAogICAgICAgICAgICAiLXQi
      LAogICAgICAgICAgICBjaG9pY2VzPVsianNvbiIsICJiYXNoIl0sCiAgICAgICAgICAgIGRlZmF1
      bHQ9Impzb24iLAogICAgICAgICAgICBoZWxwPSJQcm92aWRlcyB0aGUgb3V0cHV0IGZvcm1hdCAo
      anNvbiB8IGJhc2gpIiwKICAgICAgICApCiAgICAgICAgb3V0cHV0X2dyb3VwLmFkZF9hcmd1bWVu
      dCgKICAgICAgICAgICAgIi0tb3V0cHV0IiwKICAgICAgICAgICAgIi1vIiwKICAgICAgICAgICAg
      ZGVmYXVsdD0iIiwKICAgICAgICAgICAgaGVscD0iT3V0cHV0IHdpbGwgYmUgc3RvcmVkIGludG8g
      dGhlIHByb3ZpZGVkIGZpbGUiLAogICAgICAgICkKICAgICAgICBvdXRwdXRfZ3JvdXAuYWRkX2Fy
      Z3VtZW50KAogICAgICAgICAgICAiLS1jZXBoZnMtZmlsZXN5c3RlbS1uYW1lIiwKICAgICAgICAg
      ICAgZGVmYXVsdD0iIiwKICAgICAgICAgICAgaGVscD0iUHJvdmlkZXMgdGhlIG5hbWUgb2YgdGhl
      IENlcGggZmlsZXN5c3RlbSIsCiAgICAgICAgKQogICAgICAgIG91dHB1dF9ncm91cC5hZGRfYXJn
      dW1lbnQoCiAgICAgICAgICAgICItLWNlcGhmcy1tZXRhZGF0YS1wb29sLW5hbWUiLAogICAgICAg
      ICAgICBkZWZhdWx0PSIiLAogICAgICAgICAgICBoZWxwPSJQcm92aWRlcyB0aGUgbmFtZSBvZiB0
      aGUgY2VwaGZzIG1ldGFkYXRhIHBvb2wiLAogICAgICAgICkKICAgICAgICBvdXRwdXRfZ3JvdXAu
      YWRkX2FyZ3VtZW50KAogICAgICAgICAgICAiLS1jZXBoZnMtZGF0YS1wb29sLW5hbWUiLAogICAg
      ICAgICAgICBkZWZhdWx0PSIiLAogICAgICAgICAgICBoZWxwPSJQcm92aWRlcyB0aGUgbmFtZSBv
      ZiB0aGUgY2VwaGZzIGRhdGEgcG9vbCIsCiAgICAgICAgKQogICAgICAgIG91dHB1dF9ncm91cC5h
      ZGRfYXJndW1lbnQoCiAgICAgICAgICAgICItLXJiZC1kYXRhLXBvb2wtbmFtZSIsCiAgICAgICAg
      ICAgIGRlZmF1bHQ9IiIsCiAgICAgICAgICAgIHJlcXVpcmVkPUZhbHNlLAogICAgICAgICAgICBo
      ZWxwPSJQcm92aWRlcyB0aGUgbmFtZSBvZiB0aGUgUkJEIGRhdGFwb29sIiwKICAgICAgICApCiAg
      ICAgICAgb3V0cHV0X2dyb3VwLmFkZF9hcmd1bWVudCgKICAgICAgICAgICAgIi0tcmd3LWVuZHBv
      aW50IiwKICAgICAgICAgICAgZGVmYXVsdD0iIiwKICAgICAgICAgICAgcmVxdWlyZWQ9RmFsc2Us
      CiAgICAgICAgICAgIGhlbHA9IlJBRE9TIEdhdGV3YXkgZW5kcG9pbnQgKGluIDxJUD46PFBPUlQ+
      IGZvcm1hdCkuIE5vdGU6IEZRRE4gaXMgYWxzbyBzdXBwb3J0ZWQoaW4gPEZRRE4+OjxQT1JUPiBm
      b3JtYXQpIiwKICAgICAgICApCiAgICAgICAgb3V0cHV0X2dyb3VwLmFkZF9hcmd1bWVudCgKICAg
      ICAgICAgICAgIi0tcmd3LXRscy1jZXJ0LXBhdGgiLAogICAgICAgICAgICBkZWZhdWx0PSIiLAog
      ICAgICAgICAgICByZXF1aXJlZD1GYWxzZSwKICAgICAgICAgICAgaGVscD0iUkFET1MgR2F0ZXdh
      eSBlbmRwb2ludCBUTFMgY2VydGlmaWNhdGUiLAogICAgICAgICkKICAgICAgICBvdXRwdXRfZ3Jv
      dXAuYWRkX2FyZ3VtZW50KAogICAgICAgICAgICAiLS1yZ3ctc2tpcC10bHMiLAogICAgICAgICAg
      ICByZXF1aXJlZD1GYWxzZSwKICAgICAgICAgICAgZGVmYXVsdD1GYWxzZSwKICAgICAgICAgICAg
      aGVscD0iSWdub3JlIFRMUyBjZXJ0aWZpY2F0aW9uIHZhbGlkYXRpb24gd2hlbiBhIHNlbGYtc2ln
      bmVkIGNlcnRpZmljYXRlIGlzIHByb3ZpZGVkIChOT1QgUkVDT01NRU5ERUQiLAogICAgICAgICkK
      ICAgICAgICBvdXRwdXRfZ3JvdXAuYWRkX2FyZ3VtZW50KAogICAgICAgICAgICAiLS1tb25pdG9y
      aW5nLWVuZHBvaW50IiwKICAgICAgICAgICAgZGVmYXVsdD0iIiwKICAgICAgICAgICAgcmVxdWly
      ZWQ9RmFsc2UsCiAgICAgICAgICAgIGhlbHA9IkNlcGggTWFuYWdlciBwcm9tZXRoZXVzIGV4cG9y
      dGVyIGVuZHBvaW50cyAoY29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgPElQPiBlbnRyaWVzIG9mIGFj
      dGl2ZSBhbmQgc3RhbmRieSBtZ3JzKSIsCiAgICAgICAgKQogICAgICAgIG91dHB1dF9ncm91cC5h
      ZGRfYXJndW1lbnQoCiAgICAgICAgICAgICItLW1vbml0b3JpbmctZW5kcG9pbnQtcG9ydCIsCiAg
      ICAgICAgICAgIGRlZmF1bHQ9IiIsCiAgICAgICAgICAgIHJlcXVpcmVkPUZhbHNlLAogICAgICAg
      ICAgICBoZWxwPSJDZXBoIE1hbmFnZXIgcHJvbWV0aGV1cyBleHBvcnRlciBwb3J0IiwKICAgICAg
      ICApCiAgICAgICAgb3V0cHV0X2dyb3VwLmFkZF9hcmd1bWVudCgKICAgICAgICAgICAgIi0tcmJk
      LW1ldGFkYXRhLWVjLXBvb2wtbmFtZSIsCiAgICAgICAgICAgIGRlZmF1bHQ9IiIsCiAgICAgICAg
      ICAgIHJlcXVpcmVkPUZhbHNlLAogICAgICAgICAgICBoZWxwPSJQcm92aWRlcyB0aGUgbmFtZSBv
      ZiBlcmFzdXJlIGNvZGVkIFJCRCBtZXRhZGF0YSBwb29sIiwKICAgICAgICApCiAgICAgICAgb3V0
      cHV0X2dyb3VwLmFkZF9hcmd1bWVudCgKICAgICAgICAgICAgIi0tZHJ5LXJ1biIsCiAgICAgICAg
      ICAgIGRlZmF1bHQ9RmFsc2UsCiAgICAgICAgICAgIGFjdGlvbj0ic3RvcmVfdHJ1ZSIsCiAgICAg
      ICAgICAgIGhlbHA9IkRyeSBydW4gcHJpbnRzIHRoZSBleGVjdXRlZCBjb21tYW5kcyB3aXRob3V0
      IHJ1bm5pbmcgdGhlbSIsCiAgICAgICAgKQogICAgICAgIG91dHB1dF9ncm91cC5hZGRfYXJndW1l
      bnQoCiAgICAgICAgICAgICItLXJhZG9zLW5hbWVzcGFjZSIsCiAgICAgICAgICAgIGRlZmF1bHQ9
      IiIsCiAgICAgICAgICAgIHJlcXVpcmVkPUZhbHNlLAogICAgICAgICAgICBoZWxwPSJkaXZpZGVz
      IGEgcG9vbCBpbnRvIHNlcGFyYXRlIGxvZ2ljYWwgbmFtZXNwYWNlcyIsCiAgICAgICAgKQogICAg
      ICAgIG91dHB1dF9ncm91cC5hZGRfYXJndW1lbnQoCiAgICAgICAgICAgICItLXN1YnZvbHVtZS1n
      cm91cCIsCiAgICAgICAgICAgIGRlZmF1bHQ9IiIsCiAgICAgICAgICAgIHJlcXVpcmVkPUZhbHNl
      LAogICAgICAgICAgICBoZWxwPSJwcm92aWRlcyB0aGUgbmFtZSBvZiB0aGUgc3Vidm9sdW1lIGdy
      b3VwIiwKICAgICAgICApCgogICAgICAgIHVwZ3JhZGVfZ3JvdXAgPSBhcmdQLmFkZF9hcmd1bWVu
      dF9ncm91cCgidXBncmFkZSIpCiAgICAgICAgdXBncmFkZV9ncm91cC5hZGRfYXJndW1lbnQoCiAg
      ICAgICAgICAgICItLXVwZ3JhZGUiLAogICAgICAgICAgICBhY3Rpb249InN0b3JlX3RydWUiLAog
      ICAgICAgICAgICBkZWZhdWx0PUZhbHNlLAogICAgICAgICAgICBoZWxwPSJVcGdyYWRlcyB0aGUg
      Y2VwaENTSUtleXJpbmdzKEZvciBleGFtcGxlOiBjbGllbnQuY3NpLWNlcGhmcy1wcm92aXNpb25l
      cikgd2l0aCBuZXcgcGVybWlzc2lvbnMgbmVlZGVkIGZvciB0aGUgbmV3IGNsdXN0ZXIgdmVyc2lv
      biBhbmQgb2xkZXIgcGVybWlzc2lvbiB3aWxsIHN0aWxsIGJlIGFwcGxpZWQuIgogICAgICAgICAg
      ICArICJTYW1wbGUgcnVuOiBgcHl0aG9uMyAvZXRjL2NlcGgvY3JlYXRlLWV4dGVybmFsLWNsdXN0
      ZXItcmVzb3VyY2VzLnB5IC0tdXBncmFkZWAsIHRoaXMgd2lsbCB1cGdyYWRlIGFsbCB0aGUgZGVm
      YXVsdCBjc2kgdXNlcnMobm9uLXJlc3RyaWN0ZWQpIgogICAgICAgICAgICArICJGb3IgcmVzdHJp
      Y3RlZCB1c2VycyhGb3IgZXhhbXBsZTogY2xpZW50LmNzaS1jZXBoZnMtcHJvdmlzaW9uZXItb3Bl
      bnNoaWZ0LXN0b3JhZ2UtbXlmcyksIHVzZXJzIGNyZWF0ZWQgdXNpbmcgLS1yZXN0cmljdGVkLWF1
      dGgtcGVybWlzc2lvbiBmbGFnIG5lZWQgdG8gcGFzcyBtYW5kYXRvcnkgZmxhZ3MiCiAgICAgICAg
      ICAgICsgIm1hbmRhdG9yeSBmbGFnczogJy0tcmJkLWRhdGEtcG9vbC1uYW1lLCAtLWNsdXN0ZXIt
      bmFtZSBhbmQgLS1ydW4tYXMtdXNlcicgZmxhZ3Mgd2hpbGUgdXBncmFkaW5nIgogICAgICAgICAg
      ICArICJpbiBjYXNlIG9mIGNlcGhmcyB1c2VycyBpZiB5b3UgaGF2ZSBwYXNzZWQgLS1jZXBoZnMt
      ZmlsZXN5c3RlbS1uYW1lIGZsYWcgd2hpbGUgY3JlYXRpbmcgdXNlciB0aGVuIHdoaWxlIHVwZ3Jh
      ZGluZyBpdCB3aWxsIGJlIG1hbmRhdG9yeSB0b28iCiAgICAgICAgICAgICsgIlNhbXBsZSBydW46
      IGBweXRob24zIC9ldGMvY2VwaC9jcmVhdGUtZXh0ZXJuYWwtY2x1c3Rlci1yZXNvdXJjZXMucHkg
      LS11cGdyYWRlIC0tcmJkLWRhdGEtcG9vbC1uYW1lIHJlcGxpY2Fwb29sIC0tY2x1c3Rlci1uYW1l
      IHJvb2tTdG9yYWdlICAtLXJ1bi1hcy11c2VyIGNsaWVudC5jc2ktcmJkLW5vZGUtcm9va1N0b3Jh
      Z2UtcmVwbGljYXBvb2xgIgogICAgICAgICAgICArICJQUzogQW4gZXhpc3Rpbmcgbm9uLXJlc3Ry
      aWN0ZWQgdXNlciBjYW5ub3QgYmUgZG93bmdyYWRlZCB0byBhIHJlc3RyaWN0ZWQgdXNlciBieSB1
      cGdyYWRpbmcuIEFkbWluIG5lZWQgdG8gY3JlYXRlIGEgbmV3IHJlc3RyaWN0ZWQgdXNlciBmb3Ig
      dGhpcyBieSByZS1ydW5uaW5nIHRoZSBzY3JpcHQuIgogICAgICAgICAgICArICJVcGdyYWRlIGZs
      YWcgc2hvdWxkIG9ubHkgYmUgdXNlZCB0byBhcHBlbmQgbmV3IHBlcm1pc3Npb25zIHRvIHVzZXJz
      LCBpdCBzaG91bGRuJ3QgYmUgdXNlZCBmb3IgY2hhbmdpbmcgdXNlciBhbHJlYWR5IGFwcGxpZWQg
      cGVybWlzc2lvbiwgZm9yIGV4YW1wbGUgeW91IHNob3VsZG4ndCBjaGFuZ2UgaW4gd2hpY2ggcG9v
      bCB1c2VyIGhhcyBhY2Nlc3MiLAogICAgICAgICkKCiAgICAgICAgaWYgYXJnc190b19wYXJzZToK
      ICAgICAgICAgICAgYXNzZXJ0ICgKICAgICAgICAgICAgICAgIHR5cGUoYXJnc190b19wYXJzZSkg
      PT0gbGlzdAogICAgICAgICAgICApLCAiQXJndW1lbnQgdG8gJ2dlbl9hcmdfcGFyc2VyJyBzaG91
      bGQgYmUgYSBsaXN0IgogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGFyZ3NfdG9fcGFyc2UgPSBz
      eXMuYXJndlsxOl0KICAgICAgICByZXR1cm4gYXJnUC5wYXJzZV9hcmdzKGFyZ3NfdG9fcGFyc2Up
      CgogICAgZGVmIHZhbGlkYXRlX3Jnd19tZXRhZGF0YV9lY19wb29sX25hbWUoc2VsZik6CiAgICAg
      ICAgaWYgc2VsZi5fYXJnX3BhcnNlci5yYmRfbWV0YWRhdGFfZWNfcG9vbF9uYW1lOgogICAgICAg
      ICAgICByYmRfbWV0YWRhdGFfZWNfcG9vbF9uYW1lID0gc2VsZi5fYXJnX3BhcnNlci5yYmRfbWV0
      YWRhdGFfZWNfcG9vbF9uYW1lCiAgICAgICAgICAgIHJiZF9wb29sX25hbWUgPSBzZWxmLl9hcmdf
      cGFyc2VyLnJiZF9kYXRhX3Bvb2xfbmFtZQoKICAgICAgICAgICAgaWYgcmJkX3Bvb2xfbmFtZSA9
      PSAiIjoKICAgICAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAg
      ICAgICAgICAgICAgICAgICAgIkZsYWcgJy0tcmJkLWRhdGEtcG9vbC1uYW1lJyBzaG91bGQgbm90
      IGJlIGVtcHR5IgogICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgaWYgcmJkX21ldGFkYXRh
      X2VjX3Bvb2xfbmFtZSA9PSAiIjoKICAgICAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1
      cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgIkZsYWcgJy0tcmJkLW1ldGFkYXRhLWVj
      LXBvb2wtbmFtZScgc2hvdWxkIG5vdCBiZSBlbXB0eSIKICAgICAgICAgICAgICAgICkKCiAgICAg
      ICAgICAgIGNtZF9qc29uID0geyJwcmVmaXgiOiAib3NkIGR1bXAiLCAiZm9ybWF0IjogImpzb24i
      fQogICAgICAgICAgICByZXRfdmFsLCBqc29uX291dCwgZXJyX21zZyA9IHNlbGYuX2NvbW1vbl9j
      bWRfanNvbl9nZW4oY21kX2pzb24pCiAgICAgICAgICAgIGlmIHJldF92YWwgIT0gMCBvciBsZW4o
      anNvbl9vdXQpID09IDA6CiAgICAgICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhj
      ZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICJ7fSIuZm9ybWF0KGNtZF9qc29uWyJwcmVmaXgi
      XSkKICAgICAgICAgICAgICAgICAgICArICIgY29tbWFuZCBmYWlsZWQuXG4iCiAgICAgICAgICAg
      ICAgICAgICAgKyAiRXJyb3I6IHt9Ii5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgICAgIGVy
      cl9tc2cgaWYgcmV0X3ZhbCAhPSAwIGVsc2Ugc2VsZi5FTVBUWV9PVVRQVVRfTElTVAogICAgICAg
      ICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgbWV0YWRhdGFfcG9v
      bF9leGlzdCwgcG9vbF9leGlzdCA9IEZhbHNlLCBGYWxzZQoKICAgICAgICAgICAgZm9yIGtleSBp
      biBqc29uX291dFsicG9vbHMiXToKICAgICAgICAgICAgICAgICMgaWYgZXJhc3VyZV9jb2RlX3By
      b2ZpbGUgaXMgZW1wdHkgYW5kIHBvb2wgbmFtZSBleGlzdHMgdGhlbiBpdCByZXBsaWNhIHBvb2wK
      ICAgICAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgICAgICBrZXlbImVyYXN1cmVfY29k
      ZV9wcm9maWxlIl0gPT0gIiIKICAgICAgICAgICAgICAgICAgICBhbmQga2V5WyJwb29sX25hbWUi
      XSA9PSByYmRfbWV0YWRhdGFfZWNfcG9vbF9uYW1lCiAgICAgICAgICAgICAgICApOgogICAgICAg
      ICAgICAgICAgICAgIG1ldGFkYXRhX3Bvb2xfZXhpc3QgPSBUcnVlCiAgICAgICAgICAgICAgICAj
      IGlmIGVyYXN1cmVfY29kZV9wcm9maWxlIGlzIG5vdCBlbXB0eSBhbmQgcG9vbCBuYW1lIGV4aXN0
      cyB0aGVuIGl0IGlzIGVjIHBvb2wKICAgICAgICAgICAgICAgIGlmIGtleVsiZXJhc3VyZV9jb2Rl
      X3Byb2ZpbGUiXSBhbmQga2V5WyJwb29sX25hbWUiXSA9PSByYmRfcG9vbF9uYW1lOgogICAgICAg
      ICAgICAgICAgICAgIHBvb2xfZXhpc3QgPSBUcnVlCgogICAgICAgICAgICBpZiBub3QgbWV0YWRh
      dGFfcG9vbF9leGlzdDoKICAgICAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNl
      cHRpb24oCiAgICAgICAgICAgICAgICAgICAgIlByb3ZpZGVkIHJiZF9lY19tZXRhZGF0YV9wb29s
      IG5hbWUsIHt9LCBkb2VzIG5vdCBleGlzdCIuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgICAg
      ICByYmRfbWV0YWRhdGFfZWNfcG9vbF9uYW1lCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAg
      ICAgICAgICAgKQogICAgICAgICAgICBpZiBub3QgcG9vbF9leGlzdDoKICAgICAgICAgICAgICAg
      IHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgIlBy
      b3ZpZGVkIHJiZF9kYXRhX3Bvb2wgbmFtZSwge30sIGRvZXMgbm90IGV4aXN0Ii5mb3JtYXQoCiAg
      ICAgICAgICAgICAgICAgICAgICAgIHJiZF9wb29sX25hbWUKICAgICAgICAgICAgICAgICAgICAp
      CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIHJldHVybiByYmRfbWV0YWRhdGFfZWNfcG9v
      bF9uYW1lCgogICAgZGVmIGRyeV9ydW4oc2VsZiwgbXNnKToKICAgICAgICBpZiBzZWxmLl9hcmdf
      cGFyc2VyLmRyeV9ydW46CiAgICAgICAgICAgIHByaW50KCJFeGVjdXRlOiAiICsgIiciICsgbXNn
      ICsgIiciKQoKICAgIGRlZiB2YWxpZGF0ZV9yZ3dfZW5kcG9pbnRfdGxzX2NlcnQoc2VsZik6CiAg
      ICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci5yZ3dfdGxzX2NlcnRfcGF0aDoKICAgICAgICAgICAg
      d2l0aCBvcGVuKHNlbGYuX2FyZ19wYXJzZXIucmd3X3Rsc19jZXJ0X3BhdGgsIGVuY29kaW5nPSJ1
      dGY4IikgYXMgZjoKICAgICAgICAgICAgICAgIGNvbnRlbnRzID0gZi5yZWFkKCkKICAgICAgICAg
      ICAgICAgIHJldHVybiBjb250ZW50cy5yc3RyaXAoKQoKICAgIGRlZiBfY2hlY2tfY29uZmxpY3Rp
      bmdfb3B0aW9ucyhzZWxmKToKICAgICAgICBpZiBub3Qgc2VsZi5fYXJnX3BhcnNlci51cGdyYWRl
      IGFuZCBub3Qgc2VsZi5fYXJnX3BhcnNlci5yYmRfZGF0YV9wb29sX25hbWU6CiAgICAgICAgICAg
      IHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAiRWl0aGVy
      ICctLXVwZ3JhZGUnIG9yICctLXJiZC1kYXRhLXBvb2wtbmFtZSA8cG9vbF9uYW1lPicgc2hvdWxk
      IGJlIHNwZWNpZmllZCIKICAgICAgICAgICAgKQoKICAgIGRlZiBfaW52YWxpZF9lbmRwb2ludChz
      ZWxmLCBlbmRwb2ludF9zdHIpOgogICAgICAgIHRyeToKICAgICAgICAgICAgaXB2NCwgcG9ydCA9
      IGVuZHBvaW50X3N0ci5zcGxpdCgiOiIpCiAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6CiAgICAg
      ICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAi
      Tm90IGEgcHJvcGVyIGVuZHBvaW50OiB7fSwgPElQdjQ+OjxQT1JUPiwgZm9ybWF0IGlzIGV4cGVj
      dGVkIi5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgZW5kcG9pbnRfc3RyCiAgICAgICAgICAg
      ICAgICApCiAgICAgICAgICAgICkKICAgICAgICBpcFBhcnRzID0gaXB2NC5zcGxpdCgiLiIpCiAg
      ICAgICAgaWYgbGVuKGlwUGFydHMpICE9IDQ6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZh
      aWx1cmVFeGNlcHRpb24oIk5vdCBhIHZhbGlkIElQIGFkZHJlc3M6IHt9Ii5mb3JtYXQoaXB2NCkp
      CiAgICAgICAgZm9yIGVhY2hQYXJ0IGluIGlwUGFydHM6CiAgICAgICAgICAgIGlmIG5vdCBlYWNo
      UGFydC5pc2RpZ2l0KCk6CiAgICAgICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhj
      ZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICJJUCBhZGRyZXNzIHBhcnRzIHNob3VsZCBiZSBu
      dW1iZXJzOiB7fSIuZm9ybWF0KGlwdjQpCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIGlu
      dFBhcnQgPSBpbnQoZWFjaFBhcnQpCiAgICAgICAgICAgIGlmIGludFBhcnQgPCAwIG9yIGludFBh
      cnQgPiAyNTQ6CiAgICAgICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9u
      KAogICAgICAgICAgICAgICAgICAgICJPdXQgb2YgcmFuZ2UgSVAgYWRkcmVzc2VzOiB7fSIuZm9y
      bWF0KGlwdjQpCiAgICAgICAgICAgICAgICApCiAgICAgICAgaWYgbm90IHBvcnQuaXNkaWdpdCgp
      OgogICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKCJQb3J0IG5vdCB2
      YWxpZDoge30iLmZvcm1hdChwb3J0KSkKICAgICAgICBpbnRQb3J0ID0gaW50KHBvcnQpCiAgICAg
      ICAgaWYgaW50UG9ydCA8IDEgb3IgaW50UG9ydCA+IDIqKjE2IC0gMToKICAgICAgICAgICAgcmFp
      c2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigiT3V0IG9mIHJhbmdlIHBvcnQgbnVtYmVyOiB7
      fSIuZm9ybWF0KHBvcnQpKQogICAgICAgIHJldHVybiBGYWxzZQoKICAgIGRlZiBlbmRwb2ludF9k
      aWFsKHNlbGYsIGVuZHBvaW50X3N0ciwgdGltZW91dD0zLCBjZXJ0PU5vbmUpOgogICAgICAgICMg
      aWYgdGhlICdjbHVzdGVyJyBpbnN0YW5jZSBpcyBhIGR1bW15IG9uZSwKICAgICAgICAjIGRvbid0
      IHRyeSB0byByZWFjaCBvdXQgdG8gdGhlIGVuZHBvaW50CiAgICAgICAgaWYgaXNpbnN0YW5jZShz
      ZWxmLmNsdXN0ZXIsIER1bW15UmFkb3MpOgogICAgICAgICAgICByZXR1cm4KICAgICAgICBwcm90
      b2NvbHMgPSBbImh0dHAiLCAiaHR0cHMiXQogICAgICAgIGZvciBwcmVmaXggaW4gcHJvdG9jb2xz
      OgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBlcCA9ICJ7fTovL3t9Ii5mb3JtYXQo
      cHJlZml4LCBlbmRwb2ludF9zdHIpCiAgICAgICAgICAgICAgICAjIElmIHZlcmlmeSBpcyBzZXQg
      dG8gYSBwYXRoIHRvIGEgZGlyZWN0b3J5LAogICAgICAgICAgICAgICAgIyB0aGUgZGlyZWN0b3J5
      IG11c3QgaGF2ZSBiZWVuIHByb2Nlc3NlZCB1c2luZyB0aGUgY19yZWhhc2ggdXRpbGl0eSBzdXBw
      bGllZCB3aXRoIE9wZW5TU0wuCiAgICAgICAgICAgICAgICBpZiBwcmVmaXggPT0gImh0dHBzIiBh
      bmQgY2VydCBhbmQgc2VsZi5fYXJnX3BhcnNlci5yZ3dfc2tpcF90bHM6CiAgICAgICAgICAgICAg
      ICAgICAgciA9IHJlcXVlc3RzLmhlYWQoZXAsIHRpbWVvdXQ9dGltZW91dCwgdmVyaWZ5PUZhbHNl
      KQogICAgICAgICAgICAgICAgZWxpZiBwcmVmaXggPT0gImh0dHBzIiBhbmQgY2VydDoKICAgICAg
      ICAgICAgICAgICAgICByID0gcmVxdWVzdHMuaGVhZChlcCwgdGltZW91dD10aW1lb3V0LCB2ZXJp
      Znk9Y2VydCkKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgciA9IHJl
      cXVlc3RzLmhlYWQoZXAsIHRpbWVvdXQ9dGltZW91dCkKICAgICAgICAgICAgICAgIGlmIHIuc3Rh
      dHVzX2NvZGUgPT0gMjAwOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBwcmVmaXgKICAgICAg
      ICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgY29udGludWUKICAgICAgICByYWlzZSBFeGVj
      dXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAidW5hYmxlIHRvIGNvbm5lY3QgdG8g
      ZW5kcG9pbnQ6IHt9Ii5mb3JtYXQoZW5kcG9pbnRfc3RyKQogICAgICAgICkKCiAgICBkZWYgX19p
      bml0X18oc2VsZiwgYXJnX2xpc3Q9Tm9uZSk6CiAgICAgICAgc2VsZi5vdXRfbWFwID0ge30KICAg
      ICAgICBzZWxmLl9leGNsdWRlZF9rZXlzID0gc2V0KCkKICAgICAgICBzZWxmLl9hcmdfcGFyc2Vy
      ID0gc2VsZi5nZW5fYXJnX3BhcnNlcihhcmdzX3RvX3BhcnNlPWFyZ19saXN0KQogICAgICAgIHNl
      bGYuX2NoZWNrX2NvbmZsaWN0aW5nX29wdGlvbnMoKQogICAgICAgIHNlbGYucnVuX2FzX3VzZXIg
      PSBzZWxmLl9hcmdfcGFyc2VyLnJ1bl9hc191c2VyCiAgICAgICAgc2VsZi5vdXRwdXRfZmlsZSA9
      IHNlbGYuX2FyZ19wYXJzZXIub3V0cHV0CiAgICAgICAgc2VsZi5jZXBoX2NvbmYgPSBzZWxmLl9h
      cmdfcGFyc2VyLmNlcGhfY29uZgogICAgICAgIHNlbGYuTUlOX1VTRVJfQ0FQX1BFUk1JU1NJT05T
      ID0gewogICAgICAgICAgICAibWdyIjogImFsbG93IGNvbW1hbmQgY29uZmlnIiwKICAgICAgICAg
      ICAgIm1vbiI6ICJhbGxvdyByLCBhbGxvdyBjb21tYW5kIHF1b3J1bV9zdGF0dXMsIGFsbG93IGNv
      bW1hbmQgdmVyc2lvbiIsCiAgICAgICAgICAgICJvc2QiOiAiYWxsb3cgcnd4IHBvb2w9ezB9LnJn
      dy5tZXRhLCAiCiAgICAgICAgICAgICsgImFsbG93IHIgcG9vbD0ucmd3LnJvb3QsICIKICAgICAg
      ICAgICAgKyAiYWxsb3cgcncgcG9vbD17MH0ucmd3LmNvbnRyb2wsICIKICAgICAgICAgICAgKyAi
      YWxsb3cgcnggcG9vbD17MH0ucmd3LmxvZywgIgogICAgICAgICAgICArICJhbGxvdyB4IHBvb2w9
      ezB9LnJndy5idWNrZXRzLmluZGV4IiwKICAgICAgICB9CiAgICAgICAgIyBpZiB1c2VyIG5vdCBw
      cm92aWRlZCwgZ2l2ZSBhIGRlZmF1bHQgdXNlcgogICAgICAgIGlmIG5vdCBzZWxmLnJ1bl9hc191
      c2VyIGFuZCBub3Qgc2VsZi5fYXJnX3BhcnNlci51cGdyYWRlOgogICAgICAgICAgICBzZWxmLnJ1
      bl9hc191c2VyID0gc2VsZi5FWFRFUk5BTF9VU0VSX05BTUUKICAgICAgICBpZiBub3Qgc2VsZi5f
      YXJnX3BhcnNlci5yZ3dfcG9vbF9wcmVmaXggYW5kIG5vdCBzZWxmLl9hcmdfcGFyc2VyLnVwZ3Jh
      ZGU6CiAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIucmd3X3Bvb2xfcHJlZml4ID0gc2VsZi5E
      RUZBVUxUX1JHV19QT09MX1BSRUZJWAogICAgICAgIGlmIHNlbGYuY2VwaF9jb25mOgogICAgICAg
      ICAgICBzZWxmLmNsdXN0ZXIgPSByYWRvcy5SYWRvcyhjb25mZmlsZT1zZWxmLmNlcGhfY29uZikK
      ICAgICAgICBlbHNlOgogICAgICAgICAgICBzZWxmLmNsdXN0ZXIgPSByYWRvcy5SYWRvcygpCiAg
      ICAgICAgICAgIHNlbGYuY2x1c3Rlci5jb25mX3JlYWRfZmlsZSgpCiAgICAgICAgc2VsZi5jbHVz
      dGVyLmNvbm5lY3QoKQoKICAgIGRlZiBzaHV0ZG93bihzZWxmKToKICAgICAgICBpZiBzZWxmLmNs
      dXN0ZXIuc3RhdGUgPT0gImNvbm5lY3RlZCI6CiAgICAgICAgICAgIHNlbGYuY2x1c3Rlci5zaHV0
      ZG93bigpCgogICAgZGVmIGdldF9mc2lkKHNlbGYpOgogICAgICAgIGlmIHNlbGYuX2FyZ19wYXJz
      ZXIuZHJ5X3J1bjoKICAgICAgICAgICAgcmV0dXJuIHNlbGYuZHJ5X3J1bigiY2VwaCBmc2lkIikK
      ICAgICAgICByZXR1cm4gc3RyKHNlbGYuY2x1c3Rlci5nZXRfZnNpZCgpKQoKICAgIGRlZiBfY29t
      bW9uX2NtZF9qc29uX2dlbihzZWxmLCBjbWRfanNvbik6CiAgICAgICAgY21kID0ganNvbi5kdW1w
      cyhjbWRfanNvbiwgc29ydF9rZXlzPVRydWUpCiAgICAgICAgcmV0X3ZhbCwgY21kX291dCwgZXJy
      X21zZyA9IHNlbGYuY2x1c3Rlci5tb25fY29tbWFuZChjbWQsIGIiIikKICAgICAgICBpZiBzZWxm
      Ll9hcmdfcGFyc2VyLnZlcmJvc2U6CiAgICAgICAgICAgIHByaW50KCJDb21tYW5kIElucHV0OiB7
      fSIuZm9ybWF0KGNtZCkpCiAgICAgICAgICAgIHByaW50KAogICAgICAgICAgICAgICAgIlJldHVy
      biBWYWw6IHt9XG5Db21tYW5kIE91dHB1dDoge31cbkVycm9yIE1lc3NhZ2U6IHt9XG4tLS0tLS0t
      LS0tXG4iLmZvcm1hdCgKICAgICAgICAgICAgICAgICAgICByZXRfdmFsLCBjbWRfb3V0LCBlcnJf
      bXNnCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICkKICAgICAgICBqc29uX291dCA9IHt9
      CiAgICAgICAgIyBpZiB0aGVyZSBpcyBubyBlcnJvciAoaS5lOyByZXRfdmFsIGlzIFpFUk8pIGFu
      ZCAnY21kX291dCcgaXMgbm90IGVtcHR5CiAgICAgICAgIyB0aGVuIGNvbnZlcnQgJ2NtZF9vdXQn
      IHRvIGEganNvbiBvdXRwdXQKICAgICAgICBpZiByZXRfdmFsID09IDAgYW5kIGNtZF9vdXQ6CiAg
      ICAgICAgICAgIGpzb25fb3V0ID0ganNvbi5sb2FkcyhjbWRfb3V0KQogICAgICAgIHJldHVybiBy
      ZXRfdmFsLCBqc29uX291dCwgZXJyX21zZwoKICAgIGRlZiBnZXRfY2VwaF9leHRlcm5hbF9tb25f
      ZGF0YShzZWxmKToKICAgICAgICBjbWRfanNvbiA9IHsicHJlZml4IjogInF1b3J1bV9zdGF0dXMi
      LCAiZm9ybWF0IjogImpzb24ifQogICAgICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIuZHJ5X3J1bjoK
      ICAgICAgICAgICAgcmV0dXJuIHNlbGYuZHJ5X3J1bigiY2VwaCAiICsgY21kX2pzb25bInByZWZp
      eCJdKQogICAgICAgIHJldF92YWwsIGpzb25fb3V0LCBlcnJfbXNnID0gc2VsZi5fY29tbW9uX2Nt
      ZF9qc29uX2dlbihjbWRfanNvbikKICAgICAgICAjIGlmIHRoZXJlIGlzIGFuIHVuc3VjY2Vzc2Z1
      bCBhdHRlbXB0LAogICAgICAgIGlmIHJldF92YWwgIT0gMCBvciBsZW4oanNvbl9vdXQpID09IDA6
      CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAg
      ICAgICAiJ3F1b3J1bV9zdGF0dXMnIGNvbW1hbmQgZmFpbGVkLlxuIgogICAgICAgICAgICAgICAg
      KyAiRXJyb3I6IHt9Ii5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgZXJyX21zZyBpZiByZXRf
      dmFsICE9IDAgZWxzZSBzZWxmLkVNUFRZX09VVFBVVF9MSVNUCiAgICAgICAgICAgICAgICApCiAg
      ICAgICAgICAgICkKICAgICAgICBxX2xlYWRlcl9uYW1lID0ganNvbl9vdXRbInF1b3J1bV9sZWFk
      ZXJfbmFtZSJdCiAgICAgICAgcV9sZWFkZXJfZGV0YWlscyA9IHt9CiAgICAgICAgcV9sZWFkZXJf
      bWF0Y2hpbmdfbGlzdCA9IFsKICAgICAgICAgICAgbCBmb3IgbCBpbiBqc29uX291dFsibW9ubWFw
      Il1bIm1vbnMiXSBpZiBsWyJuYW1lIl0gPT0gcV9sZWFkZXJfbmFtZQogICAgICAgIF0KICAgICAg
      ICBpZiBsZW4ocV9sZWFkZXJfbWF0Y2hpbmdfbGlzdCkgPT0gMDoKICAgICAgICAgICAgcmFpc2Ug
      RXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigiTm8gbWF0Y2hpbmcgJ21vbicgZGV0YWlscyBmb3Vu
      ZCIpCiAgICAgICAgcV9sZWFkZXJfZGV0YWlscyA9IHFfbGVhZGVyX21hdGNoaW5nX2xpc3RbMF0K
      ICAgICAgICAjIGdldCB0aGUgYWRkcmVzcyB2ZWN0b3Igb2YgdGhlIHF1b3J1bS1sZWFkZXIKICAg
      ICAgICBxX2xlYWRlcl9hZGRydmVjID0gcV9sZWFkZXJfZGV0YWlscy5nZXQoInB1YmxpY19hZGRy
      cyIsIHt9KS5nZXQoImFkZHJ2ZWMiLCBbXSkKICAgICAgICAjIGlmIHRoZSBxdW9ydW0tbGVhZGVy
      IGhhcyBvbmx5IG9uZSBhZGRyZXNzIGluIHRoZSBhZGRyZXNzLXZlY3RvcgogICAgICAgICMgYW5k
      IGl0IGlzIG9mIHR5cGUgJ3YyJyAoaWU7IHdpdGggPElQPjozMzAwKSwKICAgICAgICAjIHJhaXNl
      IGFuIGV4Y2VwdGlvbiB0byBtYWtlIHVzZXIgYXdhcmUgdGhhdAogICAgICAgICMgdGhleSBoYXZl
      IHRvIGVuYWJsZSAndjEnIChpZTsgd2l0aCA8SVA+OjY3ODkpIHR5cGUgYXMgd2VsbAogICAgICAg
      IGlmIGxlbihxX2xlYWRlcl9hZGRydmVjKSA9PSAxIGFuZCBxX2xlYWRlcl9hZGRydmVjWzBdWyJ0
      eXBlIl0gPT0gInYyIjoKICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlv
      bigKICAgICAgICAgICAgICAgICJPbmx5ICd2MicgYWRkcmVzcyB0eXBlIGlzIGVuYWJsZWQsIHVz
      ZXIgc2hvdWxkIGFsc28gZW5hYmxlICd2MScgdHlwZSBhcyB3ZWxsIgogICAgICAgICAgICApCiAg
      ICAgICAgaXBfcG9ydCA9IHN0cihxX2xlYWRlcl9kZXRhaWxzWyJwdWJsaWNfYWRkciJdLnNwbGl0
      KCIvIilbMF0pCiAgICAgICAgcmV0dXJuICJ7fT17fSIuZm9ybWF0KHN0cihxX2xlYWRlcl9uYW1l
      KSwgaXBfcG9ydCkKCiAgICBkZWYgX2pvaW5faG9zdF9wb3J0KHNlbGYsIGVuZHBvaW50LCBwb3J0
      KToKICAgICAgICBwb3J0ID0gInt9Ii5mb3JtYXQocG9ydCkKICAgICAgICAjIHJlZ2V4IHRvIGNo
      ZWNrIHRoZSBnaXZlbiBlbmRwb2ludCBpcyBlbmNsb3NlZCBpbiBzcXVhcmUgYnJhY2tldHMKICAg
      ICAgICBpcHY2X3JlZ2V4ID0gcmUuY29tcGlsZShyIl5cW1teXV0qXF0kIikKICAgICAgICAjIGVu
      ZHBvaW50IGhhcyAnOicgaW4gaXQgYW5kIGlmIG5vdCAoYWxyZWFkeSkgZW5jbG9zZWQgaW4gc3F1
      YXJlIGJyYWNrZXRzCiAgICAgICAgaWYgZW5kcG9pbnQuY291bnQoIjoiKSBhbmQgbm90IGlwdjZf
      cmVnZXgubWF0Y2goZW5kcG9pbnQpOgogICAgICAgICAgICBlbmRwb2ludCA9ICJbe31dIi5mb3Jt
      YXQoZW5kcG9pbnQpCiAgICAgICAgaWYgbm90IHBvcnQ6CiAgICAgICAgICAgIHJldHVybiBlbmRw
      b2ludAogICAgICAgIHJldHVybiAiOiIuam9pbihbZW5kcG9pbnQsIHBvcnRdKQoKICAgIGRlZiBf
      Y29udmVydF9ob3N0bmFtZV90b19pcChzZWxmLCBob3N0X25hbWUpOgogICAgICAgICMgaWYgJ2Ns
      dXN0ZXInIGluc3RhbmNlIGlzIGEgZHVtbXkgdHlwZSwKICAgICAgICAjIGNhbGwgdGhlIGR1bW15
      IGluc3RhbmNlJ3MgImNvbnZlcnQiIG1ldGhvZAogICAgICAgIGlmIG5vdCBob3N0X25hbWU6CiAg
      ICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oIkVtcHR5IGhvc3RuYW1l
      IHByb3ZpZGVkIikKICAgICAgICBpZiBpc2luc3RhbmNlKHNlbGYuY2x1c3RlciwgRHVtbXlSYWRv
      cyk6CiAgICAgICAgICAgIHJldHVybiBzZWxmLmNsdXN0ZXIuX2NvbnZlcnRfaG9zdG5hbWVfdG9f
      aXAoaG9zdF9uYW1lKQogICAgICAgIGltcG9ydCBzb2NrZXQKCiAgICAgICAgaXAgPSBzb2NrZXQu
      Z2V0aG9zdGJ5bmFtZShob3N0X25hbWUpCiAgICAgICAgZGVsIHNvY2tldAogICAgICAgIHJldHVy
      biBpcAoKICAgIGRlZiBnZXRfYWN0aXZlX2FuZF9zdGFuZGJ5X21ncnMoc2VsZik6CiAgICAgICAg
      aWYgc2VsZi5fYXJnX3BhcnNlci5kcnlfcnVuOgogICAgICAgICAgICByZXR1cm4gIiIsIHNlbGYu
      ZHJ5X3J1bigiY2VwaCBzdGF0dXMiKQogICAgICAgIG1vbml0b3JpbmdfZW5kcG9pbnRfcG9ydCA9
      IHNlbGYuX2FyZ19wYXJzZXIubW9uaXRvcmluZ19lbmRwb2ludF9wb3J0CiAgICAgICAgbW9uaXRv
      cmluZ19lbmRwb2ludF9pcF9saXN0ID0gc2VsZi5fYXJnX3BhcnNlci5tb25pdG9yaW5nX2VuZHBv
      aW50CiAgICAgICAgc3RhbmRieV9tZ3JzID0gW10KICAgICAgICBpZiBub3QgbW9uaXRvcmluZ19l
      bmRwb2ludF9pcF9saXN0OgogICAgICAgICAgICBjbWRfanNvbiA9IHsicHJlZml4IjogInN0YXR1
      cyIsICJmb3JtYXQiOiAianNvbiJ9CiAgICAgICAgICAgIHJldF92YWwsIGpzb25fb3V0LCBlcnJf
      bXNnID0gc2VsZi5fY29tbW9uX2NtZF9qc29uX2dlbihjbWRfanNvbikKICAgICAgICAgICAgIyBp
      ZiB0aGVyZSBpcyBhbiB1bnN1Y2Nlc3NmdWwgYXR0ZW1wdCwKICAgICAgICAgICAgaWYgcmV0X3Zh
      bCAhPSAwIG9yIGxlbihqc29uX291dCkgPT0gMDoKICAgICAgICAgICAgICAgIHJhaXNlIEV4ZWN1
      dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgIidtZ3Igc2VydmljZXMn
      IGNvbW1hbmQgZmFpbGVkLlxuIgogICAgICAgICAgICAgICAgICAgICsgIkVycm9yOiB7fSIuZm9y
      bWF0KAogICAgICAgICAgICAgICAgICAgICAgICBlcnJfbXNnIGlmIHJldF92YWwgIT0gMCBlbHNl
      IHNlbGYuRU1QVFlfT1VUUFVUX0xJU1QKICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAg
      ICAgICApCiAgICAgICAgICAgIG1vbml0b3JpbmdfZW5kcG9pbnQgPSAoCiAgICAgICAgICAgICAg
      ICBqc29uX291dC5nZXQoIm1ncm1hcCIsIHt9KS5nZXQoInNlcnZpY2VzIiwge30pLmdldCgicHJv
      bWV0aGV1cyIsICIiKQogICAgICAgICAgICApCiAgICAgICAgICAgIGlmIG5vdCBtb25pdG9yaW5n
      X2VuZHBvaW50OgogICAgICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlv
      bigKICAgICAgICAgICAgICAgICAgICAiJ3Byb21ldGhldXMnIHNlcnZpY2Ugbm90IGZvdW5kLCBp
      cyB0aGUgZXhwb3J0ZXIgZW5hYmxlZD8nLlxuIgogICAgICAgICAgICAgICAgKQogICAgICAgICAg
      ICAjIG5vdyBjaGVjayB0aGUgc3RhbmQtYnkgbWdyLXMKICAgICAgICAgICAgc3RhbmRieV9hcnIg
      PSBqc29uX291dC5nZXQoIm1ncm1hcCIsIHt9KS5nZXQoInN0YW5kYnlzIiwgW10pCiAgICAgICAg
      ICAgIGZvciBlYWNoX3N0YW5kYnkgaW4gc3RhbmRieV9hcnI6CiAgICAgICAgICAgICAgICBpZiAi
      bmFtZSIgaW4gZWFjaF9zdGFuZGJ5LmtleXMoKToKICAgICAgICAgICAgICAgICAgICBzdGFuZGJ5
      X21ncnMuYXBwZW5kKGVhY2hfc3RhbmRieVsibmFtZSJdKQogICAgICAgICAgICB0cnk6CiAgICAg
      ICAgICAgICAgICBwYXJzZWRfZW5kcG9pbnQgPSB1cmxwYXJzZShtb25pdG9yaW5nX2VuZHBvaW50
      KQogICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoKICAgICAgICAgICAgICAgIHJhaXNlIEV4
      ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgImludmFsaWQgZW5k
      cG9pbnQ6IHt9Ii5mb3JtYXQobW9uaXRvcmluZ19lbmRwb2ludCkKICAgICAgICAgICAgICAgICkK
      ICAgICAgICAgICAgbW9uaXRvcmluZ19lbmRwb2ludF9pcF9saXN0ID0gcGFyc2VkX2VuZHBvaW50
      Lmhvc3RuYW1lCiAgICAgICAgICAgIGlmIG5vdCBtb25pdG9yaW5nX2VuZHBvaW50X3BvcnQ6CiAg
      ICAgICAgICAgICAgICBtb25pdG9yaW5nX2VuZHBvaW50X3BvcnQgPSAie30iLmZvcm1hdChwYXJz
      ZWRfZW5kcG9pbnQucG9ydCkKCiAgICAgICAgIyBpZiBtb25pdG9yaW5nIGVuZHBvaW50IHBvcnQg
      aXMgbm90IHNldCwgcHV0IGEgZGVmYXVsdCBtb24gcG9ydAogICAgICAgIGlmIG5vdCBtb25pdG9y
      aW5nX2VuZHBvaW50X3BvcnQ6CiAgICAgICAgICAgIG1vbml0b3JpbmdfZW5kcG9pbnRfcG9ydCA9
      IHNlbGYuREVGQVVMVF9NT05JVE9SSU5HX0VORFBPSU5UX1BPUlQKCiAgICAgICAgIyB1c2VyIGNv
      dWxkIGdpdmUgY29tbWEgYW5kIHNwYWNlIHNlcGFyYXRlZCBpbnB1dHMgKGxpa2UgLS1tb25pdG9y
      aW5nLWVuZHBvaW50PSI8aXAxPiwgPGlwMj4iKQogICAgICAgIG1vbml0b3JpbmdfZW5kcG9pbnRf
      aXBfbGlzdCA9IG1vbml0b3JpbmdfZW5kcG9pbnRfaXBfbGlzdC5yZXBsYWNlKCIsIiwgIiAiKQog
      ICAgICAgIG1vbml0b3JpbmdfZW5kcG9pbnRfaXBfbGlzdF9zcGxpdCA9IG1vbml0b3JpbmdfZW5k
      cG9pbnRfaXBfbGlzdC5zcGxpdCgpCiAgICAgICAgIyBpZiBtb25pdG9yaW5nLWVuZHBvaW50IGNv
      dWxkIG5vdCBiZSBmb3VuZCwgcmFpc2UgYW4gZXJyb3IKICAgICAgICBpZiBsZW4obW9uaXRvcmlu
      Z19lbmRwb2ludF9pcF9saXN0X3NwbGl0KSA9PSAwOgogICAgICAgICAgICByYWlzZSBFeGVjdXRp
      b25GYWlsdXJlRXhjZXB0aW9uKCJObyAnbW9uaXRvcmluZy1lbmRwb2ludCcgZm91bmQiKQogICAg
      ICAgICMgZmlyc3QgaXAgaXMgdHJlYXRlZCBhcyB0aGUgbWFpbiBtb25pdG9yaW5nLWVuZHBvaW50
      CiAgICAgICAgbW9uaXRvcmluZ19lbmRwb2ludF9pcCA9IG1vbml0b3JpbmdfZW5kcG9pbnRfaXBf
      bGlzdF9zcGxpdFswXQogICAgICAgICMgcmVzdCBvZiB0aGUgaXAtcyBhcmUgYWRkZWQgdG8gdGhl
      ICdzdGFuZGJ5X21ncnMnIGxpc3QKICAgICAgICBzdGFuZGJ5X21ncnMuZXh0ZW5kKG1vbml0b3Jp
      bmdfZW5kcG9pbnRfaXBfbGlzdF9zcGxpdFsxOl0pCiAgICAgICAgZmFpbGVkX2lwID0gbW9uaXRv
      cmluZ19lbmRwb2ludF9pcAoKICAgICAgICB0cnk6CiAgICAgICAgICAgIG1vbml0b3JpbmdfZW5k
      cG9pbnRfaXAgPSBzZWxmLl9jb252ZXJ0X2hvc3RuYW1lX3RvX2lwKAogICAgICAgICAgICAgICAg
      bW9uaXRvcmluZ19lbmRwb2ludF9pcAogICAgICAgICAgICApCiAgICAgICAgICAgICMgY29sbGVj
      dCBhbGwgdGhlICdzdGFuZC1ieScgbWdyIGlwcwogICAgICAgICAgICBtZ3JfaXBzID0gW10KICAg
      ICAgICAgICAgZm9yIGVhY2hfc3RhbmRieV9tZ3IgaW4gc3RhbmRieV9tZ3JzOgogICAgICAgICAg
      ICAgICAgZmFpbGVkX2lwID0gZWFjaF9zdGFuZGJ5X21ncgogICAgICAgICAgICAgICAgbWdyX2lw
      cy5hcHBlbmQoc2VsZi5fY29udmVydF9ob3N0bmFtZV90b19pcChlYWNoX3N0YW5kYnlfbWdyKSkK
      ICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRp
      b24oCiAgICAgICAgICAgICAgICAiQ29udmVyc2lvbiBvZiBob3N0OiB7fSB0byBJUCBmYWlsZWQu
      ICIKICAgICAgICAgICAgICAgICJQbGVhc2UgZW50ZXIgdGhlIElQIGFkZHJlc3NlcyBvZiBhbGwg
      dGhlIGNlcGgtbWdycyB3aXRoIHRoZSAnLS1tb25pdG9yaW5nLWVuZHBvaW50JyBmbGFnIi5mb3Jt
      YXQoCiAgICAgICAgICAgICAgICAgICAgZmFpbGVkX2lwCiAgICAgICAgICAgICAgICApCiAgICAg
      ICAgICAgICkKICAgICAgICBtb25pdG9yaW5nX2VuZHBvaW50ID0gc2VsZi5fam9pbl9ob3N0X3Bv
      cnQoCiAgICAgICAgICAgIG1vbml0b3JpbmdfZW5kcG9pbnRfaXAsIG1vbml0b3JpbmdfZW5kcG9p
      bnRfcG9ydAogICAgICAgICkKICAgICAgICBzZWxmLl9pbnZhbGlkX2VuZHBvaW50KG1vbml0b3Jp
      bmdfZW5kcG9pbnQpCiAgICAgICAgc2VsZi5lbmRwb2ludF9kaWFsKG1vbml0b3JpbmdfZW5kcG9p
      bnQpCgogICAgICAgICMgYWRkIHRoZSB2YWxpZGF0ZWQgYWN0aXZlIG1nciBJUCBpbnRvIHRoZSBm
      aXJzdCBpbmRleAogICAgICAgIG1ncl9pcHMuaW5zZXJ0KDAsIG1vbml0b3JpbmdfZW5kcG9pbnRf
      aXApCiAgICAgICAgYWxsX21ncl9pcHNfc3RyID0gIiwiLmpvaW4obWdyX2lwcykKICAgICAgICBy
      ZXR1cm4gYWxsX21ncl9pcHNfc3RyLCBtb25pdG9yaW5nX2VuZHBvaW50X3BvcnQKCiAgICBkZWYg
      Y2hlY2tfdXNlcl9leGlzdChzZWxmLCB1c2VyKToKICAgICAgICBjbWRfanNvbiA9IHsicHJlZml4
      IjogImF1dGggZ2V0IiwgImVudGl0eSI6ICJ7fSIuZm9ybWF0KHVzZXIpLCAiZm9ybWF0IjogImpz
      b24ifQogICAgICAgIHJldF92YWwsIGpzb25fb3V0LCBfID0gc2VsZi5fY29tbW9uX2NtZF9qc29u
      X2dlbihjbWRfanNvbikKICAgICAgICBpZiByZXRfdmFsICE9IDAgb3IgbGVuKGpzb25fb3V0KSA9
      PSAwOgogICAgICAgICAgICByZXR1cm4gIiIKICAgICAgICByZXR1cm4gc3RyKGpzb25fb3V0WzBd
      WyJrZXkiXSkKCiAgICBkZWYgZ2V0X2NlcGhmc19wcm92aXNpb25lcl9jYXBzX2FuZF9lbnRpdHko
      c2VsZik6CiAgICAgICAgZW50aXR5ID0gImNsaWVudC5jc2ktY2VwaGZzLXByb3Zpc2lvbmVyIgog
      ICAgICAgIGNhcHMgPSB7CiAgICAgICAgICAgICJtb24iOiAiYWxsb3cgciwgYWxsb3cgY29tbWFu
      ZCAnb3NkIGJsb2NrbGlzdCciLAogICAgICAgICAgICAibWdyIjogImFsbG93IHJ3IiwKICAgICAg
      ICAgICAgIm9zZCI6ICJhbGxvdyBydyB0YWcgY2VwaGZzIG1ldGFkYXRhPSoiLAogICAgICAgIH0K
      ICAgICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLnJlc3RyaWN0ZWRfYXV0aF9wZXJtaXNzaW9uOgog
      ICAgICAgICAgICBjbHVzdGVyX25hbWUgPSBzZWxmLl9hcmdfcGFyc2VyLmNsdXN0ZXJfbmFtZQog
      ICAgICAgICAgICBpZiBjbHVzdGVyX25hbWUgPT0gIiI6CiAgICAgICAgICAgICAgICByYWlzZSBF
      eGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICJjbHVzdGVyX25h
      bWUgbm90IGZvdW5kLCBwbGVhc2Ugc2V0IHRoZSAnLS1jbHVzdGVyLW5hbWUnIGZsYWciCiAgICAg
      ICAgICAgICAgICApCiAgICAgICAgICAgIGNlcGhmc19maWxlc3lzdGVtID0gc2VsZi5fYXJnX3Bh
      cnNlci5jZXBoZnNfZmlsZXN5c3RlbV9uYW1lCiAgICAgICAgICAgIGlmIGNlcGhmc19maWxlc3lz
      dGVtID09ICIiOgogICAgICAgICAgICAgICAgZW50aXR5ID0gInt9LXt9Ii5mb3JtYXQoZW50aXR5
      LCBjbHVzdGVyX25hbWUpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBlbnRpdHkg
      PSAie30te30te30iLmZvcm1hdChlbnRpdHksIGNsdXN0ZXJfbmFtZSwgY2VwaGZzX2ZpbGVzeXN0
      ZW0pCiAgICAgICAgICAgICAgICBjYXBzWyJvc2QiXSA9ICJhbGxvdyBydyB0YWcgY2VwaGZzIG1l
      dGFkYXRhPXt9Ii5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgY2VwaGZzX2ZpbGVzeXN0ZW0K
      ICAgICAgICAgICAgICAgICkKCiAgICAgICAgcmV0dXJuIGNhcHMsIGVudGl0eQoKICAgIGRlZiBn
      ZXRfY2VwaGZzX25vZGVfY2Fwc19hbmRfZW50aXR5KHNlbGYpOgogICAgICAgIGVudGl0eSA9ICJj
      bGllbnQuY3NpLWNlcGhmcy1ub2RlIgogICAgICAgIGNhcHMgPSB7CiAgICAgICAgICAgICJtb24i
      OiAiYWxsb3cgciwgYWxsb3cgY29tbWFuZCAnb3NkIGJsb2NrbGlzdCciLAogICAgICAgICAgICAi
      bWdyIjogImFsbG93IHJ3IiwKICAgICAgICAgICAgIm9zZCI6ICJhbGxvdyBydyB0YWcgY2VwaGZz
      ICo9KiIsCiAgICAgICAgICAgICJtZHMiOiAiYWxsb3cgcnciLAogICAgICAgIH0KICAgICAgICBp
      ZiBzZWxmLl9hcmdfcGFyc2VyLnJlc3RyaWN0ZWRfYXV0aF9wZXJtaXNzaW9uOgogICAgICAgICAg
      ICBjbHVzdGVyX25hbWUgPSBzZWxmLl9hcmdfcGFyc2VyLmNsdXN0ZXJfbmFtZQogICAgICAgICAg
      ICBpZiBjbHVzdGVyX25hbWUgPT0gIiI6CiAgICAgICAgICAgICAgICByYWlzZSBFeGVjdXRpb25G
      YWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgICAgICJjbHVzdGVyX25hbWUgbm90IGZv
      dW5kLCBwbGVhc2Ugc2V0IHRoZSAnLS1jbHVzdGVyLW5hbWUnIGZsYWciCiAgICAgICAgICAgICAg
      ICApCiAgICAgICAgICAgIGNlcGhmc19maWxlc3lzdGVtID0gc2VsZi5fYXJnX3BhcnNlci5jZXBo
      ZnNfZmlsZXN5c3RlbV9uYW1lCiAgICAgICAgICAgIGlmIGNlcGhmc19maWxlc3lzdGVtID09ICIi
      OgogICAgICAgICAgICAgICAgZW50aXR5ID0gInt9LXt9Ii5mb3JtYXQoZW50aXR5LCBjbHVzdGVy
      X25hbWUpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBlbnRpdHkgPSAie30te30t
      e30iLmZvcm1hdChlbnRpdHksIGNsdXN0ZXJfbmFtZSwgY2VwaGZzX2ZpbGVzeXN0ZW0pCiAgICAg
      ICAgICAgICAgICBjYXBzWyJvc2QiXSA9ICJhbGxvdyBydyB0YWcgY2VwaGZzICo9e30iLmZvcm1h
      dChjZXBoZnNfZmlsZXN5c3RlbSkKCiAgICAgICAgcmV0dXJuIGNhcHMsIGVudGl0eQoKICAgIGRl
      ZiBnZXRfcmJkX3Byb3Zpc2lvbmVyX2NhcHNfYW5kX2VudGl0eShzZWxmKToKICAgICAgICBlbnRp
      dHkgPSAiY2xpZW50LmNzaS1yYmQtcHJvdmlzaW9uZXIiCiAgICAgICAgY2FwcyA9IHsKICAgICAg
      ICAgICAgIm1vbiI6ICJwcm9maWxlIHJiZCwgYWxsb3cgY29tbWFuZCAnb3NkIGJsb2NrbGlzdCci
      LAogICAgICAgICAgICAibWdyIjogImFsbG93IHJ3IiwKICAgICAgICAgICAgIm9zZCI6ICJwcm9m
      aWxlIHJiZCIsCiAgICAgICAgfQogICAgICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIucmVzdHJpY3Rl
      ZF9hdXRoX3Blcm1pc3Npb246CiAgICAgICAgICAgIHJiZF9wb29sX25hbWUgPSBzZWxmLl9hcmdf
      cGFyc2VyLnJiZF9kYXRhX3Bvb2xfbmFtZQogICAgICAgICAgICBjbHVzdGVyX25hbWUgPSBzZWxm
      Ll9hcmdfcGFyc2VyLmNsdXN0ZXJfbmFtZQogICAgICAgICAgICBpZiByYmRfcG9vbF9uYW1lID09
      ICIiIG9yIGNsdXN0ZXJfbmFtZSA9PSAiIjoKICAgICAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlv
      bkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgIm1hbmRhdG9yeSBmbGFncyBu
      b3QgZm91bmQsIHBsZWFzZSBzZXQgdGhlICctLXJiZC1kYXRhLXBvb2wtbmFtZScsICctLWNsdXN0
      ZXItbmFtZScgZmxhZ3MiCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIGVudGl0eSA9ICJ7
      fS17fS17fSIuZm9ybWF0KGVudGl0eSwgY2x1c3Rlcl9uYW1lLCByYmRfcG9vbF9uYW1lKQogICAg
      ICAgICAgICBjYXBzWyJvc2QiXSA9ICJwcm9maWxlIHJiZCBwb29sPXt9Ii5mb3JtYXQocmJkX3Bv
      b2xfbmFtZSkKCiAgICAgICAgcmV0dXJuIGNhcHMsIGVudGl0eQoKICAgIGRlZiBnZXRfcmJkX25v
      ZGVfY2Fwc19hbmRfZW50aXR5KHNlbGYpOgogICAgICAgIGVudGl0eSA9ICJjbGllbnQuY3NpLXJi
      ZC1ub2RlIgogICAgICAgIGNhcHMgPSB7CiAgICAgICAgICAgICJtb24iOiAicHJvZmlsZSByYmQs
      IGFsbG93IGNvbW1hbmQgJ29zZCBibG9ja2xpc3QnIiwKICAgICAgICAgICAgIm9zZCI6ICJwcm9m
      aWxlIHJiZCIsCiAgICAgICAgfQogICAgICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIucmVzdHJpY3Rl
      ZF9hdXRoX3Blcm1pc3Npb246CiAgICAgICAgICAgIHJiZF9wb29sX25hbWUgPSBzZWxmLl9hcmdf
      cGFyc2VyLnJiZF9kYXRhX3Bvb2xfbmFtZQogICAgICAgICAgICBjbHVzdGVyX25hbWUgPSBzZWxm
      Ll9hcmdfcGFyc2VyLmNsdXN0ZXJfbmFtZQogICAgICAgICAgICBpZiByYmRfcG9vbF9uYW1lID09
      ICIiIG9yIGNsdXN0ZXJfbmFtZSA9PSAiIjoKICAgICAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlv
      bkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgIm1hbmRhdG9yeSBmbGFncyBu
      b3QgZm91bmQsIHBsZWFzZSBzZXQgdGhlICctLXJiZC1kYXRhLXBvb2wtbmFtZScsICctLWNsdXN0
      ZXItbmFtZScgZmxhZ3MiCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIGVudGl0eSA9ICJ7
      fS17fS17fSIuZm9ybWF0KGVudGl0eSwgY2x1c3Rlcl9uYW1lLCByYmRfcG9vbF9uYW1lKQogICAg
      ICAgICAgICBjYXBzWyJvc2QiXSA9ICJwcm9maWxlIHJiZCBwb29sPXt9Ii5mb3JtYXQocmJkX3Bv
      b2xfbmFtZSkKCiAgICAgICAgcmV0dXJuIGNhcHMsIGVudGl0eQoKICAgIGRlZiBnZXRfY2Fwc19h
      bmRfZW50aXR5KHNlbGYsIHVzZXJfbmFtZSk6CiAgICAgICAgaWYgImNsaWVudC5jc2ktY2VwaGZz
      LXByb3Zpc2lvbmVyIiBpbiB1c2VyX25hbWU6CiAgICAgICAgICAgIGlmICJjbGllbnQuY3NpLWNl
      cGhmcy1wcm92aXNpb25lciIgIT0gdXNlcl9uYW1lOgogICAgICAgICAgICAgICAgc2VsZi5fYXJn
      X3BhcnNlci5yZXN0cmljdGVkX2F1dGhfcGVybWlzc2lvbiA9IFRydWUKICAgICAgICAgICAgcmV0
      dXJuIHNlbGYuZ2V0X2NlcGhmc19wcm92aXNpb25lcl9jYXBzX2FuZF9lbnRpdHkoKQogICAgICAg
      IGlmICJjbGllbnQuY3NpLWNlcGhmcy1ub2RlIiBpbiB1c2VyX25hbWU6CiAgICAgICAgICAgIGlm
      ICJjbGllbnQuY3NpLWNlcGhmcy1ub2RlIiAhPSB1c2VyX25hbWU6CiAgICAgICAgICAgICAgICBz
      ZWxmLl9hcmdfcGFyc2VyLnJlc3RyaWN0ZWRfYXV0aF9wZXJtaXNzaW9uID0gVHJ1ZQogICAgICAg
      ICAgICByZXR1cm4gc2VsZi5nZXRfY2VwaGZzX25vZGVfY2Fwc19hbmRfZW50aXR5KCkKICAgICAg
      ICBpZiAiY2xpZW50LmNzaS1yYmQtcHJvdmlzaW9uZXIiIGluIHVzZXJfbmFtZToKICAgICAgICAg
      ICAgaWYgImNsaWVudC5jc2ktcmJkLXByb3Zpc2lvbmVyIiAhPSB1c2VyX25hbWU6CiAgICAgICAg
      ICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLnJlc3RyaWN0ZWRfYXV0aF9wZXJtaXNzaW9uID0gVHJ1
      ZQogICAgICAgICAgICByZXR1cm4gc2VsZi5nZXRfcmJkX3Byb3Zpc2lvbmVyX2NhcHNfYW5kX2Vu
      dGl0eSgpCiAgICAgICAgaWYgImNsaWVudC5jc2ktcmJkLW5vZGUiIGluIHVzZXJfbmFtZToKICAg
      ICAgICAgICAgaWYgImNsaWVudC5jc2ktcmJkLW5vZGUiICE9IHVzZXJfbmFtZToKICAgICAgICAg
      ICAgICAgIHNlbGYuX2FyZ19wYXJzZXIucmVzdHJpY3RlZF9hdXRoX3Blcm1pc3Npb24gPSBUcnVl
      CiAgICAgICAgICAgIHJldHVybiBzZWxmLmdldF9yYmRfbm9kZV9jYXBzX2FuZF9lbnRpdHkoKQoK
      ICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAibm8g
      dXNlciBmb3VuZCB3aXRoIHVzZXJfbmFtZToge30gLCIuZm9ybWF0KHVzZXJfbmFtZSkKICAgICAg
      ICAgICAgKyAiZ2V0X2NhcHNfYW5kX2VudGl0eSBjb21tYW5kIGZhaWxlZC5cbiIKICAgICAgICAp
      CgogICAgZGVmIGNyZWF0ZV9jZXBoQ1NJS2V5cmluZ191c2VyKHNlbGYsIHVzZXIpOgogICAgICAg
      ICIiIgogICAgICAgIGNvbW1hbmQ6IGNlcGggYXV0aCBnZXQtb3ItY3JlYXRlIGNsaWVudC5jc2kt
      Y2VwaGZzLXByb3Zpc2lvbmVyIG1vbiAnYWxsb3cgcicgbWdyICdhbGxvdyBydycgb3NkICdhbGxv
      dyBydyB0YWcgY2VwaGZzIG1ldGFkYXRhPSonCiAgICAgICAgIiIiCiAgICAgICAgY2FwcywgZW50
      aXR5ID0gc2VsZi5nZXRfY2Fwc19hbmRfZW50aXR5KHVzZXIpCiAgICAgICAgY21kX2pzb24gPSB7
      CiAgICAgICAgICAgICJwcmVmaXgiOiAiYXV0aCBnZXQtb3ItY3JlYXRlIiwKICAgICAgICAgICAg
      ImVudGl0eSI6IGVudGl0eSwKICAgICAgICAgICAgImNhcHMiOiBbY2FwIGZvciBjYXBfbGlzdCBp
      biBsaXN0KGNhcHMuaXRlbXMoKSkgZm9yIGNhcCBpbiBjYXBfbGlzdF0sCiAgICAgICAgICAgICJm
      b3JtYXQiOiAianNvbiIsCiAgICAgICAgfQoKICAgICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLmRy
      eV9ydW46CiAgICAgICAgICAgIHJldHVybiAoCiAgICAgICAgICAgICAgICBzZWxmLmRyeV9ydW4o
      CiAgICAgICAgICAgICAgICAgICAgImNlcGggIgogICAgICAgICAgICAgICAgICAgICsgY21kX2pz
      b25bInByZWZpeCJdCiAgICAgICAgICAgICAgICAgICAgKyAiICIKICAgICAgICAgICAgICAgICAg
      ICArIGNtZF9qc29uWyJlbnRpdHkiXQogICAgICAgICAgICAgICAgICAgICsgIiAiCiAgICAgICAg
      ICAgICAgICAgICAgKyAiICIuam9pbihjbWRfanNvblsiY2FwcyJdKQogICAgICAgICAgICAgICAg
      KSwKICAgICAgICAgICAgICAgICIiLAogICAgICAgICAgICApCiAgICAgICAgIyBjaGVjayBpZiB1
      c2VyIGFscmVhZHkgZXhpc3QKICAgICAgICB1c2VyX2tleSA9IHNlbGYuY2hlY2tfdXNlcl9leGlz
      dChlbnRpdHkpCiAgICAgICAgaWYgdXNlcl9rZXkgIT0gIiI6CiAgICAgICAgICAgIHJldHVybiB1
      c2VyX2tleSwgInt9Ii5mb3JtYXQoCiAgICAgICAgICAgICAgICBlbnRpdHkuc3BsaXQoIi4iLCAx
      KVsxXQogICAgICAgICAgICApICAjIGVudGl0eS5zcGxpdCgnLicsMSlbMV0gdG8gcmVuYW1lIGVu
      dGl0eShjbGllbnQuY3NpLXJiZC1ub2RlKSBhcyBjc2ktcmJkLW5vZGUKCiAgICAgICAgcmV0X3Zh
      bCwganNvbl9vdXQsIGVycl9tc2cgPSBzZWxmLl9jb21tb25fY21kX2pzb25fZ2VuKGNtZF9qc29u
      KQogICAgICAgICMgaWYgdGhlcmUgaXMgYW4gdW5zdWNjZXNzZnVsIGF0dGVtcHQsCiAgICAgICAg
      aWYgcmV0X3ZhbCAhPSAwIG9yIGxlbihqc29uX291dCkgPT0gMDoKICAgICAgICAgICAgcmFpc2Ug
      RXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICInYXV0aCBnZXQtb3It
      Y3JlYXRlIHt9JyBjb21tYW5kIGZhaWxlZC5cbiIuZm9ybWF0KHVzZXIpCiAgICAgICAgICAgICAg
      ICArICJFcnJvcjoge30iLmZvcm1hdCgKICAgICAgICAgICAgICAgICAgICBlcnJfbXNnIGlmIHJl
      dF92YWwgIT0gMCBlbHNlIHNlbGYuRU1QVFlfT1VUUFVUX0xJU1QKICAgICAgICAgICAgICAgICkK
      ICAgICAgICAgICAgKQogICAgICAgIHJldHVybiBzdHIoanNvbl9vdXRbMF1bImtleSJdKSwgInt9
      Ii5mb3JtYXQoCiAgICAgICAgICAgIGVudGl0eS5zcGxpdCgiLiIsIDEpWzFdCiAgICAgICAgKSAg
      IyBlbnRpdHkuc3BsaXQoJy4nLDEpWzFdIHRvIHJlbmFtZSBlbnRpdHkoY2xpZW50LmNzaS1yYmQt
      bm9kZSkgYXMgY3NpLXJiZC1ub2RlCgogICAgZGVmIGdldF9jZXBoZnNfZGF0YV9wb29sX2RldGFp
      bHMoc2VsZik6CiAgICAgICAgY21kX2pzb24gPSB7InByZWZpeCI6ICJmcyBscyIsICJmb3JtYXQi
      OiAianNvbiJ9CiAgICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci5kcnlfcnVuOgogICAgICAgICAg
      ICByZXR1cm4gc2VsZi5kcnlfcnVuKCJjZXBoICIgKyBjbWRfanNvblsicHJlZml4Il0pCiAgICAg
      ICAgcmV0X3ZhbCwganNvbl9vdXQsIGVycl9tc2cgPSBzZWxmLl9jb21tb25fY21kX2pzb25fZ2Vu
      KGNtZF9qc29uKQogICAgICAgICMgaWYgdGhlcmUgaXMgYW4gdW5zdWNjZXNzZnVsIGF0dGVtcHQs
      IHJlcG9ydCBhbiBlcnJvcgogICAgICAgIGlmIHJldF92YWwgIT0gMDoKICAgICAgICAgICAgIyBp
      ZiBmcyBhbmQgZGF0YV9wb29sIGFyZ3VtZW50cyBhcmUgbm90IHNldCwgc2lsZW50bHkgcmV0dXJu
      CiAgICAgICAgICAgIGlmICgKICAgICAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZz
      X2ZpbGVzeXN0ZW1fbmFtZSA9PSAiIgogICAgICAgICAgICAgICAgYW5kIHNlbGYuX2FyZ19wYXJz
      ZXIuY2VwaGZzX2RhdGFfcG9vbF9uYW1lID09ICIiCiAgICAgICAgICAgICk6CiAgICAgICAgICAg
      ICAgICByZXR1cm4KICAgICAgICAgICAgIyBpZiB1c2VyIGhhcyBwcm92aWRlZCBhbnkgb2YgdGhl
      CiAgICAgICAgICAgICMgJy0tY2VwaGZzLWZpbGVzeXN0ZW0tbmFtZScgb3IgJy0tY2VwaGZzLWRh
      dGEtcG9vbC1uYW1lJyBhcmd1bWVudHMsCiAgICAgICAgICAgICMgcmFpc2UgYW4gZXhjZXB0aW9u
      IGFzIHdlIGFyZSB1bmFibGUgdG8gdmVyaWZ5IHRoZSBhcmdzCiAgICAgICAgICAgIHJhaXNlIEV4
      ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAiJ2ZzIGxzJyBjZXBoIGNh
      bGwgZmFpbGVkIHdpdGggZXJyb3I6IHt9Ii5mb3JtYXQoZXJyX21zZykKICAgICAgICAgICAgKQoK
      ICAgICAgICBtYXRjaGluZ19qc29uX291dCA9IHt9CiAgICAgICAgIyBpZiAnLS1jZXBoZnMtZmls
      ZXN5c3RlbS1uYW1lJyBhcmd1bWVudCBpcyBwcm92aWRlZCwKICAgICAgICAjIGNoZWNrIHdoZXRo
      ZXIgdGhlIHByb3ZpZGVkIGZpbGVzeXN0ZW0tbmFtZSBleGlzdHMgb3Igbm90CiAgICAgICAgaWYg
      c2VsZi5fYXJnX3BhcnNlci5jZXBoZnNfZmlsZXN5c3RlbV9uYW1lOgogICAgICAgICAgICAjIGdl
      dCB0aGUgbWF0Y2hpbmcgbGlzdAogICAgICAgICAgICBtYXRjaGluZ19qc29uX291dF9saXN0ID0g
      WwogICAgICAgICAgICAgICAgbWF0Y2hlZAogICAgICAgICAgICAgICAgZm9yIG1hdGNoZWQgaW4g
      anNvbl9vdXQKICAgICAgICAgICAgICAgIGlmIHN0cihtYXRjaGVkWyJuYW1lIl0pID09IHNlbGYu
      X2FyZ19wYXJzZXIuY2VwaGZzX2ZpbGVzeXN0ZW1fbmFtZQogICAgICAgICAgICBdCiAgICAgICAg
      ICAgICMgdW5hYmxlIHRvIGZpbmQgYSBtYXRjaGluZyBmcy1uYW1lLCByYWlzZSBhbiBlcnJvcgog
      ICAgICAgICAgICBpZiBsZW4obWF0Y2hpbmdfanNvbl9vdXRfbGlzdCkgPT0gMDoKICAgICAgICAg
      ICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAg
      ICAgKAogICAgICAgICAgICAgICAgICAgICAgICAiRmlsZXN5c3RlbSBwcm92aWRlZCwgJ3t9Jywg
      IgogICAgICAgICAgICAgICAgICAgICAgICArICJpcyBub3QgZm91bmQgaW4gdGhlIGZzLWxpc3Q6
      ICd7fSciCiAgICAgICAgICAgICAgICAgICAgKS5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAg
      ICAgIHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX2ZpbGVzeXN0ZW1fbmFtZSwKICAgICAgICAgICAg
      ICAgICAgICAgICAgW3N0cih4WyJuYW1lIl0pIGZvciB4IGluIGpzb25fb3V0XSwKICAgICAgICAg
      ICAgICAgICAgICApCiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgIG1hdGNoaW5nX2pzb25f
      b3V0ID0gbWF0Y2hpbmdfanNvbl9vdXRfbGlzdFswXQogICAgICAgICMgaWYgY2VwaGZzIGZpbGVz
      eXN0ZW0gbmFtZSBpcyBub3QgcHJvdmlkZWQsCiAgICAgICAgIyB0cnkgdG8gZ2V0IGEgZGVmYXVs
      dCBmcyBuYW1lIGJ5IGRvaW5nIHRoZSBmb2xsb3dpbmcKICAgICAgICBlbHNlOgogICAgICAgICAg
      ICAjIGEuIGNoZWNrIGlmIHRoZXJlIGlzIG9ubHkgb25lIGZpbGVzeXN0ZW0gaXMgcHJlc2VudAog
      ICAgICAgICAgICBpZiBsZW4oanNvbl9vdXQpID09IDE6CiAgICAgICAgICAgICAgICBtYXRjaGlu
      Z19qc29uX291dCA9IGpzb25fb3V0WzBdCiAgICAgICAgICAgICMgYi4gb3IgZWxzZSwgY2hlY2sg
      aWYgZGF0YV9wb29sIG5hbWUgaXMgcHJvdmlkZWQKICAgICAgICAgICAgZWxpZiBzZWxmLl9hcmdf
      cGFyc2VyLmNlcGhmc19kYXRhX3Bvb2xfbmFtZToKICAgICAgICAgICAgICAgICMgYW5kIGlmIHBy
      ZXNlbnQsIGNoZWNrIHdoZXRoZXIgdGhlcmUgZXhpc3RzIGEgZnMgd2hpY2ggaGFzIHRoZSBkYXRh
      X3Bvb2wKICAgICAgICAgICAgICAgIGZvciBlYWNoSiBpbiBqc29uX291dDoKICAgICAgICAgICAg
      ICAgICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19kYXRhX3Bvb2xfbmFtZSBpbiBlYWNo
      SlsiZGF0YV9wb29scyJdOgogICAgICAgICAgICAgICAgICAgICAgICBtYXRjaGluZ19qc29uX291
      dCA9IGVhY2hKCiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAj
      IGlmIHRoZXJlIGlzIG5vIG1hdGNoaW5nIGZzIGV4aXN0cywgdGhhdCBtZWFucyBwcm92aWRlZCBk
      YXRhX3Bvb2wgbmFtZSBpcyBpbnZhbGlkCiAgICAgICAgICAgICAgICBpZiBub3QgbWF0Y2hpbmdf
      anNvbl9vdXQ6CiAgICAgICAgICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2Vw
      dGlvbigKICAgICAgICAgICAgICAgICAgICAgICAgIlByb3ZpZGVkIGRhdGFfcG9vbCBuYW1lLCB7
      fSwgZG9lcyBub3QgZXhpc3RzIi5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBz
      ZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19kYXRhX3Bvb2xfbmFtZQogICAgICAgICAgICAgICAgICAg
      ICAgICApCiAgICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAjIGMuIGlmIG5vdGhpbmcg
      aXMgc2V0IGFuZCBjb3VsZG4ndCBmaW5kIGEgZGVmYXVsdCwKICAgICAgICAgICAgZWxzZToKICAg
      ICAgICAgICAgICAgICMganVzdCByZXR1cm4gc2lsZW50bHkKICAgICAgICAgICAgICAgIHJldHVy
      bgoKICAgICAgICBpZiBtYXRjaGluZ19qc29uX291dDoKICAgICAgICAgICAgc2VsZi5fYXJnX3Bh
      cnNlci5jZXBoZnNfZmlsZXN5c3RlbV9uYW1lID0gc3RyKG1hdGNoaW5nX2pzb25fb3V0WyJuYW1l
      Il0pCiAgICAgICAgICAgIHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX21ldGFkYXRhX3Bvb2xfbmFt
      ZSA9IHN0cigKICAgICAgICAgICAgICAgIG1hdGNoaW5nX2pzb25fb3V0WyJtZXRhZGF0YV9wb29s
      Il0KICAgICAgICAgICAgKQoKICAgICAgICBpZiBpc2luc3RhbmNlKG1hdGNoaW5nX2pzb25fb3V0
      WyJkYXRhX3Bvb2xzIl0sIGxpc3QpOgogICAgICAgICAgICAjIGlmIHRoZSB1c2VyIGhhcyBhbHJl
      YWR5IHByb3ZpZGVkIGRhdGEtcG9vbC1uYW1lLAogICAgICAgICAgICAjIHRocm91Z2ggLS1jZXBo
      ZnMtZGF0YS1wb29sLW5hbWUKICAgICAgICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci5jZXBoZnNf
      ZGF0YV9wb29sX25hbWU6CiAgICAgICAgICAgICAgICAjIGlmIHRoZSBwcm92aWRlZCBuYW1lIGlz
      IG5vdCBtYXRjaGluZyB3aXRoIHRoZSBvbmUgaW4gdGhlIGxpc3QKICAgICAgICAgICAgICAgIGlm
      ICgKICAgICAgICAgICAgICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLmNlcGhmc19kYXRhX3Bvb2xf
      bmFtZQogICAgICAgICAgICAgICAgICAgIG5vdCBpbiBtYXRjaGluZ19qc29uX291dFsiZGF0YV9w
      b29scyJdCiAgICAgICAgICAgICAgICApOgogICAgICAgICAgICAgICAgICAgIHJhaXNlIEV4ZWN1
      dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAgICAgICAgICAgICAgICAgICAgICJ7fTogJ3t9Jywg
      e306IHt9Ii5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiUHJvdmlkZWQgZGF0
      YS1wb29sLW5hbWUiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5fYXJnX3BhcnNl
      ci5jZXBoZnNfZGF0YV9wb29sX25hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAiZG9l
      c24ndCBtYXRjaCBmcm9tIHRoZSBkYXRhLXBvb2xzJyBsaXN0IiwKICAgICAgICAgICAgICAgICAg
      ICAgICAgICAgIFtzdHIoeCkgZm9yIHggaW4gbWF0Y2hpbmdfanNvbl9vdXRbImRhdGFfcG9vbHMi
      XV0sCiAgICAgICAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICAgICAgICApCiAgICAg
      ICAgICAgICMgaWYgZGF0YV9wb29sIG5hbWUgaXMgbm90IHByb3ZpZGVkLAogICAgICAgICAgICAj
      IHRoZW4gdHJ5IHRvIGZpbmQgYSBkZWZhdWx0IGRhdGEgcG9vbCBuYW1lCiAgICAgICAgICAgIGVs
      c2U6CiAgICAgICAgICAgICAgICAjIGlmIG5vIGRhdGFfcG9vbHMgZXhpc3QsIHNpbGVudGx5IHJl
      dHVybgogICAgICAgICAgICAgICAgaWYgbGVuKG1hdGNoaW5nX2pzb25fb3V0WyJkYXRhX3Bvb2xz
      Il0pID09IDA6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgICAgICAgICBzZWxm
      Ll9hcmdfcGFyc2VyLmNlcGhmc19kYXRhX3Bvb2xfbmFtZSA9IHN0cigKICAgICAgICAgICAgICAg
      ICAgICBtYXRjaGluZ19qc29uX291dFsiZGF0YV9wb29scyJdWzBdCiAgICAgICAgICAgICAgICAp
      CiAgICAgICAgICAgICMgaWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgJ2RhdGFfcG9vbHMnIGV4
      aXN0LAogICAgICAgICAgICAjIHRoZW4gd2FybiB0aGUgdXNlciB0aGF0IHdlIGFyZSB1c2luZyB0
      aGUgc2VsZWN0ZWQgbmFtZQogICAgICAgICAgICBpZiBsZW4obWF0Y2hpbmdfanNvbl9vdXRbImRh
      dGFfcG9vbHMiXSkgPiAxOgogICAgICAgICAgICAgICAgcHJpbnQoCiAgICAgICAgICAgICAgICAg
      ICAgInt9OiB7fVxue306ICd7fSdcbiIuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgICAgICAi
      V0FSTklORzogTXVsdGlwbGUgZGF0YSBwb29scyBkZXRlY3RlZCIsCiAgICAgICAgICAgICAgICAg
      ICAgICAgIFtzdHIoeCkgZm9yIHggaW4gbWF0Y2hpbmdfanNvbl9vdXRbImRhdGFfcG9vbHMiXV0s
      CiAgICAgICAgICAgICAgICAgICAgICAgICJVc2luZyB0aGUgZGF0YS1wb29sIiwKICAgICAgICAg
      ICAgICAgICAgICAgICAgc2VsZi5fYXJnX3BhcnNlci5jZXBoZnNfZGF0YV9wb29sX25hbWUsCiAg
      ICAgICAgICAgICAgICAgICAgKQogICAgICAgICAgICAgICAgKQoKICAgIGRlZiBjcmVhdGVfY2hl
      Y2tlcktleShzZWxmKToKICAgICAgICBjbWRfanNvbiA9IHsKICAgICAgICAgICAgInByZWZpeCI6
      ICJhdXRoIGdldC1vci1jcmVhdGUiLAogICAgICAgICAgICAiZW50aXR5Ijogc2VsZi5ydW5fYXNf
      dXNlciwKICAgICAgICAgICAgImNhcHMiOiBbCiAgICAgICAgICAgICAgICAibW9uIiwKICAgICAg
      ICAgICAgICAgIHNlbGYuTUlOX1VTRVJfQ0FQX1BFUk1JU1NJT05TWyJtb24iXSwKICAgICAgICAg
      ICAgICAgICJtZ3IiLAogICAgICAgICAgICAgICAgc2VsZi5NSU5fVVNFUl9DQVBfUEVSTUlTU0lP
      TlNbIm1nciJdLAogICAgICAgICAgICAgICAgIm9zZCIsCiAgICAgICAgICAgICAgICBzZWxmLk1J
      Tl9VU0VSX0NBUF9QRVJNSVNTSU9OU1sib3NkIl0uZm9ybWF0KAogICAgICAgICAgICAgICAgICAg
      IHNlbGYuX2FyZ19wYXJzZXIucmd3X3Bvb2xfcHJlZml4CiAgICAgICAgICAgICAgICApLAogICAg
      ICAgICAgICBdLAogICAgICAgICAgICAiZm9ybWF0IjogImpzb24iLAogICAgICAgIH0KICAgICAg
      ICBpZiBzZWxmLl9hcmdfcGFyc2VyLmRyeV9ydW46CiAgICAgICAgICAgIHJldHVybiBzZWxmLmRy
      eV9ydW4oCiAgICAgICAgICAgICAgICAiY2VwaCAiCiAgICAgICAgICAgICAgICArIGNtZF9qc29u
      WyJwcmVmaXgiXQogICAgICAgICAgICAgICAgKyAiICIKICAgICAgICAgICAgICAgICsgY21kX2pz
      b25bImVudGl0eSJdCiAgICAgICAgICAgICAgICArICIgIgogICAgICAgICAgICAgICAgKyAiICIu
      am9pbihjbWRfanNvblsiY2FwcyJdKQogICAgICAgICAgICApCiAgICAgICAgcmV0X3ZhbCwganNv
      bl9vdXQsIGVycl9tc2cgPSBzZWxmLl9jb21tb25fY21kX2pzb25fZ2VuKGNtZF9qc29uKQogICAg
      ICAgICMgaWYgdGhlcmUgaXMgYW4gdW5zdWNjZXNzZnVsIGF0dGVtcHQsCiAgICAgICAgaWYgcmV0
      X3ZhbCAhPSAwIG9yIGxlbihqc29uX291dCkgPT0gMDoKICAgICAgICAgICAgcmFpc2UgRXhlY3V0
      aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICInYXV0aCBnZXQtb3ItY3JlYXRl
      IHt9JyBjb21tYW5kIGZhaWxlZFxuIi5mb3JtYXQoc2VsZi5ydW5fYXNfdXNlcikKICAgICAgICAg
      ICAgICAgICsgIkVycm9yOiB7fSIuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgIGVycl9tc2cg
      aWYgcmV0X3ZhbCAhPSAwIGVsc2Ugc2VsZi5FTVBUWV9PVVRQVVRfTElTVAogICAgICAgICAgICAg
      ICAgKQogICAgICAgICAgICApCiAgICAgICAgcmV0dXJuIHN0cihqc29uX291dFswXVsia2V5Il0p
      CgogICAgZGVmIGdldF9jZXBoX2Rhc2hib2FyZF9saW5rKHNlbGYpOgogICAgICAgIGNtZF9qc29u
      ID0geyJwcmVmaXgiOiAibWdyIHNlcnZpY2VzIiwgImZvcm1hdCI6ICJqc29uIn0KICAgICAgICBp
      ZiBzZWxmLl9hcmdfcGFyc2VyLmRyeV9ydW46CiAgICAgICAgICAgIHJldHVybiBzZWxmLmRyeV9y
      dW4oImNlcGggIiArIGNtZF9qc29uWyJwcmVmaXgiXSkKICAgICAgICByZXRfdmFsLCBqc29uX291
      dCwgXyA9IHNlbGYuX2NvbW1vbl9jbWRfanNvbl9nZW4oY21kX2pzb24pCiAgICAgICAgIyBpZiB0
      aGVyZSBpcyBhbiB1bnN1Y2Nlc3NmdWwgYXR0ZW1wdCwKICAgICAgICBpZiByZXRfdmFsICE9IDAg
      b3IgbGVuKGpzb25fb3V0KSA9PSAwOgogICAgICAgICAgICByZXR1cm4gTm9uZQogICAgICAgIGlm
      ICJkYXNoYm9hcmQiIG5vdCBpbiBqc29uX291dDoKICAgICAgICAgICAgcmV0dXJuIE5vbmUKICAg
      ICAgICByZXR1cm4ganNvbl9vdXRbImRhc2hib2FyZCJdCgogICAgZGVmIGNyZWF0ZV9yZ3dfYWRt
      aW5fb3BzX3VzZXIoc2VsZik6CiAgICAgICAgY21kID0gWwogICAgICAgICAgICAicmFkb3Nndy1h
      ZG1pbiIsCiAgICAgICAgICAgICJ1c2VyIiwKICAgICAgICAgICAgImNyZWF0ZSIsCiAgICAgICAg
      ICAgICItLXVpZCIsCiAgICAgICAgICAgIHNlbGYuRVhURVJOQUxfUkdXX0FETUlOX09QU19VU0VS
      X05BTUUsCiAgICAgICAgICAgICItLWRpc3BsYXktbmFtZSIsCiAgICAgICAgICAgICJSb29rIFJH
      VyBBZG1pbiBPcHMgdXNlciIsCiAgICAgICAgICAgICItLWNhcHMiLAogICAgICAgICAgICAiaW5m
      bz1yZWFkO2J1Y2tldHM9Kjt1c2Vycz0qO3VzYWdlPXJlYWQ7bWV0YWRhdGE9cmVhZDt6b25lPXJl
      YWQiLAogICAgICAgIF0KICAgICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLmRyeV9ydW46CiAgICAg
      ICAgICAgIHJldHVybiBzZWxmLmRyeV9ydW4oImNlcGggIiArICIgIi5qb2luKGNtZCkpCiAgICAg
      ICAgdHJ5OgogICAgICAgICAgICBvdXRwdXQgPSBzdWJwcm9jZXNzLmNoZWNrX291dHB1dChjbWQs
      IHN0ZGVycj1zdWJwcm9jZXNzLlBJUEUpCiAgICAgICAgZXhjZXB0IHN1YnByb2Nlc3MuQ2FsbGVk
      UHJvY2Vzc0Vycm9yIGFzIGV4ZWNFcnI6CiAgICAgICAgICAgICMgaWYgdGhlIHVzZXIgYWxyZWFk
      eSBleGlzdHMsIHdlIGp1c3QgcXVlcnkgaXQKICAgICAgICAgICAgaWYgZXhlY0Vyci5yZXR1cm5j
      b2RlID09IGVycm5vLkVFWElTVDoKICAgICAgICAgICAgICAgIGNtZCA9IFsKICAgICAgICAgICAg
      ICAgICAgICAicmFkb3Nndy1hZG1pbiIsCiAgICAgICAgICAgICAgICAgICAgInVzZXIiLAogICAg
      ICAgICAgICAgICAgICAgICJpbmZvIiwKICAgICAgICAgICAgICAgICAgICAiLS11aWQiLAogICAg
      ICAgICAgICAgICAgICAgIHNlbGYuRVhURVJOQUxfUkdXX0FETUlOX09QU19VU0VSX05BTUUsCiAg
      ICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICAgICAg
      b3V0cHV0ID0gc3VicHJvY2Vzcy5jaGVja19vdXRwdXQoY21kLCBzdGRlcnI9c3VicHJvY2Vzcy5Q
      SVBFKQogICAgICAgICAgICAgICAgZXhjZXB0IHN1YnByb2Nlc3MuQ2FsbGVkUHJvY2Vzc0Vycm9y
      IGFzIGV4ZWNFcnI6CiAgICAgICAgICAgICAgICAgICAgZXJyX21zZyA9ICgKICAgICAgICAgICAg
      ICAgICAgICAgICAgImZhaWxlZCB0byBleGVjdXRlIGNvbW1hbmQgJXMuIE91dHB1dDogJXMuIENv
      ZGU6ICVzLiBFcnJvcjogJXMiCiAgICAgICAgICAgICAgICAgICAgICAgICUgKGNtZCwgZXhlY0Vy
      ci5vdXRwdXQsIGV4ZWNFcnIucmV0dXJuY29kZSwgZXhlY0Vyci5zdGRlcnIpCiAgICAgICAgICAg
      ICAgICAgICAgKQogICAgICAgICAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihlcnJfbXNnKQog
      ICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgZXJyX21zZyA9ICgKICAgICAgICAgICAg
      ICAgICAgICAiZmFpbGVkIHRvIGV4ZWN1dGUgY29tbWFuZCAlcy4gT3V0cHV0OiAlcy4gQ29kZTog
      JXMuIEVycm9yOiAlcyIKICAgICAgICAgICAgICAgICAgICAlIChjbWQsIGV4ZWNFcnIub3V0cHV0
      LCBleGVjRXJyLnJldHVybmNvZGUsIGV4ZWNFcnIuc3RkZXJyKQogICAgICAgICAgICAgICAgKQog
      ICAgICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKGVycl9tc2cpCgogICAgICAgICMgc2VwYXJh
      dGVseSBhZGQgaW5mbz1yZWFkIGNhcHMsIGJlY2F1c2Ugc29tZXRpbWVzIHVzZXJzIGFscmVhZHkg
      ZXhpdGVkIGFuZCB0aGUgY2FwIGRvZXNuJ3QgdXBkYXRlCiAgICAgICAgaW5mb19jYXBfc3VwcG9y
      dGVkID0gVHJ1ZQogICAgICAgIGNtZCA9IFsKICAgICAgICAgICAgInJhZG9zZ3ctYWRtaW4iLAog
      ICAgICAgICAgICAiY2FwcyIsCiAgICAgICAgICAgICJhZGQiLAogICAgICAgICAgICAiLS11aWQi
      LAogICAgICAgICAgICBzZWxmLkVYVEVSTkFMX1JHV19BRE1JTl9PUFNfVVNFUl9OQU1FLAogICAg
      ICAgICAgICAiLS1jYXBzIiwKICAgICAgICAgICAgImluZm89cmVhZCIsCiAgICAgICAgXQogICAg
      ICAgIHRyeToKICAgICAgICAgICAgb3V0cHV0ID0gc3VicHJvY2Vzcy5jaGVja19vdXRwdXQoY21k
      LCBzdGRlcnI9c3VicHJvY2Vzcy5QSVBFKQogICAgICAgIGV4Y2VwdCBzdWJwcm9jZXNzLkNhbGxl
      ZFByb2Nlc3NFcnJvciBhcyBleGVjRXJyOgogICAgICAgICAgICAjIGlmIHRoZSBjZXBoIHZlcnNp
      b24gbm90IHN1cHBvcnRlZCBmb3IgYWRkaW5nIGBpbmZvPXJlYWRgIGNhcChyZ3dfdmFsaWRhdGlv
      bikKICAgICAgICAgICAgaWYgKAogICAgICAgICAgICAgICAgImNvdWxkIG5vdCBhZGQgY2Fwczog
      dW5hYmxlIHRvIGFkZCBjYXBzOiBpbmZvPXJlYWRcbiIKICAgICAgICAgICAgICAgIGluIGV4ZWNF
      cnIuc3RkZXJyLmRlY29kZSgidXRmLTgiKQogICAgICAgICAgICAgICAgYW5kIGV4ZWNFcnIucmV0
      dXJuY29kZSA9PSAyNDQKICAgICAgICAgICAgKToKICAgICAgICAgICAgICAgIGluZm9fY2FwX3N1
      cHBvcnRlZCA9IEZhbHNlCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBlcnJfbXNn
      ID0gKAogICAgICAgICAgICAgICAgICAgICJmYWlsZWQgdG8gZXhlY3V0ZSBjb21tYW5kICVzLiBP
      dXRwdXQ6ICVzLiBDb2RlOiAlcy4gRXJyb3I6ICVzIgogICAgICAgICAgICAgICAgICAgICUgKGNt
      ZCwgZXhlY0Vyci5vdXRwdXQsIGV4ZWNFcnIucmV0dXJuY29kZSwgZXhlY0Vyci5zdGRlcnIpCiAg
      ICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICByYWlzZSBFeGNlcHRpb24oZXJyX21zZykK
      CiAgICAgICAganNvbm91dHB1dCA9IGpzb24ubG9hZHMob3V0cHV0KQogICAgICAgIHJldHVybiAo
      CiAgICAgICAgICAgIGpzb25vdXRwdXRbImtleXMiXVswXVsiYWNjZXNzX2tleSJdLAogICAgICAg
      ICAgICBqc29ub3V0cHV0WyJrZXlzIl1bMF1bInNlY3JldF9rZXkiXSwKICAgICAgICAgICAgaW5m
      b19jYXBfc3VwcG9ydGVkLAogICAgICAgICkKCiAgICBkZWYgY29udmVydF9mcWRuX3Jnd19lbmRw
      b2ludF90b19pcChzZWxmLCBmcWRuX3Jnd19lbmRwb2ludCk6CiAgICAgICAgdHJ5OgogICAgICAg
      ICAgICBmcWRuLCBwb3J0ID0gZnFkbl9yZ3dfZW5kcG9pbnQuc3BsaXQoIjoiKQogICAgICAgIGV4
      Y2VwdCBWYWx1ZUVycm9yOgogICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0
      aW9uKAogICAgICAgICAgICAgICAgIk5vdCBhIHByb3BlciBlbmRwb2ludDoge30sIDxGUUROPjo8
      UE9SVD4sIGZvcm1hdCBpcyBleHBlY3RlZCIuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgIGZx
      ZG5fcmd3X2VuZHBvaW50CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICkKICAgICAgICBy
      Z3dfZW5kcG9pbnRfaXAgPSBzZWxmLl9jb252ZXJ0X2hvc3RuYW1lX3RvX2lwKGZxZG4pCiAgICAg
      ICAgcmd3X2VuZHBvaW50X3BvcnQgPSBwb3J0CiAgICAgICAgcmd3X2VuZHBvaW50ID0gc2VsZi5f
      am9pbl9ob3N0X3BvcnQocmd3X2VuZHBvaW50X2lwLCByZ3dfZW5kcG9pbnRfcG9ydCkKICAgICAg
      ICByZXR1cm4gcmd3X2VuZHBvaW50CgogICAgZGVmIHZhbGlkYXRlX3Bvb2woc2VsZik6CiAgICAg
      ICAgcG9vbHNfdG9fdmFsaWRhdGUgPSBbc2VsZi5fYXJnX3BhcnNlci5yYmRfZGF0YV9wb29sX25h
      bWVdCiAgICAgICAgIyBpZiByZ3dfZW5kcG9pbnQgaXMgcHJvdmlkZWQsIHZhbGlkYXRlIGl0CiAg
      ICAgICAgaWYgc2VsZi5fYXJnX3BhcnNlci5yZ3dfZW5kcG9pbnQ6CiAgICAgICAgICAgIHJnd19l
      bmRwb2ludCA9IHNlbGYuX2FyZ19wYXJzZXIucmd3X2VuZHBvaW50CiAgICAgICAgICAgIHNlbGYu
      X2ludmFsaWRfZW5kcG9pbnQocmd3X2VuZHBvaW50KQogICAgICAgICAgICBzZWxmLmVuZHBvaW50
      X2RpYWwocmd3X2VuZHBvaW50LCBjZXJ0PXNlbGYudmFsaWRhdGVfcmd3X2VuZHBvaW50X3Rsc19j
      ZXJ0KCkpCiAgICAgICAgICAgICMgb25seSB2YWxpZGF0ZSBpZiByZ3dfcG9vbF9wcmVmaXggaXMg
      cGFzc2VkIGVsc2UgaXQgd2lsbCB0YWtlIGRlZmF1bHQgdmFsdWUgYW5kIHdlIGRvbid0IGNyZWF0
      ZSB0aGVzZSBkZWZhdWx0IHBvb2xzCiAgICAgICAgICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIucmd3
      X3Bvb2xfcHJlZml4ICE9ICJkZWZhdWx0IjoKICAgICAgICAgICAgICAgIHJnd19wb29sX3RvX3Zh
      bGlkYXRlID0gWwogICAgICAgICAgICAgICAgICAgICJ7MH0ucmd3Lm1ldGEiLmZvcm1hdChzZWxm
      Ll9hcmdfcGFyc2VyLnJnd19wb29sX3ByZWZpeCksCiAgICAgICAgICAgICAgICAgICAgIi5yZ3cu
      cm9vdCIsCiAgICAgICAgICAgICAgICAgICAgInswfS5yZ3cuY29udHJvbCIuZm9ybWF0KHNlbGYu
      X2FyZ19wYXJzZXIucmd3X3Bvb2xfcHJlZml4KSwKICAgICAgICAgICAgICAgICAgICAiezB9LnJn
      dy5sb2ciLmZvcm1hdChzZWxmLl9hcmdfcGFyc2VyLnJnd19wb29sX3ByZWZpeCksCiAgICAgICAg
      ICAgICAgICBdCiAgICAgICAgICAgICAgICBwb29sc190b192YWxpZGF0ZS5leHRlbmQocmd3X3Bv
      b2xfdG9fdmFsaWRhdGUpCgogICAgICAgIGZvciBwb29sIGluIHBvb2xzX3RvX3ZhbGlkYXRlOgog
      ICAgICAgICAgICBpZiBub3Qgc2VsZi5jbHVzdGVyLnBvb2xfZXhpc3RzKHBvb2wpOgogICAgICAg
      ICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAg
      ICAgICAiVGhlIHByb3ZpZGVkIHBvb2wsICd7fScsIGRvZXMgbm90IGV4aXN0Ii5mb3JtYXQocG9v
      bCkKICAgICAgICAgICAgICAgICkKCiAgICBkZWYgdmFsaWRhdGVfcmFkb3NfbmFtZXNwYWNlKHNl
      bGYpOgogICAgICAgIHJiZF9wb29sX25hbWUgPSBzZWxmLl9hcmdfcGFyc2VyLnJiZF9kYXRhX3Bv
      b2xfbmFtZQogICAgICAgIHJhZG9zX25hbWVzcGFjZSA9IHNlbGYuX2FyZ19wYXJzZXIucmFkb3Nf
      bmFtZXNwYWNlCiAgICAgICAgaWYgcmFkb3NfbmFtZXNwYWNlID09ICIiOgogICAgICAgICAgICBy
      ZXR1cm4KICAgICAgICByYmRfaW5zdCA9IHJiZC5SQkQoKQogICAgICAgIGlvY3R4ID0gc2VsZi5j
      bHVzdGVyLm9wZW5faW9jdHgocmJkX3Bvb2xfbmFtZSkKICAgICAgICBpZiByYmRfaW5zdC5uYW1l
      c3BhY2VfZXhpc3RzKGlvY3R4LCByYWRvc19uYW1lc3BhY2UpIGlzIEZhbHNlOgogICAgICAgICAg
      ICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAgICAgKAogICAg
      ICAgICAgICAgICAgICAgICJUaGUgcHJvdmlkZWQgcmFkb3MgTmFtZXNwYWNlLCAne30nLCBpcyBu
      b3QgZm91bmQgaW4gdGhlIHBvb2wgJ3t9JyIKICAgICAgICAgICAgICAgICkuZm9ybWF0KHJhZG9z
      X25hbWVzcGFjZSwgcmJkX3Bvb2xfbmFtZSkKICAgICAgICAgICAgKQoKICAgIGRlZiB2YWxpZGF0
      ZV9zdWJ2b2x1bWVfZ3JvdXAoc2VsZik6CiAgICAgICAgY2VwaGZzX2ZpbGVzeXN0ZW1fbmFtZSA9
      IHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX2ZpbGVzeXN0ZW1fbmFtZQogICAgICAgIHN1YnZvbHVt
      ZV9ncm91cCA9IHNlbGYuX2FyZ19wYXJzZXIuc3Vidm9sdW1lX2dyb3VwCiAgICAgICAgaWYgc3Vi
      dm9sdW1lX2dyb3VwID09ICIiOgogICAgICAgICAgICByZXR1cm4KICAgICAgICBpZiBjZXBoZnNf
      ZmlsZXN5c3RlbV9uYW1lID09ICIiOgogICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJl
      RXhjZXB0aW9uKAogICAgICAgICAgICAgICAgImlmIHN1YnZvbHVtZSBncm91cCBpcyBwYXNzZWQg
      Y2VwaGZzIGZpbGVzeXN0ZW0gbmFtZSBpcyBtYW5kYXRvcnkgdG8gcGFzcyIKICAgICAgICAgICAg
      KQoKICAgICAgICBjbWQgPSBbCiAgICAgICAgICAgICJjZXBoIiwKICAgICAgICAgICAgImZzIiwK
      ICAgICAgICAgICAgInN1YnZvbHVtZWdyb3VwIiwKICAgICAgICAgICAgImdldHBhdGgiLAogICAg
      ICAgICAgICBjZXBoZnNfZmlsZXN5c3RlbV9uYW1lLAogICAgICAgICAgICBzdWJ2b2x1bWVfZ3Jv
      dXAsCiAgICAgICAgXQogICAgICAgIHRyeToKICAgICAgICAgICAgXyA9IHN1YnByb2Nlc3MuY2hl
      Y2tfb3V0cHV0KGNtZCwgc3RkZXJyPXN1YnByb2Nlc3MuUElQRSkKICAgICAgICBleGNlcHQgc3Vi
      cHJvY2Vzcy5DYWxsZWRQcm9jZXNzRXJyb3IgYXMgZXhlY0VycjoKICAgICAgICAgICAgcmFpc2Ug
      RXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAgICAgICAgICAgICJzdWJ2b2x1bWUgZ3Jv
      dXAge30gcGFzc2VkIGRvZXNuJ3QgZXhpc3QiLmZvcm1hdChzdWJ2b2x1bWVfZ3JvdXApCiAgICAg
      ICAgICAgICkKCiAgICBkZWYgZ2V0X3Jnd19mc2lkKHNlbGYpOgogICAgICAgIGFjY2Vzc19rZXkg
      PSBzZWxmLm91dF9tYXBbIlJHV19BRE1JTl9PUFNfVVNFUl9BQ0NFU1NfS0VZIl0KICAgICAgICBz
      ZWNyZXRfa2V5ID0gc2VsZi5vdXRfbWFwWyJSR1dfQURNSU5fT1BTX1VTRVJfU0VDUkVUX0tFWSJd
      CiAgICAgICAgcmd3X2VuZHBvaW50ID0gc2VsZi5fYXJnX3BhcnNlci5yZ3dfZW5kcG9pbnQKICAg
      ICAgICBjZXJ0ID0gTm9uZQogICAgICAgIHZlcmlmeSA9IE5vbmUKICAgICAgICBpZiBzZWxmLl9h
      cmdfcGFyc2VyLnJnd190bHNfY2VydF9wYXRoIGFuZCBub3Qgc2VsZi5fYXJnX3BhcnNlci5yZ3df
      c2tpcF90bHM6CiAgICAgICAgICAgIGNlcnQgPSBzZWxmLnZhbGlkYXRlX3Jnd19lbmRwb2ludF90
      bHNfY2VydCgpCiAgICAgICAgICAgIHZlcmlmeSA9IFRydWUKICAgICAgICBpZiBzZWxmLl9hcmdf
      cGFyc2VyLnJnd19za2lwX3RsczoKICAgICAgICAgICAgdmVyaWZ5ID0gRmFsc2UKICAgICAgICBi
      YXNlX3VybCA9IHNlbGYuZW5kcG9pbnRfZGlhbChyZ3dfZW5kcG9pbnQsIGNlcnQ9Y2VydCkgKyAi
      Oi8vIgogICAgICAgIGJhc2VfdXJsID0gYmFzZV91cmwgKyByZ3dfZW5kcG9pbnQgKyAiL2FkbWlu
      L2luZm8/IgogICAgICAgIHBhcmFtcyA9IHsiZm9ybWF0IjogImpzb24ifQogICAgICAgIHJlcXVl
      c3RfdXJsID0gYmFzZV91cmwgKyB1cmxsaWIucGFyc2UudXJsZW5jb2RlKHBhcmFtcykKCiAgICAg
      ICAgdHJ5OgogICAgICAgICAgICByID0gcmVxdWVzdHMuZ2V0KAogICAgICAgICAgICAgICAgcmVx
      dWVzdF91cmwsCiAgICAgICAgICAgICAgICBhdXRoPVMzQXV0aChhY2Nlc3Nfa2V5LCBzZWNyZXRf
      a2V5LCByZ3dfZW5kcG9pbnQpLAogICAgICAgICAgICAgICAgY2VydD1jZXJ0LAogICAgICAgICAg
      ICAgICAgdmVyaWZ5PXZlcmlmeSwKICAgICAgICAgICAgKQogICAgICAgIGV4Y2VwdCByZXF1ZXN0
      cy5leGNlcHRpb25zLlRpbWVvdXQ6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVF
      eGNlcHRpb24oCiAgICAgICAgICAgICAgICAiaW52YWxpZCBlbmRwb2ludDosIG5vdCBhYmxlIHRv
      IGNhbGwgYWRtaW4tb3BzIGFwaXt9Ii5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgcmd3X2Vu
      ZHBvaW50CiAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICkKICAgICAgICByMSA9IHIuanNv
      bigpCiAgICAgICAgaWYgcjEgaXMgTm9uZSBvciByMS5nZXQoImluZm8iKSBpcyBOb25lOgogICAg
      ICAgICAgICByZXR1cm4gIiIgICMgSW52YWxpZCByZ3ctZW5kcG9pbnQgZXhjZXB0aW9uIHdpbGwg
      cmV0dXJuZWQgYnkgdmFsaWRhdGVfcmd3X2VuZHBvaW50KCkKCiAgICAgICAgcmV0dXJuIHIxWyJp
      bmZvIl1bInN0b3JhZ2VfYmFja2VuZHMiXVswXVsiY2x1c3Rlcl9pZCJdCgogICAgZGVmIHZhbGlk
      YXRlX3Jnd19lbmRwb2ludChzZWxmKToKICAgICAgICAjIGlmIHRoZSAnY2x1c3RlcicgaW5zdGFu
      Y2UgaXMgYSBkdW1teSBvbmUsCiAgICAgICAgIyBkb24ndCB0cnkgdG8gcmVhY2ggb3V0IHRvIHRo
      ZSBlbmRwb2ludAogICAgICAgIGlmIGlzaW5zdGFuY2Uoc2VsZi5jbHVzdGVyLCBEdW1teVJhZG9z
      KToKICAgICAgICAgICAgcmV0dXJuCiAgICAgICAgZnNpZCA9IHNlbGYuZ2V0X2ZzaWQoKQogICAg
      ICAgIHJnd19mc2lkID0gc2VsZi5nZXRfcmd3X2ZzaWQoKQogICAgICAgIGlmIGZzaWQgIT0gcmd3
      X2ZzaWQ6CiAgICAgICAgICAgIHJhaXNlIEV4ZWN1dGlvbkZhaWx1cmVFeGNlcHRpb24oCiAgICAg
      ICAgICAgICAgICAoCiAgICAgICAgICAgICAgICAgICAgIlRoZSBwcm92aWRlZCByZ3cgRW5kcG9p
      bnQsICd7fScsIGlzIGludmFsaWQuIFdlIGFyZSB2YWxpZGF0aW5nIGJ5IGNhbGxpbmcgdGhlIGFk
      bWlub3BzIGFwaSB0aHJvdWdoIHJndy1lbmRwb2ludCBhbmQgdmFsaWRhdGluZyB0aGUgY2x1c3Rl
      cl9pZCAne30nIGlzIGVxdWFsIHRvIHRoZSBjZXBoIGNsdXN0ZXIgZnNpZCAne30nIgogICAgICAg
      ICAgICAgICAgKS5mb3JtYXQoc2VsZi5fYXJnX3BhcnNlci5yZ3dfZW5kcG9pbnQsIHJnd19mc2lk
      LCBmc2lkKQogICAgICAgICAgICApCgogICAgZGVmIF9nZW5fb3V0cHV0X21hcChzZWxmKToKICAg
      ICAgICBpZiBzZWxmLm91dF9tYXA6CiAgICAgICAgICAgIHJldHVybgogICAgICAgIHNlbGYuX2Fy
      Z19wYXJzZXIuY2x1c3Rlcl9uYW1lID0gKAogICAgICAgICAgICBzZWxmLl9hcmdfcGFyc2VyLmNs
      dXN0ZXJfbmFtZS5sb3dlcigpCiAgICAgICAgKSAgIyBhbHdheXMgY29udmVydCBjbHVzdGVyIG5h
      bWUgdG8gbG93ZXJjYXNlIGNoYXJhY3RlcnMKICAgICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLnJn
      d19lbmRwb2ludDoKICAgICAgICAgICAgc2VsZi5fYXJnX3BhcnNlci5yZ3dfZW5kcG9pbnQgPSBz
      ZWxmLmNvbnZlcnRfZnFkbl9yZ3dfZW5kcG9pbnRfdG9faXAoCiAgICAgICAgICAgICAgICBzZWxm
      Ll9hcmdfcGFyc2VyLnJnd19lbmRwb2ludAogICAgICAgICAgICApCiAgICAgICAgc2VsZi52YWxp
      ZGF0ZV9wb29sKCkKICAgICAgICBzZWxmLnZhbGlkYXRlX3JhZG9zX25hbWVzcGFjZSgpCiAgICAg
      ICAgc2VsZi52YWxpZGF0ZV9zdWJ2b2x1bWVfZ3JvdXAoKQogICAgICAgIHNlbGYuX2V4Y2x1ZGVk
      X2tleXMuYWRkKCJDTFVTVEVSX05BTUUiKQogICAgICAgIHNlbGYuZ2V0X2NlcGhmc19kYXRhX3Bv
      b2xfZGV0YWlscygpCiAgICAgICAgc2VsZi5vdXRfbWFwWyJOQU1FU1BBQ0UiXSA9IHNlbGYuX2Fy
      Z19wYXJzZXIubmFtZXNwYWNlCiAgICAgICAgc2VsZi5vdXRfbWFwWyJDTFVTVEVSX05BTUUiXSA9
      IHNlbGYuX2FyZ19wYXJzZXIuY2x1c3Rlcl9uYW1lCiAgICAgICAgc2VsZi5vdXRfbWFwWyJST09L
      X0VYVEVSTkFMX0ZTSUQiXSA9IHNlbGYuZ2V0X2ZzaWQoKQogICAgICAgIHNlbGYub3V0X21hcFsi
      Uk9PS19FWFRFUk5BTF9VU0VSTkFNRSJdID0gc2VsZi5ydW5fYXNfdXNlcgogICAgICAgIHNlbGYu
      b3V0X21hcFsiUk9PS19FWFRFUk5BTF9DRVBIX01PTl9EQVRBIl0gPSBzZWxmLmdldF9jZXBoX2V4
      dGVybmFsX21vbl9kYXRhKCkKICAgICAgICBzZWxmLm91dF9tYXBbIlJPT0tfRVhURVJOQUxfVVNF
      Ul9TRUNSRVQiXSA9IHNlbGYuY3JlYXRlX2NoZWNrZXJLZXkoKQogICAgICAgIHNlbGYub3V0X21h
      cFsiUk9PS19FWFRFUk5BTF9EQVNIQk9BUkRfTElOSyJdID0gc2VsZi5nZXRfY2VwaF9kYXNoYm9h
      cmRfbGluaygpCiAgICAgICAgKAogICAgICAgICAgICBzZWxmLm91dF9tYXBbIkNTSV9SQkRfTk9E
      RV9TRUNSRVQiXSwKICAgICAgICAgICAgc2VsZi5vdXRfbWFwWyJDU0lfUkJEX05PREVfU0VDUkVU
      X05BTUUiXSwKICAgICAgICApID0gc2VsZi5jcmVhdGVfY2VwaENTSUtleXJpbmdfdXNlcigiY2xp
      ZW50LmNzaS1yYmQtbm9kZSIpCiAgICAgICAgKAogICAgICAgICAgICBzZWxmLm91dF9tYXBbIkNT
      SV9SQkRfUFJPVklTSU9ORVJfU0VDUkVUIl0sCiAgICAgICAgICAgIHNlbGYub3V0X21hcFsiQ1NJ
      X1JCRF9QUk9WSVNJT05FUl9TRUNSRVRfTkFNRSJdLAogICAgICAgICkgPSBzZWxmLmNyZWF0ZV9j
      ZXBoQ1NJS2V5cmluZ191c2VyKCJjbGllbnQuY3NpLXJiZC1wcm92aXNpb25lciIpCiAgICAgICAg
      c2VsZi5vdXRfbWFwWyJDRVBIRlNfUE9PTF9OQU1FIl0gPSBzZWxmLl9hcmdfcGFyc2VyLmNlcGhm
      c19kYXRhX3Bvb2xfbmFtZQogICAgICAgIHNlbGYub3V0X21hcFsKICAgICAgICAgICAgIkNFUEhG
      U19NRVRBREFUQV9QT09MX05BTUUiCiAgICAgICAgXSA9IHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZz
      X21ldGFkYXRhX3Bvb2xfbmFtZQogICAgICAgIHNlbGYub3V0X21hcFsiQ0VQSEZTX0ZTX05BTUUi
      XSA9IHNlbGYuX2FyZ19wYXJzZXIuY2VwaGZzX2ZpbGVzeXN0ZW1fbmFtZQogICAgICAgIHNlbGYu
      b3V0X21hcFsKICAgICAgICAgICAgIlJFU1RSSUNURURfQVVUSF9QRVJNSVNTSU9OIgogICAgICAg
      IF0gPSBzZWxmLl9hcmdfcGFyc2VyLnJlc3RyaWN0ZWRfYXV0aF9wZXJtaXNzaW9uCiAgICAgICAg
      c2VsZi5vdXRfbWFwWyJSQURPU19OQU1FU1BBQ0UiXSA9IHNlbGYuX2FyZ19wYXJzZXIucmFkb3Nf
      bmFtZXNwYWNlCiAgICAgICAgc2VsZi5vdXRfbWFwWyJTVUJWT0xVTUVfR1JPVVAiXSA9IHNlbGYu
      X2FyZ19wYXJzZXIuc3Vidm9sdW1lX2dyb3VwCiAgICAgICAgc2VsZi5vdXRfbWFwWyJDU0lfQ0VQ
      SEZTX05PREVfU0VDUkVUIl0gPSAiIgogICAgICAgIHNlbGYub3V0X21hcFsiQ1NJX0NFUEhGU19Q
      Uk9WSVNJT05FUl9TRUNSRVQiXSA9ICIiCiAgICAgICAgIyBjcmVhdGUgQ2VwaEZTIG5vZGUgYW5k
      IHByb3Zpc2lvbmVyIGtleXJpbmcgb25seSB3aGVuIE1EUyBleGlzdHMKICAgICAgICBpZiBzZWxm
      Lm91dF9tYXBbIkNFUEhGU19GU19OQU1FIl0gYW5kIHNlbGYub3V0X21hcFsiQ0VQSEZTX1BPT0xf
      TkFNRSJdOgogICAgICAgICAgICAoCiAgICAgICAgICAgICAgICBzZWxmLm91dF9tYXBbIkNTSV9D
      RVBIRlNfTk9ERV9TRUNSRVQiXSwKICAgICAgICAgICAgICAgIHNlbGYub3V0X21hcFsiQ1NJX0NF
      UEhGU19OT0RFX1NFQ1JFVF9OQU1FIl0sCiAgICAgICAgICAgICkgPSBzZWxmLmNyZWF0ZV9jZXBo
      Q1NJS2V5cmluZ191c2VyKCJjbGllbnQuY3NpLWNlcGhmcy1ub2RlIikKICAgICAgICAgICAgKAog
      ICAgICAgICAgICAgICAgc2VsZi5vdXRfbWFwWyJDU0lfQ0VQSEZTX1BST1ZJU0lPTkVSX1NFQ1JF
      VCJdLAogICAgICAgICAgICAgICAgc2VsZi5vdXRfbWFwWyJDU0lfQ0VQSEZTX1BST1ZJU0lPTkVS
      X1NFQ1JFVF9OQU1FIl0sCiAgICAgICAgICAgICkgPSBzZWxmLmNyZWF0ZV9jZXBoQ1NJS2V5cmlu
      Z191c2VyKCJjbGllbnQuY3NpLWNlcGhmcy1wcm92aXNpb25lciIpCiAgICAgICAgc2VsZi5vdXRf
      bWFwWyJSR1dfRU5EUE9JTlQiXSA9IHNlbGYuX2FyZ19wYXJzZXIucmd3X2VuZHBvaW50CiAgICAg
      ICAgc2VsZi5vdXRfbWFwWyJSR1dfVExTX0NFUlQiXSA9ICIiCiAgICAgICAgKAogICAgICAgICAg
      ICBzZWxmLm91dF9tYXBbIk1PTklUT1JJTkdfRU5EUE9JTlQiXSwKICAgICAgICAgICAgc2VsZi5v
      dXRfbWFwWyJNT05JVE9SSU5HX0VORFBPSU5UX1BPUlQiXSwKICAgICAgICApID0gc2VsZi5nZXRf
      YWN0aXZlX2FuZF9zdGFuZGJ5X21ncnMoKQogICAgICAgIHNlbGYub3V0X21hcFsiUkJEX1BPT0xf
      TkFNRSJdID0gc2VsZi5fYXJnX3BhcnNlci5yYmRfZGF0YV9wb29sX25hbWUKICAgICAgICBzZWxm
      Lm91dF9tYXBbCiAgICAgICAgICAgICJSQkRfTUVUQURBVEFfRUNfUE9PTF9OQU1FIgogICAgICAg
      IF0gPSBzZWxmLnZhbGlkYXRlX3Jnd19tZXRhZGF0YV9lY19wb29sX25hbWUoKQogICAgICAgIHNl
      bGYub3V0X21hcFsiUkdXX1BPT0xfUFJFRklYIl0gPSBzZWxmLl9hcmdfcGFyc2VyLnJnd19wb29s
      X3ByZWZpeAogICAgICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIucmd3X2VuZHBvaW50OgogICAgICAg
      ICAgICBpZiBzZWxmLl9hcmdfcGFyc2VyLmRyeV9ydW46CiAgICAgICAgICAgICAgICBzZWxmLmNy
      ZWF0ZV9yZ3dfYWRtaW5fb3BzX3VzZXIoKQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAg
      ICAgKAogICAgICAgICAgICAgICAgICAgIHNlbGYub3V0X21hcFsiUkdXX0FETUlOX09QU19VU0VS
      X0FDQ0VTU19LRVkiXSwKICAgICAgICAgICAgICAgICAgICBzZWxmLm91dF9tYXBbIlJHV19BRE1J
      Tl9PUFNfVVNFUl9TRUNSRVRfS0VZIl0sCiAgICAgICAgICAgICAgICAgICAgaW5mb19jYXBfc3Vw
      cG9ydGVkLAogICAgICAgICAgICAgICAgKSA9IHNlbGYuY3JlYXRlX3Jnd19hZG1pbl9vcHNfdXNl
      cigpCiAgICAgICAgICAgICAgICBpZiBpbmZvX2NhcF9zdXBwb3J0ZWQ6CiAgICAgICAgICAgICAg
      ICAgICAgc2VsZi52YWxpZGF0ZV9yZ3dfZW5kcG9pbnQoKQogICAgICAgICAgICBpZiBzZWxmLl9h
      cmdfcGFyc2VyLnJnd190bHNfY2VydF9wYXRoOgogICAgICAgICAgICAgICAgc2VsZi5vdXRfbWFw
      WyJSR1dfVExTX0NFUlQiXSA9IHNlbGYudmFsaWRhdGVfcmd3X2VuZHBvaW50X3Rsc19jZXJ0KCkK
      CiAgICBkZWYgZ2VuX3NoZWxsX291dChzZWxmKToKICAgICAgICBzZWxmLl9nZW5fb3V0cHV0X21h
      cCgpCiAgICAgICAgc2hPdXRJTyA9IFN0cmluZ0lPKCkKICAgICAgICBmb3IgaywgdiBpbiBzZWxm
      Lm91dF9tYXAuaXRlbXMoKToKICAgICAgICAgICAgaWYgdiBhbmQgayBub3QgaW4gc2VsZi5fZXhj
      bHVkZWRfa2V5czoKICAgICAgICAgICAgICAgIHNoT3V0SU8ud3JpdGUoImV4cG9ydCB7fT17fXt9
      Ii5mb3JtYXQoaywgdiwgTElORVNFUCkpCiAgICAgICAgc2hPdXQgPSBzaE91dElPLmdldHZhbHVl
      KCkKICAgICAgICBzaE91dElPLmNsb3NlKCkKICAgICAgICByZXR1cm4gc2hPdXQKCiAgICBkZWYg
      Z2VuX2pzb25fb3V0KHNlbGYpOgogICAgICAgIHNlbGYuX2dlbl9vdXRwdXRfbWFwKCkKICAgICAg
      ICBpZiBzZWxmLl9hcmdfcGFyc2VyLmRyeV9ydW46CiAgICAgICAgICAgIHJldHVybiAiIgogICAg
      ICAgIGpzb25fb3V0ID0gWwogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAibmFtZSI6ICJy
      b29rLWNlcGgtbW9uLWVuZHBvaW50cyIsCiAgICAgICAgICAgICAgICAia2luZCI6ICJDb25maWdN
      YXAiLAogICAgICAgICAgICAgICAgImRhdGEiOiB7CiAgICAgICAgICAgICAgICAgICAgImRhdGEi
      OiBzZWxmLm91dF9tYXBbIlJPT0tfRVhURVJOQUxfQ0VQSF9NT05fREFUQSJdLAogICAgICAgICAg
      ICAgICAgICAgICJtYXhNb25JZCI6ICIwIiwKICAgICAgICAgICAgICAgICAgICAibWFwcGluZyI6
      ICJ7fSIsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICB9LAogICAgICAgICAgICB7CiAg
      ICAgICAgICAgICAgICAibmFtZSI6ICJyb29rLWNlcGgtbW9uIiwKICAgICAgICAgICAgICAgICJr
      aW5kIjogIlNlY3JldCIsCiAgICAgICAgICAgICAgICAiZGF0YSI6IHsKICAgICAgICAgICAgICAg
      ICAgICAiYWRtaW4tc2VjcmV0IjogImFkbWluLXNlY3JldCIsCiAgICAgICAgICAgICAgICAgICAg
      ImZzaWQiOiBzZWxmLm91dF9tYXBbIlJPT0tfRVhURVJOQUxfRlNJRCJdLAogICAgICAgICAgICAg
      ICAgICAgICJtb24tc2VjcmV0IjogIm1vbi1zZWNyZXQiLAogICAgICAgICAgICAgICAgfSwKICAg
      ICAgICAgICAgfSwKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgIm5hbWUiOiAicm9vay1j
      ZXBoLW9wZXJhdG9yLWNyZWRzIiwKICAgICAgICAgICAgICAgICJraW5kIjogIlNlY3JldCIsCiAg
      ICAgICAgICAgICAgICAiZGF0YSI6IHsKICAgICAgICAgICAgICAgICAgICAidXNlcklEIjogc2Vs
      Zi5vdXRfbWFwWyJST09LX0VYVEVSTkFMX1VTRVJOQU1FIl0sCiAgICAgICAgICAgICAgICAgICAg
      InVzZXJLZXkiOiBzZWxmLm91dF9tYXBbIlJPT0tfRVhURVJOQUxfVVNFUl9TRUNSRVQiXSwKICAg
      ICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHsKICAgICAgICAgICAg
      ICAgICJuYW1lIjogIm1vbml0b3JpbmctZW5kcG9pbnQiLAogICAgICAgICAgICAgICAgImtpbmQi
      OiAiQ2VwaENsdXN0ZXIiLAogICAgICAgICAgICAgICAgImRhdGEiOiB7CiAgICAgICAgICAgICAg
      ICAgICAgIk1vbml0b3JpbmdFbmRwb2ludCI6IHNlbGYub3V0X21hcFsiTU9OSVRPUklOR19FTkRQ
      T0lOVCJdLAogICAgICAgICAgICAgICAgICAgICJNb25pdG9yaW5nUG9ydCI6IHNlbGYub3V0X21h
      cFsiTU9OSVRPUklOR19FTkRQT0lOVF9QT1JUIl0sCiAgICAgICAgICAgICAgICB9LAogICAgICAg
      ICAgICB9LAogICAgICAgIF0KCiAgICAgICAgIyBpZiAnQ1NJX1JCRF9OT0RFX1NFQ1JFVCcgZXhp
      c3RzLCB0aGVuIG9ubHkgYWRkICdyb29rLWNzaS1yYmQtcHJvdmlzaW9uZXInIFNlY3JldAogICAg
      ICAgIGlmICgKICAgICAgICAgICAgc2VsZi5vdXRfbWFwWyJDU0lfUkJEX05PREVfU0VDUkVUIl0K
      ICAgICAgICAgICAgYW5kIHNlbGYub3V0X21hcFsiQ1NJX1JCRF9OT0RFX1NFQ1JFVF9OQU1FIl0K
      ICAgICAgICApOgogICAgICAgICAgICBqc29uX291dC5hcHBlbmQoCiAgICAgICAgICAgICAgICB7
      CiAgICAgICAgICAgICAgICAgICAgIm5hbWUiOiAicm9vay17fSIuZm9ybWF0KHNlbGYub3V0X21h
      cFsiQ1NJX1JCRF9OT0RFX1NFQ1JFVF9OQU1FIl0pLAogICAgICAgICAgICAgICAgICAgICJraW5k
      IjogIlNlY3JldCIsCiAgICAgICAgICAgICAgICAgICAgImRhdGEiOiB7CiAgICAgICAgICAgICAg
      ICAgICAgICAgICJ1c2VySUQiOiBzZWxmLm91dF9tYXBbIkNTSV9SQkRfTk9ERV9TRUNSRVRfTkFN
      RSJdLAogICAgICAgICAgICAgICAgICAgICAgICAidXNlcktleSI6IHNlbGYub3V0X21hcFsiQ1NJ
      X1JCRF9OT0RFX1NFQ1JFVCJdLAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAg
      ICB9CiAgICAgICAgICAgICkKICAgICAgICAjIGlmICdDU0lfUkJEX1BST1ZJU0lPTkVSX1NFQ1JF
      VCcgZXhpc3RzLCB0aGVuIG9ubHkgYWRkICdyb29rLWNzaS1yYmQtcHJvdmlzaW9uZXInIFNlY3Jl
      dAogICAgICAgIGlmICgKICAgICAgICAgICAgc2VsZi5vdXRfbWFwWyJDU0lfUkJEX1BST1ZJU0lP
      TkVSX1NFQ1JFVCJdCiAgICAgICAgICAgIGFuZCBzZWxmLm91dF9tYXBbIkNTSV9SQkRfUFJPVklT
      SU9ORVJfU0VDUkVUX05BTUUiXQogICAgICAgICk6CiAgICAgICAgICAgIGpzb25fb3V0LmFwcGVu
      ZCgKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAibmFtZSI6ICJyb29rLXt9
      Ii5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub3V0X21hcFsiQ1NJX1JCRF9Q
      Uk9WSVNJT05FUl9TRUNSRVRfTkFNRSJdCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAg
      ICAgICAgICAgICAia2luZCI6ICJTZWNyZXQiLAogICAgICAgICAgICAgICAgICAgICJkYXRhIjog
      ewogICAgICAgICAgICAgICAgICAgICAgICAidXNlcklEIjogc2VsZi5vdXRfbWFwWyJDU0lfUkJE
      X1BST1ZJU0lPTkVSX1NFQ1JFVF9OQU1FIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICJ1c2Vy
      S2V5Ijogc2VsZi5vdXRfbWFwWyJDU0lfUkJEX1BST1ZJU0lPTkVSX1NFQ1JFVCJdLAogICAgICAg
      ICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkKICAgICAgICAj
      IGlmICdDU0lfQ0VQSEZTX1BST1ZJU0lPTkVSX1NFQ1JFVCcgZXhpc3RzLCB0aGVuIG9ubHkgYWRk
      ICdyb29rLWNzaS1jZXBoZnMtcHJvdmlzaW9uZXInIFNlY3JldAogICAgICAgIGlmICgKICAgICAg
      ICAgICAgc2VsZi5vdXRfbWFwWyJDU0lfQ0VQSEZTX1BST1ZJU0lPTkVSX1NFQ1JFVCJdCiAgICAg
      ICAgICAgIGFuZCBzZWxmLm91dF9tYXBbIkNTSV9DRVBIRlNfUFJPVklTSU9ORVJfU0VDUkVUX05B
      TUUiXQogICAgICAgICk6CiAgICAgICAgICAgIGpzb25fb3V0LmFwcGVuZCgKICAgICAgICAgICAg
      ICAgIHsKICAgICAgICAgICAgICAgICAgICAibmFtZSI6ICJyb29rLXt9Ii5mb3JtYXQoCiAgICAg
      ICAgICAgICAgICAgICAgICAgIHNlbGYub3V0X21hcFsiQ1NJX0NFUEhGU19QUk9WSVNJT05FUl9T
      RUNSRVRfTkFNRSJdCiAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAi
      a2luZCI6ICJTZWNyZXQiLAogICAgICAgICAgICAgICAgICAgICJkYXRhIjogewogICAgICAgICAg
      ICAgICAgICAgICAgICAiYWRtaW5JRCI6IHNlbGYub3V0X21hcFsiQ1NJX0NFUEhGU19QUk9WSVNJ
      T05FUl9TRUNSRVRfTkFNRSJdLAogICAgICAgICAgICAgICAgICAgICAgICAiYWRtaW5LZXkiOiBz
      ZWxmLm91dF9tYXBbIkNTSV9DRVBIRlNfUFJPVklTSU9ORVJfU0VDUkVUIl0sCiAgICAgICAgICAg
      ICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKQogICAgICAgICMgaWYg
      J0NTSV9DRVBIRlNfTk9ERV9TRUNSRVQnIGV4aXN0cywgdGhlbiBvbmx5IGFkZCAncm9vay1jc2kt
      Y2VwaGZzLW5vZGUnIFNlY3JldAogICAgICAgIGlmICgKICAgICAgICAgICAgc2VsZi5vdXRfbWFw
      WyJDU0lfQ0VQSEZTX05PREVfU0VDUkVUIl0KICAgICAgICAgICAgYW5kIHNlbGYub3V0X21hcFsi
      Q1NJX0NFUEhGU19OT0RFX1NFQ1JFVF9OQU1FIl0KICAgICAgICApOgogICAgICAgICAgICBqc29u
      X291dC5hcHBlbmQoCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgIm5hbWUi
      OiAicm9vay17fSIuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm91dF9tYXBb
      IkNTSV9DRVBIRlNfTk9ERV9TRUNSRVRfTkFNRSJdCiAgICAgICAgICAgICAgICAgICAgKSwKICAg
      ICAgICAgICAgICAgICAgICAia2luZCI6ICJTZWNyZXQiLAogICAgICAgICAgICAgICAgICAgICJk
      YXRhIjogewogICAgICAgICAgICAgICAgICAgICAgICAiYWRtaW5JRCI6IHNlbGYub3V0X21hcFsi
      Q1NJX0NFUEhGU19OT0RFX1NFQ1JFVF9OQU1FIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICJh
      ZG1pbktleSI6IHNlbGYub3V0X21hcFsiQ1NJX0NFUEhGU19OT0RFX1NFQ1JFVCJdLAogICAgICAg
      ICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkKICAgICAgICAj
      IGlmICdST09LX0VYVEVSTkFMX0RBU0hCT0FSRF9MSU5LJyBleGlzdHMsIHRoZW4gb25seSBhZGQg
      J3Jvb2stY2VwaC1kYXNoYm9hcmQtbGluaycgU2VjcmV0CiAgICAgICAgaWYgc2VsZi5vdXRfbWFw
      WyJST09LX0VYVEVSTkFMX0RBU0hCT0FSRF9MSU5LIl06CiAgICAgICAgICAgIGpzb25fb3V0LmFw
      cGVuZCgKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAibmFtZSI6ICJyb29r
      LWNlcGgtZGFzaGJvYXJkLWxpbmsiLAogICAgICAgICAgICAgICAgICAgICJraW5kIjogIlNlY3Jl
      dCIsCiAgICAgICAgICAgICAgICAgICAgImRhdGEiOiB7CiAgICAgICAgICAgICAgICAgICAgICAg
      ICJ1c2VySUQiOiAiY2VwaC1kYXNoYm9hcmQtbGluayIsCiAgICAgICAgICAgICAgICAgICAgICAg
      ICJ1c2VyS2V5Ijogc2VsZi5vdXRfbWFwWyJST09LX0VYVEVSTkFMX0RBU0hCT0FSRF9MSU5LIl0s
      CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKQog
      ICAgICAgIGlmIHNlbGYub3V0X21hcFsiUkJEX01FVEFEQVRBX0VDX1BPT0xfTkFNRSJdOgogICAg
      ICAgICAgICBqc29uX291dC5hcHBlbmQoCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAg
      ICAgICAgIm5hbWUiOiAiY2VwaC1yYmQiLAogICAgICAgICAgICAgICAgICAgICJraW5kIjogIlN0
      b3JhZ2VDbGFzcyIsCiAgICAgICAgICAgICAgICAgICAgImRhdGEiOiB7CiAgICAgICAgICAgICAg
      ICAgICAgICAgICJkYXRhUG9vbCI6IHNlbGYub3V0X21hcFsiUkJEX01FVEFEQVRBX0VDX1BPT0xf
      TkFNRSJdLAogICAgICAgICAgICAgICAgICAgICAgICAicG9vbCI6IHNlbGYub3V0X21hcFsiUkJE
      X1BPT0xfTkFNRSJdLAogICAgICAgICAgICAgICAgICAgICAgICAiY3NpLnN0b3JhZ2UuazhzLmlv
      L3Byb3Zpc2lvbmVyLXNlY3JldC1uYW1lIjogInJvb2ste30iLmZvcm1hdCgKICAgICAgICAgICAg
      ICAgICAgICAgICAgICAgIHNlbGYub3V0X21hcFsiQ1NJX1JCRF9QUk9WSVNJT05FUl9TRUNSRVRf
      TkFNRSJdCiAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAgICAgICAgICAg
      ICJjc2kuc3RvcmFnZS5rOHMuaW8vY29udHJvbGxlci1leHBhbmQtc2VjcmV0LW5hbWUiOiAicm9v
      ay17fSIuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vdXRfbWFwWyJD
      U0lfUkJEX1BST1ZJU0lPTkVSX1NFQ1JFVF9OQU1FIl0KICAgICAgICAgICAgICAgICAgICAgICAg
      KSwKICAgICAgICAgICAgICAgICAgICAgICAgImNzaS5zdG9yYWdlLms4cy5pby9ub2RlLXN0YWdl
      LXNlY3JldC1uYW1lIjogInJvb2ste30iLmZvcm1hdCgKICAgICAgICAgICAgICAgICAgICAgICAg
      ICAgIHNlbGYub3V0X21hcFsiQ1NJX1JCRF9OT0RFX1NFQ1JFVF9OQU1FIl0KICAgICAgICAgICAg
      ICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgfQog
      ICAgICAgICAgICApCiAgICAgICAgZWxzZToKICAgICAgICAgICAganNvbl9vdXQuYXBwZW5kKAog
      ICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICJuYW1lIjogImNlcGgtcmJkIiwK
      ICAgICAgICAgICAgICAgICAgICAia2luZCI6ICJTdG9yYWdlQ2xhc3MiLAogICAgICAgICAgICAg
      ICAgICAgICJkYXRhIjogewogICAgICAgICAgICAgICAgICAgICAgICAicG9vbCI6IHNlbGYub3V0
      X21hcFsiUkJEX1BPT0xfTkFNRSJdLAogICAgICAgICAgICAgICAgICAgICAgICAiY3NpLnN0b3Jh
      Z2UuazhzLmlvL3Byb3Zpc2lvbmVyLXNlY3JldC1uYW1lIjogInJvb2ste30iLmZvcm1hdCgKICAg
      ICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYub3V0X21hcFsiQ1NJX1JCRF9QUk9WSVNJT05F
      Ul9TRUNSRVRfTkFNRSJdCiAgICAgICAgICAgICAgICAgICAgICAgICksCiAgICAgICAgICAgICAg
      ICAgICAgICAgICJjc2kuc3RvcmFnZS5rOHMuaW8vY29udHJvbGxlci1leHBhbmQtc2VjcmV0LW5h
      bWUiOiAicm9vay17fSIuZm9ybWF0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5v
      dXRfbWFwWyJDU0lfUkJEX1BST1ZJU0lPTkVSX1NFQ1JFVF9OQU1FIl0KICAgICAgICAgICAgICAg
      ICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICAgICAgImNzaS5zdG9yYWdlLms4cy5pby9u
      b2RlLXN0YWdlLXNlY3JldC1uYW1lIjogInJvb2ste30iLmZvcm1hdCgKICAgICAgICAgICAgICAg
      ICAgICAgICAgICAgIHNlbGYub3V0X21hcFsiQ1NJX1JCRF9OT0RFX1NFQ1JFVF9OQU1FIl0KICAg
      ICAgICAgICAgICAgICAgICAgICAgKSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAg
      ICAgICAgfQogICAgICAgICAgICApCiAgICAgICAgIyBpZiAnQ0VQSEZTX0ZTX05BTUUnIGV4aXN0
      cywgdGhlbiBvbmx5IGFkZCAnY2VwaGZzJyBTdG9yYWdlQ2xhc3MKICAgICAgICBpZiBzZWxmLm91
      dF9tYXBbIkNFUEhGU19GU19OQU1FIl06CiAgICAgICAgICAgIGpzb25fb3V0LmFwcGVuZCgKICAg
      ICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAibmFtZSI6ICJjZXBoZnMiLAogICAg
      ICAgICAgICAgICAgICAgICJraW5kIjogIlN0b3JhZ2VDbGFzcyIsCiAgICAgICAgICAgICAgICAg
      ICAgImRhdGEiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICJmc05hbWUiOiBzZWxmLm91dF9t
      YXBbIkNFUEhGU19GU19OQU1FIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICJwb29sIjogc2Vs
      Zi5vdXRfbWFwWyJDRVBIRlNfUE9PTF9OQU1FIl0sCiAgICAgICAgICAgICAgICAgICAgICAgICJj
      c2kuc3RvcmFnZS5rOHMuaW8vcHJvdmlzaW9uZXItc2VjcmV0LW5hbWUiOiAicm9vay17fSIuZm9y
      bWF0KAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vdXRfbWFwWyJDU0lfQ0VQSEZT
      X1BST1ZJU0lPTkVSX1NFQ1JFVF9OQU1FIl0KICAgICAgICAgICAgICAgICAgICAgICAgKSwKICAg
      ICAgICAgICAgICAgICAgICAgICAgImNzaS5zdG9yYWdlLms4cy5pby9jb250cm9sbGVyLWV4cGFu
      ZC1zZWNyZXQtbmFtZSI6ICJyb29rLXt9Ii5mb3JtYXQoCiAgICAgICAgICAgICAgICAgICAgICAg
      ICAgICBzZWxmLm91dF9tYXBbIkNTSV9DRVBIRlNfUFJPVklTSU9ORVJfU0VDUkVUX05BTUUiXQog
      ICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAgICAgICAgICAiY3NpLnN0
      b3JhZ2UuazhzLmlvL25vZGUtc3RhZ2Utc2VjcmV0LW5hbWUiOiAicm9vay17fSIuZm9ybWF0KAog
      ICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5vdXRfbWFwWyJDU0lfQ0VQSEZTX05PREVf
      U0VDUkVUX05BTUUiXQogICAgICAgICAgICAgICAgICAgICAgICApLAogICAgICAgICAgICAgICAg
      ICAgIH0sCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkKICAgICAgICAjIGlmICdSR1df
      RU5EUE9JTlQnIGV4aXN0cywgdGhlbiBvbmx5IGFkZCAnY2VwaC1yZ3cnIFN0b3JhZ2VDbGFzcwog
      ICAgICAgIGlmIHNlbGYub3V0X21hcFsiUkdXX0VORFBPSU5UIl06CiAgICAgICAgICAgIGpzb25f
      b3V0LmFwcGVuZCgKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAibmFtZSI6
      ICJjZXBoLXJndyIsCiAgICAgICAgICAgICAgICAgICAgImtpbmQiOiAiU3RvcmFnZUNsYXNzIiwK
      ICAgICAgICAgICAgICAgICAgICAiZGF0YSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgImVu
      ZHBvaW50Ijogc2VsZi5vdXRfbWFwWyJSR1dfRU5EUE9JTlQiXSwKICAgICAgICAgICAgICAgICAg
      ICAgICAgInBvb2xQcmVmaXgiOiBzZWxmLm91dF9tYXBbIlJHV19QT09MX1BSRUZJWCJdLAogICAg
      ICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkKICAgICAg
      ICAgICAganNvbl9vdXQuYXBwZW5kKAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAg
      ICAgICJuYW1lIjogInJndy1hZG1pbi1vcHMtdXNlciIsCiAgICAgICAgICAgICAgICAgICAgImtp
      bmQiOiAiU2VjcmV0IiwKICAgICAgICAgICAgICAgICAgICAiZGF0YSI6IHsKICAgICAgICAgICAg
      ICAgICAgICAgICAgImFjY2Vzc0tleSI6IHNlbGYub3V0X21hcFsiUkdXX0FETUlOX09QU19VU0VS
      X0FDQ0VTU19LRVkiXSwKICAgICAgICAgICAgICAgICAgICAgICAgInNlY3JldEtleSI6IHNlbGYu
      b3V0X21hcFsiUkdXX0FETUlOX09QU19VU0VSX1NFQ1JFVF9LRVkiXSwKICAgICAgICAgICAgICAg
      ICAgICB9LAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICApCiAgICAgICAgIyBpZiAnUkdX
      X1RMU19DRVJUJyBleGlzdHMsIHRoZW4gb25seSBhZGQgdGhlICJjZXBoLXJndy10bHMtY2VydCIg
      c2VjcmV0CiAgICAgICAgaWYgc2VsZi5vdXRfbWFwWyJSR1dfVExTX0NFUlQiXToKICAgICAgICAg
      ICAganNvbl9vdXQuYXBwZW5kKAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAg
      ICJuYW1lIjogImNlcGgtcmd3LXRscy1jZXJ0IiwKICAgICAgICAgICAgICAgICAgICAia2luZCI6
      ICJTZWNyZXQiLAogICAgICAgICAgICAgICAgICAgICJkYXRhIjogewogICAgICAgICAgICAgICAg
      ICAgICAgICAiY2VydCI6IHNlbGYub3V0X21hcFsiUkdXX1RMU19DRVJUIl0sCiAgICAgICAgICAg
      ICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgKQoKICAgICAgICByZXR1
      cm4ganNvbi5kdW1wcyhqc29uX291dCkgKyBMSU5FU0VQCgogICAgZGVmIHVwZ3JhZGVfdXNlcnNf
      cGVybWlzc2lvbnMoc2VsZik6CiAgICAgICAgdXNlcnMgPSBbCiAgICAgICAgICAgICJjbGllbnQu
      Y3NpLWNlcGhmcy1ub2RlIiwKICAgICAgICAgICAgImNsaWVudC5jc2ktY2VwaGZzLXByb3Zpc2lv
      bmVyIiwKICAgICAgICAgICAgImNsaWVudC5jc2ktcmJkLW5vZGUiLAogICAgICAgICAgICAiY2xp
      ZW50LmNzaS1yYmQtcHJvdmlzaW9uZXIiLAogICAgICAgIF0KICAgICAgICBpZiBzZWxmLnJ1bl9h
      c191c2VyICE9ICIiIGFuZCBzZWxmLnJ1bl9hc191c2VyIG5vdCBpbiB1c2VyczoKICAgICAgICAg
      ICAgdXNlcnMuYXBwZW5kKHNlbGYucnVuX2FzX3VzZXIpCiAgICAgICAgZm9yIHVzZXIgaW4gdXNl
      cnM6CiAgICAgICAgICAgIHNlbGYudXBncmFkZV91c2VyX3Blcm1pc3Npb25zKHVzZXIpCgogICAg
      ZGVmIHVwZ3JhZGVfdXNlcl9wZXJtaXNzaW9ucyhzZWxmLCB1c2VyKToKICAgICAgICAjIGNoZWNr
      IHdoZXRoZXIgdGhlIGdpdmVuIHVzZXIgZXhpc3RzIG9yIG5vdAogICAgICAgIGNtZF9qc29uID0g
      eyJwcmVmaXgiOiAiYXV0aCBnZXQiLCAiZW50aXR5IjogInt9Ii5mb3JtYXQodXNlciksICJmb3Jt
      YXQiOiAianNvbiJ9CiAgICAgICAgcmV0X3ZhbCwganNvbl9vdXQsIGVycl9tc2cgPSBzZWxmLl9j
      b21tb25fY21kX2pzb25fZ2VuKGNtZF9qc29uKQogICAgICAgIGlmIHJldF92YWwgIT0gMCBvciBs
      ZW4oanNvbl9vdXQpID09IDA6CiAgICAgICAgICAgIHByaW50KCJ1c2VyIHt9IG5vdCBmb3VuZCBm
      b3IgdXBncmFkaW5nLiIuZm9ybWF0KHVzZXIpKQogICAgICAgICAgICByZXR1cm4KICAgICAgICBl
      eGlzdGluZ19jYXBzID0ganNvbl9vdXRbMF1bImNhcHMiXQogICAgICAgIG5ld19jYXAsIF8gPSBz
      ZWxmLmdldF9jYXBzX2FuZF9lbnRpdHkodXNlcikKICAgICAgICBjYXBfa2V5cyA9IFsibW9uIiwg
      Im1nciIsICJvc2QiLCAibWRzIl0KICAgICAgICBjYXBzID0gW10KICAgICAgICBmb3IgZWFjaENh
      cCBpbiBjYXBfa2V5czoKICAgICAgICAgICAgY3VyX2NhcF92YWx1ZXMgPSBleGlzdGluZ19jYXBz
      LmdldChlYWNoQ2FwLCAiIikKICAgICAgICAgICAgbmV3X2NhcF92YWx1ZXMgPSBuZXdfY2FwLmdl
      dChlYWNoQ2FwLCAiIikKICAgICAgICAgICAgY3VyX2NhcF9wZXJtX2xpc3QgPSBbCiAgICAgICAg
      ICAgICAgICB4LnN0cmlwKCkgZm9yIHggaW4gY3VyX2NhcF92YWx1ZXMuc3BsaXQoIiwiKSBpZiB4
      LnN0cmlwKCkKICAgICAgICAgICAgXQogICAgICAgICAgICBuZXdfY2FwX3Blcm1fbGlzdCA9IFsK
      ICAgICAgICAgICAgICAgIHguc3RyaXAoKSBmb3IgeCBpbiBuZXdfY2FwX3ZhbHVlcy5zcGxpdCgi
      LCIpIGlmIHguc3RyaXAoKQogICAgICAgICAgICBdCiAgICAgICAgICAgICMgYXBwZW5kIG5ld19j
      YXBfbGlzdCB0byBjdXJfY2FwX2xpc3QgdG8gbWFpbnRhaW4gdGhlIG9yZGVyIG9mIGNhcHMKICAg
      ICAgICAgICAgY3VyX2NhcF9wZXJtX2xpc3QuZXh0ZW5kKG5ld19jYXBfcGVybV9saXN0KQogICAg
      ICAgICAgICAjIGVsaW1pbmF0ZSBkdXBsaWNhdGVzIHdpdGhvdXQgdXNpbmcgJ3NldCcKICAgICAg
      ICAgICAgIyBzZXQgcmUtb3JkZXJzIGl0ZW1zIGluIHRoZSBsaXN0IGFuZCB3ZSBoYXZlIHRvIGtl
      ZXAgdGhlIG9yZGVyCiAgICAgICAgICAgIG5ld19jYXBfbGlzdCA9IFtdCiAgICAgICAgICAgIFtu
      ZXdfY2FwX2xpc3QuYXBwZW5kKHgpIGZvciB4IGluIGN1cl9jYXBfcGVybV9saXN0IGlmIHggbm90
      IGluIG5ld19jYXBfbGlzdF0KICAgICAgICAgICAgZXhpc3RpbmdfY2Fwc1tlYWNoQ2FwXSA9ICIs
      ICIuam9pbihuZXdfY2FwX2xpc3QpCiAgICAgICAgICAgIGlmIGV4aXN0aW5nX2NhcHNbZWFjaENh
      cF06CiAgICAgICAgICAgICAgICBjYXBzLmFwcGVuZChlYWNoQ2FwKQogICAgICAgICAgICAgICAg
      Y2Fwcy5hcHBlbmQoZXhpc3RpbmdfY2Fwc1tlYWNoQ2FwXSkKICAgICAgICBjbWRfanNvbiA9IHsK
      ICAgICAgICAgICAgInByZWZpeCI6ICJhdXRoIGNhcHMiLAogICAgICAgICAgICAiZW50aXR5Ijog
      dXNlciwKICAgICAgICAgICAgImNhcHMiOiBjYXBzLAogICAgICAgICAgICAiZm9ybWF0IjogImpz
      b24iLAogICAgICAgIH0KICAgICAgICByZXRfdmFsLCBqc29uX291dCwgZXJyX21zZyA9IHNlbGYu
      X2NvbW1vbl9jbWRfanNvbl9nZW4oY21kX2pzb24pCiAgICAgICAgaWYgcmV0X3ZhbCAhPSAwOgog
      ICAgICAgICAgICByYWlzZSBFeGVjdXRpb25GYWlsdXJlRXhjZXB0aW9uKAogICAgICAgICAgICAg
      ICAgIidhdXRoIGNhcHMge30nIGNvbW1hbmQgZmFpbGVkLlxuIi5mb3JtYXQodXNlcikKICAgICAg
      ICAgICAgICAgICsgIkVycm9yOiB7fSIuZm9ybWF0KGVycl9tc2cpCiAgICAgICAgICAgICkKICAg
      ICAgICBwcmludCgiVXBkYXRlZCB1c2VyLCB7fSwgc3VjY2Vzc2Z1bGx5LiIuZm9ybWF0KHVzZXIp
      KQoKICAgIGRlZiBtYWluKHNlbGYpOgogICAgICAgIGdlbmVyYXRlZF9vdXRwdXQgPSAiIgogICAg
      ICAgIGlmIHNlbGYuX2FyZ19wYXJzZXIudXBncmFkZToKICAgICAgICAgICAgc2VsZi51cGdyYWRl
      X3VzZXJzX3Blcm1pc3Npb25zKCkKICAgICAgICBlbGlmIHNlbGYuX2FyZ19wYXJzZXIuZm9ybWF0
      ID09ICJqc29uIjoKICAgICAgICAgICAgZ2VuZXJhdGVkX291dHB1dCA9IHNlbGYuZ2VuX2pzb25f
      b3V0KCkKICAgICAgICBlbGlmIHNlbGYuX2FyZ19wYXJzZXIuZm9ybWF0ID09ICJiYXNoIjoKICAg
      ICAgICAgICAgZ2VuZXJhdGVkX291dHB1dCA9IHNlbGYuZ2VuX3NoZWxsX291dCgpCiAgICAgICAg
      ZWxzZToKICAgICAgICAgICAgcmFpc2UgRXhlY3V0aW9uRmFpbHVyZUV4Y2VwdGlvbigKICAgICAg
      ICAgICAgICAgICJVbnN1cHBvcnRlZCBmb3JtYXQ6IHt9Ii5mb3JtYXQoc2VsZi5fYXJnX3BhcnNl
      ci5mb3JtYXQpCiAgICAgICAgICAgICkKICAgICAgICBwcmludCgie30iLmZvcm1hdChnZW5lcmF0
      ZWRfb3V0cHV0KSkKICAgICAgICBpZiBzZWxmLm91dHB1dF9maWxlIGFuZCBnZW5lcmF0ZWRfb3V0
      cHV0OgogICAgICAgICAgICBmT3V0ID0gb3BlbihzZWxmLm91dHB1dF9maWxlLCBtb2RlPSJ3Iiwg
      ZW5jb2Rpbmc9IlVURi04IikKICAgICAgICAgICAgZk91dC53cml0ZShnZW5lcmF0ZWRfb3V0cHV0
      KQogICAgICAgICAgICBmT3V0LmNsb3NlKCkKCgojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
      IyMjIyMjIyMjIyMjIyMjIyMjIyMKIyMjIyMjIyMjIyMjIyMjIyMjIyMjIE1BSU4gIyMjIyMjIyMj
      IyMjIyMjIyMjIyMjCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMj
      IyMjIwppZiBfX25hbWVfXyA9PSAiX19tYWluX18iOgogICAgcmpPYmogPSBSYWRvc0pTT04oKQog
      ICAgdHJ5OgogICAgICAgIHJqT2JqLm1haW4oKQogICAgZXhjZXB0IEV4ZWN1dGlvbkZhaWx1cmVF
      eGNlcHRpb24gYXMgZXJyOgogICAgICAgIHByaW50KCJFeGVjdXRpb24gRmFpbGVkOiB7fSIuZm9y
      bWF0KGVycikpCiAgICAgICAgcmFpc2UgZXJyCiAgICBleGNlcHQgS2V5RXJyb3IgYXMga0VycjoK
      ICAgICAgICBwcmludCgiS2V5RXJyb3I6ICVzIiwga0VycikKICAgIGV4Y2VwdCBPU0Vycm9yIGFz
      IG9zRXJyOgogICAgICAgIHByaW50KCJFcnJvciB3aGlsZSB0cnlpbmcgdG8gb3V0cHV0IHRoZSBk
      YXRhOiB7fSIuZm9ybWF0KG9zRXJyKSkKICAgIGZpbmFsbHk6CiAgICAgICAgcmpPYmouc2h1dGRv
      d24oKQo=
    external.features.ocs.openshift.io/supported-platforms: '["BareMetal", "None",
      "VSphere", "OpenStack", "oVirt"]'
    external.features.ocs.openshift.io/validation: '{"secrets":["rook-ceph-operator-creds",
      "rook-csi-rbd-node", "rook-csi-rbd-provisioner"], "configMaps": ["rook-ceph-mon-endpoints",
      "rook-ceph-mon"], "storageClasses": ["ceph-rbd"], "cephClusters": ["monitoring-endpoint"]}'
    features.ocs.openshift.io/disabled: '["ss-list", "install-wizard", "block-pool",
      "mcg-resource", "odf-dashboard", "common", "storage-provider", "storage-provisioner",
      "dashboard-resources", "csv-actions", "inventory-item", "alert-actions"]'
    features.ocs.openshift.io/enabled: '["kms", "arbiter", "flexible-scaling", "multus",
      "pool-management", "namespace-store", "mcg-standalone", "taint-nodes", "vault-sa-kms",
      "hpcs-kms"]'
    olm.skipRange: '>=0.0.1 <4.12.0'
    operatorframework.io/initialization-resource: "\n    {\n        \"apiVersion\":
      \"ocs.openshift.io/v1\",\n        \"kind\": \"StorageCluster\",\n        \"metadata\":
      {\n            \"name\": \"example-storagecluster\",\n            \"namespace\":
      \"openshift-storage\"\n        },\n        \"spec\": {\n            \"manageNodes\":
      false,\n            \"monPVCTemplate\": {\n                \"spec\": {\n                    \"accessModes\":
      [\n                        \"ReadWriteOnce\"\n                    ],\n                    \"resources\":
      {\n                        \"requests\": {\n                            \"storage\":
      \"10Gi\"\n                        }\n                    },\n                    \"storageClassName\":
      \"gp2-csi\"\n                }\n            },\n            \"storageDeviceSets\":
      [\n                {\n                    \"count\": 3,\n                    \"dataPVCTemplate\":
      {\n                        \"spec\": {\n                            \"accessModes\":
      [\n                                \"ReadWriteOnce\"\n                            ],\n
      \                           \"resources\": {\n                                \"requests\":
      {\n                                    \"storage\": \"1Ti\"\n                                }\n
      \                           },\n                            \"storageClassName\":
      \"gp2-csi\",\n                            \"volumeMode\": \"Block\"\n                        }\n
      \                   },\n                    \"name\": \"example-deviceset\",\n
      \                   \"placement\": {},\n                    \"portable\": true,\n
      \                   \"resources\": {}\n                }\n            ]\n        }\n
      \   }\n\t"
    operatorframework.io/suggested-namespace: openshift-storage
    operators.operatorframework.io/builder: operator-sdk-v1.19.0+git
    operators.operatorframework.io/internal-objects: '["ocsinitializations.ocs.openshift.io","storageclassclaims.ocs.openshift.io","storageconsumers.ocs.openshift.io","cephclusters.ceph.rook.io","cephobjectstores.ceph.rook.io","cephobjectstoreusers.ceph.rook.io","cephnfses.ceph.rook.io","cephclients.ceph.rook.io","cephfilesystems.ceph.rook.io","cephfilesystemmirrors.ceph.rook.io","cephrbdmirrors.ceph.rook.io","cephobjectrealms.ceph.rook.io","cephobjectzonegroups.ceph.rook.io","cephobjectzones.ceph.rook.io","cephbucketnotifications.ceph.rook.io","cephbuckettopics.ceph.rook.io","cephfilesystemsubvolumegroups.ceph.rook.io","cephblockpoolradosnamespaces.ceph.rook.io"]'
    operators.operatorframework.io/operator-type: non-standalone
    operators.operatorframework.io/project_layout: go.kubebuilder.io/v2
    repository: https://github.com/red-hat-storage/ocs-operator
    support: IBM
  labels:
    operatorframework.io/arch.amd64: supported
    operatorframework.io/arch.ppc64le: supported
    operatorframework.io/arch.s390x: supported
  name: ocs-operator.v4.12.0
  namespace: placeholder
spec:
  apiservicedefinitions: {}
  cleanup:
    enabled: false
  customresourcedefinitions:
    owned:
    - description: OCSInitialization represents the initial data to be created when
        the operator is installed.
      displayName: OCS Initialization
      kind: OCSInitialization
      name: ocsinitializations.ocs.openshift.io
      version: v1
    - description: StorageClassClaim is the Schema for the storageclassclaims API
      displayName: Storage Class Claim
      kind: StorageClassClaim
      name: storageclassclaims.ocs.openshift.io
      version: v1alpha1
    - description: StorageCluster represents a cluster including Ceph Cluster, NooBaa
        and all the storage and compute resources required.
      displayName: Storage Cluster
      kind: StorageCluster
      name: storageclusters.ocs.openshift.io
      resources:
      - kind: CephCluster
        name: cephclusters.ceph.rook.io
        version: v1
      - kind: NooBaa
        name: noobaas.noobaa.io
        version: v1alpha1
      version: v1
    - description: StorageConsumer is the Schema for the storageconsumers API
      displayName: Storage Consumer
      kind: StorageConsumer
      name: storageconsumers.ocs.openshift.io
      version: v1alpha1
    - description: Represents a Ceph cluster.
      displayName: Ceph Cluster
      kind: CephCluster
      name: cephclusters.ceph.rook.io
      version: v1
    - description: Represents a Ceph Block Pool.
      displayName: Block Pools
      kind: CephBlockPool
      name: cephblockpools.ceph.rook.io
      version: v1
    - description: Represents a Ceph Object Store.
      displayName: Ceph Object Store
      kind: CephObjectStore
      name: cephobjectstores.ceph.rook.io
      specDescriptors:
      - description: Coding Chunks
        displayName: Coding Chunks
        path: dataPool.erasureCoded.codingChunks
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:dataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: Data Chunks
        displayName: Data Chunks
        path: dataPool.erasureCoded.dataChunks
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:dataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: failureDomain
        displayName: failureDomain
        path: dataPool.failureDomain
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:dataPool
        - urn:alm:descriptor:com.tectonic.ui:text
      - description: Size
        displayName: Size
        path: dataPool.replicated.size
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:dataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: Annotations
        displayName: Annotations
        path: gateway.annotations
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:io.kubernetes:annotations
      - description: Instances
        displayName: Instances
        path: gateway.instances
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: Resources
        displayName: Resources
        path: gateway.resources
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:com.tectonic.ui:resourceRequirements
      - description: placement
        displayName: placement
        path: gateway.placement
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:io.kubernetes:placement
      - description: securePort
        displayName: securePort
        path: gateway.securePort
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:io.kubernetes:securePort
      - description: sslCertificateRef
        displayName: sslCertificateRef
        path: gateway.sslCertificateRef
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:io.kubernetes:sslCertificateRef
      - description: Type
        displayName: Type
        path: gateway.type
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:gateway
        - urn:alm:descriptor:com.tectonic.ui:text
      - description: Coding Chunks
        displayName: Coding Chunks
        path: metadataPool.erasureCoded.codingChunks
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:metadataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: Data Chunks
        displayName: Data Chunks
        path: metadataPool.erasureCoded.dataChunks
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:metadataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      - description: failureDomain
        displayName: failureDomain
        path: metadataPool.failureDomain
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:metadataPool
        - urn:alm:descriptor:com.tectonic.ui:text
      - description: Size
        displayName: Size
        path: metadataPool.replicated.size
        x-descriptors:
        - urn:alm:descriptor:com.tectonic.ui:fieldGroup:metadataPool
        - urn:alm:descriptor:com.tectonic.ui:number
      version: v1
    - description: Represents a Ceph Object Store User.
      displayName: Ceph Object Store User
      kind: CephObjectStoreUser
      name: cephobjectstoreusers.ceph.rook.io
      version: v1
    - description: Represents a cluster of Ceph NFS ganesha gateways.
      displayName: Ceph NFS
      kind: CephNFS
      name: cephnfses.ceph.rook.io
      version: v1
    - description: Represents a Ceph User.
      displayName: Ceph Client
      kind: CephClient
      name: cephclients.ceph.rook.io
      version: v1
    - description: Represents a Ceph Filesystem.
      displayName: Ceph Filesystem
      kind: CephFilesystem
      name: cephfilesystems.ceph.rook.io
      version: v1
    - description: Represents a Ceph Filesystem Mirror.
      displayName: Ceph Filesystem Mirror
      kind: CephFilesystemMirror
      name: cephfilesystemmirrors.ceph.rook.io
      version: v1
    - description: Represents a Ceph RBD Mirror.
      displayName: Ceph RBD Mirror
      kind: CephRBDMirror
      name: cephrbdmirrors.ceph.rook.io
      version: v1
    - description: Represents a Ceph Object Store Realm.
      displayName: Ceph Object Store Realm
      kind: CephObjectRealm
      name: cephobjectrealms.ceph.rook.io
      version: v1
    - description: Represents a Ceph Object Store Zone Group.
      displayName: Ceph Object Store Zone Group
      kind: CephObjectZoneGroup
      name: cephobjectzonegroups.ceph.rook.io
      version: v1
    - description: Represents a Ceph Object Store Zone.
      displayName: Ceph Object Store Zone
      kind: CephObjectZone
      name: cephobjectzones.ceph.rook.io
      version: v1
    - description: Represents a Ceph Bucket Notification.
      displayName: Ceph Bucket Notification
      kind: CephBucketNotification
      name: cephbucketnotifications.ceph.rook.io
      version: v1
    - description: Represents a Ceph Bucket Topic.
      displayName: Ceph Bucket Topic
      kind: CephBucketTopic
      name: cephbuckettopics.ceph.rook.io
      version: v1
    - description: Represents a Ceph Filesystem SubVolumeGroup.
      displayName: Ceph Filesystem SubVolumeGroup
      kind: CephFilesystemSubVolumeGroup
      name: cephfilesystemsubvolumegroups.ceph.rook.io
      version: v1
    - description: Represents a Ceph BlockPool Rados Namespace.
      displayName: Ceph BlockPool Rados Namespace
      kind: CephBlockPoolRadosNamespace
      name: cephblockpoolradosnamespaces.ceph.rook.io
      version: v1
  description: |
    **The Container Storage** deploys three operators.

    ###  Container Storage operator

    The Container Storage operator is the primary operator for the Container Storage. It serves to facilitate the other operators in the Container Storage by performing administrative tasks outside their scope as well as watching and configuring their CustomResources.

    ### Rook

    [Rook][1] deploys and manages Ceph on OpenShift, which provides block and file storage.

    # Core Capabilities

    * **Self-managing service:** No matter which supported storage technologies you choose, the Container Storage ensures that resources can be deployed and managed automatically.

    * **Hyper-scale or hyper-converged:** With the Container Storage you can either build dedicated storage clusters or hyper-converged clusters where your apps run alongside storage.

    * **File, Block, and Object provided by the Container Storage:** the Container Storage integrates Ceph with multiple storage presentations including object storage (compatible with S3), block storage, and POSIX-compliant shared file system.

    * **Your data, protected:** the Container Storage efficiently distributes and replicates your data across your cluster to minimize the risk of data loss. With snapshots, cloning, and versioning, no more losing sleep over your data.

    * **Elastic storage in your datacenter:** Scale is now possible in your datacenter. Get started with a few terabytes, and easily scale up.

    * **Simplified data management:** Easily create hybrid and multi-cloud data storage for your workloads, using a single namespace.

    [1]: https://rook.io
  displayName: Container Storage
  icon:
  - base64data: PHN2ZyBpZD0iU3BlY3RydW1GdXNpb24iIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHZpZXdCb3g9IjAgMCAzMiAzMiI+PGRlZnM+PGxpbmVhckdyYWRpZW50IGlkPSI5ZjVmbzEweDdiIiB4MT0iNS45MjUiIHkxPSIxNi41NDkiIHgyPSIyNC4xNjUiIHkyPSI2LjAxOCIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZiIgc3RvcC1vcGFjaXR5PSIwIi8+PHN0b3Agb2Zmc2V0PSIuNDUiIHN0b3AtY29sb3I9IiNmZmYiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0ic2F1bmxlajA2YSIgeDE9IjIwLjQ5MyIgeTE9IjI4IiB4Mj0iMjAuNDkzIiB5Mj0iNyIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIG9mZnNldD0iLjU1IiBzdG9wLWNvbG9yPSIjZmZmIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjZmZmIiBzdG9wLW9wYWNpdHk9IjAiLz48L2xpbmVhckdyYWRpZW50PjxsaW5lYXJHcmFkaWVudCBpZD0iZ284Mms5Mm4zYyIgeDE9IjMuNDE5IiB5MT0iMTQuMDA3IiB4Mj0iMjEuNjA1IiB5Mj0iMjQuNTA3IiB4bGluazpocmVmPSIjc2F1bmxlajA2YSIvPjxsaW5lYXJHcmFkaWVudCBpZD0iam01MDRta2c0ZSIgeDE9Ii0yOTQ2IiB5MT0iLTQ5ODYiIHgyPSItMjkxNCIgeTI9Ii01MDE4IiBncmFkaWVudFRyYW5zZm9ybT0ibWF0cml4KDEgMCAwIC0xIDI5NDYgLTQ5ODYpIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHN0b3Agb2Zmc2V0PSIuMSIgc3RvcC1jb2xvcj0iIzhhM2ZmYyIvPjxzdG9wIG9mZnNldD0iLjkiIHN0b3AtY29sb3I9IiNlZTUzOTYiLz48L2xpbmVhckdyYWRpZW50PjxtYXNrIGlkPSI5bHhiamJ0dTZkIiB4PSIwIiB5PSIwIiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIG1hc2tVbml0cz0idXNlclNwYWNlT25Vc2UiPjxwYXRoIGQ9Ik0yNCAxNmgtMlY2LjU4bC02LTMuNDI3LTEzLjM1NiA3LjcxMy0xLTEuNzMyIDEzLjg1Ni04YTEgMSAwIDAgMSAxIDBsNyA0QTEgMSAwIDAgMSAyNCA2eiIgc3R5bGU9ImZpbGw6dXJsKCM5ZjVmbzEweDdiKSIvPjxwYXRoIGQ9Ik0yMSAyOGEuOTkyLjk5MiAwIDAgMS0uNS0uMTM0bC04LjUxMy00LjkxNSAxLTEuNzMyTDIxIDI1Ljg0N2w2LTMuNDI3VjdoMnYxNmExIDEgMCAwIDEtLjUuODY4bC03IDRBMSAxIDAgMCAxIDIxIDI4eiIgc3R5bGU9ImZpbGw6dXJsKCNzYXVubGVqMDZhKSIvPjxwYXRoIGQ9Im0xNy4zNTYgMzEuODY2LTEzLjg1Ni04QTEgMSAwIDAgMSAzIDIzdi04YTEgMSAwIDAgMSAuNS0uODY2bDguNTY3LTQuOTQ2IDEgMS43MzJMNSAxNS41Nzd2Ni44NDZsMTMuMzU2IDcuNzExeiIgc3R5bGU9ImZpbGw6dXJsKCNnbzgyazkybjNjKSIvPjwvbWFzaz48L2RlZnM+PGcgc3R5bGU9Im1hc2s6dXJsKCM5bHhiamJ0dTZkKSI+PHBhdGggdHJhbnNmb3JtPSJyb3RhdGUoLTkwIDE2IDE2KSIgc3R5bGU9ImZpbGw6dXJsKCNqbTUwNG1rZzRlKSIgZD0iTTAgMGgzMnYzMkgweiIvPjwvZz48cGF0aCBkPSJNMTYgMjAuNDY0YTEgMSAwIDAgMS0uNS0uMTM0bC0zLTEuNzMyYTEgMSAwIDAgMS0uNS0uODY2di0zLjQ2NGExIDEgMCAwIDEgLjUtLjg2NmwzLTEuNzMyYTEgMSAwIDAgMSAxIDBsMyAxLjczMmExIDEgMCAwIDEgLjUuODY2djMuNDY0YTEgMSAwIDAgMS0uNS44NjZsLTMgMS43MzJhMSAxIDAgMCAxLS41LjEzNHptLTItMy4zMDkgMiAxLjE1NCAyLTEuMTU0di0yLjMxbC0yLTEuMTU0LTIgMS4xNTR6IiBzdHlsZT0iZmlsbDojMDAxZDZjIi8+PC9zdmc+
    mediatype: image/svg+xml
  install:
    spec:
      clusterPermissions:
      - rules:
        - apiGroups:
          - apiextensions.k8s.io
          resources:
          - customresourcedefinitions
          verbs:
          - create
          - get
          - list
          - update
          - watch
        - apiGroups:
          - apps
          resources:
          - daemonsets
          - deployments
          - replicasets
          - statefulsets
          verbs:
          - '*'
        - apiGroups:
          - batch
          resources:
          - cronjobs
          - jobs
          verbs:
          - create
          - delete
          - get
          - list
          - update
          - watch
        - apiGroups:
          - ceph.rook.io
          resources:
          - cephblockpools
          verbs:
          - create
          - delete
          - get
          - list
          - update
          - watch
        - apiGroups:
          - ceph.rook.io
          resources:
          - cephblockpools
          - cephclusters
          - cephfilesystems
          - cephnfses
          - cephobjectstores
          - cephobjectstoreusers
          - cephrbdmirrors
          verbs:
          - '*'
        - apiGroups:
          - ceph.rook.io
          resources:
          - cephclients
          verbs:
          - create
          - delete
          - get
          - list
          - update
          - watch
        - apiGroups:
          - ceph.rook.io
          resources:
          - cephfilesystemsubvolumegroups
          verbs:
          - create
          - delete
          - get
          - list
          - update
          - watch
        - apiGroups:
          - cluster.open-cluster-management.io
          resources:
          - clusterclaims
          verbs:
          - create
          - delete
          - get
          - list
          - update
          - watch
        - apiGroups:
          - config.openshift.io
          resources:
          - clusterversions
          - networks
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - config.openshift.io
          resources:
          - infrastructures
          - networks
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - console.openshift.io
          resources:
          - consolequickstarts
          verbs:
          - '*'
        - apiGroups:
          - coordination.k8s.io
          resources:
          - leases
          verbs:
          - create
          - get
          - list
          - update
        - apiGroups:
          - ""
          resources:
          - configmaps
          - endpoints
          - events
          - nodes
          - persistentvolumeclaims
          - pods
          - secrets
          - services
          verbs:
          - '*'
        - apiGroups:
          - ""
          resources:
          - namespaces
          verbs:
          - get
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - monitoring.coreos.com
          resources:
          - prometheusrules
          - servicemonitors
          verbs:
          - create
          - get
          - list
          - update
          - watch
        - apiGroups:
          - noobaa.io
          resources:
          - noobaas
          verbs:
          - '*'
        - apiGroups:
          - ocs.openshift.io
          resources:
          - '*'
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - ocs.openshift.io
          resources:
          - storageclassclaims
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - ocs.openshift.io
          resources:
          - storageclassclaims/status
          verbs:
          - get
          - patch
          - update
        - apiGroups:
          - ocs.openshift.io
          resources:
          - storageclusters
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ocs.openshift.io
          resources:
          - storageconsumers
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - ocs.openshift.io
          resources:
          - storageconsumers/status
          verbs:
          - get
          - patch
          - update
        - apiGroups:
          - operators.coreos.com
          resources:
          - clusterserviceversions
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - operators.coreos.com
          resources:
          - operatorconditions
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - quota.openshift.io
          resources:
          - clusterresourcequotas
          verbs:
          - '*'
        - apiGroups:
          - route.openshift.io
          resources:
          - routes
          verbs:
          - '*'
        - apiGroups:
          - security.openshift.io
          resources:
          - securitycontextconstraints
          verbs:
          - create
          - get
          - update
        - apiGroups:
          - security.openshift.io
          resourceNames:
          - privileged
          resources:
          - securitycontextconstraints
          verbs:
          - create
          - get
          - update
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotclasses
          verbs:
          - create
          - delete
          - get
          - list
          - watch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotclasses
          - volumesnapshots
          verbs:
          - '*'
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - '*'
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - template.openshift.io
          resources:
          - templates
          verbs:
          - '*'
        serviceAccountName: ocs-operator
      - rules:
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
        serviceAccountName: rook-csi-nfs-plugin-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
          - create
          - delete
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims
          verbs:
          - get
          - list
          - watch
          - patch
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - events
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - patch
        - apiGroups:
          - storage.k8s.io
          resources:
          - csinodes
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - coordination.k8s.io
          resources:
          - leases
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - patch
        - apiGroups:
          - ""
          resources:
          - secrets
          verbs:
          - get
        serviceAccountName: rook-csi-nfs-provisioner-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
        serviceAccountName: rook-csi-cephfs-plugin-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - secrets
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
          - create
          - delete
          - patch
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims
          verbs:
          - get
          - list
          - watch
          - patch
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - events
          verbs:
          - list
          - watch
          - create
          - update
          - patch
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments
          verbs:
          - get
          - list
          - watch
          - patch
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments/status
          verbs:
          - patch
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims/status
          verbs:
          - patch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshots
          verbs:
          - get
          - list
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotcontents
          verbs:
          - get
          - list
          - watch
          - patch
          - update
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotcontents/status
          verbs:
          - update
          - patch
        serviceAccountName: rook-csi-cephfs-provisioner-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - secrets
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
        - apiGroups:
          - ""
          resources:
          - serviceaccounts
          verbs:
          - get
        - apiGroups:
          - ""
          resources:
          - serviceaccounts/token
          verbs:
          - create
        serviceAccountName: rook-csi-rbd-plugin-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - secrets
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
          - create
          - delete
          - patch
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - events
          verbs:
          - list
          - watch
          - create
          - update
          - patch
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments
          verbs:
          - get
          - list
          - watch
          - patch
        - apiGroups:
          - storage.k8s.io
          resources:
          - volumeattachments/status
          verbs:
          - patch
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - storage.k8s.io
          resources:
          - csinodes
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims/status
          verbs:
          - patch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshots
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotcontents
          verbs:
          - get
          - list
          - watch
          - patch
          - update
        - apiGroups:
          - snapshot.storage.k8s.io
          resources:
          - volumesnapshotcontents/status
          verbs:
          - update
          - patch
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
        - apiGroups:
          - replication.storage.openshift.io
          resources:
          - volumereplications
          - volumereplicationclasses
          verbs:
          - create
          - delete
          - get
          - list
          - patch
          - update
          - watch
        - apiGroups:
          - replication.storage.openshift.io
          resources:
          - volumereplications/finalizers
          verbs:
          - update
        - apiGroups:
          - replication.storage.openshift.io
          resources:
          - volumereplications/status
          verbs:
          - get
          - patch
          - update
        - apiGroups:
          - replication.storage.openshift.io
          resources:
          - volumereplicationclasses/status
          verbs:
          - get
        - apiGroups:
          - ""
          resources:
          - serviceaccounts
          verbs:
          - get
        - apiGroups:
          - ""
          resources:
          - serviceaccounts/token
          verbs:
          - create
        serviceAccountName: rook-csi-rbd-provisioner-sa
      - rules:
        - apiGroups:
          - ""
          - apps
          - extensions
          resources:
          - secrets
          - pods
          - pods/log
          - services
          - configmaps
          - deployments
          - daemonsets
          verbs:
          - get
          - list
          - watch
          - patch
          - create
          - update
          - delete
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - nodes
          - nodes/proxy
          - services
          - secrets
          - configmaps
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - events
          - persistentvolumes
          - persistentvolumeclaims
          - endpoints
          verbs:
          - get
          - list
          - watch
          - patch
          - create
          - update
          - delete
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - batch
          resources:
          - jobs
          - cronjobs
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - ceph.rook.io
          resources:
          - cephclients
          - cephclusters
          - cephblockpools
          - cephfilesystems
          - cephnfses
          - cephobjectstores
          - cephobjectstoreusers
          - cephobjectrealms
          - cephobjectzonegroups
          - cephobjectzones
          - cephbuckettopics
          - cephbucketnotifications
          - cephrbdmirrors
          - cephfilesystemmirrors
          - cephfilesystemsubvolumegroups
          - cephblockpoolradosnamespaces
          verbs:
          - get
          - list
          - watch
          - update
        - apiGroups:
          - ceph.rook.io
          resources:
          - cephclients/status
          - cephclusters/status
          - cephblockpools/status
          - cephfilesystems/status
          - cephnfses/status
          - cephobjectstores/status
          - cephobjectstoreusers/status
          - cephobjectrealms/status
          - cephobjectzonegroups/status
          - cephobjectzones/status
          - cephbuckettopics/status
          - cephbucketnotifications/status
          - cephrbdmirrors/status
          - cephfilesystemmirrors/status
          - cephfilesystemsubvolumegroups/status
          - cephblockpoolradosnamespaces/status
          verbs:
          - update
        - apiGroups:
          - ceph.rook.io
          resources:
          - cephclients/finalizers
          - cephclusters/finalizers
          - cephblockpools/finalizers
          - cephfilesystems/finalizers
          - cephnfses/finalizers
          - cephobjectstores/finalizers
          - cephobjectstoreusers/finalizers
          - cephobjectrealms/finalizers
          - cephobjectzonegroups/finalizers
          - cephobjectzones/finalizers
          - cephbuckettopics/finalizers
          - cephbucketnotifications/finalizers
          - cephrbdmirrors/finalizers
          - cephfilesystemmirrors/finalizers
          - cephfilesystemsubvolumegroups/finalizers
          - cephblockpoolradosnamespaces/finalizers
          verbs:
          - update
        - apiGroups:
          - policy
          - apps
          - extensions
          resources:
          - poddisruptionbudgets
          - deployments
          - replicasets
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
          - deletecollection
        - apiGroups:
          - healthchecking.openshift.io
          resources:
          - machinedisruptionbudgets
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - machine.openshift.io
          resources:
          - machines
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - storage.k8s.io
          resources:
          - csidrivers
          verbs:
          - create
          - delete
          - get
          - update
        - apiGroups:
          - k8s.cni.cncf.io
          resources:
          - network-attachment-definitions
          verbs:
          - get
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - ""
          resources:
          - configmaps
          - nodes
          - nodes/proxy
          - persistentvolumes
          verbs:
          - get
          - list
          - watch
        - apiGroups:
          - ""
          resources:
          - events
          verbs:
          - create
          - patch
          - list
          - get
          - watch
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
          - list
          - watch
        serviceAccountName: rook-ceph-mgr
      - rules:
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
          - watch
        serviceAccountName: rook-ceph-mgr
      - rules:
        - apiGroups:
          - ""
          resources:
          - secrets
          - configmaps
          verbs:
          - get
          - create
          - update
          - delete
        - apiGroups:
          - storage.k8s.io
          resources:
          - storageclasses
          verbs:
          - get
        - apiGroups:
          - objectbucket.io
          resources:
          - objectbucketclaims
          verbs:
          - list
          - watch
          - get
          - update
        - apiGroups:
          - objectbucket.io
          resources:
          - objectbuckets
          verbs:
          - list
          - watch
          - get
          - create
          - update
          - delete
        - apiGroups:
          - objectbucket.io
          resources:
          - objectbucketclaims/status
          - objectbuckets/status
          verbs:
          - update
        - apiGroups:
          - objectbucket.io
          resources:
          - objectbucketclaims/finalizers
          - objectbuckets/finalizers
          verbs:
          - update
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - ""
          resources:
          - nodes
          verbs:
          - get
          - list
        serviceAccountName: rook-ceph-osd
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - pods/log
          verbs:
          - get
          - list
        - apiGroups:
          - ""
          resources:
          - pods/exec
          verbs:
          - create
        - apiGroups:
          - admissionregistration.k8s.io
          resources:
          - validatingwebhookconfigurations
          verbs:
          - create
          - get
          - delete
          - update
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - security.openshift.io
          resourceNames:
          - privileged
          resources:
          - securitycontextconstraints
          verbs:
          - use
        serviceAccountName: rook-ceph-system
      - rules:
        - apiGroups:
          - monitoring.coreos.com
          resources:
          - '*'
          verbs:
          - '*'
        serviceAccountName: ocs-metrics-exporter
      deployments:
      - name: ocs-operator
        spec:
          replicas: 1
          selector:
            matchLabels:
              name: ocs-operator
          strategy:
            type: Recreate
          template:
            metadata:
              labels:
                name: ocs-operator
            spec:
              containers:
              - args:
                - --enable-leader-election
                - --health-probe-bind-address=:8081
                command:
                - ocs-operator
                env:
                - name: WATCH_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.annotations['olm.targetNamespaces']
                - name: ROOK_CEPH_IMAGE
                  value: rook/ceph:v1.10.0
                - name: CEPH_IMAGE
                  value: quay.io/ceph/ceph:v17
                - name: NOOBAA_CORE_IMAGE
                  value: noobaa/noobaa-core:master-20220916
                - name: NOOBAA_DB_IMAGE
                  value: centos/postgresql-12-centos7
                - name: PROVIDER_API_SERVER_IMAGE
                  value: quay.io/ocs-dev/ocs-operator:latest
                - name: OPERATOR_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                image: quay.io/ocs-dev/ocs-operator:latest
                imagePullPolicy: Always
                name: ocs-operator
                readinessProbe:
                  httpGet:
                    path: /readyz
                    port: 8081
                  initialDelaySeconds: 5
                  periodSeconds: 10
                resources: {}
                securityContext:
                  allowPrivilegeEscalation: false
                  capabilities:
                    drop:
                    - all
              securityContext:
                runAsNonRoot: true
              serviceAccountName: ocs-operator
              terminationGracePeriodSeconds: 10
              tolerations:
              - effect: NoSchedule
                key: node.ocs.openshift.io/storage
                operator: Equal
                value: "true"
      - name: rook-ceph-operator
        spec:
          replicas: 1
          selector:
            matchLabels:
              app: rook-ceph-operator
          strategy:
            type: Recreate
          template:
            metadata:
              labels:
                app: rook-ceph-operator
            spec:
              containers:
              - args:
                - ceph
                - operator
                env:
                - name: ROOK_CURRENT_NAMESPACE_ONLY
                  value: "true"
                - name: ROOK_ALLOW_MULTIPLE_FILESYSTEMS
                  value: "false"
                - name: ROOK_LOG_LEVEL
                  value: INFO
                - name: ROOK_CEPH_STATUS_CHECK_INTERVAL
                  value: 60s
                - name: ROOK_MON_HEALTHCHECK_INTERVAL
                  value: 45s
                - name: ROOK_MON_OUT_TIMEOUT
                  value: 600s
                - name: ROOK_DISCOVER_DEVICES_INTERVAL
                  value: 60m
                - name: ROOK_HOSTPATH_REQUIRES_PRIVILEGED
                  value: "true"
                - name: ROOK_ENABLE_SELINUX_RELABELING
                  value: "true"
                - name: ROOK_ENABLE_FSGROUP
                  value: "true"
                - name: ROOK_ENABLE_FLEX_DRIVER
                  value: "false"
                - name: ROOK_ENABLE_DISCOVERY_DAEMON
                  value: "false"
                - name: ROOK_ENABLE_MACHINE_DISRUPTION_BUDGET
                  value: "false"
                - name: ROOK_DISABLE_DEVICE_HOTPLUG
                  value: "true"
                - name: ROOK_CSI_ALLOW_UNSUPPORTED_VERSION
                  value: "true"
                - name: ROOK_DISABLE_ADMISSION_CONTROLLER
                  value: "true"
                - name: ROOK_CSIADDONS_IMAGE
                  value: quay.io/csiaddons/k8s-sidecar:v0.5.0
                - name: CSI_ENABLE_METADATA
                  value: "false"
                - name: CSI_CLUSTER_NAME
                  valueFrom:
                    configMapKeyRef:
                      key: CSI_CLUSTER_NAME
                      name: ocs-operator-config
                - name: CSI_PROVISIONER_TOLERATIONS
                  value: |2-

                    - key: node.ocs.openshift.io/storage
                      operator: Equal
                      value: "true"
                      effect: NoSchedule
                - name: CSI_PLUGIN_TOLERATIONS
                  value: |2-

                    - key: node.ocs.openshift.io/storage
                      operator: Equal
                      value: "true"
                      effect: NoSchedule
                - name: CSI_LOG_LEVEL
                  value: "5"
                - name: CSI_SIDECAR_LOG_LEVEL
                  value: "1"
                - name: CSI_ENABLE_CSIADDONS
                  value: "true"
                - name: NODE_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: spec.nodeName
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
                - name: POD_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.namespace
                - name: ROOK_OBC_WATCH_OPERATOR_NAMESPACE
                  value: "true"
                image: rook/ceph:v1.10.0
                name: rook-ceph-operator
                ports:
                - containerPort: 9443
                  name: https-webhook
                  protocol: TCP
                resources: {}
                securityContext:
                  runAsGroup: 2016
                  runAsNonRoot: true
                  runAsUser: 2016
                volumeMounts:
                - mountPath: /var/lib/rook
                  name: rook-config
                - mountPath: /etc/ceph
                  name: default-config-dir
                - mountPath: /etc/webhook
                  name: webhook-cert
              serviceAccountName: rook-ceph-system
              tolerations:
              - effect: NoSchedule
                key: node.ocs.openshift.io/storage
                operator: Equal
                value: "true"
              volumes:
              - emptyDir: {}
                name: rook-config
              - emptyDir: {}
                name: default-config-dir
              - emptyDir: {}
                name: webhook-cert
      - name: ocs-metrics-exporter
        spec:
          replicas: 1
          selector:
            matchLabels:
              app.kubernetes.io/component: ocs-metrics-exporter
              app.kubernetes.io/name: ocs-metrics-exporter
          strategy: {}
          template:
            metadata:
              labels:
                app.kubernetes.io/component: ocs-metrics-exporter
                app.kubernetes.io/name: ocs-metrics-exporter
                app.kubernetes.io/version: 0.0.1
            spec:
              containers:
              - args:
                - --namespaces=openshift-storage
                command:
                - /usr/local/bin/metrics-exporter
                image: quay.io/ocs-dev/ocs-metrics-exporter:latest
                name: ocs-metrics-exporter
                ports:
                - containerPort: 8080
                - containerPort: 8081
                resources: {}
                securityContext:
                  privileged: false
                  runAsNonRoot: true
                volumeMounts:
                - mountPath: /etc/ceph
                  name: ceph-config
              serviceAccountName: ocs-metrics-exporter
              tolerations:
              - effect: NoSchedule
                key: node.ocs.openshift.io/storage
                operator: Equal
                value: "true"
              volumes:
              - configMap:
                  name: ocs-metrics-exporter-ceph-conf
                name: ceph-config
      permissions:
      - rules:
        - apiGroups:
          - coordination.k8s.io
          resources:
          - leases
          verbs:
          - get
          - watch
          - list
          - delete
          - update
          - create
        serviceAccountName: rook-csi-cephfs-provisioner-sa
      - rules:
        - apiGroups:
          - csiaddons.openshift.io
          resources:
          - csiaddonsnodes
          verbs:
          - create
        serviceAccountName: rook-csi-rbd-plugin-sa
      - rules:
        - apiGroups:
          - coordination.k8s.io
          resources:
          - leases
          verbs:
          - get
          - watch
          - list
          - delete
          - update
          - create
        - apiGroups:
          - csiaddons.openshift.io
          resources:
          - csiaddonsnodes
          verbs:
          - create
        serviceAccountName: rook-csi-rbd-provisioner-sa
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - configmaps
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        serviceAccountName: rook-ceph-cmd-reporter
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - services
          - pods/log
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - batch
          resources:
          - jobs
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - ceph.rook.io
          resources:
          - cephclients
          - cephclusters
          - cephblockpools
          - cephfilesystems
          - cephnfses
          - cephobjectstores
          - cephobjectstoreusers
          - cephobjectrealms
          - cephobjectzonegroups
          - cephobjectzones
          - cephbuckettopics
          - cephbucketnotifications
          - cephrbdmirrors
          - cephfilesystemmirrors
          - cephfilesystemsubvolumegroups
          - cephblockpoolradosnamespaces
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - apps
          resources:
          - deployments/scale
          - deployments
          verbs:
          - patch
          - delete
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims
          verbs:
          - delete
        serviceAccountName: rook-ceph-mgr
      - rules:
        - apiGroups:
          - ""
          resources:
          - secrets
          verbs:
          - get
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - ceph.rook.io
          resources:
          - cephclusters
          - cephclusters/finalizers
          verbs:
          - get
          - list
          - create
          - update
          - delete
        serviceAccountName: rook-ceph-osd
      - rules:
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
        - apiGroups:
          - apps
          resources:
          - deployments
          verbs:
          - get
          - delete
        - apiGroups:
          - batch
          resources:
          - jobs
          verbs:
          - get
          - list
          - delete
        - apiGroups:
          - ""
          resources:
          - persistentvolumeclaims
          verbs:
          - get
          - update
          - delete
          - list
        serviceAccountName: rook-ceph-purge-osd
      - rules:
        - apiGroups:
          - ""
          resources:
          - configmaps
          verbs:
          - get
        serviceAccountName: rook-ceph-rgw
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - configmaps
          - services
          verbs:
          - get
          - list
          - watch
          - patch
          - create
          - update
          - delete
        - apiGroups:
          - apps
          - extensions
          resources:
          - daemonsets
          - statefulsets
          - deployments
          verbs:
          - get
          - list
          - watch
          - create
          - update
          - delete
        - apiGroups:
          - batch
          resources:
          - cronjobs
          verbs:
          - delete
        - apiGroups:
          - cert-manager.io
          resources:
          - certificates
          - issuers
          verbs:
          - get
          - create
          - delete
        serviceAccountName: rook-ceph-system
    strategy: deployment
  installModes:
  - supported: true
    type: OwnNamespace
  - supported: true
    type: SingleNamespace
  - supported: false
    type: MultiNamespace
  - supported: false
    type: AllNamespaces
  keywords:
  - IBM
  - storage
  - rook
  - ceph
  - block storage
  - shared filesystem
  - object storage
  links:
  - name: Source Code
    url: https://github.com/red-hat-storage/ocs-operator
  maintainers:
  - email: mysphelp@us.ibm.com
    name: IBM Support
  maturity: alpha
  minKubeVersion: 1.16.0
  provider:
    name: IBM
  relatedImages:
  - image: rook/ceph:v1.10.0
    name: rook-container
  - image: quay.io/ceph/ceph:v17
    name: ceph-container
  - image: quay.io/csiaddons/k8s-sidecar:v0.5.0
    name: csiaddons-sidecar
  - image: quay.io/ocs-dev/ocs-must-gather:latest
    name: ocs-must-gather
  - image: quay.io/ocs-dev/ocs-metrics-exporter:latest
    name: ocs-metrics-exporter
  version: 4.12.0
